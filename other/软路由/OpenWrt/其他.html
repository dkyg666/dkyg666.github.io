<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.40" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script defer data-domain="" src="https://site.izyt.cc/js/script.js"></script><script async src="https://site.izyt.cc/js/embed.host.js"></script><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/home.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="mask-icon" href="/home.png" color="#46bd87"><title>å…¶ä»– | à¦é»˜é£</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-xYRuiXUw.css" as="style"><link rel="stylesheet" href="/assets/style-xYRuiXUw.css">
    <link rel="modulepreload" href="/assets/app-DYmmM49d.js"><link rel="modulepreload" href="/assets/å…¶ä»–.html-BmDngS0h.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><!----><!----><span class="vp-site-name">à¦é»˜é£</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link vp-link" href="/" aria-label="ä¸»é¡µ"><span class="font-icon icon fa-solid fa-galaxy fa-spin fa-spin-reverse" style=""></span>ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link active vp-link" href="/other/" aria-label="å…¶ä»–"><span class="font-icon icon fa-solid fa-solar-system" style=""></span>å…¶ä»–<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link vp-link" href="/collect/" aria-label="æ”¶è—"><span class="font-icon icon fa-solid fa-stars" style=""></span>æ”¶è—<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="è§†é¢‘"><!--[--><span class="font-icon icon fa-solid fa-circle-video" style=""></span>è§†é¢‘<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="vp-link" href="https://www.bilibili.com/" rel="noopener noreferrer" target="_blank" aria-label="å“”å“©å“”å“©"><span class="font-icon icon fa-brands fa-bilibili" style=""></span>å“”å“©å“”å“©<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="vp-dropdown-item"><a class="vp-link" href="https://www.youtube.com/" rel="noopener noreferrer" target="_blank" aria-label="YouTube"><span class="font-icon icon fa-brands fa-youtube" style=""></span>YouTube<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/dkyg666/dkyg666.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">æœç´¢</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/" aria-label="ä¸»é¡µ"><span class="font-icon icon fa-solid fa-galaxy fa-spin fa-spin-reverse" style=""></span>ä¸»é¡µ<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ–‡æ¡£</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">å…¶ä»–</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">è½¯è·¯ç”±</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">3x-ui</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">OpenWrt</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/other/%E8%BD%AF%E8%B7%AF%E7%94%B1/OpenWrt/Dockerfile.html" aria-label="Dockerfile"><!---->Dockerfile<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/other/%E8%BD%AF%E8%B7%AF%E7%94%B1/OpenWrt/Linux%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85Docker.html" aria-label="Linuxç¦»çº¿å®‰è£…Docker"><!---->Linuxç¦»çº¿å®‰è£…Docker<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/other/%E8%BD%AF%E8%B7%AF%E7%94%B1/OpenWrt/Nginx.html" aria-label="NGINX"><!---->NGINX<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/other/%E8%BD%AF%E8%B7%AF%E7%94%B1/OpenWrt/OpenWrt.html" aria-label="OpenWrtæ‰©å®¹overlay"><!---->OpenWrtæ‰©å®¹overlay<!----></a></li><li><a class="route-link active vp-link vp-sidebar-link vp-sidebar-page active" href="/other/%E8%BD%AF%E8%B7%AF%E7%94%B1/OpenWrt/%E5%85%B6%E4%BB%96.html" aria-label="å…¶ä»–"><!---->å…¶ä»–<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æœ¬åœ°éƒ¨ç½²æ•™ç¨‹åˆé›†</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/other/%E8%BD%AF%E8%B7%AF%E7%94%B1/OpenWrt/%E6%A0%B9%E6%8D%AEesir%E5%9B%BA%E4%BB%B6%E5%88%B6%E4%BD%9Copenwrt%20docker%E9%95%9C%E5%83%8F.html" aria-label="æ ¹æ®esirå›ºä»¶åˆ¶ä½œopenwrt dockeré•œåƒ"><!---->æ ¹æ®esirå›ºä»¶åˆ¶ä½œopenwrt dockeré•œåƒ<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/other/%E8%BD%AF%E8%B7%AF%E7%94%B1/OpenWrt/%E8%AF%A6%E8%A7%A3Linux%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%88ufw%E5%91%BD%E4%BB%A4%EF%BC%89.html" aria-label="è¯¦è§£Linuxé˜²ç«å¢™ï¼ˆufwå‘½ä»¤ï¼‰"><!---->è¯¦è§£Linuxé˜²ç«å¢™ï¼ˆufwå‘½ä»¤ï¼‰<!----></a></li></ul></section></li></ul></section></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->å…¶ä»–</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="/" target="_blank" rel="noopener noreferrer">à¦é»˜é£</a></span><span property="author" content="à¦é»˜é£"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-11-09T05:24:15.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 49 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT49M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!--[--><!----><!--]--><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#dockerå¯¼å‡ºé•œåƒ">dockerå¯¼å‡ºé•œåƒ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#gitæäº¤ä»£ç ">Gitæäº¤ä»£ç </a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#é…ç½®aliståå‘ä»£ç†">é…ç½®aliståå‘ä»£ç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#é€šè¿‡å…¬é’¥è¿›è¡Œsshè¿æ¥">é€šè¿‡å…¬é’¥è¿›è¡Œsshè¿æ¥</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-ç”Ÿæˆå¯†é’¥">1 ç”Ÿæˆå¯†é’¥</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-æ³•ä¸€-åœ¨è®¾å¤‡ç”Ÿæˆå¯†é’¥-ä¸æ¨è">1.1 æ³•ä¸€ï¼šåœ¨è®¾å¤‡ç”Ÿæˆå¯†é’¥[ä¸æ¨è]</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-æ³•äºŒ-åœ¨æœ¬åœ°ç”Ÿæˆå¯†é’¥">1.2 æ³•äºŒï¼šåœ¨æœ¬åœ°ç”Ÿæˆå¯†é’¥</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-å…³é—­sshçš„è´¦å·å¯†ç ç™»é™†">2 å…³é—­sshçš„è´¦å·å¯†ç ç™»é™†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#docker">Docker</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¯åŠ¨docker">å¯åŠ¨Docker</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#compose">compose</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#centos-7-x-ä¿®æ”¹å›ºå®šipåœ°å€">CentOS 7.x ä¿®æ”¹å›ºå®šIPåœ°å€</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#alist">Alist</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è‡ªå®šä¹‰è·¯å¾„">è‡ªå®šä¹‰è·¯å¾„</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è·å–å¯†ç ">#è·å–å¯†ç </a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#ä½äºv3-25-0ç‰ˆæœ¬">#ä½äºv3.25.0ç‰ˆæœ¬</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#é«˜äºv3-25-0ç‰ˆæœ¬">#é«˜äºv3.25.0ç‰ˆæœ¬</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è·å–-alist">è·å– AList</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ‰‹åŠ¨è¿è¡Œ">#æ‰‹åŠ¨è¿è¡Œ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å®ˆæŠ¤è¿›ç¨‹">#å®ˆæŠ¤è¿›ç¨‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å¦‚ä½•æ›´æ–°">#å¦‚ä½•æ›´æ–°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è·å–å¯†ç -1">#è·å–å¯†ç </a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#ä½äºv3-25-0ç‰ˆæœ¬-1">#ä½äºv3.25.0ç‰ˆæœ¬</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#é«˜äºv3-25-0ç‰ˆæœ¬-1">#é«˜äºv3.25.0ç‰ˆæœ¬</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#ä½äºv3-25-0ç‰ˆæœ¬-2">ä½äºv3.25.0ç‰ˆæœ¬</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#é«˜äºv3-25-0ç‰ˆæœ¬-2">#é«˜äºv3.25.0ç‰ˆæœ¬</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å‘è¡Œç‰ˆæœ¬">#å‘è¡Œç‰ˆæœ¬</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level5" href="#docker-cli">#docker-cli</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level5" href="#docker-compose">#docker-compose</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨-aria2-ç¦»çº¿ä¸‹è½½">#ä½¿ç”¨ aria2 ç¦»çº¿ä¸‹è½½</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¼€å‘ç‰ˆæœ¬">#å¼€å‘ç‰ˆæœ¬</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç”¨æˆ·-ç»„æ ‡è¯†ç¬¦">ç”¨æˆ·/ç»„æ ‡è¯†ç¬¦</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ‰‹åŠ¨ç¼–è¯‘-docker-é•œåƒ">#æ‰‹åŠ¨ç¼–è¯‘ Docker é•œåƒ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ„å»ºå‰ç«¯">#æ„å»ºå‰ç«¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ„å»ºåç«¯">#æ„å»ºåç«¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#nginx">nginx</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•å¯¹å­ç›®å½•è¿›è¡Œåå‘ä»£ç†">å¦‚ä½•å¯¹å­ç›®å½•è¿›è¡Œåå‘ä»£ç†ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è‡ªåŠ¨æ¸å˜èƒŒæ™¯">è‡ªåŠ¨æ¸å˜èƒŒæ™¯</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#nginx-1">Nginx</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level5" href="#å®‰è£…æ‰€éœ€ç¯å¢ƒ">å®‰è£…æ‰€éœ€ç¯å¢ƒ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level5" href="#ä¸€ã€gccå®‰è£…">ä¸€ã€gccå®‰è£…</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level5" href="#äºŒã€pcre-pcre-devel-å®‰è£…">äºŒã€pcre pcre-devel å®‰è£…</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level5" href="#ä¸‰ã€-zlibå®‰è£…">ä¸‰ã€ zlibå®‰è£…</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level5" href="#å››ã€opensslå®‰è£…">å››ã€opensslå®‰è£…</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level5" href="#äº”ã€ä¸‹è½½nginx">äº”ã€ä¸‹è½½Nginx</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level5" href="#å…­ã€å¼€æœºè‡ªå¯åŠ¨">å…­ã€å¼€æœºè‡ªå¯åŠ¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#nginx-systemctlå¯åŠ¨é…ç½®">nginx systemctlå¯åŠ¨é…ç½®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#å¸è½½-nginx">å¸è½½ nginx</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#openwrtæ‰©å®¹overlay">OpenWrtæ‰©å®¹overlay</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#iptables">iptables</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è¡¥å……è¯´æ˜">è¡¥å……è¯´æ˜</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è¯­æ³•">è¯­æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#é€‰é¡¹">é€‰é¡¹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#åŸºæœ¬å‚æ•°">åŸºæœ¬å‚æ•°</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#å‘½ä»¤é€‰é¡¹è¾“å…¥é¡ºåº">å‘½ä»¤é€‰é¡¹è¾“å…¥é¡ºåº</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#å·¥ä½œæœºåˆ¶">å·¥ä½œæœºåˆ¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#é˜²ç«å¢™çš„ç­–ç•¥">é˜²ç«å¢™çš„ç­–ç•¥</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®ä¾‹">å®ä¾‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ›´å¤šå®ä¾‹">æ›´å¤šå®ä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä½¿ç”¨åœºæ™¯å®ä¾‹">ä½¿ç”¨åœºæ™¯å®ä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ç¼–è¯‘openwrt">ç¼–è¯‘OpenWrt</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#x-ui-docker-image">x-ui docker image</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨docker">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨docker</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¯¹äº-x-ui-å¦‚æœä½¿ç”¨-docker">å¯¹äº x-uiï¼Œå¦‚æœä½¿ç”¨ docker</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨">å¦‚ä½•ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3x-ui">3X-UI</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#é›¶åŸºç¡€ä¿å§†çº§å°ç™½èŠ‚ç‚¹æ­å»ºæ•™å­¦-ç›®å‰æœ€å®‰å…¨æœ€ç¨³å®šçš„æ­å»ºæ–¹å¼-é€šè¿‡x-uié¢æ¿å®ç°å•ç«¯å£å¤šç”¨æˆ·åˆç§Ÿ">é›¶åŸºç¡€ä¿å§†çº§å°ç™½èŠ‚ç‚¹æ­å»ºæ•™å­¦ï¼Œç›®å‰æœ€å®‰å…¨æœ€ç¨³å®šçš„æ­å»ºæ–¹å¼ï¼Œé€šè¿‡x-uié¢æ¿å®ç°å•ç«¯å£å¤šç”¨æˆ·åˆç§Ÿ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#vpsè´­ä¹°">VPSè´­ä¹°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸŸåè´­ä¹°">åŸŸåè´­ä¹°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#sshå·¥å…·">SSHå·¥å…·</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#èŠ‚ç‚¹æ­å»º">èŠ‚ç‚¹æ­å»º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¯»æ‰¾é€‚åˆçš„ä¼ªè£…ç«™">å¯»æ‰¾é€‚åˆçš„ä¼ªè£…ç«™</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#é…ç½®nginx">é…ç½®nginx</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¤šç”¨æˆ·åˆç§Ÿ">å¤šç”¨æˆ·åˆç§Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#dockerç¦»çº¿é•œåƒ">dockerç¦»çº¿é•œåƒ</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="å…¶ä»–" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–"><span>å…¶ä»–</span></a></h1><h2 id="dockerå¯¼å‡ºé•œåƒ" tabindex="-1"><a class="header-anchor" href="#dockerå¯¼å‡ºé•œåƒ"><span>dockerå¯¼å‡ºé•œåƒ</span></a></h2><details><summary>ã€æŸ¥çœ‹è¯¦æƒ…ã€‘</summary><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>#!/bin/bash
# è®¾ç½®å¯¼å‡ºé•œåƒçš„ç›®å½•
EXPORT_DIR=&quot;/mnt/alist/share/images&quot;
# ç¡®ä¿å¯¼å‡ºç›®å½•å­˜åœ¨
mkdir -p &quot;$EXPORT_DIR&quot;
# è·å–æ‰€æœ‰çš„é•œåƒå¹¶å¯¼å‡º
IMAGES=$(docker images xhofe/alist --format &#39;{{.Repository}}:{{.Tag}}&#39;)
# éå†æ‰€æœ‰çš„é•œåƒ
for IMAGE in $IMAGES; do
    # åˆ†å‰²é•œåƒä»“åº“åå’Œæ ‡ç­¾
    IFS=&quot;:&quot; read -r REPOSITORY TAG &lt;&lt;&lt; &quot;$IMAGE&quot;
    # å°†ä»“åº“åä¸­çš„æ–œæ æ›¿æ¢ä¸ºä¸‹åˆ’çº¿
    SAFE_REPOSITORY=${REPOSITORY//\//_}
    # æ„é€ å¯¼å‡ºæ–‡ä»¶çš„åç§°
    EXPORT_FILE=&quot;${SAFE_REPOSITORY}_${TAG}.tar&quot;
    EXPORT_PATH=&quot;$EXPORT_DIR/$EXPORT_FILE&quot;
    # æ£€æŸ¥é•œåƒæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™å¯¼å‡º
    if docker image inspect &quot;${REPOSITORY}:${TAG}&quot; &gt;/dev/null 2&gt;&amp;1; then
        docker save -o &quot;$EXPORT_PATH&quot; &quot;${REPOSITORY}:${TAG}&quot;
        echo &quot;Exported ${REPOSITORY}:${TAG} to $EXPORT_PATH&quot;
        # åˆ›å»º MD5 æ–‡ä»¶ï¼Œåªæ˜¾ç¤º MD5 å€¼å’Œæ–‡ä»¶å
        md5sum &quot;$EXPORT_PATH&quot; | awk &#39;{print $1, &quot;&#39;$EXPORT_FILE&#39;&quot;}&#39; &gt; &quot;$EXPORT_PATH.md5&quot;
        echo &quot;MD5 checksum saved to $EXPORT_PATH.md5&quot;
        # å°†é•œåƒæ–‡ä»¶å’Œ MD5 æ–‡ä»¶æ‰“åŒ…æˆ .tar.gz å‹ç¼©æ–‡ä»¶
        tar -czf &quot;${EXPORT_PATH}.gz&quot; -C &quot;$EXPORT_DIR&quot; &quot;$EXPORT_FILE&quot; &quot;$EXPORT_FILE.md5&quot;
        echo &quot;Compressed ${EXPORT_FILE} and ${EXPORT_FILE}.md5 into ${EXPORT_PATH}.gz&quot;
          else
        echo &quot;Error: ${REPOSITORY}:${TAG} does not exist&quot;
    fi
done
echo &quot;Export and compression process completed.&quot;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="gitæäº¤ä»£ç " tabindex="-1"><a class="header-anchor" href="#gitæäº¤ä»£ç "><span>Gitæäº¤ä»£ç </span></a></h2><details><summary>ã€æŸ¥çœ‹è¯¦æƒ…ã€‘</summary><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>
git init                    åˆå§‹åŒ–ä¸€ä¸ªæ–°ä»“åº“
git branch -m master main   å°†é»˜è®¤çš„ä¸»åˆ†æ”¯åç§°ä»â€œmasterâ€æ›´æ”¹ä¸ºâ€œmainâ€
git add -A                  å°†æ‰€æœ‰æ›´æ”¹çš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº
git commit -m &#39;deploy&#39;      æäº¤è¿™äº›æ›´æ”¹ï¼Œå¹¶æ·»åŠ æäº¤ä¿¡æ¯â€œdeployâ€ã€‚

# å¦‚æœå‘å¸ƒåˆ° https://&lt;USERNAME&gt;.github.io
# git push -f git@github.com:&lt;USERNAME&gt;/&lt;USERNAME&gt;.github.io.git main

# å¦‚æœå‘å¸ƒåˆ° https://&lt;USERNAME&gt;.github.io/&lt;REPO&gt;

git push -f git@github.com:ni&#39;de.git main


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="é…ç½®aliståå‘ä»£ç†" tabindex="-1"><a class="header-anchor" href="#é…ç½®aliståå‘ä»£ç†"><span>é…ç½®aliståå‘ä»£ç†</span></a></h2><details><summary>ã€æŸ¥çœ‹è¯¦æƒ…ã€‘</summary><p>æˆ‘ä»¬è¿›å…¥nginxçš„é…ç½®æ–‡ä»¶å¤¹</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>NGINXé»˜è®¤å®‰è£…è·¯å¾„
/usr/sbin/nginxï¼šä¸»ç¨‹åº
/etc/nginxï¼šå­˜æ”¾é…ç½®æ–‡ä»¶
/usr/share/nginxï¼šå­˜æ”¾é™æ€æ–‡ä»¶
/var/log/nginxï¼šå­˜æ”¾æ—¥å¿—
/run/nginx.pid nginx pidè·¯å¾„

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>cd /etc/nginx/conf.d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ–°å»ºä¸€ä¸ªalistçš„åä»£é…ç½®æ–‡ä»¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>nano alist.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨æ–‡ä»¶ä¸­æ”¾å…¥å¦‚ä¸‹å†…å®¹</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>server {
    listen 80;
    listen [::]:80;
    server_name example.com;  # æ›¿æ¢ä¸ºä½ çš„åŸŸå

    # å¼ºåˆ¶é‡å®šå‘åˆ° HTTPS
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    listen [::]:443 ssl;
    server_name example.com;  # æ›¿æ¢ä¸ºä½ çš„åŸŸå

    ssl_certificate /etc/nginx/keyfile/cert.pem;  
    ssl_certificate_key /etc/nginx/keyfile/key.pem;  

    # SSL é…ç½®ï¼ˆå¯é€‰ï¼‰
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers &#39;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384&#39;;
    ssl_prefer_server_ciphers on;

    location / {
               proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
               proxy_set_header X-Forwarded-Proto $scheme;
               proxy_set_header Host $http_host;
               proxy_set_header X-Real-IP $remote_addr;
               proxy_set_header Range $http_range;
               proxy_set_header If-Range $http_if_range;
               proxy_redirect off;
               proxy_pass http://127.0.0.1:5244;     #åä»£ä¸åŒæœåŠ¡ä¿®æ”¹è¿™é‡Œ
               # the max size of file to upload
               client_max_body_size 20000m;
             }
}


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒæ—¶æˆ‘ä»¬å…³é—­ç›´æ¥å¯¹å…¬ç½‘ipå’Œæœªé…ç½®åŸŸåçš„è®¿é—®</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>nano close.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ”¾ç½®å¦‚ä¸‹å†…å®¹</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>server {
    listen 80 default_server;
    listen [::]:80 default_server;
    server_name _;

    # å¯¹æœªé…ç½®çš„åŸŸåè¿”å› 444
    return 444;
}

server {
    listen 443 ssl default_server;
    listen [::]:443 ssl default_server;
    server_name _;

    ssl_certificate /etc/nginx/keyfile/cert.pem;  
    ssl_certificate_key /etc/nginx/keyfile/key.pem;


    # å¯¹æœªé…ç½®çš„åŸŸåè¿”å› 444
    return 444;
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡å¯nginxåä»£å³ç”Ÿæ•ˆ</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>sudo systemctl restart nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ‰‹åŠ¨åˆ‡å‰²æ—¥å¿—æ–‡ä»¶</p><p>é»˜è®¤ Nginx çš„æ—¥å¿—éƒ½æ˜¯è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­çš„ï¼Œæ˜¯ä¸ä¼šæŒ‰ç…§æ—¥æœŸè¿›è¡Œåˆ‡å‰²çš„ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ–‡ä»¶è¶Šæ¥è¶Šå¤§ï¼Œä¸åˆ©äºæŸ¥çœ‹ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œé€šè¿‡å‘½ä»¤æ¥è¿›è¡Œåˆ‡å‰²ã€‚</p><p>ä¾‹å¦‚å‘½ä»¤ä¸ºï¼šcut_nginx_log.sh</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>#!/bin/bash
# æ—¥å¿—è·¯å¾„
LOG_PATH=&quot;/usr/local/nginx/logs&quot;

# ç”Ÿæˆä¸€ä¸ªæ—¶é—´çš„å­—ç¬¦ä¸²
RECORD_TIME=$(date -d &quot;yesterday&quot; +%Y-%m-%d-%H-%M-%S)

# nginxçš„PID
PID=/usr/local/nginx/logs/nginx.pid

# ç§»åŠ¨æ–‡ä»¶
mv ${LOG_PATH}/access.log ${LOG_PATH}/access.${RECORD_TIME}.log
mv ${LOG_PATH}/error.log ${LOG_PATH}/error.${RECORD_TIME}.log

# å‘Nginxä¸»è¿›ç¨‹å‘é€ä¿¡å·ï¼Œç”¨äºé‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶
kill -USR1 `cat $PID`

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–å†™å¥½äº†ï¼Œèµ‹äºˆæ–‡ä»¶æ‰§è¡Œæƒé™ã€‚ç„¶åæ‰§è¡Œè„šæœ¬æ–‡ä»¶ï¼š</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>sudo chmod +x cut_nginx_log.sh

./cut_nginx_log.sh

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="é€šè¿‡å…¬é’¥è¿›è¡Œsshè¿æ¥" tabindex="-1"><a class="header-anchor" href="#é€šè¿‡å…¬é’¥è¿›è¡Œsshè¿æ¥"><span>é€šè¿‡å…¬é’¥è¿›è¡Œsshè¿æ¥</span></a></h2><details><summary>ã€æŸ¥çœ‹è¯¦æƒ…ã€‘</summary><p>è¿™ç¯‡æ–‡ç« ä»‹ç»äº†ä½¿ç”¨sshå…¬é’¥è¿æ¥è®¾å¤‡çš„æ–¹æ³•</p><p>æ³¨æ„</p><p>æ³¨1ã€å»ºè®®ä½¿ç”¨1.2æ³•äºŒåœ¨æœ¬åœ°ç”Ÿæˆå¯†é’¥ã€‚</p><h2 id="_1-ç”Ÿæˆå¯†é’¥" tabindex="-1"><a class="header-anchor" href="#_1-ç”Ÿæˆå¯†é’¥"><span>1 ç”Ÿæˆå¯†é’¥</span></a></h2><h3 id="_1-1-æ³•ä¸€-åœ¨è®¾å¤‡ç”Ÿæˆå¯†é’¥-ä¸æ¨è" tabindex="-1"><a class="header-anchor" href="#_1-1-æ³•ä¸€-åœ¨è®¾å¤‡ç”Ÿæˆå¯†é’¥-ä¸æ¨è"><span>1.1 æ³•ä¸€ï¼šåœ¨è®¾å¤‡ç”Ÿæˆå¯†é’¥[<strong>ä¸æ¨è</strong>]</span></a></h3><p>æˆ‘ä»¬å…ˆæ­£å¸¸çš„sshè¿æ¥åˆ°è®¾å¤‡ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œç„¶åä¸€ç›´å›è½¦ï¼Œç”Ÿæˆå¯†é’¥ã€‚</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>ssh-keygen -m PEM -t rsa -b 4096 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åæˆ‘ä»¬è¿›å…¥è‡ªå·±å®¶ç›®å½•ä¸‹çš„<code>.ssh</code>æ–‡ä»¶å¤¹ã€‚</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>cd .ssh 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœè¾“å…¥<code>ls</code>å‘½ä»¤å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œ<code>id_rsa</code>å’Œ<code>id_rsa.pub</code>ï¼Œ<code>id_rsa.pub</code>å°±æ˜¯æˆ‘ä»¬çš„å…¬é’¥æ–‡ä»¶ï¼Œæˆ‘ä»¬ç”¨å¦‚ä¸‹å‘½ä»¤å°†å…¬é’¥ä¿å­˜åœ¨éªŒè¯æ–‡ä»¶ä¸­ã€‚</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>cat id_rsa.pub &gt;&gt; authorized_keys 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åæˆ‘ä»¬åˆ†åˆ«æˆäºˆéªŒè¯æ–‡ä»¶å’Œ.sshæ–‡ä»¶å¤¹å¯¹åº”çš„è¯»å†™æƒé™</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>chmod 600 authorized_keys 
chmod 700 ~/.ssh 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæˆ‘ä»¬å°†ç§é’¥æ–‡ä»¶<code>id_rsa</code>ä¸‹è½½åˆ°æœ¬åœ°ï¼Œç”¨æˆ‘ä»¬çš„sshå·¥å…·å¯¼å…¥ç§é’¥æ–‡ä»¶ï¼Œè¿›è¡Œè¿æ¥å°è¯•ã€‚</p><h3 id="_1-2-æ³•äºŒ-åœ¨æœ¬åœ°ç”Ÿæˆå¯†é’¥" tabindex="-1"><a class="header-anchor" href="#_1-2-æ³•äºŒ-åœ¨æœ¬åœ°ç”Ÿæˆå¯†é’¥"><span>1.2 æ³•äºŒï¼šåœ¨æœ¬åœ°ç”Ÿæˆå¯†é’¥</span></a></h3><p>æˆ‘ä»¬<code>Win+R</code>å†æ‰“å¼€çš„ç•Œé¢è¾“å…¥<code>cmd</code>å›è½¦ï¼Œç„¶åè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œä¸€ç›´å›è½¦ç”Ÿæˆå¯†é’¥ã€‚</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>ssh-keygen -m PEM -t rsa -b 4096 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åæˆ‘ä»¬æ­£å¸¸sshè¿æ¥åˆ°è®¾å¤‡ï¼Œç„¶ååˆ›å»ºå¹¶è¿›å…¥.sshæ–‡ä»¶å¤¹</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>mkdir -p .ssh &amp;&amp; cd .ssh 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶ååˆ›å»º<code>authorized_keys</code>éªŒè¯æ–‡ä»¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>nano authorized_keys 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨cç›˜ä¸‹çš„<code>ç”¨æˆ·</code>æ–‡ä»¶å¤¹ï¼Œ<code>è‡ªå·±ç”¨æˆ·å</code>çš„æ–‡ä»¶å¤¹ï¼Œ<code>.ssh</code>æ–‡ä»¶å¤¹ï¼Œå°†é‡Œé¢çš„<code>id_rsa.pub</code>æ–‡ä»¶å³é”®æ‰“å¼€æ–¹å¼ï¼Œä½¿ç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œå°†å…¨éƒ¨å†…å®¹å¤åˆ¶åˆ°<code>authorized_keys</code>å†…ï¼Œå¹¶ä¿å­˜é€€å‡ºã€‚</p><p>ç„¶åæˆ‘ä»¬åˆ†åˆ«æˆäºˆéªŒè¯æ–‡ä»¶å’Œ.sshæ–‡ä»¶å¤¹å¯¹åº”çš„è¯»å†™æƒé™</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>chmod 600 authorized_keys 
chmod 700 ~/.ssh 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæˆ‘ä»¬å¯ä»¥ç›´æ¥æ–­å¼€è¿æ¥ï¼Œç„¶åsshåˆ°è®¾å¤‡æŸ¥çœ‹æ˜¯å¦éœ€è¦å¯†ç ï¼Œå¦‚å·²ç»ä¸å†éœ€è¦å¯†ç ç›´æ¥è¿æ¥ï¼Œå…¬é’¥å³å·²ç»é…ç½®å¥½äº†ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä»»æ„æ”¯æŒsshè¿æ¥çš„è½¯ä»¶å¯¼å…¥<code>.ssh</code>æ–‡ä»¶å¤¹å†…çš„ç§é’¥æ–‡ä»¶<code>id_rsa</code>å³å¯å®ç°ç›´æ¥è¿æ¥ã€‚</p><h2 id="_2-å…³é—­sshçš„è´¦å·å¯†ç ç™»é™†" tabindex="-1"><a class="header-anchor" href="#_2-å…³é—­sshçš„è´¦å·å¯†ç ç™»é™†"><span>2 å…³é—­sshçš„è´¦å·å¯†ç ç™»é™†</span></a></h2><p>æˆ‘ä»¬å°è¯•å…¬é’¥è¿æ¥æˆåŠŸåï¼Œæˆ‘ä»¬å…³é—­sshçš„å¯†ç è¿æ¥ï¼Œæˆ‘ä»¬æ‰“å¼€sshçš„é…ç½®æ–‡ä»¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>sudo nano /etc/ssh/sshd_config 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ‰¾åˆ°<code>#PasswordAuthentication yes</code>è¿™è¡Œï¼Œå°†å…¶ä¿®æ”¹ä¸º</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>PasswordAuthentication no 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åä¿å­˜é€€å‡ºï¼Œé‡å¯sshdé…ç½®ç”Ÿæ•ˆ</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>sudo service sshd restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></details><h2 id="docker" tabindex="-1"><a class="header-anchor" href="#docker"><span>Docker</span></a></h2><details><summary>ã€æŸ¥çœ‹è¯¦æƒ…ã€‘</summary> ### å®‰è£…docker <p>å®‰è£…Dockeréœ€è¦å°†æˆ‘ä»¬çš„è®¡ç®—æœºè”ç½‘ï¼Œ<a href="https://so.csdn.net/so/search?q=%E5%AE%89%E8%A3%85yum&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">å®‰è£…yum<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å·¥å…·</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>yum install -y yum-utils 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ›´æ–°æœ¬åœ°é•œåƒ</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code># è®¾ç½®dockeré•œåƒæº
yum-config-manager \
    --add-repo \
    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
    
yum makecache fast
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›´æ¥ä½¿ç”¨<code>yum</code>å‘½ä»¤å³å¯å®‰è£… Dockerã€‚</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>yum install docker-ce docker-ce-cli containerd.io
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>yum install docker-ce-26.1.4 docker-ce-cli-26.1.4 containerd.io-1.6.33
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„DockerEngineï¼ˆå¯é€‰ï¼‰
åˆ—å‡ºä»“åº“å­˜åœ¨çš„ç‰ˆæœ¬ä¿¡æ¯ï¼š
<span class="token function">apt-cache</span> madison docker-ce

<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> docker-ce<span class="token operator">=</span><span class="token number">5</span>:26.1.4-1~ubuntu.22.04~jammy docker-ce-cli<span class="token operator">=</span><span class="token number">5</span>:26.1.4-1~ubuntu.22.04~jammy <span class="token assign-left variable">containerd.io</span><span class="token operator">=</span><span class="token number">1.6</span>.33-1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¯åŠ¨docker" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨docker"><span>å¯åŠ¨Docker</span></a></h3><p>é€šè¿‡å‘½ä»¤å¯åŠ¨dockerï¼š</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>systemctl start docker  # å¯åŠ¨æœåŠ¡
systemctl status docker  # æŸ¥çœ‹çŠ¶æ€
systemctl stop docker  # åœæ­¢æœåŠ¡
systemctl restart docker  # é‡å¯æœåŠ¡
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åè¾“å…¥å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹dockerç‰ˆæœ¬ï¼š</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>docker -v
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å‡ºç°ç‰ˆæœ¬æ‰ç®—æˆåŠŸ</p><p>ä¸ºäº†è®© Docker åœ¨æ¯æ¬¡é‡å¯ç³»ç»Ÿçš„æ—¶å€™èƒ½iè‡ªåŠ¨è¿è¡Œï¼Œè¿˜éœ€è¦è®¾ç½®è‡ªå¯åŠ¨ï¼š</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>systemctl enable docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code># å…³é—­
systemctl stop firewalld
# ç¦æ­¢å¼€æœºå¯åŠ¨é˜²ç«å¢™
systemctl disable firewalld
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¸è½½Docker</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code># å¸è½½docker
yum remove docker-ce docker-ce-cli containerd.io

# åˆ é™¤docker dockeré»˜è®¤å·¥ä½œè·¯å¾„
rm -rf /var/lib/docker

rm -rf /etc/docker
rm -rf /run/docker
rm -rf /var/lib/dockershim
rm -rf /var/lib/docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¸è½½è„šæœ¬</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>#!/bin/bash
systemctl stop docker
yum remove docker \
                  docker-ce* \
                  docker-buildx-plugin \
                  docker-compose-plugin \
                  docker-scan-plugin \
                  containerd.io \
                  container-selinux
rm -rf /var/lib/docker
rm -rf /etc/docker/daemon.json
rm -rf /etc/docker
rm -rf /run/docker
rm -rf /var/lib/dockershim
rm -rf /var/lib/docker
yum list installed | grep docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>docker exec -it å®¹å™¨id /bin/bash
docker attach 
docker commit -m=&quot;æè¿°ä¿¡æ¯&quot; -a=&quot;ä½œè€…&quot; å®¹å™¨ID ç›®æ ‡é•œåƒå:[TAG]
docker save -o /è·¯å¾„/é•œåƒå.tar é•œåƒå:[TAG]
docker load -i /è·¯å¾„/é•œåƒå.tar

docker inspect å®¹å™¨id

docker builder prune æ¸…é™¤æ„å»ºç¼“å­˜
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>å¸è½½docker
1.åˆ é™¤dockerçš„æ‰€æœ‰åŒ…
apt-get autoremove docker docker-ce docker-engine  docker.io  containerd runc
2.æŸ¥çœ‹dockeræ˜¯å¦å¸è½½å¹²å‡€
dpkg -l | grep docker

dpkg -l |grep ^rc|awk &#39;{print $2}&#39; |sudo xargs dpkg -P
3.åˆ é™¤ç›¸å…³æ’ä»¶
apt-get autoremove docker-ce-*
4.åˆ é™¤dockeré…ç½®ç›®å½•
rm -rf /etc/systemd/system/docker.service.d

rm -rf /var/lib/docker
5.ç¡®å®šdockerå¸è½½å®Œæ¯•
docker --version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="compose" tabindex="-1"><a class="header-anchor" href="#compose"><span>compose</span></a></h2><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>COMPOSE_VERSION=$(curl -s https://api.github.com/repos/docker/compose/releases/latest | grep &#39;tag_name&#39; | cut -d\&quot; -f4)

sh -c &quot;curl -L https://github.com/docker/compose/releases/download/${COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose&quot;

sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.29.1/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose

sudo chmod +x /usr/local/bin/docker-compose

sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose



$ docker-compose --version
docker-compose version 1.29.1, build 1110ad01


rm  /usr/bin/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>å°†docker-composeèµ‹äºˆå¯æ‰§è¡Œæƒé™
chmod +x /usr/local/bin/docker-compose
å»ºç«‹è¿æ¥
ln -s /usr/local/bin/docker-compose docker-compose
ç¡®è®¤æ˜¯å¦å®‰è£æˆåŠŸ
docker-compose -v
å¸è½½
sudo rm /usr/local/bin/docker-compose

mkdir åˆ›å»ºå·¥ä½œæ–‡ä»¶å¤¹
touch docker-compose.yml
 å¯åŠ¨æœåŠ¡
docker-compose up -d
åœæ­¢æœåŠ¡
docker-compose down
åˆ—å‡ºæ‰€æœ‰è¿è¡Œå®¹å™¨
docker-compose ps
æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs
æ„å»ºæˆ–
docker-compose buildè€…é‡æ–°æ„å»ºæœåŠ¡
å¯åŠ¨æœåŠ¡
docker-compose start
åœæ­¢å·²è¿è¡Œçš„æœåŠ¡
docker-compose stop
é‡å¯æœåŠ¡
docker-compose restart

 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¾ç½®é•œåƒä»“åº“</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>vi /etc/docker/daemon.json

# å†…å®¹å¦‚ä¸‹ï¼š
{
  &quot;registry-mirrors&quot;: [
    &quot;https://docker.m.daocloud.io&quot;
  ]
}

{
  &quot;registry-mirrors&quot;: [
    &quot;https://1996099.xyz&quot;
  ]
}

# é€€å‡ºå¹¶ä¿å­˜
:wq

# ä½¿é…ç½®ç”Ÿæ•ˆ
systemctl daemon-reload

# é‡å¯Docker
systemctl restart docker

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="reference" tabindex="-1"><a class="header-anchor" href="#reference"><span>Reference</span></a></h1><ul><li><a href="https://blog.csdn.net/Lichen0196/article/details/137355517" target="_blank" rel="noopener noreferrer">dockerå›½å†…é•œåƒæºé…ç½®åŠèµ°ä»£ç†è®¾ç½®_docker é•œåƒä»£ç†-CSDNåšå®¢<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h1 id="è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#è¯´æ˜"><span>è¯´æ˜</span></a></h1><ul><li><p>é¦–å…ˆï¼Œè‡ªå·±è¦è§£å†³ç½‘ç»œé—®é¢˜ï¼Œè¿™é‡Œçœç•¥ä¸€ä¸‡å­—...</p></li><li><p>æ³¨æ„ï¼šé…ç½®äº†<code>daemon.json</code>çš„ï¼Œå»æŠŠé‡Œé¢çš„é•œåƒæºéƒ½å…ˆåˆ æ‰ï¼Œå¯ä»¥å…ˆå¤‡ä»½ä¸€ä¸‹ã€‚</p></li></ul><h1 id="å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å‘½ä»¤"><span>å‘½ä»¤</span></a></h1><ul><li>åœ¨dockerçš„è¿›ç¨‹æœåŠ¡æ–‡ä»¶å¤¹é…ç½®ä»£ç†ï¼Œå¦‚æœæ²¡æœ‰æˆ‘ä»¬å°±æ–°å»ºè¿™ä¸ªæ–‡ä»¶å¤¹ï¼š</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> /usr/lib/systemd/system/docker.service.d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>cd /usr/lib/systemd/system/docker.service.d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>ç„¶ååœ¨<code>docker.service.d</code>æ–‡ä»¶å¤¹é‡Œæ–°å»ºæˆ‘ä»¬çš„ä»£ç†æ–‡ä»¶<code>proxy.conf</code></li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vim</span> proxy.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>å¹¶æŠŠæ–‡ä»¶å†™å¦‚ä¸‹é¢è¿™ä¸ªæ ¼å¼ï¼Œæˆ‘è¿™é‡Œæ˜¯æœ¬æœºçš„å®¢æˆ·ç«¯ï¼Œè‡ªå·±æŒ‰è‡ªå·±çš„å®¢æˆ·ç«¯å†™</li></ul><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>[Service]
Environment=&quot;HTTP_PROXY=http://192.168.18.144:7890/&quot;
Environment=&quot;HTTPS_PROXY=http://192.168.18.144:7890/&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>:wq</code>ä¿å­˜å¹¶é€€å‡º<code>proxy.conf</code>æ–‡ä»¶ï¼Œå’Œæ›´æ”¹é•œåƒæºä¸€æ ·ï¼Œé‡å¯dockerï¼Œå¹¶é‡å¯daemonè¿›ç¨‹ã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl daemon-reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>æœ€åï¼ŒéªŒè¯ä¸€ä¸‹æ˜¯å¦ä¿®æ”¹æˆåŠŸï¼Œå‡ºç°äº†ä»£ç†ä¿¡æ¯è¡¨ç¤ºæˆåŠŸã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> info
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="centos-7-x-ä¿®æ”¹å›ºå®šipåœ°å€" tabindex="-1"><a class="header-anchor" href="#centos-7-x-ä¿®æ”¹å›ºå®šipåœ°å€"><span>CentOS 7.x ä¿®æ”¹å›ºå®šIPåœ°å€</span></a></h4><p>è¿›å…¥centos7è™šæ‹Ÿæœºçª—å£</p><p>è¾“å…¥ï¼š</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>vi  /etc/sysconfig/network-scripts/ifcfg-ens33
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></details><h2 id="alist" tabindex="-1"><a class="header-anchor" href="#alist"><span>Alist</span></a></h2><details><summary>ã€æŸ¥çœ‹è¯¦æƒ…ã€‘</summary><h1 id="ä¸€é”®è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#ä¸€é”®è„šæœ¬"><span>ä¸€é”®è„šæœ¬</span></a></h1><p><strong>å®‰è£…</strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> <span class="token string">&quot;https://alist.nn.ci/v3.sh&quot;</span> <span class="token operator">|</span> <span class="token function">bash</span> <span class="token parameter variable">-s</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>æ›´æ–°</strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> <span class="token string">&quot;https://alist.nn.ci/v3.sh&quot;</span> <span class="token operator">|</span> <span class="token function">bash</span> <span class="token parameter variable">-s</span> update
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>å¸è½½</strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> <span class="token string">&quot;https://alist.nn.ci/v3.sh&quot;</span> <span class="token operator">|</span> <span class="token function">bash</span> <span class="token parameter variable">-s</span> uninstall
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="è‡ªå®šä¹‰è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰è·¯å¾„"><span><strong>è‡ªå®šä¹‰è·¯å¾„</strong></span></a></h2><p>é»˜è®¤å®‰è£…åœ¨ <code>/opt/alist</code> ä¸­ã€‚ è‡ªå®šä¹‰å®‰è£…è·¯å¾„ï¼Œå°†å®‰è£…è·¯å¾„ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°æ·»åŠ ï¼Œå¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼ˆå¦‚æœè·¯å¾„ä»¥ alist ç»“å°¾ï¼Œåˆ™ç›´æ¥å®‰è£…åˆ°ç»™å®šè·¯å¾„ï¼Œå¦åˆ™ä¼šå®‰è£…åœ¨ç»™å®šè·¯å¾„ alist ç›®å½•ä¸‹ï¼‰ï¼Œå¦‚ å®‰è£…åˆ° <code>/root</code>ï¼š</p><p>æ­£å¼ç‰ˆ</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># Install</span>
<span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> <span class="token string">&quot;https://alist.nn.ci/v3.sh&quot;</span> <span class="token operator">|</span> <span class="token function">bash</span> <span class="token parameter variable">-s</span> <span class="token function">install</span> /root
<span class="token comment"># update</span>
<span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> <span class="token string">&quot;https://alist.nn.ci/v3.sh&quot;</span> <span class="token operator">|</span> <span class="token function">bash</span> <span class="token parameter variable">-s</span> update /root
<span class="token comment"># Uninstall</span>
<span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> <span class="token string">&quot;https://alist.nn.ci/v3.sh&quot;</span> <span class="token operator">|</span> <span class="token function">bash</span> <span class="token parameter variable">-s</span> uninstall /root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¯åŠ¨: <code>systemctl start alist</code></li><li>å…³é—­: <code>systemctl stop alist</code></li><li>çŠ¶æ€: <code>systemctl status alist</code></li><li>é‡å¯: <code>systemctl restart alist</code></li></ul><h2 id="è·å–å¯†ç " tabindex="-1"><a class="header-anchor" href="#è·å–å¯†ç "><span><a href="https://alist.nn.ci/zh/guide/install/script.html#%E8%8E%B7%E5%8F%96%E5%AF%86%E7%A0%81" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>è·å–å¯†ç </strong></span></a></h2><p>éœ€è¦è¿›å…¥è„šæœ¬å®‰è£…AListçš„ç›®å½•æ–‡ä»¶å¤¹å…§æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><h4 id="ä½äºv3-25-0ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#ä½äºv3-25-0ç‰ˆæœ¬"><span><a href="https://alist.nn.ci/zh/guide/install/script.html#%E4%BD%8E%E4%BA%8Ev3-25-0%E7%89%88%E6%9C%AC" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä½äºv3.25.0ç‰ˆæœ¬</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>./alist admin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="é«˜äºv3-25-0ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#é«˜äºv3-25-0ç‰ˆæœ¬"><span><a href="https://alist.nn.ci/zh/guide/install/script.html#%E9%AB%98%E4%BA%8Ev3-25-0%E7%89%88%E6%9C%AC" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>é«˜äºv3.25.0ç‰ˆæœ¬</span></a></h4><p>3.25.0ä»¥ä¸Šç‰ˆæœ¬å°†å¯†ç æ”¹æˆåŠ å¯†æ–¹å¼å­˜å‚¨çš„hashå€¼ï¼Œæ— æ³•ç›´æ¥åç®—å‡ºå¯†ç ï¼Œå¦‚æœå¿˜è®°äº†å¯†ç åªèƒ½é€šè¿‡é‡æ–° <strong><code>éšæœºç”Ÿæˆ</code></strong> æˆ–è€… <strong><code>æ‰‹åŠ¨è®¾ç½®</code></strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># éšæœºç”Ÿæˆä¸€ä¸ªå¯†ç </span>
./alist admin random
<span class="token comment"># æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªå¯†ç ,`NEW_PASSWORD`æ˜¯æŒ‡ä½ éœ€è¦è®¾ç½®çš„å¯†ç </span>
./alist admin <span class="token builtin class-name">set</span> NEW_PASSWORD
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="æ‰‹åŠ¨å®‰è£…" tabindex="-1"><a class="header-anchor" href="#æ‰‹åŠ¨å®‰è£…"><span>æ‰‹åŠ¨å®‰è£…</span></a></h1><h2 id="è·å–-alist" tabindex="-1"><a class="header-anchor" href="#è·å–-alist"><span><strong>è·å– AList</strong></span></a></h2><p>æ‰“å¼€ <a href="https://github.com/Xhofe/alist/releases" target="_blank" rel="noopener noreferrer">AList Releaseopen in new window<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¸‹è½½å¾…éƒ¨ç½²ç³»ç»Ÿå¯¹åº”çš„æ–‡ä»¶ã€‚æœ€æ–°ç‰ˆçš„å‰ç«¯å·²ç»å’Œåç«¯æ‰“åŒ…å¥½äº†ï¼Œä¸ç”¨å†ä¸‹è½½å‰ç«¯æ–‡ä»¶äº†ã€‚</p><p>xxxx æŒ‡çš„æ˜¯ä¸åŒç³»ç»Ÿ/æ¶æ„å¯¹åº”çš„åç§°ï¼Œä¸€èˆ¬ Linux-x86/64 ä¸º alist-linux-amd64</p><p>æ‰‹åŠ¨å®‰è£…å¦‚æœæœ‰å¦‚ä¸‹æç¤ºï¼šæ˜¯å› ä¸º<a href="https://alist.nn.ci/zh/faq/why.html#lib64-libc-so-6-version-glibc-2-28-not-found-required-by-alist-%E6%88%96%E8%80%85-accept-function-not-implemented" target="_blank" rel="noopener noreferrer">ä½ çš„ GLIBC ç‰ˆæœ¬å¤ªä½<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œå»ºè®®ä¸‹è½½ musl ç‰ˆæœ¬</p><div class="language-txt line-numbers-mode" data-ext="txt" data-title="txt"><pre class="language-txt"><code>lib64/libc.so.6: version `GLIBC_2.28&#39; not found (required by ./alist)  
#æˆ–è€…
accept: function not implemented
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ä½ çœ‹åˆ° <code>start server@0.0.0.0:5244</code> çš„è¾“å‡ºï¼Œä¹‹åæ²¡æœ‰æŠ¥é”™ï¼Œè¯´æ˜æ“ä½œæˆåŠŸã€‚ ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ä¼šè¾“å‡ºåˆå§‹å¯†ç ã€‚ç¨‹åºé»˜è®¤ç›‘å¬ 5244 ç«¯å£ã€‚ ç°åœ¨æ‰“å¼€ <code>http://ip:5244</code> å¯ä»¥çœ‹åˆ°ç™»å½•é¡µé¢ï¼ŒWebDAV è¯·å‚é˜… <a href="https://alist.nn.ci/zh/guide/webdav.html" target="_blank" rel="noopener noreferrer">WebDav<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><h2 id="æ‰‹åŠ¨è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#æ‰‹åŠ¨è¿è¡Œ"><span><a href="https://alist.nn.ci/zh/guide/install/manual.html#%E6%89%8B%E5%8A%A8%E8%BF%90%E8%A1%8C" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>æ‰‹åŠ¨è¿è¡Œ</strong></span></a></h2><p>v3.25.0ä»¥ä¸Šç‰ˆæœ¬å°†å¯†ç æ”¹æˆåŠ å¯†æ–¹å¼å­˜å‚¨çš„hashå€¼ï¼Œæ— æ³•ç›´æ¥åç®—å‡ºå¯†ç ï¼Œå¦‚æœå¿˜è®°äº†å¯†ç åªèƒ½é€šè¿‡é‡æ–° <strong><code>éšæœºç”Ÿæˆ</code></strong> æˆ–è€… <strong><code>æ‰‹åŠ¨è®¾ç½®</code></strong></p><p>Linux</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># è§£å‹ä¸‹è½½çš„æ–‡ä»¶ï¼Œå¾—åˆ°å¯æ‰§è¡Œæ–‡ä»¶ï¼š</span>
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> alist-xxxx.tar.gz
<span class="token comment"># æˆäºˆç¨‹åºæ‰§è¡Œæƒé™ï¼š</span>
<span class="token function">chmod</span> +x alist
<span class="token comment"># è¿è¡Œç¨‹åº</span>
./alist server

<span class="token comment"># è·å¾—ç®¡ç†å‘˜ä¿¡æ¯ ä»¥ä¸‹ä¸¤ä¸ªä¸åŒç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬ä¹Ÿæœ‰éšæœºç”Ÿæˆå’Œæ‰‹åŠ¨è®¾ç½®</span>
<span class="token comment"># ä½äºv3.25.0ç‰ˆæœ¬</span>
./alist admin

<span class="token comment"># é«˜äºv3.25.0ç‰ˆæœ¬</span>
<span class="token comment"># éšæœºç”Ÿæˆä¸€ä¸ªå¯†ç </span>
./alist admin random
<span class="token comment"># æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªå¯†ç  `NEW_PASSWORD`æ˜¯æŒ‡ä½ éœ€è¦è®¾ç½®çš„å¯†ç </span>
./alist admin <span class="token builtin class-name">set</span> NEW_PASSWORD
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å®ˆæŠ¤è¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#å®ˆæŠ¤è¿›ç¨‹"><span><a href="https://alist.nn.ci/zh/guide/install/manual.html#%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>å®ˆæŠ¤è¿›ç¨‹</strong></span></a></h2><p>Linux</p><p>ä½¿ç”¨ä»»æ„æ–¹å¼ç¼–è¾‘ <code>/usr/lib/systemd/system/alist.service</code> å¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œå…¶ä¸­ path_alist ä¸º AList æ‰€åœ¨çš„è·¯å¾„</p><div class="language-ini line-numbers-mode" data-ext="ini" data-title="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Description</span><span class="token punctuation">=</span><span class="token value attr-value">alist</span>
<span class="token key attr-name">After</span><span class="token punctuation">=</span><span class="token value attr-value">network.target</span>
 
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Service</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Type</span><span class="token punctuation">=</span><span class="token value attr-value">simple</span>
<span class="token key attr-name">WorkingDirectory</span><span class="token punctuation">=</span><span class="token value attr-value">path_alist</span>
<span class="token key attr-name">ExecStart</span><span class="token punctuation">=</span><span class="token value attr-value">path_alist/alist server</span>
<span class="token key attr-name">Restart</span><span class="token punctuation">=</span><span class="token value attr-value">on-failure</span>
 
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Install</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">WantedBy</span><span class="token punctuation">=</span><span class="token value attr-value">multi-user.target</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œæ‰§è¡Œ <code>systemctl daemon-reload</code> é‡è½½é…ç½®ï¼Œç°åœ¨ä½ å¯ä»¥ä½¿ç”¨è¿™äº›å‘½ä»¤æ¥ç®¡ç†ç¨‹åºï¼š</p><ul><li>å¯åŠ¨: <code>systemctl start alist</code></li><li>å…³é—­: <code>systemctl stop alist</code></li><li>é…ç½®å¼€æœºè‡ªå¯: <code>systemctl enable alist</code></li><li>å–æ¶ˆå¼€æœºè‡ªå¯: <code>systemctl disable alist</code></li><li>çŠ¶æ€: <code>systemctl status alist</code></li><li>é‡å¯: <code>systemctl restart alist</code></li></ul><p>å®ˆæŠ¤è¿›ç¨‹ä¸é…ç½®? <a href="https://www.bilibili.com/video/BV1rF41197Qv?t=187.0" target="_blank" rel="noopener noreferrer"><strong>è§†é¢‘æ•™ç¨‹</strong>open in new window<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ç›¸å…³ä¿¡æ¯</p><p>å¯¹äºæ‰€æœ‰å¹³å°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥é™é»˜å¯åŠ¨ã€åœæ­¢å’Œé‡æ–°å¯åŠ¨ã€‚ ï¼ˆv3.4.0 åŠæ›´é«˜ç‰ˆæœ¬ï¼‰</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># æºå¸¦`--force-bin-dir`å‚æ•°å¯åŠ¨æœåŠ¡</span>
alist start
<span class="token comment"># é€šè¿‡pidåœæ­¢æœåŠ¡</span>
alist stop
<span class="token comment"># é€šè¿‡pidé‡å¯æœåŠ¡</span>
alist restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¦‚ä½•æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•æ›´æ–°"><span><a href="https://alist.nn.ci/zh/guide/install/manual.html#%E5%A6%82%E4%BD%95%E6%9B%B4%E6%96%B0" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>å¦‚ä½•æ›´æ–°</strong></span></a></h2><p>ä¸‹è½½æ–°ç‰ˆAlistï¼ŒæŠŠä¹‹å‰çš„æ›¿æ¢äº†å³å¯ã€‚</p><ul><li>å¯åŠ¨: <code>systemctl start alist</code></li><li>å…³é—­: <code>systemctl stop alist</code></li><li>çŠ¶æ€: <code>systemctl status alist</code></li><li>é‡å¯: <code>systemctl restart alist</code></li></ul><h2 id="è·å–å¯†ç -1" tabindex="-1"><a class="header-anchor" href="#è·å–å¯†ç -1"><span><a href="https://alist.nn.ci/zh/guide/install/manual.html#%E8%8E%B7%E5%8F%96%E5%AF%86%E7%A0%81" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>è·å–å¯†ç </strong></span></a></h2><p>éœ€è¦è¿›å…¥è„šæœ¬å®‰è£…AListçš„ç›®å½•æ–‡ä»¶å¤¹å…§æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><h4 id="ä½äºv3-25-0ç‰ˆæœ¬-1" tabindex="-1"><a class="header-anchor" href="#ä½äºv3-25-0ç‰ˆæœ¬-1"><span><a href="https://alist.nn.ci/zh/guide/install/manual.html#%E4%BD%8E%E4%BA%8Ev3-25-0%E7%89%88%E6%9C%AC" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä½äºv3.25.0ç‰ˆæœ¬</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>./alist admin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="é«˜äºv3-25-0ç‰ˆæœ¬-1" tabindex="-1"><a class="header-anchor" href="#é«˜äºv3-25-0ç‰ˆæœ¬-1"><span><a href="https://alist.nn.ci/zh/guide/install/manual.html#%E9%AB%98%E4%BA%8Ev3-25-0%E7%89%88%E6%9C%AC" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>é«˜äºv3.25.0ç‰ˆæœ¬</span></a></h4><p>3.25.0ä»¥ä¸Šç‰ˆæœ¬å°†å¯†ç æ”¹æˆåŠ å¯†æ–¹å¼å­˜å‚¨çš„hashå€¼ï¼Œæ— æ³•ç›´æ¥åç®—å‡ºå¯†ç ï¼Œå¦‚æœå¿˜è®°äº†å¯†ç åªèƒ½é€šè¿‡é‡æ–° <strong><code>éšæœºç”Ÿæˆ</code></strong> æˆ–è€… <strong><code>æ‰‹åŠ¨è®¾ç½®</code></strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># éšæœºç”Ÿæˆä¸€ä¸ªå¯†ç </span>
./alist admin random
<span class="token comment"># æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªå¯†ç ,`NEW_PASSWORD`æ˜¯æŒ‡ä½ éœ€è¦è®¾ç½®çš„å¯†ç </span>
./alist admin <span class="token builtin class-name">set</span> NEW_PASSWORD
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="ä½¿ç”¨-docker" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-docker"><span>ä½¿ç”¨ Docker</span></a></h1><h4 id="ä½äºv3-25-0ç‰ˆæœ¬-2" tabindex="-1"><a class="header-anchor" href="#ä½äºv3-25-0ç‰ˆæœ¬-2"><span><strong>ä½äºv3.25.0ç‰ˆæœ¬</strong></span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> alist ./alist admin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="é«˜äºv3-25-0ç‰ˆæœ¬-2" tabindex="-1"><a class="header-anchor" href="#é«˜äºv3-25-0ç‰ˆæœ¬-2"><span><a href="https://alist.nn.ci/zh/guide/install/docker.html#%E9%AB%98%E4%BA%8Ev3-25-0%E7%89%88%E6%9C%AC" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>é«˜äºv3.25.0ç‰ˆæœ¬</strong></span></a></h4><p>3.25.0ä»¥ä¸Šç‰ˆæœ¬å°†å¯†ç æ”¹æˆåŠ å¯†æ–¹å¼å­˜å‚¨çš„hashå€¼ï¼Œæ— æ³•ç›´æ¥åç®—å‡ºå¯†ç ï¼Œå¦‚æœå¿˜è®°äº†å¯†ç åªèƒ½é€šè¿‡é‡æ–° <strong><code>éšæœºç”Ÿæˆ</code></strong> æˆ–è€… <strong><code>æ‰‹åŠ¨è®¾ç½®</code></strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># éšæœºç”Ÿæˆä¸€ä¸ªå¯†ç </span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> alist ./alist admin random
<span class="token comment"># æ‰‹åŠ¨è®¾ç½®ä¸€ä¸ªå¯†ç ,`NEW_PASSWORD`æ˜¯æŒ‡ä½ éœ€è¦è®¾ç½®çš„å¯†ç </span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> alist ./alist admin <span class="token builtin class-name">set</span> NEW_PASSWORD
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å‘è¡Œç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#å‘è¡Œç‰ˆæœ¬"><span><a href="https://alist.nn.ci/zh/guide/install/docker.html#%E5%8F%91%E8%A1%8C%E7%89%88%E6%9C%AC" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>å‘è¡Œç‰ˆæœ¬</strong></span></a></h2><h5 id="docker-cli" tabindex="-1"><a class="header-anchor" href="#docker-cli"><span><a href="https://alist.nn.ci/zh/guide/install/docker.html#docker-cli" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>docker-cli</strong></span></a></h5><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--restart</span><span class="token operator">=</span>unless-stopped <span class="token parameter variable">-v</span> /etc/alist:/opt/alist/data <span class="token parameter variable">-p</span> <span class="token number">5244</span>:5244 <span class="token parameter variable">-e</span> <span class="token assign-left variable">PUID</span><span class="token operator">=</span><span class="token number">0</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">PGID</span><span class="token operator">=</span><span class="token number">0</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">UMASK</span><span class="token operator">=</span>022 <span class="token parameter variable">--name</span><span class="token operator">=</span><span class="token string">&quot;alist&quot;</span> xhofe/alist:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="docker-compose" tabindex="-1"><a class="header-anchor" href="#docker-compose"><span><a href="https://alist.nn.ci/zh/guide/install/docker.html#docker-compose" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>docker-compose</strong></span></a></h5><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.3&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
    <span class="token key atrule">alist</span><span class="token punctuation">:</span>
        <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">&#39;xhofe/alist:latest&#39;</span>
        <span class="token key atrule">container_name</span><span class="token punctuation">:</span> alist
        <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token string">&#39;/etc/alist:/opt/alist/data&#39;</span>
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token string">&#39;5244:5244&#39;</span>
        <span class="token key atrule">environment</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> PUID=0
            <span class="token punctuation">-</span> PGID=0
            <span class="token punctuation">-</span> UMASK=022
        <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœåŠ¡è¿è¡Œä¹‹åï¼Œå®¹å™¨é»˜è®¤çš„æ—¶åŒºä¸ºUTCæ—¶åŒºï¼Œå¦‚æœä½ æƒ³æŒ‡å®šå®¹å™¨è¿è¡Œçš„æ—¶åŒºï¼Œåˆ™å¯ä»¥é€šè¿‡ä¼ é€’æ­¤å˜é‡æ¥å®ç°ï¼š<code>-e &quot;TZ=Asia/Shanghai&quot;</code>ã€‚</p><h3 id="ä½¿ç”¨-aria2-ç¦»çº¿ä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-aria2-ç¦»çº¿ä¸‹è½½"><span><a href="https://alist.nn.ci/zh/guide/install/docker.html#%E4%BD%BF%E7%94%A8-aria2-%E7%A6%BB%E7%BA%BF%E4%B8%8B%E8%BD%BD" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>ä½¿ç”¨ aria2 ç¦»çº¿ä¸‹è½½</strong></span></a></h3><p>å¦‚æœä½ æƒ³ä½¿ç”¨aria2ç¦»çº¿ä¸‹è½½ï¼Œæˆ‘ä»¬æ¨èä½ ä½¿ç”¨è¿™ä¸ª<a href="https://hub.docker.com/r/xhofe/alist-aria2" target="_blank" rel="noopener noreferrer">imageopen in new window<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œå®ƒé¢„è£…äº†aria2ã€‚</p><h3 id="å¼€å‘ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#å¼€å‘ç‰ˆæœ¬"><span><a href="https://alist.nn.ci/zh/guide/install/docker.html#%E5%BC%80%E5%8F%91%E7%89%88%E6%9C%AC" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>å¼€å‘ç‰ˆæœ¬</strong></span></a></h3><p>ä»…é€‚ç”¨äº amd64/arm64ã€‚ä¸æ¨èï¼Œè¿™å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œã€‚</p><h5 id="docker-cli-1" tabindex="-1"><a class="header-anchor" href="#docker-cli-1"><span><a href="https://alist.nn.ci/zh/guide/install/docker.html#docker-cli-1" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>docker-cli</strong></span></a></h5><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--restart</span><span class="token operator">=</span>unless-stopped <span class="token parameter variable">-v</span> /etc/alist:/opt/alist/data <span class="token parameter variable">-p</span> <span class="token number">5244</span>:5244 <span class="token parameter variable">-e</span> <span class="token assign-left variable">PUID</span><span class="token operator">=</span><span class="token number">0</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">PGID</span><span class="token operator">=</span><span class="token number">0</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">UMASK</span><span class="token operator">=</span>022 <span class="token parameter variable">--name</span><span class="token operator">=</span><span class="token string">&quot;alist&quot;</span> xhofe/alist:beta
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="docker-compose-1" tabindex="-1"><a class="header-anchor" href="#docker-compose-1"><span><a href="https://alist.nn.ci/zh/guide/install/docker.html#docker-compose-1" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>docker-compose</strong></span></a></h5><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">#åˆ›å»ºä¸€ä¸ªç›®å½•</span>
<span class="token function">mkdir</span> /etc/alist
<span class="token comment">#è¿›å…¥è¯¥ç›®å½•</span>
<span class="token builtin class-name">cd</span> /etc/alist
<span class="token comment">#ä¸‹è½½docker-compose.ymlæ–‡ä»¶</span>
<span class="token function">wget</span> https://alist.nn.ci/docker-compose.yml
<span class="token comment">#è¿è¡Œå®¹å™¨</span>
<span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä½ ä¹Ÿå¯ä»¥è‡ªè¡Œåˆ›å»ºä¸€ä¸ªåŒ…å«ä»¥ä¸‹å†…å®¹çš„<code>docker-compose.yml</code>æ–‡ä»¶</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.3&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
    <span class="token key atrule">alist</span><span class="token punctuation">:</span>
        <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">&#39;xhofe/alist:beta&#39;</span>
        <span class="token key atrule">container_name</span><span class="token punctuation">:</span> alist
        <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token string">&#39;/etc/alist:/opt/alist/data&#39;</span>
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token string">&#39;5244:5244&#39;</span>
        <span class="token key atrule">environment</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> PUID=0
            <span class="token punctuation">-</span> PGID=0
            <span class="token punctuation">-</span> UMASK=022
        <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç”¨æˆ·-ç»„æ ‡è¯†ç¬¦" tabindex="-1"><a class="header-anchor" href="#ç”¨æˆ·-ç»„æ ‡è¯†ç¬¦"><span><strong>ç”¨æˆ·/ç»„æ ‡è¯†ç¬¦</strong></span></a></h3><p>å½“ä½¿ç”¨å·ï¼ˆ<code>-v</code> æ ‡å¿—ï¼‰æƒé™é—®é¢˜æ—¶ï¼Œä¸»æœºæ“ä½œç³»ç»Ÿå’Œå®¹å™¨ä¹‹é—´å¯èƒ½ä¼šå‡ºç°æƒé™é—®é¢˜ï¼Œæˆ‘ä»¬é€šè¿‡å…è®¸æ‚¨æŒ‡å®šç”¨æˆ· <code>PUID</code> å’Œç»„ <code>PGID</code> æ¥é¿å…æ­¤é—®é¢˜ã€‚</p><p>ç¡®ä¿ä¸»æœºä¸Šçš„ä»»ä½•å·ç›®å½•éƒ½å½’æ‚¨æŒ‡å®šçš„åŒä¸€ç”¨æˆ·æ‰€æœ‰ï¼Œä»»ä½•æƒé™é—®é¢˜éƒ½ä¼šåƒé­”æœ¯ä¸€æ ·æ¶ˆå¤±ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>PUID=1000</code> å’Œ <code>PGID=1000</code>ï¼Œè¦æ‰¾åˆ°ä½ çš„ä½¿ç”¨ <code>id user</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>  $ <span class="token function">id</span> username
    <span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>dockeruser<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>dockergroup<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>dockergroup<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ‰‹åŠ¨ç¼–è¯‘-docker-é•œåƒ" tabindex="-1"><a class="header-anchor" href="#æ‰‹åŠ¨ç¼–è¯‘-docker-é•œåƒ"><span><a href="https://alist.nn.ci/zh/guide/install/docker.html#%E6%89%8B%E5%8A%A8%E7%BC%96%E8%AF%91-docker-%E9%95%9C%E5%83%8F" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>æ‰‹åŠ¨ç¼–è¯‘ Docker é•œåƒ</strong></span></a></h3><p>å®‰è£… dockerï¼Œå…‹éš†ä»“åº“åè¿›å…¥ä»“åº“æ ¹ç›®å½•ï¼Œæ— éœ€å…¶ä»–å‡†å¤‡</p><p>basic</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> build <span class="token parameter variable">-t</span> xhofe/alist:latest <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Dockerfileæ„å»º</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>
FROM alpine:edge
WORKDIR /opt/alist/

RUN apk update &amp;&amp; \
    apk upgrade --no-cache &amp;&amp; \
    apk add --no-cache bash ca-certificates su-exec tzdata wget; \
    rm -rf /var/cache/apk/*

RUN wget https://github.com/alist-org/alist/releases/latest/download/alist-linux-musl-amd64.tar.gz \
&amp;&amp; tar -zxvf alist-linux-musl-amd64.tar.gz &amp;&amp; rm -rf alist-linux-musl-amd64.tar.gz &amp;&amp; chmod +x alist

ENV PUID=0 PGID=0 UMASK=022
VOLUME /opt/alist/data/
EXPOSE 5244 5245
CMD [&quot;/opt/alist/alist&quot;, &quot;server&quot;]

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>WORKDIR /anmiao<br> ADD ./alist-linux-amd64.tar.gz /anmiao</p><p>EXPOSE 5244</p><p>CMD [&quot;/anmiao/alist&quot;, &quot;server&quot;]</p><p>docker build -t dkyg/alist:latest .</p><p>docker builder prune</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>
FROM alpine:edge
WORKDIR /opt/alist/
RUN apk update &amp;&amp; \
    apk upgrade --no-cache &amp;&amp; \
    apk add --no-cache bash ca-certificates su-exec tzdata; \
    rm -rf /var/cache/apk/*
ADD ./alist-linux-musl-amd64.tar.gz /opt/alist/
ENV PUID=0 PGID=0 UMASK=022
VOLUME /opt/alist/data/
EXPOSE 5244 5245
CMD [&quot;/opt/alist/alist&quot;, &quot;server&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä»–</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>FROM python:3.12.4-alpine

ENV TZ=Asia/Shanghai

RUN apk update \
    &amp;&amp; apk upgrade \
    &amp;&amp; apk add bash \
    &amp;&amp; rm -rf \
        /tep \
        /var/lib/apt/lists \
        /var/tmp

COPY requirements.txt requirements.txt

RUN pip install --upgrade pip \
    &amp;&amp; pip install --no-cache-dir -r requirements.txt \
    &amp;&amp; rm -rf requirements.txt

COPY app /app

VOLUME [&quot;/config&quot;, &quot;/logs&quot;, &quot;/media&quot;]
CMD python /app/main.py

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="ä»æºç è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#ä»æºç è¿è¡Œ"><span>ä»æºç è¿è¡Œ</span></a></h1><h2 id="ç¯å¢ƒå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒå‡†å¤‡"><span><strong>ç¯å¢ƒå‡†å¤‡</strong></span></a></h2><p>é¦–å…ˆï¼Œä½ éœ€è¦ä¸€ä¸ªæœ‰<code>git</code>ï¼Œ<code>nodejs</code>ï¼Œ<code>pnpm</code>ï¼Œ<code>golang&gt;=1.20</code>ï¼Œ<code>gcc</code>çš„ç¯å¢ƒ</p><h2 id="æ„å»ºå‰ç«¯" tabindex="-1"><a class="header-anchor" href="#æ„å»ºå‰ç«¯"><span><a href="https://alist.nn.ci/zh/guide/install/source.html#%E6%9E%84%E5%BB%BA%E5%89%8D%E7%AB%AF" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>æ„å»ºå‰ç«¯</strong></span></a></h2><p>ä½¿ç”¨ <code>git clone --recurse-submodules https://github.com/alist-org/alist-web.git</code> å…‹éš†å‰ç«¯ ï¼Œæ‰§è¡Œ <code>pnpm install &amp;&amp; pnpm build</code> å¾—åˆ° dist ç›®å½•ä¸‹çš„ç›®æ ‡æ–‡ä»¶</p><h2 id="æ„å»ºåç«¯" tabindex="-1"><a class="header-anchor" href="#æ„å»ºåç«¯"><span><a href="https://alist.nn.ci/zh/guide/install/source.html#%E6%9E%84%E5%BB%BA%E5%90%8E%E7%AB%AF" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><strong>æ„å»ºåç«¯</strong></span></a></h2><p>å…‹éš† <a href="https://github.com/alist-org/alist" target="_blank" rel="noopener noreferrer">https://github.com/alist-org/alistopen in new window<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ï¼Œå°†ä¸Šä¸€æ­¥çš„ <code>dist</code> ç›®å½•å¤åˆ¶åˆ°é¡¹ç›®ä¸‹çš„ <code>public</code> ç›®å½•ä¸‹ï¼Œç„¶åæ‰§è¡Œï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token assign-left variable">appName</span><span class="token operator">=</span><span class="token string">&quot;alist&quot;</span>
<span class="token assign-left variable">builtAt</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">&#39;%F %T %z&#39;</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">goVersion</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>go version <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/go version //&#39;</span><span class="token variable">)</span></span>
<span class="token assign-left variable">gitAuthor</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> show <span class="token parameter variable">-s</span> <span class="token parameter variable">--format</span><span class="token operator">=</span><span class="token string">&#39;format:%aN &lt;%ae&gt;&#39;</span> HEAD<span class="token variable">)</span></span>
<span class="token assign-left variable">gitCommit</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> log <span class="token parameter variable">--pretty</span><span class="token operator">=</span>format:<span class="token string">&quot;%h&quot;</span> <span class="token parameter variable">-1</span><span class="token variable">)</span></span>
<span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> describe <span class="token parameter variable">--long</span> <span class="token parameter variable">--tags</span> <span class="token parameter variable">--dirty</span> <span class="token parameter variable">--always</span><span class="token variable">)</span></span>
<span class="token assign-left variable">webVersion</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- <span class="token parameter variable">-t1</span> <span class="token parameter variable">-T2</span> <span class="token string">&quot;https://api.github.com/repos/alist-org/alist-web/releases/latest&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;tag_name&quot;</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;:&quot;</span> <span class="token string">&#39;{print $2}&#39;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/\&quot;//g;s/,//g;s/ //g&#39;</span><span class="token variable">)</span></span>
<span class="token assign-left variable">ldflags</span><span class="token operator">=</span><span class="token string">&quot;\
-w -s \
-X &#39;github.com/alist-org/alist/v3/internal/conf.BuiltAt=<span class="token variable">$builtAt</span>&#39; \
-X &#39;github.com/alist-org/alist/v3/internal/conf.GoVersion=<span class="token variable">$goVersion</span>&#39; \
-X &#39;github.com/alist-org/alist/v3/internal/conf.GitAuthor=<span class="token variable">$gitAuthor</span>&#39; \
-X &#39;github.com/alist-org/alist/v3/internal/conf.GitCommit=<span class="token variable">$gitCommit</span>&#39; \
-X &#39;github.com/alist-org/alist/v3/internal/conf.Version=<span class="token variable">$version</span>&#39; \
-X &#39;github.com/alist-org/alist/v3/internal/conf.WebVersion=<span class="token variable">$webVersion</span>&#39; \
&quot;</span>
go build <span class="token parameter variable">-ldflags</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$ldflags</span>&quot;</span> <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="åå‘ä»£ç†" tabindex="-1"><a class="header-anchor" href="#åå‘ä»£ç†"><span>åå‘ä»£ç†</span></a></h1><h2 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx"><span><strong>nginx</strong></span></a></h2><p>åœ¨ç½‘ç«™é…ç½®æ–‡ä»¶çš„ server å­—æ®µä¸­æ·»åŠ </p><div class="language-conf line-numbers-mode" data-ext="conf" data-title="conf"><pre class="language-conf"><code>location / {
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Proto $scheme;
  proxy_set_header Host $http_host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header Range $http_range;
	proxy_set_header If-Range $http_if_range;
  proxy_redirect off;
  proxy_pass http://127.0.0.1:5244;
  # the max size of file to upload
  client_max_body_size 20000m;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœéœ€è¦ä½¿ç”¨HTTP/3ï¼Œéœ€è¦å°†å¯¹åº”<code>HOST</code>è¡Œä¿®æ”¹ä¸ºï¼š</p><div class="language-conf line-numbers-mode" data-ext="conf" data-title="conf"><pre class="language-conf"><code>proxy_set_header Host $host:$server_port;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ ·ä¿®æ”¹åçš„é…ç½®åŒæ—¶ä¹Ÿå¯ä»¥å…¼å®¹HTTP/2åŠæ›´ä½ç‰ˆæœ¬çš„è¯·æ±‚ã€‚</p><h3 id="å¦‚ä½•å¯¹å­ç›®å½•è¿›è¡Œåå‘ä»£ç†" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å¯¹å­ç›®å½•è¿›è¡Œåå‘ä»£ç†"><span><strong>å¦‚ä½•å¯¹å­ç›®å½•è¿›è¡Œåå‘ä»£ç†ï¼Ÿ</strong></span></a></h3><p>ä½¿ç”¨ nginx åå‘ä»£ç†åˆ° <a href="https://nn.ci/alist" target="_blank" rel="noopener noreferrer">https://nn.ci/alistopen in new window<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> çš„ç¤ºä¾‹ï¼š</p><ul><li>æ­£å¸¸å®‰è£…</li><li>å°† <a href="https://alist.nn.ci/zh/config/configuration.html#site_url" target="_blank" rel="noopener noreferrer">site_url<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è®¾ç½®ä¸º <code>https://nn.ci/alist</code> æˆ–è€…ä»…<code>/alist</code>, ç„¶åé‡å¯alist</li><li>åœ¨ nginx ä¸­æ·»åŠ åå‘ä»£ç†é…ç½®</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx" data-title="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /alist/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-Proto <span class="token variable">$scheme</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$http_host</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> Range <span class="token variable">$http_range</span></span><span class="token punctuation">;</span>
	  <span class="token directive"><span class="token keyword">proxy_set_header</span> If-Range <span class="token variable">$http_if_range</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_redirect</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:5244/alist</span><span class="token punctuation">;</span>
    <span class="token comment"># the max size of file to upload</span>
    <span class="token directive"><span class="token keyword">client_max_body_size</span> <span class="token number">20000m</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è‡ªåŠ¨æ¸å˜èƒŒæ™¯" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨æ¸å˜èƒŒæ™¯"><span>è‡ªåŠ¨æ¸å˜èƒŒæ™¯<a href="https://alist-doc.nn.ci/docs/style#%E8%87%AA%E5%8A%A8%E6%B8%90%E5%8F%98%E8%83%8C%E6%99%AF" target="_blank" rel="noopener noreferrer"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token comment">&lt;!--æ”¾åœ¨è‡ªå®šä¹‰å¤´éƒ¨--&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token comment">/*æ¸å˜èƒŒæ™¯CSS */</span>
<span class="token selector">#canvas-basic</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> -999<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 <span class="token selector">.hope-ui-light</span> <span class="token punctuation">{</span>
<span class="token property">--hope-colors-background</span><span class="token punctuation">:</span> #f7f8fa00 <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.hope-ui-dark</span> <span class="token punctuation">{</span>
<span class="token property">--hope-colors-background</span><span class="token punctuation">:</span> #f7f8fa00 <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>


<span class="token comment">&lt;!--æ”¾åœ¨è‡ªå®šä¹‰body--&gt;</span>

<span class="token comment">&lt;!-- æ¸å˜èƒŒæ™¯åˆå§‹åŒ– --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvas-basic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://npm.elemecdn.com/granim@2.0.0/dist/granim.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">var</span> granimInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Granim</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token string">&#39;#canvas-basic&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">direction</span><span class="token operator">:</span> <span class="token string">&#39;left-right&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isPausedWhenNotInView</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">states</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;default-state&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">gradients</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">[</span><span class="token string">&#39;#a18cd1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;#fbc2eb&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                 <span class="token punctuation">[</span><span class="token string">&#39;#fff1eb&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;#ace0f9&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                 <span class="token punctuation">[</span><span class="token string">&#39;#d4fc79&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;#96e6a1&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                 <span class="token punctuation">[</span><span class="token string">&#39;#a1c4fd&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;#c2e9fb&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                 <span class="token punctuation">[</span><span class="token string">&#39;#a8edea&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;#fed6e3&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                 <span class="token punctuation">[</span><span class="token string">&#39;#9890e3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;#b1f4cf&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                 <span class="token punctuation">[</span><span class="token string">&#39;#a1c4fd&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;#c2e9fb&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                 <span class="token punctuation">[</span><span class="token string">&#39;#fff1eb&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;#ace0f9&#39;</span><span class="token punctuation">]</span>
           
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="nginx-1" tabindex="-1"><a class="header-anchor" href="#nginx-1"><span>Nginx</span></a></h2><details><summary>ã€æŸ¥çœ‹è¯¦æƒ…ã€‘</summary><p>CentOS 7 gccç¼–è¯‘å®‰è£…Nginx</p><h5 id="å®‰è£…æ‰€éœ€ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#å®‰è£…æ‰€éœ€ç¯å¢ƒ"><span><strong>å®‰è£…æ‰€éœ€ç¯å¢ƒ</strong></span></a></h5><p>Nginxæ˜¯Cè¯­è¨€å¼€å‘ï¼Œå»ºè®®åœ¨Linuxä¸Šè¿è¡Œï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥å®‰è£…Windowsç‰ˆæœ¬ï¼Œæœ¬ç¯‡åˆ™ä½¿ç”¨Linux CentOS 7ä½œä¸ºå®‰è£…ç¯å¢ƒã€‚</p><h5 id="ä¸€ã€gccå®‰è£…" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€gccå®‰è£…"><span><strong>ä¸€ã€gccå®‰è£…</strong></span></a></h5><p>å®‰è£… nginx éœ€è¦å…ˆå°†å®˜ç½‘ä¸‹è½½çš„æºç è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘ä¾èµ– gcc ç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰ gcc ç¯å¢ƒï¼Œåˆ™éœ€è¦å®‰è£…ï¼š</p><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>yum install gcc gcc-c++
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="äºŒã€pcre-pcre-devel-å®‰è£…" tabindex="-1"><a class="header-anchor" href="#äºŒã€pcre-pcre-devel-å®‰è£…"><span><strong>äºŒã€pcre pcre-devel å®‰è£…</strong></span></a></h5><p>PCRE(Perl Compatible Regular Expressions) æ˜¯ä¸€ä¸ªPerlåº“ï¼ŒåŒ…æ‹¬ perl å…¼å®¹çš„æ­£åˆ™è¡¨è¾¾å¼åº“ã€‚Nginxçš„http æ¨¡å—ä½¿ç”¨pcreæ¥è§£ææ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‰€ä»¥éœ€è¦åœ¨Linuxä¸Šå®‰è£…pcreåº“ï¼Œpcre-devel æ˜¯ä½¿ç”¨pcreå¼€å‘çš„ä¸€ä¸ªäºŒæ¬¡å¼€å‘åº“ã€‚Nginxä¹Ÿéœ€è¦æ­¤åº“ã€‚å‘½ä»¤ï¼š</p><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>yum install -y pcre pcre-devel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="ä¸‰ã€-zlibå®‰è£…" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€-zlibå®‰è£…"><span><strong>ä¸‰ã€ zlibå®‰è£…</strong></span></a></h5><p>zlib åº“æä¾›äº†å¾ˆå¤šç§å‹ç¼©å’Œè§£å‹ç¼©çš„æ–¹å¼ï¼Œ Nginxä½¿ç”¨zlibå¯¹httpåŒ…çš„å†…å®¹è¿›è¡Œgzipï¼Œæ‰€ä»¥éœ€è¦åœ¨Linux Centos 7ä¸Šå®‰è£…zlibåº“ã€‚</p><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>yum install -y zlib zlib-devel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="å››ã€opensslå®‰è£…" tabindex="-1"><a class="header-anchor" href="#å››ã€opensslå®‰è£…"><span><strong>å››ã€opensslå®‰è£…</strong></span></a></h5><p>OpenSSLæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“ï¼Œå›Šæ‹¬ä¸»è¦çš„å¯†ç ç®—æ³•ã€å¸¸ç”¨çš„å¯†é’¥å’Œè¯ä¹¦å°è£…ç®¡ç†åŠŸèƒ½åŠSSLåè®®ï¼Œå¹¶æä¾›ä¸°å¯Œçš„åº”ç”¨ç¨‹åºä¾›æµ‹è¯•æˆ–å…¶å®ƒç›®çš„ä½¿ç”¨ã€‚ Nginxä¸ä»…æ”¯æŒhttpåè®®ï¼Œè¿˜æ”¯æŒhttpsï¼ˆå³åœ¨sslåè®®ä¸Šä¼ è¾“httpï¼‰ï¼Œæ‰€ä»¥éœ€è¦åœ¨Linux Centos 7å®‰è£…OpenSSLåº“ã€‚</p><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>yum install -y openssl openssl-devel



# è§£å‹åˆ°å½“å‰ç›®å½•
tar zxvf openssl-1.0.2k.tar.gz
# è¿›å…¥ç›®å½•
cd openssl-1.0.2k
# é…ç½®ç¼–è¯‘ï¼ŒæŒ‡å®šå®‰è£…ç›®å½•
./config
# è¿›è¡Œç¼–è¯‘å¹¶å®‰è£…
make &amp;&amp; make install
å¤‡ä»½ä¹‹å‰ OpenSSL ç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿æ¢å¤ã€‚



echo &quot;/usr/local/lib64/&quot; &gt;&gt; /etc/ld.so.conf

ldconfig

mv /usr/bin/openssl /usr/bin/openssl.old

ln -s /usr/local/bin/openssl /usr/bin/openssl

openssl version -a



æ–¹æ³•2

cd openssl-1.0.2k

#./config -fPIC --prefix=/usr/local/openssl/ enable-shared

./config shared zlib

make

make install

mv /usr/bin/openssl /usr/bin/openssl.bak

mv /usr/include/openssl /usr/include/openssl.bak

ln -s /usr/local/openssl/bin/openssl /usr/bin/openssl

ln -s /usr/local/openssl/include/openssl /usr/include/openssl

ln -s /usr/local/lib64/libssl.so.1.1 /usr/lib64/libssl.so.1.1

ln -s /usr/local/lib64/libcrypto.so.1.1 /usr/lib64/libcrypto.so.1.1

echo â€œ/usr/local/openssl/libâ€ &gt;&gt; /etc/ld.so.conf

ldconfig -v

5ã€æŸ¥çœ‹æ˜¯å¦å‡çº§æˆåŠŸ[root@localhost ~]# openssl version -a

è§£å†³ openssl: error while loading shared libraries: libssl.so.1.1: cannot open shared object file: No such file or directoryé”™è¯¯é—®é¢˜

åœ¨Centos7ä¸Šç¼–è¯‘å®‰è£…opensslåï¼Œè¿è¡Œopenssl versionå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š

openssl: error while loading shared libraries: libssl.so.1.1: cannot open shared object file: No such file or directory

è¿™æ˜¯ç”±äºopensslåº“çš„ä½ç½®ä¸æ­£ç¡®é€ æˆçš„ã€‚è§£å†³æ–¹æ³•æ˜¯åœ¨rootç”¨æˆ·ä¸‹æ‰§è¡Œï¼šln -s /usr/local/lib64/libssl.so.1.1 /usr/lib64/libssl.so.1.1

ln -s /usr/local/lib64/libcrypto.so.1.1 /usr/lib64/libcrypto.so.1.1


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="äº”ã€ä¸‹è½½nginx" tabindex="-1"><a class="header-anchor" href="#äº”ã€ä¸‹è½½nginx"><span><strong>äº”ã€ä¸‹è½½Nginx</strong></span></a></h5><p><strong>1. å®˜ç½‘ä¸‹è½½</strong> ç›´æ¥ä¸‹è½½.tar.gzå®‰è£…åŒ…ï¼Œåœ°å€ï¼š<a href="https://nginx.org/en/download.html" target="_blank" rel="noopener noreferrer">https://nginx.org/en/download.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><hr><p><strong>2. wgetä¸‹è½½</strong> ä½¿ç”¨wgetå‘½ä»¤ä¸‹è½½ï¼ˆæ¨èï¼‰ã€‚ç¡®ä¿ç³»ç»Ÿå·²ç»å®‰è£…äº†wgetï¼Œå¦‚æœæ²¡æœ‰å®‰è£…ï¼Œæ‰§è¡Œ yum install wget å®‰è£…ã€‚æˆ‘ä¸‹è½½çš„æ˜¯1.26.0ç‰ˆæœ¬ï¼Œè¿™ä¸ªæ˜¯ç›®å‰çš„ç¨³å®šç‰ˆã€‚</p><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>wget -c https://nginx.org/download/nginx-1.26.0.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><p><strong>3. è§£å‹</strong> ä¾ç„¶æ˜¯ç›´æ¥å‘½ä»¤ï¼š</p><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>tar -zxvf nginx-1.26.0.tar.gz
cd nginx-1.26.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>4. é…ç½®</strong> å…¶å®åœ¨ nginx-1.26.0 ç‰ˆæœ¬ä¸­ä½ å°±ä¸éœ€è¦å»é…ç½®ç›¸å…³ä¸œè¥¿ï¼Œé»˜è®¤å°±å¯ä»¥äº†ã€‚å½“ç„¶ï¼Œå¦‚æœä½ è¦è‡ªå·±é…ç½®ç›®å½•ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><ul><li>4.1 ä½¿ç”¨é»˜è®¤é…ç½®</li></ul><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code># Ubuntuä¸­nginxå®‰è£…
sudo apt update
sudo apt install build-essential
sudo apt install libpcre3 libpcre3-dev
sudo apt install zlib1g zlib1g-dev
sudo apt install openssl libssl-dev

./configure

./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module

##opensslæºè§£å‹è·¯å¾„

./configure --prefix=/usr/local/nginx --with-http_stub_status_module  --with-http_ssl_module --with-openssl=/root/openssl-1.1.1s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>4.2 è‡ªå®šä¹‰é…ç½®ï¼ˆä¸æ¨èï¼‰</li></ul><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>./configure \
--prefix=/usr/local/nginx \
--conf-path=/usr/local/nginx/conf/nginx.conf \
--pid-path=/usr/local/nginx/conf/nginx.pid \
--lock-path=/var/lock/nginx.lock \
--error-log-path=/var/log/nginx/error.log \
--http-log-path=/var/log/nginx/access.log \
--with-http_gzip_static_module \
--http-client-body-temp-path=/var/temp/nginx/client \
--http-proxy-temp-path=/var/temp/nginx/proxy \
--http-fastcgi-temp-path=/var/temp/nginx/fastcgi \
--http-uwsgi-temp-path=/var/temp/nginx/uwsgi \
--http-scgi-temp-path=/var/temp/nginx/scgi
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**æ³¨ï¼š**å°†ä¸´æ—¶æ–‡ä»¶ç›®å½•æŒ‡å®šä¸º/var/temp/nginxï¼Œéœ€è¦åœ¨/varä¸‹åˆ›å»ºtempåŠnginxç›®å½•</p><hr><p><strong>5. ç¼–è¯‘å®‰è£…</strong></p><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>make
make install
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>6. æŸ¥æ‰¾å®‰è£…è·¯å¾„</strong></p><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>whereis nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><p><strong>7. å¯åŠ¨ã€åœæ­¢nginx</strong></p><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>cd /usr/local/nginx/sbin/
./nginx 
./nginx -s stop
./nginx -s quit
./nginx -s reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code># æ³¨ï¼šå¯åŠ¨æ—¶æŠ¥80ç«¯å£è¢«å ç”¨:
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è§£å†³åŠæ³•ï¼šå®‰è£…net-toolåŒ…ï¼šyum install net-tools</p><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>./nginx -s quit # æ­¤æ–¹å¼åœæ­¢æ­¥éª¤æ˜¯å¾…nginxè¿›ç¨‹å¤„ç†ä»»åŠ¡å®Œæ¯•è¿›è¡Œåœæ­¢ã€‚
./nginx -s stop # æ­¤æ–¹å¼ç›¸å½“äºå…ˆæŸ¥å‡ºnginxè¿›ç¨‹idå†ä½¿ç”¨killå‘½ä»¤å¼ºåˆ¶æ€æ‰è¿›ç¨‹ã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>8. æŸ¥è¯¢nginxè¿›ç¨‹</strong></p><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>ps aux|grep nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><p><strong>9. é‡å¯ nginx</strong></p><ul><li>9.1 å…ˆåœæ­¢å†å¯åŠ¨ï¼ˆæ¨èï¼‰ï¼š å¯¹ nginx è¿›è¡Œé‡å¯ç›¸å½“äºå…ˆåœæ­¢å†å¯åŠ¨ï¼Œå³å…ˆæ‰§è¡Œåœæ­¢å‘½ä»¤å†æ‰§è¡Œå¯åŠ¨å‘½ä»¤ã€‚å¦‚ä¸‹ï¼š</li></ul><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>./nginx -s quit
./nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>9.2 é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼š å½“ ngin xçš„é…ç½®æ–‡ä»¶ nginx.conf ä¿®æ”¹åï¼Œè¦æƒ³è®©é…ç½®ç”Ÿæ•ˆéœ€è¦é‡å¯ nginxï¼Œä½¿ç”¨-s reloadä¸ç”¨å…ˆåœæ­¢ ngin xå†å¯åŠ¨ nginx å³å¯å°†é…ç½®ä¿¡æ¯åœ¨ nginx ä¸­ç”Ÿæ•ˆï¼Œå¦‚ä¸‹ï¼š</li></ul><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>./nginx -s reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><p><strong>10. å¯åŠ¨æˆåŠŸ</strong> åœ¨æµè§ˆå™¨å¯ä»¥çœ‹åˆ°è¿™æ ·çš„é¡µé¢ï¼Œå³è¡¨ç¤ºå¯åŠ¨æˆåŠŸ</p><hr><h5 id="å…­ã€å¼€æœºè‡ªå¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#å…­ã€å¼€æœºè‡ªå¯åŠ¨"><span><strong>å…­ã€å¼€æœºè‡ªå¯åŠ¨</strong></span></a></h5><p>å³åœ¨rc.localå¢åŠ å¯åŠ¨ä»£ç å°±å¯ä»¥äº†ã€‚</p><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>vi /etc/rc.local
# å¢åŠ å¦‚ä¸‹ä»£ç 
/usr/local/nginx/sbin/nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¾ç½®æ‰§è¡Œæƒé™ï¼š</p><p>ä»£ç è¯­è¨€ï¼šjavascript</p><p>å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>chmod 755 rc.local
nginx-rclocal.png
å…³é—­é˜²ç«å¢™
systemctl stop firewalld.service
systemctl disable firewalld.service
æ”¾è¡Œç«¯å£
firewall-cmd --zone=public --add-port=80/tcp --permanent

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="nginx-systemctlå¯åŠ¨é…ç½®" tabindex="-1"><a class="header-anchor" href="#nginx-systemctlå¯åŠ¨é…ç½®"><span><strong>nginx systemctlå¯åŠ¨é…ç½®</strong></span></a></h4><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>vi /usr/lib/systemd/system/nginx.service

chmod +x /usr/lib/systemd/system/nginx.service

ï¼ˆ1ï¼‰è¿›å…¥ cd /usr/local/nginx/conf/ ç›®å½•ï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶nginx.conf ï¼›
ï¼ˆ2ï¼‰åœ¨é…ç½®æ–‡ä»¶ä¸­æœ‰ä¸ªæ³¨é‡Šçš„åœ°æ–¹ï¼š #pid        logs/nginx.pid;ã€€ã€€ã€€
ï¼ˆ3ï¼‰å°†æ³¨é‡Šæ”¾å¼€ï¼Œå¹¶ä¿®æ”¹ä¸ºï¼špid    /usr/local/nginx/logs/nginx.pid;


[Unit]
Description=The nginx HTTP and reverse proxy server
After=syslog.target network.target remote-fs.target nss-lookup.target

[Service]
Type=forking
PIDFile=/usr/local/nginx/logs/nginx.pid  
ExecStartPre=/usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf
ExecStart=/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf
ExecReload=/usr/local/nginx/sbin/nginx -s reload
ExecStop=/usr/local/nginx/sbin/nginx -s stop
ExecQuit=/usr/local/nginx/sbin/nginx -s quit
PrivateTmp=true

[Install]
WantedBy=multi-user.target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.å¯åŠ¨æœåŠ¡</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>åœ¨å¯åŠ¨æœåŠ¡ä¹‹å‰ï¼Œéœ€è¦å…ˆé‡è½½systemctlå‘½ä»¤
systemctl daemon-reload

ps -ef | grep nginx

systemctl start nginx.service
systemctl stop nginx.service
systemctl restart nginx.service

systemctl status nginx.service      nginxçŠ¶æ€

systemctl enable nginx.service      å¼€æœºè‡ªå¯


å¤‡ä»½nginx conf

cp /usr/local/nginx/conf/nginx.conf /usr/local/nginx/conf/nginx.conf.bak2

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¸è½½-nginx" tabindex="-1"><a class="header-anchor" href="#å¸è½½-nginx"><span><strong>å¸è½½ nginx</strong></span></a></h4><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>#å¸è½½nginx
whereis nginx

find / -name nginx

rm -rf /usr/local/nginx /usr/local/sbin/nginx

yum remove nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>NGINXé»˜è®¤é…ç½®</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>
#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;


events {
    worker_connections  1024;
}


http {
    include       mime.types;
   
    default_type  application/octet-stream;

    #log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;
    #                  &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;
    #                  &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;

    #access_log  logs/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;
    include /usr/local/nginx/conf/conf.d/*.conf;

    server {
        listen       80;
        server_name  localhost;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location / {
            root   html;
            index  index.html index.htm;
        }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

        # proxy the PHP scripts to Apache listening on 127.0.0.1:80
        #
        #location ~ \.php$ {
        #    proxy_pass   http://127.0.0.1;
        #}

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        #location ~ \.php$ {
        #    root           html;
        #    fastcgi_pass   127.0.0.1:9000;
        #    fastcgi_index  index.php;
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
        #    include        fastcgi_params;
        #}

        # deny access to .htaccess files, if Apache&#39;s document root
        # concurs with nginx&#39;s one
        #
        #location ~ /\.ht {
        #    deny  all;
        #}
    }


    # another virtual host using mix of IP-, name-, and port-based configuration
    #
    #server {
    #    listen       8000;
    #    listen       somename:8080;
    #    server_name  somename  alias  another.alias;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}


    # HTTPS server
    #
    #server {
    #    listen       443 ssl;
    #    server_name  localhost;

    #    ssl_certificate      cert.pem;
    #    ssl_certificate_key  cert.key;

    #    ssl_session_cache    shared:SSL:1m;
    #    ssl_session_timeout  5m;

    #    ssl_ciphers  HIGH:!aNULL:!MD5;
    #    ssl_prefer_server_ciphers  on;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}

}



</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="openwrtæ‰©å®¹overlay" tabindex="-1"><a class="header-anchor" href="#openwrtæ‰©å®¹overlay"><span>OpenWrtæ‰©å®¹overlay</span></a></h2><details><summary>ã€æŸ¥çœ‹è¯¦æƒ…ã€‘</summary><p>æ­¤æ•™ç¨‹æ ¹æ®E-SIRå¤§ç¥è§†é¢‘æ•´ç†ï¼Œä¾µåˆ <br> overlayåˆ†åŒºæ‰©å®¹æ•™ç¨‹<br> ï¼ˆæ­¤æ•™ç¨‹ä»…é€‚ç”¨äºE-SIRå¤§ç¥åˆ¶ä½œçš„å›ºä»¶ ï¼‰</p><p>sshè¿æ¥ä½ çš„X86-openwrtè·¯ç”±å™¨</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>Microsoft Windows [ç‰ˆæœ¬ 10.0.19041.450]

(c) 2021 Microsoft Corporation. ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚

 

PS C:\Users\ASUS&gt; ssh root@192.168.5.1

root@192.168.5.1&#39;s password:

BusyBox v1.31.1 () built-in shell (ash)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>| |.-----.-----.-----.| | | |.----.| |_</p><p>| - || _ | -__| || | | || _|| _|</p><p>|___<strong><strong>|| <strong>|</strong><em><strong>|</strong>|</em><em>||</em>_____<strong>||</strong>| |</strong></strong>|</p><pre><code>      |__| W I R E L E S S   F R E E D O M
</code></pre><hr><p>OpenWrt GDQ v1.1[2021] | by &quot;eSir PlayGround&quot;</p><hr><p><strong>root@OpenWrt:~# lsblk</strong></p><p>NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</p><p>loop0 7:0 0 51.4M 0 loop /mnt/loop0</p><p>sda 8:0 0 7.5G 0 disk</p><p>â”œâ”€sda1 8:1 0 16M 0 part /mnt/sda1</p><p>â””â”€sda2 8:2 0 300M 0 part /rom</p><p><strong>root@OpenWrt:~# cfdisk</strong></p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>å¦‚æœæ²¡æœ‰cfdiskå‘½ä»¤ï¼Œåˆ™ä½¿ç”¨ opkg install cfdisk å®‰è£…ï¼‰

å› ä¸ºæˆ‘çš„ç³»ç»Ÿä½¿ç”¨çš„æ˜¯å›ºæ€ç¡¬ç›˜ï¼Œæ‰€ä»¥é»˜è®¤æŒ‚è½½ç‚¹ä¸æ˜¯ä»/dev/sdaå¼€å§‹çš„ï¼Œç›´æ¥ä½¿ç”¨cfdiskå‘½ä»¤ä¼šæŠ¥é”™ï¼š

cfdisk: cannot open /dev/sda: No such file or directory 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>  æ‰€ä»¥ç”¨ fdisk -l å‘½ä»¤ï¼ŒæŸ¥çœ‹è‡ªå·±ç¡¬ç›˜æŒ‚è½½ç‚¹

fdisk -l

Disk /dev/nvme0n1: 931.51 GiB, 1000204886016 bytes, 1953525168 sectors

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æ¯”å¦‚æˆ‘è¿™é‡Œï¼ŒæŸ¥çœ‹è‡ªå·±ç¡¬ç›˜æŒ‚è½½ç‚¹ä¸º /dev/nvme0n1 åï¼Œ</p><pre><code>  ä½¿ç”¨ cfdisk /dev/nvme0n1 è¿›å…¥ä¸‹å›¾åˆ†åŒºå·¥å…·ç•Œé¢ 
</code></pre><p>ï¼ˆä¸Šä¸‹é”®æ§åˆ¶ä¸Šé¢çš„å…‰æ ‡ç§»åŠ¨ï¼Œå·¦å³é”®æ§åˆ¶ä¸‹é¢çš„å…‰æ ‡ç§»åŠ¨ï¼‰</p><p>å…‰æ ‡ä¸Šä¸‹ç§»åŠ¨è‡³Free spaceï¼Œå·¦å³ç§»è‡³Newï¼Œå›è½¦<br> å¤§å°è‡ªå·±é€‰æ‹©1Gæˆ–è€…é»˜è®¤ä¸å˜<br> å›è½¦<br> å…‰æ ‡ç§»è‡³Writeï¼Œå›è½¦<br> è¾“å…¥yesï¼Œå›è½¦<br> å…‰æ ‡å·¦å³ç§»åŠ¨è‡³Writeåå›è½¦ï¼Œç„¶åç§»åŠ¨è‡³Quitå›è½¦é€€å‡º</p><p>Syncing disks.</p><p><strong>root@OpenWrt:~# mkfs.ext4 /dev/sda3</strong></p><p>mke2fs 1.45.6 (20-Mar-2020)</p><p>Creating filesystem with 1101056 4k blocks and 275264 inodes</p><p>Filesystem UUID: a686d37a-c77f-4a12-8e05-222ace47ae00</p><p>Superblock backups stored on blocks:</p><pre><code>    32768, 98304, 163840, 229376, 294912, 819200, 884736
</code></pre><p>Allocating group tables: done</p><p>Writing inode tables: done</p><p>Creating journal (16384 blocks): done</p><p>Writing superblocks and filesystem accounting information: done</p><p><strong>root@OpenWrt:~# mount /dev/sda3 /mnt/sda3</strong></p><p>root@OpenWrt:~# <strong>ls /mnt/sda3</strong></p><p>lost+found</p><p>root@OpenWrt:~# <strong>cd /overlay</strong></p><p>root@OpenWrt:/overlay# <strong>ls</strong></p><p>upper work</p><p>root@OpenWrt:/overlay# <strong>cd upper</strong></p><p>root@OpenWrt:/overlay/upper# <strong>ls</strong></p><p>boot etc home htdocs lib mnt opt root run usr www</p><p>root@OpenWrt:/overlay/upper# <strong>cd ..</strong></p><p>root@OpenWrt:/overlay# <strong>cd ..</strong></p><p><em><em>root@OpenWrt:/# cp -r /overlay/</em> /mnt/sda3</em>*</p><p>root@OpenWrt:/# <strong>ls /mnt/sda3</strong></p><p><strong>lost+found upper work</strong></p><p>ç®€åŒ–æ–¹æ³•</p><p>è¿›å…¥è·¯ç”±å™¨åå°ï¼Œç³»ç»Ÿ-æŒ‚è½½ç‚¹<br> ç‚¹â€œæ·»åŠ â€<br> é€‰ä¸­â€œå¯ç”¨æ­¤æŒ‚è½½ç‚¹&quot;, æ ¹æ®UUIDæŒ‡å®šä½ å‰é¢æ–°å»ºåˆ†åŒºå¤§å°çš„UUIDï¼ŒæŒ‚è½½ç‚¹ä¸ºâ€ä½œä¸ºå¤–éƒ¨overlayä½¿ç”¨â€œï¼Œç„¶åä¿å­˜&amp;åº”ç”¨<br> ä¿å­˜å¹¶åº”ç”¨åï¼Œé‡å¯ä½ çš„è®¾å¤‡ï¼Œå†æ‰“å¼€ç½‘é¡µï¼Œå°±å¯ä»¥çœ‹åˆ°è½¯ä»¶åŒ…ç©ºé—´å˜å¤§äº†</p><p>æœ¬æ–‡ç¦æ­¢è½¬è½½æˆ–æ‘˜ç¼– ä½œè€…ï¼šå¾çˆ±æ¢ç´¢ <a href="https://www.bilibili.com/read/cv9304632/" target="_blank" rel="noopener noreferrer">https://www.bilibili.com/read/cv9304632/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å‡ºå¤„ï¼šbilibili</p></details><h2 id="iptables" tabindex="-1"><a class="header-anchor" href="#iptables"><span>iptables</span></a></h2><details><summary>ã€æŸ¥çœ‹è¯¦æƒ…ã€‘</summary><h1 id="iptables-1" tabindex="-1"><a class="header-anchor" href="#iptables-1"><span>iptables</span></a></h1><p>Linuxä¸Šå¸¸ç”¨çš„é˜²ç«å¢™è½¯ä»¶</p><h2 id="è¡¥å……è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#è¡¥å……è¯´æ˜"><span>è¡¥å……è¯´æ˜</span></a></h2><p><strong>iptableså‘½ä»¤</strong> æ˜¯Linuxä¸Šå¸¸ç”¨çš„é˜²ç«å¢™è½¯ä»¶ï¼Œæ˜¯netfilteré¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚å¯ä»¥ç›´æ¥é…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¸å¤šå‰ç«¯å’Œå›¾å½¢ç•Œé¢é…ç½®ã€‚</p><ul><li>è¡¥å……è¯´æ˜ <ul><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E8%AF%AD%E6%B3%95" target="_blank" rel="noopener noreferrer">è¯­æ³•<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E9%80%89%E9%A1%B9" target="_blank" rel="noopener noreferrer">é€‰é¡¹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></li><li>åŸºæœ¬å‚æ•° <ul><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E5%91%BD%E4%BB%A4%E9%80%89%E9%A1%B9%E8%BE%93%E5%85%A5%E9%A1%BA%E5%BA%8F" target="_blank" rel="noopener noreferrer">å‘½ä»¤é€‰é¡¹è¾“å…¥é¡ºåº<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6" target="_blank" rel="noopener noreferrer">å·¥ä½œæœºåˆ¶<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E7%AD%96%E7%95%A5" target="_blank" rel="noopener noreferrer">é˜²ç«å¢™çš„ç­–ç•¥<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E7%AD%96%E7%95%A5-1" target="_blank" rel="noopener noreferrer">é˜²ç«å¢™çš„ç­–ç•¥<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>å®ä¾‹ <ul><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E6%B8%85%E7%A9%BA%E5%BD%93%E5%89%8D%E7%9A%84%E6%89%80%E6%9C%89%E8%A7%84%E5%88%99%E5%92%8C%E8%AE%A1%E6%95%B0" target="_blank" rel="noopener noreferrer">æ¸…ç©ºå½“å‰çš„æ‰€æœ‰è§„åˆ™å’Œè®¡æ•°<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E9%85%8D%E7%BD%AE%E5%85%81%E8%AE%B8ssh%E7%AB%AF%E5%8F%A3%E8%BF%9E%E6%8E%A5" target="_blank" rel="noopener noreferrer">é…ç½®å…è®¸sshç«¯å£è¿æ¥<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E5%85%81%E8%AE%B8%E6%9C%AC%E5%9C%B0%E5%9B%9E%E7%8E%AF%E5%9C%B0%E5%9D%80%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">å…è®¸æœ¬åœ°å›ç¯åœ°å€å¯ä»¥æ­£å¸¸ä½¿ç”¨<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E7%9A%84%E8%A7%84%E5%88%99" target="_blank" rel="noopener noreferrer">è®¾ç½®é»˜è®¤çš„è§„åˆ™<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E9%85%8D%E7%BD%AE%E7%99%BD%E5%90%8D%E5%8D%95" target="_blank" rel="noopener noreferrer">é…ç½®ç™½åå•<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E5%BC%80%E5%90%AF%E7%9B%B8%E5%BA%94%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8F%A3" target="_blank" rel="noopener noreferrer">å¼€å¯ç›¸åº”çš„æœåŠ¡ç«¯å£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E4%BF%9D%E5%AD%98%E8%A7%84%E5%88%99%E5%88%B0%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD" target="_blank" rel="noopener noreferrer">ä¿å­˜è§„åˆ™åˆ°é…ç½®æ–‡ä»¶ä¸­<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E5%88%97%E5%87%BA%E5%B7%B2%E8%AE%BE%E7%BD%AE%E7%9A%84%E8%A7%84%E5%88%99" target="_blank" rel="noopener noreferrer">åˆ—å‡ºå·²è®¾ç½®çš„è§„åˆ™<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E6%B8%85%E9%99%A4%E5%B7%B2%E6%9C%89%E8%A7%84%E5%88%99" target="_blank" rel="noopener noreferrer">æ¸…é™¤å·²æœ‰è§„åˆ™<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E5%88%A0%E9%99%A4%E5%B7%B2%E6%B7%BB%E5%8A%A0%E7%9A%84%E8%A7%84%E5%88%99" target="_blank" rel="noopener noreferrer">åˆ é™¤å·²æ·»åŠ çš„è§„åˆ™<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E5%BC%80%E6%94%BE%E6%8C%87%E5%AE%9A%E7%9A%84%E7%AB%AF%E5%8F%A3" target="_blank" rel="noopener noreferrer">å¼€æ”¾æŒ‡å®šçš„ç«¯å£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E5%B1%8F%E8%94%BDip" target="_blank" rel="noopener noreferrer">å±è”½IP<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE%E5%8C%85%E5%87%BA%E5%8E%BB%E7%9A%84%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3" target="_blank" rel="noopener noreferrer">æŒ‡å®šæ•°æ®åŒ…å‡ºå»çš„ç½‘ç»œæ¥å£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E6%9F%A5%E7%9C%8B%E5%B7%B2%E6%B7%BB%E5%8A%A0%E7%9A%84%E8%A7%84%E5%88%99" target="_blank" rel="noopener noreferrer">æŸ¥çœ‹å·²æ·»åŠ çš„è§„åˆ™<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E5%90%AF%E5%8A%A8%E7%BD%91%E7%BB%9C%E8%BD%AC%E5%8F%91%E8%A7%84%E5%88%99" target="_blank" rel="noopener noreferrer">å¯åŠ¨ç½‘ç»œè½¬å‘è§„åˆ™<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84" target="_blank" rel="noopener noreferrer">ç«¯å£æ˜ å°„<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8D" target="_blank" rel="noopener noreferrer">å­—ç¬¦ä¸²åŒ¹é…<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E9%98%BB%E6%AD%A2windows%E8%A0%95%E8%99%AB%E7%9A%84%E6%94%BB%E5%87%BB" target="_blank" rel="noopener noreferrer">é˜»æ­¢Windowsè •è™«çš„æ”»å‡»<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://wangchujiang.com/linux-command/c/iptables.html#%E9%98%B2%E6%AD%A2syn%E6%B4%AA%E6%B0%B4%E6%94%BB%E5%87%BB" target="_blank" rel="noopener noreferrer">é˜²æ­¢SYNæ´ªæ°´æ”»å‡»<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></li></ul></li></ul><h3 id="è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#è¯­æ³•"><span>è¯­æ³•</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables<span class="token punctuation">(</span>é€‰é¡¹<span class="token punctuation">)</span><span class="token punctuation">(</span>å‚æ•°<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#é€‰é¡¹"><span>é€‰é¡¹</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>-t, <span class="token parameter variable">--table</span> table å¯¹æŒ‡å®šçš„è¡¨ table è¿›è¡Œæ“ä½œï¼Œ table å¿…é¡»æ˜¯ rawï¼Œ natï¼Œfilterï¼Œmangle ä¸­çš„ä¸€ä¸ªã€‚å¦‚æœä¸æŒ‡å®šæ­¤é€‰é¡¹ï¼Œé»˜è®¤çš„æ˜¯ filter è¡¨ã€‚

<span class="token comment"># é€šç”¨åŒ¹é…ï¼šæºåœ°å€ç›®æ ‡åœ°å€çš„åŒ¹é…</span>
-pï¼šæŒ‡å®šè¦åŒ¹é…çš„æ•°æ®åŒ…åè®®ç±»å‹ï¼›
-s, <span class="token parameter variable">--source</span> <span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span> address<span class="token punctuation">[</span>/mask<span class="token punctuation">]</span> ï¼šæŠŠæŒ‡å®šçš„ä¸€ä¸ªï¼ä¸€ç»„åœ°å€ä½œä¸ºæºåœ°å€ï¼ŒæŒ‰æ­¤è§„åˆ™è¿›è¡Œè¿‡æ»¤ã€‚å½“åé¢æ²¡æœ‰ mask æ—¶ï¼Œaddress æ˜¯ä¸€ä¸ªåœ°å€ï¼Œæ¯”å¦‚ï¼š192.168.1.1ï¼›å½“ mask æŒ‡å®šæ—¶ï¼Œå¯ä»¥è¡¨ç¤ºä¸€ç»„èŒƒå›´å†…çš„åœ°å€ï¼Œæ¯”å¦‚ï¼š192.168.1.0/255.255.255.0ã€‚
-d, <span class="token parameter variable">--destination</span> <span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span> address<span class="token punctuation">[</span>/mask<span class="token punctuation">]</span> ï¼šåœ°å€æ ¼å¼åŒä¸Šï¼Œä½†è¿™é‡Œæ˜¯æŒ‡å®šåœ°å€ä¸ºç›®çš„åœ°å€ï¼ŒæŒ‰æ­¤è¿›è¡Œè¿‡æ»¤ã€‚
-i, --in-interface <span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>ç½‘ç»œæ¥å£name<span class="token operator">&gt;</span> ï¼šæŒ‡å®šæ•°æ®åŒ…çš„æ¥è‡ªæ¥è‡ªç½‘ç»œæ¥å£ï¼Œæ¯”å¦‚æœ€å¸¸è§çš„ eth0 ã€‚æ³¨æ„ï¼šå®ƒåªå¯¹ INPUTï¼ŒFORWARDï¼ŒPREROUTING è¿™ä¸‰ä¸ªé“¾èµ·ä½œç”¨ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šæ­¤é€‰é¡¹ï¼Œ è¯´æ˜å¯ä»¥æ¥è‡ªä»»ä½•ä¸€ä¸ªç½‘ç»œæ¥å£ã€‚åŒå‰é¢ç±»ä¼¼ï¼Œ<span class="token string">&quot;!&quot;</span> è¡¨ç¤ºå–åã€‚
-o, --out-interface <span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>ç½‘ç»œæ¥å£name<span class="token operator">&gt;</span> ï¼šæŒ‡å®šæ•°æ®åŒ…å‡ºå»çš„ç½‘ç»œæ¥å£ã€‚åªå¯¹ OUTPUTï¼ŒFORWARDï¼ŒPOSTROUTING ä¸‰ä¸ªé“¾èµ·ä½œç”¨ã€‚

<span class="token comment"># æŸ¥çœ‹ç®¡ç†å‘½ä»¤</span>
-L, <span class="token parameter variable">--list</span> <span class="token punctuation">[</span>chain<span class="token punctuation">]</span> åˆ—å‡ºé“¾ chain ä¸Šé¢çš„æ‰€æœ‰è§„åˆ™ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šé“¾ï¼Œåˆ—å‡ºè¡¨ä¸Šæ‰€æœ‰é“¾çš„æ‰€æœ‰è§„åˆ™ã€‚

<span class="token comment"># è§„åˆ™ç®¡ç†å‘½ä»¤</span>
-A, <span class="token parameter variable">--append</span> chain rule-specification åœ¨æŒ‡å®šé“¾ chain çš„æœ«å°¾æ’å…¥æŒ‡å®šçš„è§„åˆ™ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ¡è§„åˆ™ä¼šè¢«æ”¾åˆ°æœ€åï¼Œæœ€åæ‰ä¼šè¢«æ‰§è¡Œã€‚è§„åˆ™æ˜¯ç”±åé¢çš„åŒ¹é…æ¥æŒ‡å®šã€‚
-I, <span class="token parameter variable">--insert</span> chain <span class="token punctuation">[</span>rulenum<span class="token punctuation">]</span> rule-specification åœ¨é“¾ chain ä¸­çš„æŒ‡å®šä½ç½®æ’å…¥ä¸€æ¡æˆ–å¤šæ¡è§„åˆ™ã€‚å¦‚æœæŒ‡å®šçš„è§„åˆ™å·æ˜¯1ï¼Œåˆ™åœ¨é“¾çš„å¤´éƒ¨æ’å…¥ã€‚è¿™ä¹Ÿæ˜¯é»˜è®¤çš„æƒ…å†µï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šè§„åˆ™å·ã€‚
-D, <span class="token parameter variable">--delete</span> chain rule-specification -D, <span class="token parameter variable">--delete</span> chain rulenum åœ¨æŒ‡å®šçš„é“¾ chain ä¸­åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šè§„åˆ™ã€‚
<span class="token parameter variable">-R</span> numï¼šReplaysæ›¿æ¢/ä¿®æ”¹ç¬¬å‡ æ¡è§„åˆ™

<span class="token comment"># é“¾ç®¡ç†å‘½ä»¤ï¼ˆè¿™éƒ½æ˜¯ç«‹å³ç”Ÿæ•ˆçš„ï¼‰</span>
-P, <span class="token parameter variable">--policy</span> chain target ï¼šä¸ºæŒ‡å®šçš„é“¾ chain è®¾ç½®ç­–ç•¥ targetã€‚æ³¨æ„ï¼Œåªæœ‰å†…ç½®çš„é“¾æ‰å…è®¸æœ‰ç­–ç•¥ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„æ˜¯ä¸å…è®¸çš„ã€‚
-F, <span class="token parameter variable">--flush</span> <span class="token punctuation">[</span>chain<span class="token punctuation">]</span> æ¸…ç©ºæŒ‡å®šé“¾ chain ä¸Šé¢çš„æ‰€æœ‰è§„åˆ™ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šé“¾ï¼Œæ¸…ç©ºè¯¥è¡¨ä¸Šæ‰€æœ‰é“¾çš„æ‰€æœ‰è§„åˆ™ã€‚
-N, --new-chain chain ç”¨æŒ‡å®šçš„åå­—åˆ›å»ºä¸€ä¸ªæ–°çš„é“¾ã€‚
-X, --delete-chain <span class="token punctuation">[</span>chain<span class="token punctuation">]</span> ï¼šåˆ é™¤æŒ‡å®šçš„é“¾ï¼Œè¿™ä¸ªé“¾å¿…é¡»æ²¡æœ‰è¢«å…¶å®ƒä»»ä½•è§„åˆ™å¼•ç”¨ï¼Œè€Œä¸”è¿™æ¡ä¸Šå¿…é¡»æ²¡æœ‰ä»»ä½•è§„åˆ™ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šé“¾åï¼Œåˆ™ä¼šåˆ é™¤è¯¥è¡¨ä¸­æ‰€æœ‰éå†…ç½®çš„é“¾ã€‚
-E, --rename-chain old-chain new-chain ï¼šç”¨æŒ‡å®šçš„æ–°åå­—å»é‡å‘½åæŒ‡å®šçš„é“¾ã€‚è¿™å¹¶ä¸ä¼šå¯¹é“¾å†…éƒ¨é€ æˆä»»ä½•å½±å“ã€‚
-Z, <span class="token parameter variable">--zero</span> <span class="token punctuation">[</span>chain<span class="token punctuation">]</span> ï¼šæŠŠæŒ‡å®šé“¾ï¼Œæˆ–è€…è¡¨ä¸­çš„æ‰€æœ‰é“¾ä¸Šçš„æ‰€æœ‰è®¡æ•°å™¨æ¸…é›¶ã€‚

-j, <span class="token parameter variable">--jump</span> target <span class="token operator">&lt;</span>æŒ‡å®šç›®æ ‡<span class="token operator">&gt;</span> ï¼šå³æ»¡è¶³æŸæ¡ä»¶æ—¶è¯¥æ‰§è¡Œä»€ä¹ˆæ ·çš„åŠ¨ä½œã€‚target å¯ä»¥æ˜¯å†…ç½®çš„ç›®æ ‡ï¼Œæ¯”å¦‚ ACCEPTï¼Œä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„é“¾ã€‚
-hï¼šæ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ï¼›
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åŸºæœ¬å‚æ•°" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬å‚æ•°"><span>åŸºæœ¬å‚æ•°</span></a></h2><table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-P</td><td>è®¾ç½®é»˜è®¤ç­–ç•¥:iptables -P INPUT (DROP</td></tr><tr><td>-F</td><td>æ¸…ç©ºè§„åˆ™é“¾</td></tr><tr><td>-L</td><td>æŸ¥çœ‹è§„åˆ™é“¾</td></tr><tr><td>-A</td><td>åœ¨è§„åˆ™é“¾çš„æœ«å°¾åŠ å…¥æ–°è§„åˆ™</td></tr><tr><td>-I</td><td>num åœ¨è§„åˆ™é“¾çš„å¤´éƒ¨åŠ å…¥æ–°è§„åˆ™</td></tr><tr><td>-D</td><td>num åˆ é™¤æŸä¸€æ¡è§„åˆ™</td></tr><tr><td>-s</td><td>åŒ¹é…æ¥æºåœ°å€IP/MASKï¼ŒåŠ å¹å·&quot;!&quot;è¡¨ç¤ºé™¤è¿™ä¸ªIPå¤–ã€‚</td></tr><tr><td>-d</td><td>åŒ¹é…ç›®æ ‡åœ°å€</td></tr><tr><td>-i</td><td>ç½‘å¡åç§° åŒ¹é…ä»è¿™å—ç½‘å¡æµå…¥çš„æ•°æ®</td></tr><tr><td>-o</td><td>ç½‘å¡åç§° åŒ¹é…ä»è¿™å—ç½‘å¡æµå‡ºçš„æ•°æ®</td></tr><tr><td>-p</td><td>åŒ¹é…åè®®,å¦‚tcp,udp,icmp</td></tr><tr><td>--dport num</td><td>åŒ¹é…ç›®æ ‡ç«¯å£å·</td></tr><tr><td>--sport num</td><td>åŒ¹é…æ¥æºç«¯å£å·</td></tr></tbody></table><h4 id="å‘½ä»¤é€‰é¡¹è¾“å…¥é¡ºåº" tabindex="-1"><a class="header-anchor" href="#å‘½ä»¤é€‰é¡¹è¾“å…¥é¡ºåº"><span>å‘½ä»¤é€‰é¡¹è¾“å…¥é¡ºåº</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-t</span> è¡¨å <span class="token operator">&lt;</span>-A/I/D/R<span class="token operator">&gt;</span> è§„åˆ™é“¾å <span class="token punctuation">[</span>è§„åˆ™å·<span class="token punctuation">]</span> <span class="token operator">&lt;</span>-i/o ç½‘å¡å<span class="token operator">&gt;</span> <span class="token parameter variable">-p</span> åè®®å <span class="token operator">&lt;</span>-s æºIP/æºå­ç½‘<span class="token operator">&gt;</span> <span class="token parameter variable">--sport</span> æºç«¯å£ <span class="token operator">&lt;</span>-d ç›®æ ‡IP/ç›®æ ‡å­ç½‘<span class="token operator">&gt;</span> <span class="token parameter variable">--dport</span> ç›®æ ‡ç«¯å£ <span class="token parameter variable">-j</span> åŠ¨ä½œ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="å·¥ä½œæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#å·¥ä½œæœºåˆ¶"><span>å·¥ä½œæœºåˆ¶</span></a></h4><p>è§„åˆ™é“¾ååŒ…æ‹¬(ä¹Ÿè¢«ç§°ä¸ºäº”ä¸ªé’©å­å‡½æ•°ï¼ˆhook functionsï¼‰)ï¼š</p><ul><li><strong>INPUTé“¾</strong> ï¼šå¤„ç†è¾“å…¥æ•°æ®åŒ…ã€‚</li><li><strong>OUTPUTé“¾</strong> ï¼šå¤„ç†è¾“å‡ºæ•°æ®åŒ…ã€‚</li><li><strong>FORWARDé“¾</strong> ï¼šå¤„ç†è½¬å‘æ•°æ®åŒ…ã€‚</li><li><strong>PREROUTINGé“¾</strong> ï¼šç”¨äºç›®æ ‡åœ°å€è½¬æ¢ï¼ˆDNATï¼‰ã€‚</li><li><strong>POSTOUTINGé“¾</strong> ï¼šç”¨äºæºåœ°å€è½¬æ¢ï¼ˆSNATï¼‰ã€‚</li></ul><h4 id="é˜²ç«å¢™çš„ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#é˜²ç«å¢™çš„ç­–ç•¥"><span>é˜²ç«å¢™çš„ç­–ç•¥</span></a></h4><p>é˜²ç«å¢™ç­–ç•¥ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§å«<code>é€š</code>ç­–ç•¥ï¼Œä¸€ç§å«<code>å µ</code>ç­–ç•¥ï¼Œé€šç­–ç•¥ï¼Œé»˜è®¤é—¨æ˜¯å…³ç€çš„ï¼Œå¿…é¡»è¦å®šä¹‰è°èƒ½è¿›ã€‚å µç­–ç•¥åˆ™æ˜¯ï¼Œå¤§é—¨æ˜¯æ´å¼€çš„ï¼Œä½†æ˜¯ä½ å¿…é¡»æœ‰èº«ä»½è®¤è¯ï¼Œå¦åˆ™ä¸èƒ½è¿›ã€‚æ‰€ä»¥æˆ‘ä»¬è¦å®šä¹‰ï¼Œè®©è¿›æ¥çš„è¿›æ¥ï¼Œè®©å‡ºå»çš„å‡ºå»ï¼Œ<code>æ‰€ä»¥é€šï¼Œæ˜¯è¦å…¨é€šï¼Œè€Œå µï¼Œåˆ™æ˜¯è¦é€‰æ‹©</code>ã€‚å½“æˆ‘ä»¬å®šä¹‰çš„ç­–ç•¥çš„æ—¶å€™ï¼Œè¦åˆ†åˆ«å®šä¹‰å¤šæ¡åŠŸèƒ½ï¼Œå…¶ä¸­ï¼šå®šä¹‰æ•°æ®åŒ…ä¸­å…è®¸æˆ–è€…ä¸å…è®¸çš„ç­–ç•¥ï¼Œfilterè¿‡æ»¤çš„åŠŸèƒ½ï¼Œè€Œå®šä¹‰åœ°å€è½¬æ¢çš„åŠŸèƒ½çš„åˆ™æ˜¯naté€‰é¡¹ã€‚ä¸ºäº†è®©è¿™äº›åŠŸèƒ½äº¤æ›¿å·¥ä½œï¼Œæˆ‘ä»¬åˆ¶å®šå‡ºäº†â€œè¡¨â€è¿™ä¸ªå®šä¹‰ï¼Œæ¥å®šä¹‰ã€åŒºåˆ†å„ç§ä¸åŒçš„å·¥ä½œåŠŸèƒ½å’Œå¤„ç†æ–¹å¼ã€‚</p><p>æˆ‘ä»¬ç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šä¸ªåŠŸèƒ½æœ‰3ä¸ªï¼š</p><ol><li>filter å®šä¹‰å…è®¸æˆ–è€…ä¸å…è®¸çš„ï¼Œåªèƒ½åšåœ¨3ä¸ªé“¾ä¸Šï¼šINPUT ï¼ŒFORWARD ï¼ŒOUTPUT</li><li>nat å®šä¹‰åœ°å€è½¬æ¢çš„ï¼Œä¹Ÿåªèƒ½åšåœ¨3ä¸ªé“¾ä¸Šï¼šPREROUTING ï¼ŒOUTPUT ï¼ŒPOSTROUTING</li><li>mangleåŠŸèƒ½:ä¿®æ”¹æŠ¥æ–‡åŸæ•°æ®ï¼Œæ˜¯5ä¸ªé“¾éƒ½å¯ä»¥åšï¼šPREROUTINGï¼ŒINPUTï¼ŒFORWARDï¼ŒOUTPUTï¼ŒPOSTROUTING</li></ol><p>æˆ‘ä»¬ä¿®æ”¹æŠ¥æ–‡åŸæ•°æ®å°±æ˜¯æ¥ä¿®æ”¹TTLçš„ã€‚èƒ½å¤Ÿå®ç°å°†æ•°æ®åŒ…çš„å…ƒæ•°æ®æ‹†å¼€ï¼Œåœ¨é‡Œé¢åšæ ‡è®°/ä¿®æ”¹å†…å®¹çš„ã€‚è€Œé˜²ç«å¢™æ ‡è®°ï¼Œå…¶å®å°±æ˜¯é mangleæ¥å®ç°çš„ã€‚</p><p>å°æ‰©å±•:</p><ul><li>å¯¹äºfilteræ¥è®²ä¸€èˆ¬åªèƒ½åšåœ¨3ä¸ªé“¾ä¸Šï¼šINPUT ï¼ŒFORWARD ï¼ŒOUTPUT</li><li>å¯¹äºnatæ¥è®²ä¸€èˆ¬ä¹Ÿåªèƒ½åšåœ¨3ä¸ªé“¾ä¸Šï¼šPREROUTING ï¼ŒOUTPUT ï¼ŒPOSTROUTING</li><li>è€Œmangleåˆ™æ˜¯5ä¸ªé“¾éƒ½å¯ä»¥åšï¼šPREROUTINGï¼ŒINPUTï¼ŒFORWARDï¼ŒOUTPUTï¼ŒPOSTROUTING</li></ul><p>iptables/netfilterï¼ˆè¿™æ¬¾è½¯ä»¶ï¼‰æ˜¯å·¥ä½œåœ¨ç”¨æˆ·ç©ºé—´çš„ï¼Œå®ƒå¯ä»¥è®©è§„åˆ™è¿›è¡Œç”Ÿæ•ˆçš„ï¼Œæœ¬èº«ä¸æ˜¯ä¸€ç§æœåŠ¡ï¼Œè€Œä¸”è§„åˆ™æ˜¯ç«‹å³ç”Ÿæ•ˆçš„ã€‚è€Œæˆ‘ä»¬iptablesç°åœ¨è¢«åšæˆäº†ä¸€ä¸ªæœåŠ¡ï¼Œå¯ä»¥è¿›è¡Œå¯åŠ¨ï¼Œåœæ­¢çš„ã€‚å¯åŠ¨ï¼Œåˆ™å°†è§„åˆ™ç›´æ¥ç”Ÿæ•ˆï¼Œåœæ­¢ï¼Œåˆ™å°†è§„åˆ™æ’¤é”€ã€‚</p><p>iptablesè¿˜æ”¯æŒè‡ªå·±å®šä¹‰é“¾ã€‚ä½†æ˜¯è‡ªå·±å®šä¹‰çš„é“¾ï¼Œå¿…é¡»æ˜¯è·ŸæŸç§ç‰¹å®šçš„é“¾å…³è”èµ·æ¥çš„ã€‚åœ¨ä¸€ä¸ªå…³å¡è®¾å®šï¼ŒæŒ‡å®šå½“æœ‰æ•°æ®çš„æ—¶å€™ä¸“é—¨å»æ‰¾æŸä¸ªç‰¹å®šçš„é“¾æ¥å¤„ç†ï¼Œå½“é‚£ä¸ªé“¾å¤„ç†å®Œä¹‹åï¼Œå†è¿”å›ã€‚æ¥ç€åœ¨ç‰¹å®šçš„é“¾ä¸­ç»§ç»­æ£€æŸ¥ã€‚</p><p>æ³¨æ„ï¼šè§„åˆ™çš„æ¬¡åºéå¸¸å…³é”®ï¼Œ<code>è°çš„è§„åˆ™è¶Šä¸¥æ ¼ï¼Œåº”è¯¥æ”¾çš„è¶Šé å‰</code>ï¼Œè€Œæ£€æŸ¥è§„åˆ™çš„æ—¶å€™ï¼Œæ˜¯æŒ‰ç…§ä»ä¸Šå¾€ä¸‹çš„æ–¹å¼è¿›è¡Œæ£€æŸ¥çš„ã€‚</p><p>è¡¨ååŒ…æ‹¬ï¼š</p><ul><li><strong>raw</strong> ï¼šé«˜çº§åŠŸèƒ½ï¼Œå¦‚ï¼šç½‘å€è¿‡æ»¤ã€‚</li><li><strong>mangle</strong> ï¼šæ•°æ®åŒ…ä¿®æ”¹ï¼ˆQOSï¼‰ï¼Œç”¨äºå®ç°æœåŠ¡è´¨é‡ã€‚</li><li><strong>nat</strong> ï¼šåœ°å€è½¬æ¢ï¼Œç”¨äºç½‘å…³è·¯ç”±å™¨ã€‚</li><li><strong>filter</strong> ï¼šåŒ…è¿‡æ»¤ï¼Œç”¨äºé˜²ç«å¢™è§„åˆ™ã€‚</li></ul><p>åŠ¨ä½œåŒ…æ‹¬ï¼š</p><ul><li><strong>ACCEPT</strong> ï¼šæ¥æ”¶æ•°æ®åŒ…ã€‚</li><li><strong>DROP</strong> ï¼šä¸¢å¼ƒæ•°æ®åŒ…ã€‚</li><li><strong>REDIRECT</strong> ï¼šé‡å®šå‘ã€æ˜ å°„ã€é€æ˜ä»£ç†ã€‚</li><li><strong>SNAT</strong> ï¼šæºåœ°å€è½¬æ¢ã€‚</li><li><strong>DNAT</strong> ï¼šç›®æ ‡åœ°å€è½¬æ¢ã€‚</li><li><strong>MASQUERADE</strong> ï¼šIPä¼ªè£…ï¼ˆNATï¼‰ï¼Œç”¨äºADSLã€‚</li><li><strong>LOG</strong> ï¼šæ—¥å¿—è®°å½•ã€‚</li><li><strong>SEMARK</strong> : æ·»åŠ SEMARKæ ‡è®°ä»¥ä¾›ç½‘åŸŸå†…å¼ºåˆ¶è®¿é—®æ§åˆ¶ï¼ˆMACï¼‰</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>                             â”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”“
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”ƒ    Network    â”ƒ
 â”‚ table: filter â”‚           â”—â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”›
 â”‚ chain: INPUT  â”‚â—€â”€â”€â”€â”€â”             â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚             â–¼
         â”‚             â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”Œ      â–¼      â”      â”‚   â”‚ table: nat        â”‚
  â”‚local processâ”‚      â”‚   â”‚ chain: PREROUTING â”‚
  â””             â”˜      â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚             â”‚             â”‚
         â–¼             â”‚             â–¼              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…    â”‚     â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…      â”‚table: nat       â”‚
 Routing decision      â””â”€â”€â”€â”€â”€ outing decision â”€â”€â”€â”€â”€â–¶â”‚chain: PREROUTINGâ”‚
â”…â”…â”…â”…â”…â”…â”…â”…â”…â”³â”…â”…â”…â”…â”…â”…â”…â”…â”…          â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                   â”‚
         â–¼                                                   â”‚
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
 â”‚ table: nat    â”‚           â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…â”…               â”‚
 â”‚ chain: OUTPUT â”‚    â”Œâ”€â”€â”€â”€â”€â–¶ outing decision â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â”…â”…â”…â”…â”…â”…â”…â”…â”³â”…â”…â”…â”…â”…â”…â”…â”…
         â”‚            â”‚              â”‚
         â–¼            â”‚              â–¼
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚ table: filter â”‚    â”‚   â”‚ chain: POSTROUTING â”‚
 â”‚ chain: OUTPUT â”œâ”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
                                     â–¼
                             â”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”“
                             â”ƒ    Network    â”ƒ
                             â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#å®ä¾‹"><span>å®ä¾‹</span></a></h3><h4 id="æ¸…ç©ºå½“å‰çš„æ‰€æœ‰è§„åˆ™å’Œè®¡æ•°" tabindex="-1"><a class="header-anchor" href="#æ¸…ç©ºå½“å‰çš„æ‰€æœ‰è§„åˆ™å’Œè®¡æ•°"><span>æ¸…ç©ºå½“å‰çš„æ‰€æœ‰è§„åˆ™å’Œè®¡æ•°</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-F</span>  <span class="token comment"># æ¸…ç©ºæ‰€æœ‰çš„é˜²ç«å¢™è§„åˆ™</span>
iptables <span class="token parameter variable">-X</span>  <span class="token comment"># åˆ é™¤ç”¨æˆ·è‡ªå®šä¹‰çš„ç©ºé“¾</span>
iptables <span class="token parameter variable">-Z</span>  <span class="token comment"># æ¸…ç©ºè®¡æ•°</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é…ç½®å…è®¸sshç«¯å£è¿æ¥" tabindex="-1"><a class="header-anchor" href="#é…ç½®å…è®¸sshç«¯å£è¿æ¥"><span>é…ç½®å…è®¸sshç«¯å£è¿æ¥</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-s</span> <span class="token number">192.168</span>.1.0/24 <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">22</span> <span class="token parameter variable">-j</span> ACCEPT
<span class="token comment"># 22ä¸ºä½ çš„sshç«¯å£ï¼Œ -s 192.168.1.0/24è¡¨ç¤ºå…è®¸è¿™ä¸ªç½‘æ®µçš„æœºå™¨æ¥è¿æ¥ï¼Œå…¶å®ƒç½‘æ®µçš„ipåœ°å€æ˜¯ç™»é™†ä¸äº†ä½ çš„æœºå™¨çš„ã€‚ -j ACCEPTè¡¨ç¤ºæ¥å—è¿™æ ·çš„è¯·æ±‚</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å…è®¸æœ¬åœ°å›ç¯åœ°å€å¯ä»¥æ­£å¸¸ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#å…è®¸æœ¬åœ°å›ç¯åœ°å€å¯ä»¥æ­£å¸¸ä½¿ç”¨"><span>å…è®¸æœ¬åœ°å›ç¯åœ°å€å¯ä»¥æ­£å¸¸ä½¿ç”¨</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-i</span> lo <span class="token parameter variable">-j</span> ACCEPT
<span class="token comment">#æœ¬åœ°åœ†ç¯åœ°å€å°±æ˜¯é‚£ä¸ª127.0.0.1ï¼Œæ˜¯æœ¬æœºä¸Šä½¿ç”¨çš„,å®ƒè¿›ä¸å‡ºéƒ½è®¾ç½®ä¸ºå…è®¸</span>
iptables <span class="token parameter variable">-A</span> OUTPUT <span class="token parameter variable">-o</span> lo <span class="token parameter variable">-j</span> ACCEPT
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è®¾ç½®é»˜è®¤çš„è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®é»˜è®¤çš„è§„åˆ™"><span>è®¾ç½®é»˜è®¤çš„è§„åˆ™</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-P</span> INPUT DROP <span class="token comment"># é…ç½®é»˜è®¤çš„ä¸è®©è¿›</span>
iptables <span class="token parameter variable">-P</span> FORWARD DROP <span class="token comment"># é»˜è®¤çš„ä¸å…è®¸è½¬å‘</span>
iptables <span class="token parameter variable">-P</span> OUTPUT ACCEPT <span class="token comment"># é»˜è®¤çš„å¯ä»¥å‡ºå»</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é…ç½®ç™½åå•" tabindex="-1"><a class="header-anchor" href="#é…ç½®ç™½åå•"><span>é…ç½®ç™½åå•</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> all <span class="token parameter variable">-s</span> <span class="token number">192.168</span>.1.0/24 <span class="token parameter variable">-j</span> ACCEPT  <span class="token comment"># å…è®¸æœºæˆ¿å†…ç½‘æœºå™¨å¯ä»¥è®¿é—®</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> all <span class="token parameter variable">-s</span> <span class="token number">192.168</span>.140.0/24 <span class="token parameter variable">-j</span> ACCEPT  <span class="token comment"># å…è®¸æœºæˆ¿å†…ç½‘æœºå™¨å¯ä»¥è®¿é—®</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">-s</span> <span class="token number">183.121</span>.3.7 <span class="token parameter variable">--dport</span> <span class="token number">3380</span> <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># å…è®¸183.121.3.7è®¿é—®æœ¬æœºçš„3380ç«¯å£</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¼€å¯ç›¸åº”çš„æœåŠ¡ç«¯å£" tabindex="-1"><a class="header-anchor" href="#å¼€å¯ç›¸åº”çš„æœåŠ¡ç«¯å£"><span>å¼€å¯ç›¸åº”çš„æœåŠ¡ç«¯å£</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">80</span> <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># å¼€å¯80ç«¯å£ï¼Œå› ä¸ºwebå¯¹å¤–éƒ½æ˜¯è¿™ä¸ªç«¯å£</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> icmp --icmp-type <span class="token number">8</span> <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># å…è®¸è¢«ping</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-m</span> state <span class="token parameter variable">--state</span> ESTABLISHED,RELATED <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># å·²ç»å»ºç«‹çš„è¿æ¥å¾—è®©å®ƒè¿›æ¥</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¿å­˜è§„åˆ™åˆ°é…ç½®æ–‡ä»¶ä¸­" tabindex="-1"><a class="header-anchor" href="#ä¿å­˜è§„åˆ™åˆ°é…ç½®æ–‡ä»¶ä¸­"><span>ä¿å­˜è§„åˆ™åˆ°é…ç½®æ–‡ä»¶ä¸­</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">cp</span> /etc/sysconfig/iptables /etc/sysconfig/iptables.bak <span class="token comment"># ä»»ä½•æ”¹åŠ¨ä¹‹å‰å…ˆå¤‡ä»½ï¼Œè¯·ä¿æŒè¿™ä¸€ä¼˜ç§€çš„ä¹ æƒ¯</span>
iptables-save <span class="token operator">&gt;</span> /etc/sysconfig/iptables
<span class="token function">cat</span> /etc/sysconfig/iptables
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ—å‡ºå·²è®¾ç½®çš„è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#åˆ—å‡ºå·²è®¾ç½®çš„è§„åˆ™"><span>åˆ—å‡ºå·²è®¾ç½®çš„è§„åˆ™</span></a></h4><blockquote><p>iptables -L [-t è¡¨å] [é“¾å]</p></blockquote><ul><li>å››ä¸ªè¡¨å <code>raw</code>ï¼Œ<code>nat</code>ï¼Œ<code>filter</code>ï¼Œ<code>mangle</code></li><li>äº”ä¸ªè§„åˆ™é“¾å <code>INPUT</code>ã€<code>OUTPUT</code>ã€<code>FORWARD</code>ã€<code>PREROUTING</code>ã€<code>POSTROUTING</code></li><li>filterè¡¨åŒ…å«<code>INPUT</code>ã€<code>OUTPUT</code>ã€<code>FORWARD</code>ä¸‰ä¸ªè§„åˆ™é“¾</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-L</span> <span class="token parameter variable">-t</span> nat                  <span class="token comment"># åˆ—å‡º nat ä¸Šé¢çš„æ‰€æœ‰è§„åˆ™</span>
<span class="token comment">#            ^ -t å‚æ•°æŒ‡å®šï¼Œå¿…é¡»æ˜¯ rawï¼Œ natï¼Œfilterï¼Œmangle ä¸­çš„ä¸€ä¸ª</span>
iptables <span class="token parameter variable">-L</span> <span class="token parameter variable">-t</span> nat  --line-numbers  <span class="token comment"># è§„åˆ™å¸¦ç¼–å·</span>
iptables <span class="token parameter variable">-L</span> INPUT

iptables <span class="token parameter variable">-L</span> <span class="token parameter variable">-nv</span>  <span class="token comment"># æŸ¥çœ‹ï¼Œè¿™ä¸ªåˆ—è¡¨çœ‹èµ·æ¥æ›´è¯¦ç»†</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ¸…é™¤å·²æœ‰è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#æ¸…é™¤å·²æœ‰è§„åˆ™"><span>æ¸…é™¤å·²æœ‰è§„åˆ™</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-F</span> INPUT  <span class="token comment"># æ¸…ç©ºæŒ‡å®šé“¾ INPUT ä¸Šé¢çš„æ‰€æœ‰è§„åˆ™</span>
iptables <span class="token parameter variable">-X</span> INPUT  <span class="token comment"># åˆ é™¤æŒ‡å®šçš„é“¾ï¼Œè¿™ä¸ªé“¾å¿…é¡»æ²¡æœ‰è¢«å…¶å®ƒä»»ä½•è§„åˆ™å¼•ç”¨ï¼Œè€Œä¸”è¿™æ¡ä¸Šå¿…é¡»æ²¡æœ‰ä»»ä½•è§„åˆ™ã€‚</span>
                   <span class="token comment"># å¦‚æœæ²¡æœ‰æŒ‡å®šé“¾åï¼Œåˆ™ä¼šåˆ é™¤è¯¥è¡¨ä¸­æ‰€æœ‰éå†…ç½®çš„é“¾ã€‚</span>
iptables <span class="token parameter variable">-Z</span> INPUT  <span class="token comment"># æŠŠæŒ‡å®šé“¾ï¼Œæˆ–è€…è¡¨ä¸­çš„æ‰€æœ‰é“¾ä¸Šçš„æ‰€æœ‰è®¡æ•°å™¨æ¸…é›¶ã€‚</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ é™¤å·²æ·»åŠ çš„è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#åˆ é™¤å·²æ·»åŠ çš„è§„åˆ™"><span>åˆ é™¤å·²æ·»åŠ çš„è§„åˆ™</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># æ·»åŠ ä¸€æ¡è§„åˆ™</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-s</span> <span class="token number">192.168</span>.1.5 <span class="token parameter variable">-j</span> DROP
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†æ‰€æœ‰iptablesä»¥åºå·æ ‡è®°æ˜¾ç¤ºï¼Œæ‰§è¡Œï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-L</span> <span class="token parameter variable">-n</span> --line-numbers
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ¯”å¦‚è¦åˆ é™¤INPUTé‡Œåºå·ä¸º8çš„è§„åˆ™ï¼Œæ‰§è¡Œï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-D</span> INPUT <span class="token number">8</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="å¼€æ”¾æŒ‡å®šçš„ç«¯å£" tabindex="-1"><a class="header-anchor" href="#å¼€æ”¾æŒ‡å®šçš„ç«¯å£"><span>å¼€æ”¾æŒ‡å®šçš„ç«¯å£</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-s</span> <span class="token number">127.0</span>.0.1 <span class="token parameter variable">-d</span> <span class="token number">127.0</span>.0.1 <span class="token parameter variable">-j</span> ACCEPT               <span class="token comment">#å…è®¸æœ¬åœ°å›ç¯æ¥å£(å³è¿è¡Œæœ¬æœºè®¿é—®æœ¬æœº)</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-m</span> state <span class="token parameter variable">--state</span> ESTABLISHED,RELATED <span class="token parameter variable">-j</span> ACCEPT    <span class="token comment">#å…è®¸å·²å»ºç«‹çš„æˆ–ç›¸å…³è¿çš„é€šè¡Œ</span>
iptables <span class="token parameter variable">-A</span> OUTPUT <span class="token parameter variable">-j</span> ACCEPT         <span class="token comment">#å…è®¸æ‰€æœ‰æœ¬æœºå‘å¤–çš„è®¿é—®</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">22</span> <span class="token parameter variable">-j</span> ACCEPT    <span class="token comment">#å…è®¸è®¿é—®22ç«¯å£</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">80</span> <span class="token parameter variable">-j</span> ACCEPT    <span class="token comment">#å…è®¸è®¿é—®80ç«¯å£</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">21</span> <span class="token parameter variable">-j</span> ACCEPT    <span class="token comment">#å…è®¸ftpæœåŠ¡çš„21ç«¯å£</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">20</span> <span class="token parameter variable">-j</span> ACCEPT    <span class="token comment">#å…è®¸FTPæœåŠ¡çš„20ç«¯å£</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-j</span> reject       <span class="token comment">#ç¦æ­¢å…¶ä»–æœªå…è®¸çš„è§„åˆ™è®¿é—®</span>
iptables <span class="token parameter variable">-A</span> FORWARD <span class="token parameter variable">-j</span> REJECT     <span class="token comment">#ç¦æ­¢å…¶ä»–æœªå…è®¸çš„è§„åˆ™è®¿é—®</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å±è”½ip" tabindex="-1"><a class="header-anchor" href="#å±è”½ip"><span>å±è”½IP</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">-m</span> tcp <span class="token parameter variable">-s</span> <span class="token number">192.168</span>.0.8 <span class="token parameter variable">-j</span> DROP  <span class="token comment"># å±è”½æ¶æ„ä¸»æœºï¼ˆæ¯”å¦‚ï¼Œ192.168.0.8</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-s</span> <span class="token number">123.45</span>.6.7 <span class="token parameter variable">-j</span> DROP       <span class="token comment">#å±è”½å•ä¸ªIPçš„å‘½ä»¤</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-s</span> <span class="token number">123.0</span>.0.0/8 <span class="token parameter variable">-j</span> DROP      <span class="token comment">#å°æ•´ä¸ªæ®µå³ä»123.0.0.1åˆ°123.255.255.254çš„å‘½ä»¤</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-s</span> <span class="token number">124.45</span>.0.0/16 <span class="token parameter variable">-j</span> DROP    <span class="token comment">#å°IPæ®µå³ä»123.45.0.1åˆ°123.45.255.254çš„å‘½ä»¤</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-s</span> <span class="token number">123.45</span>.6.0/24 <span class="token parameter variable">-j</span> DROP    <span class="token comment">#å°IPæ®µå³ä»123.45.6.1åˆ°123.45.6.254çš„å‘½ä»¤æ˜¯</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æŒ‡å®šæ•°æ®åŒ…å‡ºå»çš„ç½‘ç»œæ¥å£" tabindex="-1"><a class="header-anchor" href="#æŒ‡å®šæ•°æ®åŒ…å‡ºå»çš„ç½‘ç»œæ¥å£"><span>æŒ‡å®šæ•°æ®åŒ…å‡ºå»çš„ç½‘ç»œæ¥å£</span></a></h4><p>åªå¯¹ OUTPUTï¼ŒFORWARDï¼ŒPOSTROUTING ä¸‰ä¸ªé“¾èµ·ä½œç”¨ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-A</span> FORWARD <span class="token parameter variable">-o</span> eth0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="æŸ¥çœ‹å·²æ·»åŠ çš„è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹å·²æ·»åŠ çš„è§„åˆ™"><span>æŸ¥çœ‹å·²æ·»åŠ çš„è§„åˆ™</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-L</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-v</span>
Chain INPUT <span class="token punctuation">(</span>policy DROP <span class="token number">48106</span> packets, 2690K bytes<span class="token punctuation">)</span>
 pkts bytes target     prot opt <span class="token keyword">in</span>     out     <span class="token builtin class-name">source</span>               destination
 <span class="token number">5075</span>  589K ACCEPT     all  --  lo     *       <span class="token number">0.0</span>.0.0/0            <span class="token number">0.0</span>.0.0/0
 191K   90M ACCEPT     tcp  --  *      *       <span class="token number">0.0</span>.0.0/0            <span class="token number">0.0</span>.0.0/0           tcp dpt:22
1499K  133M ACCEPT     tcp  --  *      *       <span class="token number">0.0</span>.0.0/0            <span class="token number">0.0</span>.0.0/0           tcp dpt:80
4364K 6351M ACCEPT     all  --  *      *       <span class="token number">0.0</span>.0.0/0            <span class="token number">0.0</span>.0.0/0           state RELATED,ESTABLISHED
 <span class="token number">6256</span>  327K ACCEPT     icmp --  *      *       <span class="token number">0.0</span>.0.0/0            <span class="token number">0.0</span>.0.0/0

Chain FORWARD <span class="token punctuation">(</span>policy ACCEPT <span class="token number">0</span> packets, <span class="token number">0</span> bytes<span class="token punctuation">)</span>
 pkts bytes target     prot opt <span class="token keyword">in</span>     out     <span class="token builtin class-name">source</span>               destination

Chain OUTPUT <span class="token punctuation">(</span>policy ACCEPT 3382K packets, 1819M bytes<span class="token punctuation">)</span>
 pkts bytes target     prot opt <span class="token keyword">in</span>     out     <span class="token builtin class-name">source</span>               destination
 <span class="token number">5075</span>  589K ACCEPT     all  --  *      lo      <span class="token number">0.0</span>.0.0/0            <span class="token number">0.0</span>.0.0/0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¯åŠ¨ç½‘ç»œè½¬å‘è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨ç½‘ç»œè½¬å‘è§„åˆ™"><span>å¯åŠ¨ç½‘ç»œè½¬å‘è§„åˆ™</span></a></h4><p>å…¬ç½‘<code>210.14.67.7</code>è®©å†…ç½‘<code>192.168.188.0/24</code>ä¸Šç½‘</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-A</span> POSTROUTING <span class="token parameter variable">-s</span> <span class="token number">192.168</span>.188.0/24 <span class="token parameter variable">-j</span> SNAT --to-source <span class="token number">210.14</span>.67.127
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="ç«¯å£æ˜ å°„" tabindex="-1"><a class="header-anchor" href="#ç«¯å£æ˜ å°„"><span>ç«¯å£æ˜ å°„</span></a></h4><p>æœ¬æœºçš„ 2222 ç«¯å£æ˜ å°„åˆ°å†…ç½‘ è™šæ‹Ÿæœºçš„22 ç«¯å£</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-A</span> PREROUTING <span class="token parameter variable">-d</span> <span class="token number">210.14</span>.67.127 <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">2222</span>  <span class="token parameter variable">-j</span> DNAT --to-dest <span class="token number">192.168</span>.188.115:22
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="å­—ç¬¦ä¸²åŒ¹é…" tabindex="-1"><a class="header-anchor" href="#å­—ç¬¦ä¸²åŒ¹é…"><span>å­—ç¬¦ä¸²åŒ¹é…</span></a></h4><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦è¿‡æ»¤æ‰€æœ‰TCPè¿æ¥ä¸­çš„å­—ç¬¦ä¸²<code>test</code>ï¼Œä¸€æ—¦å‡ºç°å®ƒæˆ‘ä»¬å°±ç»ˆæ­¢è¿™ä¸ªè¿æ¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">-m</span> string <span class="token parameter variable">--algo</span> kmp <span class="token parameter variable">--string</span> <span class="token string">&quot;test&quot;</span> <span class="token parameter variable">-j</span> REJECT --reject-with tcp-reset
iptables <span class="token parameter variable">-L</span>

<span class="token comment"># Chain INPUT (policy ACCEPT)</span>
<span class="token comment"># target     prot opt source               destination</span>
<span class="token comment"># REJECT     tcp  --  anywhere             anywhere            STRING match &quot;test&quot; ALGO name kmp TO 65535 reject-with tcp-reset</span>
<span class="token comment">#</span>
<span class="token comment"># Chain FORWARD (policy ACCEPT)</span>
<span class="token comment"># target     prot opt source               destination</span>
<span class="token comment">#</span>
<span class="token comment"># Chain OUTPUT (policy ACCEPT)</span>
<span class="token comment"># target     prot opt source               destination</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é˜»æ­¢windowsè •è™«çš„æ”»å‡»" tabindex="-1"><a class="header-anchor" href="#é˜»æ­¢windowsè •è™«çš„æ”»å‡»"><span>é˜»æ­¢Windowsè •è™«çš„æ”»å‡»</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-j</span> DROP <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">-s</span> <span class="token number">0.0</span>.0.0/0 <span class="token parameter variable">-m</span> string <span class="token parameter variable">--algo</span> kmp <span class="token parameter variable">--string</span> <span class="token string">&quot;cmd.exe&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="é˜²æ­¢synæ´ªæ°´æ”»å‡»" tabindex="-1"><a class="header-anchor" href="#é˜²æ­¢synæ´ªæ°´æ”»å‡»"><span>é˜²æ­¢SYNæ´ªæ°´æ”»å‡»</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--syn</span> <span class="token parameter variable">-m</span> limit <span class="token parameter variable">--limit</span> <span class="token number">5</span>/second <span class="token parameter variable">-j</span> ACCEPT
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="æ·»åŠ secmarkè®°å½•" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ secmarkè®°å½•"><span>æ·»åŠ SECMARKè®°å½•</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-t</span> mangle <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--src</span> <span class="token number">192.168</span>.1.2 <span class="token parameter variable">--dport</span> <span class="token number">443</span> <span class="token parameter variable">-j</span> SECMARK <span class="token parameter variable">--selctx</span> system_u:object_r:myauth_packet_t
<span class="token comment"># å‘ä» 192.168.1.2:443 ä»¥TCPæ–¹å¼å‘å‡ºåˆ°æœ¬æœºçš„åŒ…æ·»åŠ MACå®‰å…¨ä¸Šä¸‹æ–‡ system_u:object_r:myauth_packet_t</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ›´å¤šå®ä¾‹" tabindex="-1"><a class="header-anchor" href="#æ›´å¤šå®ä¾‹"><span>æ›´å¤šå®ä¾‹</span></a></h2><blockquote><p>ç”¨iptablesæ­å»ºä¸€å¥—å¼ºå¤§çš„å®‰å…¨é˜²æŠ¤ç›¾ <a href="http://www.imooc.com/learn/389" target="_blank" rel="noopener noreferrer">http://www.imooc.com/learn/389<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>iptables: linux ä¸‹åº”ç”¨å±‚é˜²ç«å¢™å·¥å…·</p><p>iptables 5é“¾: å¯¹åº” Hook point netfilter: linux æ“ä½œç³»ç»Ÿæ ¸å¿ƒå±‚å†…éƒ¨çš„ä¸€ä¸ªæ•°æ®åŒ…å¤„ç†æ¨¡å— Hook point: æ•°æ®åŒ…åœ¨ netfilter ä¸­çš„æŒ‚è½½ç‚¹; <code>PRE_ROUTING / INPUT / OUTPUT / FORWARD / POST_ROUTING</code></p><p>iptables &amp; netfilter <img src="http://7xq89b.com1.z0.glb.clouddn.com/netfilter&amp;iptables.jpg" alt="img" loading="lazy"></p><p>iptables 4è¡¨5é“¾ <img src="http://7xq89b.com1.z0.glb.clouddn.com/iptables-data-stream.jpg" alt="img" loading="lazy"></p><p>iptables rules <img src="http://7xq89b.com1.z0.glb.clouddn.com/iptables-rules.jpg" alt="img" loading="lazy"></p><ul><li>4è¡¨</li></ul><p><strong>filter</strong>: è®¿é—®æ§åˆ¶ / è§„åˆ™åŒ¹é… <strong>nat</strong>: åœ°å€è½¬å‘ mangle / raw</p><ul><li>è§„åˆ™</li></ul><p>æ•°æ®è®¿é—®æ§åˆ¶: ACCEPT / DROP / REJECT æ•°æ®åŒ…æ”¹å†™(nat -&gt; åœ°å€è½¬æ¢): snat / dnat ä¿¡æ¯è®°å½•: log</p><h2 id="ä½¿ç”¨åœºæ™¯å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯å®ä¾‹"><span>ä½¿ç”¨åœºæ™¯å®ä¾‹</span></a></h2><ul><li>åœºæ™¯ä¸€</li></ul><p>å¼€æ”¾ tcp 10-22/80 ç«¯å£ å¼€æ”¾ icmp å…¶ä»–æœªè¢«å…è®¸çš„ç«¯å£ç¦æ­¢è®¿é—®</p><p>å­˜åœ¨çš„é—®é¢˜: æœ¬æœºæ— æ³•è®¿é—®æœ¬æœº; æœ¬æœºæ— æ³•è®¿é—®å…¶ä»–ä¸»æœº</p><ul><li>åœºæ™¯äºŒ</li></ul><p>ftp: é»˜è®¤è¢«åŠ¨æ¨¡å¼(æœåŠ¡å™¨äº§ç”Ÿéšæœºç«¯å£å‘Šè¯‰å®¢æˆ·ç«¯, å®¢æˆ·ç«¯ä¸»åŠ¨è¿æ¥è¿™ä¸ªç«¯å£æ‹‰å–æ•°æ®) vsftpd: ä½¿ ftp æ”¯æŒä¸»åŠ¨æ¨¡å¼(å®¢æˆ·ç«¯äº§ç”Ÿéšæœºç«¯å£é€šçŸ¥æœåŠ¡å™¨, æœåŠ¡å™¨ä¸»åŠ¨è¿æ¥è¿™ä¸ªç«¯å£å‘é€æ•°æ®)</p><ul><li>åœºæ™¯ä¸‰</li></ul><p>å…è®¸å¤–ç½‘è®¿é—®: web http -&gt; 80/tcp; https -&gt; 443/tcp mail smtp -&gt; 25/tcp; smtps -&gt; 465/tcp pop3 -&gt; 110/tcp; pop3s -&gt; 995/tcp imap -&gt; 143/tcp</p><p>å†…éƒ¨ä½¿ç”¨: file nfs -&gt; 123/udp samba -&gt; 137/138/139/445/tcp ftp -&gt; 20/21/tcp remote ssh -&gt; 22/tcp sql mysql -&gt; 3306/tcp oracle -&gt; 1521/tcp</p><ul><li>åœºæ™¯å››</li></ul><p>nat è½¬å‘</p><ul><li>åœºæ™¯äº”</li></ul><p>é˜²CCæ”»å‡»</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-L</span> <span class="token parameter variable">-F</span> <span class="token parameter variable">-A</span> <span class="token parameter variable">-D</span> <span class="token comment"># list flush append delete</span>
<span class="token comment"># åœºæ™¯ä¸€</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">80</span> <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># å…è®¸ tcp 80 ç«¯å£</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">10</span>:22 <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># å…è®¸ tcp 10-22 ç«¯å£</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-p</span> icmp <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># å…è®¸ icmp</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-j</span> REJECT <span class="token comment"># æ·»åŠ ä¸€æ¡è§„åˆ™, ä¸å…è®¸æ‰€æœ‰</span>

<span class="token comment"># ä¼˜åŒ–åœºæ™¯ä¸€</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-i</span> lo <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># å…è®¸æœ¬æœºè®¿é—®</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-m</span> state <span class="token parameter variable">--state</span> ESTABLISHED,RELATED <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># å…è®¸è®¿é—®å¤–ç½‘</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">80</span> <span class="token parameter variable">-s</span> <span class="token number">10.10</span>.188.233 <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># åªå…è®¸å›ºå®šipè®¿é—®80</span>

<span class="token comment"># åœºæ™¯äºŒ</span>
<span class="token function">vi</span> /etc/vsftpd/vsftpd.conf <span class="token comment"># ä½¿ç”¨ vsftpd å¼€å¯ ftp ä¸»åŠ¨æ¨¡å¼</span>
<span class="token assign-left variable">port_enable</span><span class="token operator">=</span>yes
<span class="token assign-left variable">connect_from_port_20</span><span class="token operator">=</span>YES
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">21</span> <span class="token parameter variable">-j</span> ACCEPT

<span class="token function">vi</span> /etc/vsftpd/vsftpd.conf <span class="token comment"># å»ºè®®ä½¿ç”¨ ftp è¢«åŠ¨æ¨¡å¼</span>
<span class="token assign-left variable">pasv_min_port</span><span class="token operator">=</span><span class="token number">50000</span>
<span class="token assign-left variable">pasv_max_port</span><span class="token operator">=</span><span class="token number">60000</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">21</span> <span class="token parameter variable">-j</span> ACCEPT
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">50000</span>:60000 <span class="token parameter variable">-j</span> ACCEPT

<span class="token comment"># è¿˜å¯ä»¥ä½¿ç”¨ iptables æ¨¡å—è¿½è¸ªæ¥è‡ªåŠ¨å¼€å‘å¯¹åº”çš„ç«¯å£</span>

<span class="token comment"># åœºæ™¯ä¸‰</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-i</span> lo <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># å…è®¸æœ¬æœºè®¿é—®</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-m</span> state <span class="token parameter variable">--state</span> ESTABLISHED,RELATED <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># å…è®¸è®¿é—®å¤–ç½‘</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-s</span> <span class="token number">10.10</span>.155.0/24 <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># å…è®¸å†…ç½‘è®¿é—®</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">-m</span> multiport <span class="token parameter variable">--dports</span> <span class="token number">80,1723</span> <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># å…è®¸ç«¯å£, 80 -&gt; http, 1723 -&gt; vpn</span>
iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-j</span> REJECT <span class="token comment"># æ·»åŠ ä¸€æ¡è§„åˆ™, ä¸å…è®¸æ‰€æœ‰</span>

iptables-save <span class="token comment"># ä¿å­˜è®¾ç½®åˆ°é…ç½®æ–‡ä»¶</span>

<span class="token comment"># åœºæ™¯å››</span>
iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-L</span> <span class="token comment"># æŸ¥çœ‹ nat é…ç½®</span>

iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-A</span> POST_ROUTING <span class="token parameter variable">-s</span> <span class="token number">10.10</span>.177.0/24 <span class="token parameter variable">-j</span> SNAT <span class="token parameter variable">--to</span> <span class="token number">10.10</span>.188.232 <span class="token comment"># SNAT</span>
<span class="token function">vi</span> /etc/sysconfig/network <span class="token comment"># é…ç½®ç½‘å…³</span>

iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-A</span> POST_ROUTING <span class="token parameter variable">-d</span> <span class="token number">10.10</span>.188.232 <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">80</span> <span class="token parameter variable">-j</span> DNAT <span class="token parameter variable">--to</span> <span class="token number">10.10</span>.177.232:80 <span class="token comment"># DNAT</span>

<span class="token comment">#åœºæ™¯äº”</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--syn</span> <span class="token parameter variable">--dport</span> <span class="token number">80</span> <span class="token parameter variable">-m</span> connlimit --connlimit-above <span class="token number">100</span> <span class="token parameter variable">-j</span> REJECT <span class="token comment"># é™åˆ¶å¹¶å‘è¿æ¥è®¿é—®æ•°</span>
iptables <span class="token parameter variable">-I</span> INPUT <span class="token parameter variable">-m</span> limit <span class="token parameter variable">--limit</span> <span class="token number">3</span>/hour --limit-burst <span class="token number">10</span> <span class="token parameter variable">-j</span> ACCEPT <span class="token comment"># limitæ¨¡å—; --limit-burst é»˜è®¤ä¸º5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="ç¼–è¯‘openwrt" tabindex="-1"><a class="header-anchor" href="#ç¼–è¯‘openwrt"><span>ç¼–è¯‘OpenWrt</span></a></h2><details><summary>ã€æŸ¥çœ‹è¯¦æƒ…ã€‘</summary><p>Lean OpenWrtç¼–è¯‘</p><p>\1. ä¸è¦ç”¨ root ç”¨æˆ·è¿›è¡Œç¼–è¯‘</p><p>\2. å›½å†…ç”¨æˆ·ç¼–è¯‘å‰æœ€å¥½å‡†å¤‡å¥½æ¢¯å­</p><p>\3. é»˜è®¤ç™»é™†IP 192.168.1.1 å¯†ç  password</p><p>ç¼–è¯‘å‘½ä»¤</p><p>\1. é¦–å…ˆè£…å¥½ Linux ç³»ç»Ÿï¼Œæ¨è Debian 11 æˆ– Ubuntu LTS</p><p>\2. å®‰è£…ç¼–è¯‘ä¾èµ–</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>   sudo apt update -y
   sudo apt full-upgrade -y
   sudo apt install -y ack antlr3 asciidoc autoconf automake autopoint binutils bison build-essential \
   bzip2 ccache cmake cpio curl device-tree-compiler fastjar flex gawk gettext gcc-multilib g++-multilib \
   git gperf haveged help2man intltool libc6-dev-i386 libelf-dev libfuse-dev libglib2.0-dev libgmp3-dev \
   libltdl-dev libmpc-dev libmpfr-dev libncurses5-dev libncursesw5-dev libpython3-dev libreadline-dev \
   libssl-dev libtool lrzsz mkisofs msmtp ninja-build p7zip p7zip-full patch pkgconf python2.7 python3 \
   python3-pyelftools python3-setuptools qemu-utils rsync scons squashfs-tools subversion swig texinfo \
   uglifyjs upx-ucl unzip vim wget xmlto xxd zlib1g-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\3. ä¸‹è½½æºä»£ç ï¼Œæ›´æ–° feeds å¹¶é€‰æ‹©é…ç½®</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>   git clone https://github.com/coolsnowwolf/lede
   cd lede
   ./scripts/feeds update -a
   ./scripts/feeds install -a
   make menuconfig
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>git clone https://github.com/openwrt/openwrt        **å®˜æ–¹ç‰ˆæœ¬**
git clone https://github.com/coolsnowwolf/lede       **ledeç‰ˆæœ¬**
git clone -b 22.03 --single-branch https://github.com/Lienol/openwrt   **lienolç‰ˆæœ¬**
cd openwrt            **åˆ‡æ¢åˆ°æ–‡ä»¶ç›®å½•**
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\4. ä¸‹è½½ dl åº“ï¼Œç¼–è¯‘å›ºä»¶ ï¼ˆ-j åé¢æ˜¯çº¿ç¨‹æ•°ï¼Œç¬¬ä¸€æ¬¡ç¼–è¯‘æ¨èç”¨å•çº¿ç¨‹ï¼‰</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>   make download -j8
   make V=s -j1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ¬å¥—ä»£ç ä¿è¯è‚¯å®šå¯ä»¥ç¼–è¯‘æˆåŠŸã€‚é‡Œé¢åŒ…æ‹¬äº† R23 æ‰€æœ‰æºä»£ç ï¼ŒåŒ…æ‹¬ IPK çš„ã€‚ ä½ å¯ä»¥è‡ªç”±ä½¿ç”¨ï¼Œä½†æºç ç¼–è¯‘äºŒæ¬¡å‘å¸ƒè¯·æ³¨æ˜æˆ‘çš„ GitHub ä»“åº“é“¾æ¥ã€‚è°¢è°¢åˆä½œï¼ äºŒæ¬¡ç¼–è¯‘ï¼š</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>cd lede
git pull
./scripts/feeds update -a
./scripts/feeds install -a
make defconfig
make download -j8
make V=s -j$(nproc)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœéœ€è¦é‡æ–°é…ç½®ï¼š</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>rm -rf .config
make menuconfig
make V=s -j$(nproc)



rm -rf ./tmp &amp;&amp; rm -rf .config
make menuconfig
make V=s -j$(nproc)

ç¼–è¯‘å®Œæˆåè¾“å‡ºè·¯å¾„ï¼šbin/targets
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœç¼–è¯‘å¤±è´¥ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><p>make clean åˆ é™¤ç¼–è¯‘ç›®å½•/binå’Œ/build_dirç›®å½•ä¸­çš„æ–‡ä»¶</p><p>make dirclean é™¤äº†åˆ é™¤ç¼–è¯‘ç›®å½•ä¹‹å¤–è¿˜åˆ é™¤ç¼–è¯‘å·¥å…·ç›®å½•ï¼Œåˆ é™¤/binå’Œ/build_dirç›®å½•çš„ä¸­çš„æ–‡ä»¶(make clean)ä»¥åŠ/staging_dirã€/toolchainã€/tmpå’Œ/logsä¸­çš„æ–‡ä»¶ï¼Œä¸€èˆ¬åœ¨æ›´æ¢CPUæ¶æ„çš„æƒ…å†µä¸‹æ‰æ“ä½œã€‚</p><p>ä¸‹è½½ç¼–è¯‘å‹ç¼©åŒ…</p><p>ç¼–è¯‘å®Œæˆåè¾“å‡ºè·¯å¾„ï¼šhome/ç”¨æˆ·å/openwrt/bin/targetsï¼Œä¸‹è½½åˆ°æœ¬åœ°ç”µè„‘ï¼Œéœ€è¦é€šè¿‡SSHè¿œç¨‹ç™»å½•è¿›è¡Œä¸‹è½½ã€‚ubuntué»˜è®¤æ˜¯æ²¡å¼€é€šSSHç™»å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿›è¡Œå¼€é€šã€‚</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>å¼€é€šSSHç™»å½•æ–¹æ³•ï¼š

1ï¼Œå¿…é¡»åˆ‡æ¢æˆä¸ºrootç”¨æˆ·
sudo -i
2ï¼Œå…ˆæ›´æ–°è½¯ä»¶åˆ—è¡¨å’Œæ›´æ–°è½¯ä»¶
sudo apt-get update
3ï¼Œå…ˆæ›´æ–°è½¯ä»¶åˆ—è¡¨å’Œæ›´æ–°è½¯ä»¶
sudo apt-get upgrade
4ï¼Œå®‰è£…ssh
apt-get install ssh
5ï¼Œå¯åŠ¨sshæœåŠ¡
sudo /etc/init.d/ssh start
6ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰sshç¯å¢ƒ
ps -e | grep ssh




ubuntuå¼€é€šrootç™»å½•SSHæƒé™

1ï¼Œ ä½¿ç”¨æ™®é€šç”¨æˆ·ç™»å½•ååˆ‡æ¢root
sudo -i
2ï¼Œåˆ›å»ºrootç®¡ç†å‘˜å¯†ç 
passwd root
3ï¼Œå¼€å¯rootç™»å½•
sudo sed -i &#39;s/^#?PermitRootLogin./PermitRootLogin yes/g&#39; /etc/ssh/sshd_config
4ï¼Œå¼€å¯å¯†ç éªŒè¯
sudo sed -i &#39;s/^#?PasswordAuthentication./PasswordAuthentication yes/g&#39; /etc/ssh/sshd_config
5ï¼Œé‡å¯sshæœåŠ¡
service sshd restart
6ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰sshç¯å¢ƒ
ps -e | grep ssh


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®‰è£…Nginx</p><p>é¦–å…ˆï¼Œæ‚¨éœ€è¦åœ¨OpenWrtä¸Šå®‰è£…Nginxã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨ç»ˆç«¯ä¸­è¿›è¡Œå®‰è£…ï¼š</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>
opkg update
opkg install nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®‰è£…Nginxåï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨å’Œåœæ­¢å®ƒï¼š</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>
/etc/init.d/nginx start    # å¯åŠ¨Nginx
/etc/init.d/nginx stop     # åœæ­¢Nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®Nginx</p><p>æ¥ä¸‹æ¥ï¼Œæ‚¨éœ€è¦åœ¨OpenWrtä¸Šé…ç½®Nginxã€‚Nginxçš„é…ç½®æ–‡ä»¶ä½äº /etc/nginx/nginx.conf ä¸­ã€‚æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹æ­¤æ–‡ä»¶æ¥é…ç½®Nginxã€‚</p><p>ä¾‹å¦‚ï¼Œè¦å°†Nginxé…ç½®ä¸ºç›‘å¬ç«¯å£80å¹¶å‘æ‰€æœ‰è¯·æ±‚å‘é€æ¬¢è¿æ¶ˆæ¯ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p><ol><li>ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ /etc/nginx/nginx.conf æ–‡ä»¶ï¼š</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>
vi /etc/nginx/nginx.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>åœ¨ http å—ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>worker_processes auto;

user root;

events {}

http {

upstream alist {
  server 127.0.0.1:5244;
}



server {
        listen       15244;
        server_name   localhost;
        location / {
           proxy_pass http://alist;
           proxy_set_header HOST $host;
           proxy_set_header X-Forwarded-Proto $scheme;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
      
    }

}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>ä¿å­˜å¹¶å…³é—­æ–‡ä»¶ã€‚</li><li>é‡æ–°å¯åŠ¨Nginxä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>
/etc/init.d/nginx restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨Nginxæ¨¡å—</p><p>è¦åœ¨OpenWrtä¸Šä½¿ç”¨Nginxæ¨¡å—ï¼Œæ‚¨éœ€è¦å°†ç›¸åº”çš„æ¨¡å—å®‰è£…åˆ°Nginxä¸­ã€‚è¿™äº›æ¨¡å—å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>
opkg update
opkg install nginx-mod-&lt;module_name&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­ &lt;module_name&gt; æ˜¯è¦å®‰è£…çš„æ¨¡å—çš„åç§°ã€‚ä¾‹å¦‚ï¼Œè¦å®‰è£…HttpEchoModuleï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>
opkg update
opkg install nginx-mod-http-echo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®‰è£…å®Œæ¯•åï¼Œæ‚¨éœ€è¦ä¿®æ”¹ /etc/nginx/nginx.conf æ–‡ä»¶</p></details><h2 id="x-ui-docker-image" tabindex="-1"><a class="header-anchor" href="#x-ui-docker-image"><span>x-ui docker image</span></a></h2><details><summary>ã€æŸ¥çœ‹è¯¦æƒ…ã€‘</summary><h1 id="x-ui-docker-image-1" tabindex="-1"><a class="header-anchor" href="#x-ui-docker-image-1"><span>x-ui docker image</span></a></h1><p><a href="https://hub.docker.com/r/enwaiax/x-ui" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/d96851e7ecb70b37627c8ee4c37ace32b44849b96cfd3c21d165ee195b16c80c/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f70756c6c732f656e77616961782f782d75692e7376673f7374796c653d666c61742d737175617265" alt="Docker Pulls" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <a href="https://github.com/Chasing66/x-ui/graphs/contributors" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/34db02d30a62844e8ddd0a7a66be59f3cf0cf4e9e214798ca3af61be5dbef25e/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f636f6e7472696275746f72732f63686173696e6736362f782d75692e7376673f7374796c653d666c61742d737175617265" alt="Contributors" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <a href="https://github.com/Chasing66/x-ui/network/members" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/fca4b77a86a23f5579544684557354e2faae40118e31e6bb939d46de40f707e2/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f666f726b732f63686173696e6736362f782d75692e7376673f7374796c653d666c61742d737175617265" alt="Forks" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <a href="https://github.com/Chasing66/x-ui/stargazers" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/95b070f9bfcd5913c3f0e934820f4e70db4da2dedc77ce793bc7d492b59b1907/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f63686173696e6736362f782d75692e7376673f7374796c653d666c61742d737175617265" alt="Stargazers" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <a href="https://github.com/Chasing66/x-ui/issues" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/53896d0afa3d78e3eb73548ba7453d36b786254823e2a2a87d21fb8df5c2e224/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732f63686173696e6736362f782d75692e7376673f7374796c653d666c61742d737175617265" alt="Issues" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <a href="https://github.com/Chasing66/x-ui/blob/main/LICENSE" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/eaa9f26d39a11e4c60209a4d9de91a64470a37c667e17ea2662b43de08495f5c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f43686173696e6736362f782d75692e7376673f7374796c653d666c61742d737175617265" alt="MIT License" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><blockquote><p>x-ui docker ç‰ˆæœ¬</p></blockquote><p>å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸åŒçš„<code>tag</code>æ¥ä½¿ç”¨ä¸åŒä½œè€…çš„é•œåƒ</p><p>Tagamd64arm64armv7s390x<a href="https://github.com/vaxilu/x-ui" target="_blank" rel="noopener noreferrer">vaxilu/x-ui<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>latestâœ…âœ…âœ…âœ…<a href="https://github.com/FranzKafkaYu/x-ui" target="_blank" rel="noopener noreferrer">FranzKafkaYu/x-ui<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>alpha-zhâœ…âœ…âŒâœ…<a href="https://github.com/X-UI-Unofficial" target="_blank" rel="noopener noreferrer">X-UI-Unofficial/x-ui<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>betaâœ…âœ…âŒâœ…</p><h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨docker" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨docker"><span>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨<code>docker</code></span></a></h3><ul><li>ä¸€è‡´æ€§ä¸”èƒ½ä¿è¯ç¯å¢ƒéš”ç¦»</li><li>å¿«é€Ÿéƒ¨ç½²</li><li>ä¿è¯çµæ´»æ€§å’Œæ‰©å±•æ€§</li><li>æ›´å¥½çš„å¯ç§»æ¤æ€§</li><li>ä½æˆæœ¬</li><li>æ–¹ä¾¿æ§åˆ¶ç‰ˆæœ¬</li><li>å®‰å…¨</li><li>.....</li></ul><h3 id="å¯¹äº-x-ui-å¦‚æœä½¿ç”¨-docker" tabindex="-1"><a class="header-anchor" href="#å¯¹äº-x-ui-å¦‚æœä½¿ç”¨-docker"><span>å¯¹äº x-uiï¼Œå¦‚æœä½¿ç”¨ docker</span></a></h3><ul><li>æ— éœ€å…³å¿ƒåŸå®¿ä¸»æœºçš„ç³»ç»Ÿï¼Œæ¶æ„ï¼Œç‰ˆæœ¬</li><li>ä¸ä¼šç ´ååŸç³»ç»Ÿï¼Œå¦‚æœä¸æƒ³ä½¿ç”¨ï¼Œå¾ˆæ–¹ä¾¿å°±èƒ½å®Œå…¨å¹²å‡€çš„å¸è½½</li><li>éƒ¨ç½²æ–¹ä¾¿ä¸”å®¹æ˜“å‡çº§</li></ul><h3 id="å¦‚ä½•ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨"><span>å¦‚ä½•ä½¿ç”¨</span></a></h3><h4 id="å‰æ-å®‰è£…å¥½-docker" tabindex="-1"><a class="header-anchor" href="#å‰æ-å®‰è£…å¥½-docker"><span>å‰æï¼šå®‰è£…å¥½ docker</span></a></h4><p>ä½¿ç”¨å®˜æ–¹ä¸€é”®è„šæœ¬</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>curl -sSL https://get.docker.com/ | sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="è¿è¡Œä½ çš„å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œä½ çš„å®¹å™¨"><span>è¿è¡Œä½ çš„å®¹å™¨</span></a></h4><h5 id="ä½¿ç”¨-vaxilu-x-ui-ç‰ˆæœ¬çš„" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-vaxilu-x-ui-ç‰ˆæœ¬çš„"><span>ä½¿ç”¨ <a href="https://github.com/vaxilu/x-ui" target="_blank" rel="noopener noreferrer">vaxilu/x-ui<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ç‰ˆæœ¬çš„</span></a></h5><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>mkdir x-ui &amp;&amp; cd x-ui
docker run -itd --network=host \
    -v $PWD/db/:/etc/x-ui/ \
    -v $PWD/cert/:/root/cert/ \
    --name x-ui --restart=unless-stopped \
    enwaiax/x-ui
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„: å¦‚æœå¸Œæœ›ä½¿ç”¨<a href="https://github.com/FranzKafkaYu/x-ui" target="_blank" rel="noopener noreferrer">FranzKafkaYu/x-ui<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ç‰ˆæœ¬ï¼Œä»…éœ€è¦è®²ä¸Šè¿°é•œåƒä¿®æ”¹ä¸º <code>enwaiax/x-ui:alpha-zh</code></p><h5 id="ä½¿ç”¨-docker-compose-è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-docker-compose-è¿è¡Œ"><span>ä½¿ç”¨ docker-compose è¿è¡Œ</span></a></h5><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>mkdir x-ui &amp;&amp; cd x-ui
wget https://raw.githubusercontent.com//chasing66/x-ui/main/docker-compose.yml
docker compose up -d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¦‚ä½•å¯ç”¨-ssl" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å¯ç”¨-ssl"><span>å¦‚ä½•å¯ç”¨ ssl</span></a></h4><ul><li>å‡è®¾ä½ çš„ x-ui ç«¯å£æ˜¯ <code>54321</code></li><li>å‡è®¾ä½ çš„ IP æ˜¯ <code>10.10.10.10</code></li><li>å‡è®¾ä½ çš„åŸŸåæ˜¯ <code>xui.example.com</code>ï¼Œä¸”å·²ç»åšå¥½ A è®°å½•è§£æ</li><li>å‡è®¾ä½ ä½¿ç”¨çš„æ˜¯ Debian 10+æˆ–è€… Ubuntu 18+çš„ç³»ç»Ÿ</li><li>å‡è®¾ä½ çš„é‚®ç®±æ˜¯ <code>xxxx@example.com</code></li></ul><h5 id="æ­¥éª¤å¦‚ä¸‹" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤å¦‚ä¸‹"><span>æ­¥éª¤å¦‚ä¸‹</span></a></h5><ol><li>å®‰è£…å¿…è¦è½¯ä»¶</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>sudo apt update
sudo apt install snapd nginx
sudo snap install core
sudo snap refresh core
sudo snap install --classic certbot
sudo ln -s /snap/bin/certbot /usr/bin/certbot
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>æ–°å»ºä¸€ä¸ª nginx é…ç½®</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>touch /etc/nginx/conf.d/xui.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¢åŠ ä»¥ä¸‹é…ç½®ï¼ŒæŒ‰ç…§å®é™…æƒ…å†µè°ƒæ•´</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>server {
    listen 80;
    listen [::]:80;
    server_name xui.example.com;

    location / {
        proxy_redirect off;
        proxy_pass http://127.0.0.1:54321;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
    }

    # åä»£websocket
     location /xray {
         proxy_redirect off;
         proxy_pass http://127.0.0.1:10001;
         proxy_http_version 1.1;
         proxy_set_header Upgrade $http_upgrade;
         proxy_set_header Connection &quot;upgrade&quot;;
         proxy_set_header X-Real-IP $remote_addr;
         proxy_set_header Host $http_host;
         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
         proxy_set_header Y-Real-IP $realip_remote_addr;
     }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>æ£€æŸ¥é…ç½®æ˜¯å¦æ­£å¸¸</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>nginx -t
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol><li>ç”³è¯·è¯ä¹¦ï¼ŒæŒ‰ç…§æç¤ºè®¾ç½®</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>certbot --nginx --agree-tos --no-eff-email --email xxxxx@example.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ›´å¤šç»†èŠ‚å¯ä»¥å‚è€ƒ <a href="https://certbot.eff.org/" target="_blank" rel="noopener noreferrer">cerbot<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ol><li>åˆ·æ–° nginx é…ç½®ç”Ÿæ•ˆ</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>ngins -s reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol><li>é…ç½®å®šæ—¶ä»»åŠ¡</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>sudo certbot renew --dry-run
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3x-ui" tabindex="-1"><a class="header-anchor" href="#_3x-ui"><span>3X-UI</span></a></h3><p><a href="https://github.com/aircross/3x-ui/blob/main/README.en.md" target="_blank" rel="noopener noreferrer">Englishâ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> | <a href="https://github.com/aircross/3x-ui/blob/main/README.es_ES.md" target="_blank" rel="noopener noreferrer">EspaÃ±olâ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> | <a href="https://github.com/aircross/3x-ui/blob/main/README.ru_RU.md" target="_blank" rel="noopener noreferrer">Ğ ÑƒÑÑĞºĞ¸Ğ¹â <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>ä¸€ä¸ªæ›´å¥½çš„é¢æ¿ â€¢ åŸºäºXray Coreæ„å»º</strong></p><p><a href="https://github.com/aircross/3x-ui/releases" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/v/release/aircross/3x-ui.svg" alt="img" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://hub.docker.com/r/aircross/3x-ui" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/actions/workflow/status/aircross/3x-ui/release.yml.svg" alt="img" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://hub.docker.com/r/aircross/3x-ui" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/go-mod/go-version/aircross/3x-ui.svg" alt="GO Version" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://img.shields.io/docker/pulls/aircross/3x-ui.svg?style=flat-square" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/docker/pulls/aircross/3x-ui.svg?style=flat-square" alt="Docker Pulls" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://www.gnu.org/licenses/gpl-3.0.en.html" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/license-GPL V3-blue.svg?longCache=true" alt="License" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><blockquote><p><strong>Disclaimer:</strong> æ­¤é¡¹ç›®ä»…ä¾›ä¸ªäººå­¦ä¹ äº¤æµï¼Œè¯·ä¸è¦ç”¨äºéæ³•ç›®çš„ï¼Œè¯·ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚</p></blockquote><p><strong>å¦‚æœæ­¤é¡¹ç›®å¯¹ä½ æœ‰ç”¨ï¼Œè¯·ç»™ä¸€ä¸ª</strong>ğŸŒŸ</p><h4 id="é»˜è®¤ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤ä¿¡æ¯"><span>é»˜è®¤ä¿¡æ¯</span></a></h4><p>è®¿é—®ç«¯å£ï¼š2053</p><p>ç”¨æˆ·å/å¯†ç ï¼šadmin</p><h4 id="x-ui" tabindex="-1"><a class="header-anchor" href="#x-ui"><span>X-UI</span></a></h4><p>å¦‚æœä½ éœ€è¦ä½¿ç”¨X-UIï¼Œå¯ä»¥ç‚¹å‡»è¿™é‡Œè®¿é—®ï¼š<a href="https://github.com/aircross/x-ui" target="_blank" rel="noopener noreferrer">aircross/x-uiâ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><br><a href="https://img.shields.io/docker/pulls/aircross/x-ui.svg?style=flat-square" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/docker/pulls/aircross/x-ui.svg?style=flat-square" alt="Docker Pulls" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="å®‰è£…-å‡çº§" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-å‡çº§"><span>å®‰è£… &amp; å‡çº§</span></a></h4><h4 id="é€šè¿‡dockerå®‰è£…" tabindex="-1"><a class="header-anchor" href="#é€šè¿‡dockerå®‰è£…"><span>é€šè¿‡Dockerå®‰è£…</span></a></h4><p><strong>ä½¿ç”¨</strong></p><ol><li>å®‰è£…Dockerï¼š</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">#å›½å¤–æœåŠ¡å™¨ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…Docker</span>
<span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://get.docker.com <span class="token operator">|</span> <span class="token function">sh</span>
<span class="token comment"># è®¾ç½®å¼€æœºè‡ªå¯</span>
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> docker.service
<span class="token comment"># æ ¹æ®å®é™…éœ€è¦ä¿ç•™å‚æ•°start|restart|stop</span>
<span class="token function">sudo</span> <span class="token function">service</span> <span class="token function">docker</span> start<span class="token operator">|</span>restart<span class="token operator">|</span>stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å›½å†…çš„è¯·å‚ç…§ä¸‹é¢è¿™ä¸ªæ•™ç¨‹å®‰è£…ï¼Œéœ€è¦é…åˆèƒ½è®¿é—®download.docker.comçš„æœåŠ¡å™¨æœç”¨</p><p><strong><a href="https://vps.la/2024/07/01/%E5%92%8C%E8%B0%90%E4%B9%8B%E5%90%8E%E5%A6%82%E4%BD%95%E5%9C%A8%E5%9B%BD%E5%86%85%E5%AE%89%E8%A3%85docker%E5%8F%8A%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F%E4%BD%BF%E7%94%A8/" target="_blank" rel="noopener noreferrer">å’Œè°ä¹‹åå¦‚ä½•åœ¨å›½å†…å®‰è£…DockeråŠæ‹‰å–é•œåƒä½¿ç”¨â â <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong></p><ol><li><p>docker composeå®‰è£…ï¼Œå…‹éš†ä»“åº“ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/aircross/3x-ui.git
<span class="token builtin class-name">cd</span> 3x-ui
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>è¿è¡ŒæœåŠ¡ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> compose up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol><li><p>dockerä¸€é”®å®‰è£…ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /opt/docker/3x-ui/
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /opt/docker/acme.sh/
<span class="token function">docker</span> run <span class="token parameter variable">-itd</span> <span class="token punctuation">\</span>
   <span class="token parameter variable">-e</span> <span class="token assign-left variable">XRAY_VMESS_AEAD_FORCED</span><span class="token operator">=</span>false <span class="token punctuation">\</span>
   <span class="token parameter variable">-v</span> /opt/docker/3x-ui/:/etc/x-ui/ <span class="token punctuation">\</span>
   <span class="token parameter variable">-v</span> /opt/docker/acme.sh/:/root/cert/ <span class="token punctuation">\</span>
   <span class="token parameter variable">--network</span><span class="token operator">=</span>host <span class="token punctuation">\</span>
   <span class="token parameter variable">--restart</span><span class="token operator">=</span>unless-stopped <span class="token punctuation">\</span>
   <span class="token parameter variable">--name</span> 3x-ui <span class="token punctuation">\</span>
   aircross/3x-ui:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h5 id="å¦‚æœä½ éœ€è¦å®‰è£…acme-shç”¨æˆ·ç®¡ç†sslè¯ä¹¦çš„docker-å¯ä»¥æ‰§è¡Œä¸€ä¸‹å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å¦‚æœä½ éœ€è¦å®‰è£…acme-shç”¨æˆ·ç®¡ç†sslè¯ä¹¦çš„docker-å¯ä»¥æ‰§è¡Œä¸€ä¸‹å‘½ä»¤"><span>å¦‚æœä½ éœ€è¦å®‰è£…ACME.SHç”¨æˆ·ç®¡ç†SSLè¯ä¹¦çš„Dockerï¼Œå¯ä»¥æ‰§è¡Œä¸€ä¸‹å‘½ä»¤</span></a></h5><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /opt/docker/acme.sh
<span class="token function">docker</span> run <span class="token parameter variable">-itd</span> <span class="token parameter variable">-v</span> /opt/docker/acme.sh:/acme.sh <span class="token parameter variable">--net</span><span class="token operator">=</span>host <span class="token parameter variable">--restart</span><span class="token operator">=</span>unless-stopped <span class="token parameter variable">--name</span><span class="token operator">=</span>acme.sh <span class="token parameter variable">-v</span> /var/run/docker.sock:/var/run/docker.sock neilpang/acme.sh daemon
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-e</span> <span class="token assign-left variable">CF_Email</span><span class="token operator">=</span>ä½ çš„CFé‚®ç®± <span class="token punctuation">\</span>
    <span class="token parameter variable">-e</span> <span class="token assign-left variable">CF_Key</span><span class="token operator">=</span>ä½ çš„CF API Key  <span class="token punctuation">\</span>
    acme.sh <span class="token parameter variable">--issue</span> <span class="token parameter variable">-d</span> demo.com  <span class="token parameter variable">--dns</span> dns_cf  <span class="token punctuation">\</span>
    <span class="token parameter variable">--server</span> letsencrypt
<span class="token comment">#é»˜è®¤ä½¿ç”¨letsencryptä½œåºŸè¯ä¹¦ç­¾å‘æœåŠ¡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>x-uiçš„Dockeræ‰§è¡Œå‘½ä»¤æ·»åŠ ä¸‹é¢è¿™ä¸€è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>    <span class="token parameter variable">-v</span> /opt/docker/acme.sh:/acme.sh/ <span class="token punctuation">\</span>
    <span class="token comment">#åœ¨x-uiçš„dockeré‡Œé¢åŸŸåè¯ä¹¦çš„è·¯å¾„ä¸º/acme.sh/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code> <span class="token builtin class-name">cd</span> 3x-ui
 <span class="token function">docker</span> compose down
 <span class="token function">docker</span> compose pull 3x-ui
 <span class="token function">docker</span> compose up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»Dockerä¸­åˆ é™¤3x-ui</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code> <span class="token function">docker</span> stop 3x-ui
 <span class="token function">docker</span> <span class="token function">rm</span> 3x-ui
 <span class="token builtin class-name">cd</span> --
 <span class="token function">rm</span> <span class="token parameter variable">-r</span> 3x-ui
<span class="token function">bash</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token function">curl</span> <span class="token parameter variable">-Ls</span> https://raw.githubusercontent.com/aircross/3x-ui/master/install.sh<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="install-custom-version" tabindex="-1"><a class="header-anchor" href="#install-custom-version"><span>Install Custom Version</span></a></h4><p>To install your desired version, add the version to the end of the installation command. e.g., ver <code>v2.4.2</code>:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">bash</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token function">curl</span> <span class="token parameter variable">-Ls</span> https://raw.githubusercontent.com/mhsanaei/3x-ui/master/install.sh<span class="token punctuation">)</span> v2.4.2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></details><h2 id="é›¶åŸºç¡€ä¿å§†çº§å°ç™½èŠ‚ç‚¹æ­å»ºæ•™å­¦-ç›®å‰æœ€å®‰å…¨æœ€ç¨³å®šçš„æ­å»ºæ–¹å¼-é€šè¿‡x-uié¢æ¿å®ç°å•ç«¯å£å¤šç”¨æˆ·åˆç§Ÿ" tabindex="-1"><a class="header-anchor" href="#é›¶åŸºç¡€ä¿å§†çº§å°ç™½èŠ‚ç‚¹æ­å»ºæ•™å­¦-ç›®å‰æœ€å®‰å…¨æœ€ç¨³å®šçš„æ­å»ºæ–¹å¼-é€šè¿‡x-uié¢æ¿å®ç°å•ç«¯å£å¤šç”¨æˆ·åˆç§Ÿ"><span>é›¶åŸºç¡€ä¿å§†çº§å°ç™½èŠ‚ç‚¹æ­å»ºæ•™å­¦ï¼Œç›®å‰æœ€å®‰å…¨æœ€ç¨³å®šçš„æ­å»ºæ–¹å¼ï¼Œé€šè¿‡x-uié¢æ¿å®ç°å•ç«¯å£å¤šç”¨æˆ·åˆç§Ÿ</span></a></h2><details><summary>ã€æŸ¥çœ‹è¯¦æƒ…ã€‘</summary><h3 id="vpsè´­ä¹°" tabindex="-1"><a class="header-anchor" href="#vpsè´­ä¹°"><span>VPSè´­ä¹°</span></a></h3><p>æ¬ç“¦å·¥ï¼š<a href="https://bwg.bulianglin.com/" target="_blank" rel="noopener noreferrer">https://bwg.bulianglin.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä¼˜æƒ ç ï¼š <strong>BWHCGLUKKB</strong></p><blockquote><p>æ‰§è¡Œunminimizeä¹‹åï¼Œä¸­é€”å¦‚æœå‡ºç°å¦‚ä¸‹å›¾çš„A new versionæç¤ºä¿¡æ¯ï¼Œè¾“å…¥æ•°å­—2ï¼Œå†å›è½¦å³å¯</p></blockquote><figure><img src="https://telegra.ph/file/8785b3996bd9aae003a67.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>è¾“å…¥æ•°å­—2ï¼Œå†å›è½¦</p><h3 id="åŸŸåè´­ä¹°" tabindex="-1"><a class="header-anchor" href="#åŸŸåè´­ä¹°"><span>åŸŸåè´­ä¹°</span></a></h3><p>namesiloï¼š<a href="https://name.bulianglin.com/" target="_blank" rel="noopener noreferrer">https://name.bulianglin.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä¼˜æƒ ç ï¼šoldtong</p><h3 id="sshå·¥å…·" tabindex="-1"><a class="header-anchor" href="#sshå·¥å…·"><span>SSHå·¥å…·</span></a></h3><p>FinalShellï¼š<a href="https://www.hostbuf.com/t/988.html" target="_blank" rel="noopener noreferrer">https://www.hostbuf.com/t/988.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="èŠ‚ç‚¹æ­å»º" tabindex="-1"><a class="header-anchor" href="#èŠ‚ç‚¹æ­å»º"><span>èŠ‚ç‚¹æ­å»º</span></a></h3><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>#æ›´æ–°è½¯ä»¶æº
apt update
#å¯ç”¨ BBR TCP æ‹¥å¡æ§åˆ¶ç®—æ³•
echo &quot;net.core.default_qdisc=fq&quot; &gt;&gt; /etc/sysctl.conf
echo &quot;net.ipv4.tcp_congestion_control=bbr&quot; &gt;&gt; /etc/sysctl.conf
sysctl -p

#å®‰è£…x-uiï¼š
bash &lt;(curl -Ls https://raw.githubusercontent.com/vaxilu/x-ui/master/install.sh)

#å®‰è£…nginx
apt install nginx
#å®‰è£…acmeï¼š
curl https://get.acme.sh | sh
#æ·»åŠ è½¯é“¾æ¥ï¼š
ln -s  /root/.acme.sh/acme.sh /usr/local/bin/acme.sh
#åˆ‡æ¢CAæœºæ„ï¼š 
acme.sh --set-default-ca --server letsencrypt
#ç”³è¯·è¯ä¹¦ï¼š 
acme.sh  --issue -d ä½ çš„åŸŸå -k ec-256 --webroot  /var/www/html
#å®‰è£…è¯ä¹¦ï¼š
acme.sh --install-cert -d ä½ çš„åŸŸå --ecc --key-file /etc/x-ui/server.key  --fullchain-file /etc/x-ui/server.crt --reloadcmd &quot;systemctl force-reload nginx&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¯»æ‰¾é€‚åˆçš„ä¼ªè£…ç«™" tabindex="-1"><a class="header-anchor" href="#å¯»æ‰¾é€‚åˆçš„ä¼ªè£…ç«™"><span>å¯»æ‰¾é€‚åˆçš„ä¼ªè£…ç«™</span></a></h3><blockquote><p>httpç«™ç‚¹ä¼˜å…ˆï¼Œä¸ªäººç½‘ç›˜ç¬¦åˆå•èŠ‚ç‚¹å¤§æµé‡ç‰¹å¾</p></blockquote><p>ç¤ºä¾‹å…³é”®å­—ï¼šintext:ç™»å½• Cloudreve</p><h3 id="é…ç½®nginx" tabindex="-1"><a class="header-anchor" href="#é…ç½®nginx"><span>é…ç½®nginx</span></a></h3><p>é…ç½®æ–‡ä»¶è·¯å¾„ï¼š/etc/nginx/nginx.conf</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>user www-data;
worker_processes auto;
pid /run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;

events {
    worker_connections 1024;
}

http {
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    gzip on;

    server {
        listen 443 ssl;
        
        server_name nicename.co;  #ä½ çš„åŸŸå
        ssl_certificate       /etc/x-ui/server.crt;  #è¯ä¹¦ä½ç½®
        ssl_certificate_key   /etc/x-ui/server.key; #ç§é’¥ä½ç½®
        
        ssl_session_timeout 1d;
        ssl_session_cache shared:MozSSL:10m;
        ssl_session_tickets off;
        ssl_protocols    TLSv1.2 TLSv1.3;
        ssl_prefer_server_ciphers off;

        location / {
            proxy_pass https://bing.com; #ä¼ªè£…ç½‘å€
            proxy_redirect off;
            proxy_ssl_server_name on;
            sub_filter_once off;
            sub_filter &quot;bing.com&quot; $server_name;
            proxy_set_header Host &quot;bing.com&quot;;
            proxy_set_header Referer $http_referer;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header User-Agent $http_user_agent;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto https;
            proxy_set_header Accept-Encoding &quot;&quot;;
            proxy_set_header Accept-Language &quot;zh-CN&quot;;
        }


        location /ray {   #åˆ†æµè·¯å¾„
            proxy_redirect off;
            proxy_pass http://127.0.0.1:10000; #Xrayç«¯å£
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection &quot;upgrade&quot;;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        
        location /xui {   #xuiè·¯å¾„
            proxy_redirect off;
            proxy_pass http://127.0.0.1:9999;  #xuiç›‘å¬ç«¯å£
            proxy_http_version 1.1;
            proxy_set_header Host $host;
        }
    }

    server {
        listen 80;
        location /.well-known/ {
               root /var/www/html;
            }
        location / {
                rewrite ^(.*)$ https://$host$1 permanent;
            }
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ¯æ¬¡ä¿®æ”¹nginxé…ç½®æ–‡ä»¶åå¿…é¡»ä½¿ç”¨ systemctl reload nginx å‘½ä»¤é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</p></blockquote><h3 id="å¤šç”¨æˆ·åˆç§Ÿ" tabindex="-1"><a class="header-anchor" href="#å¤šç”¨æˆ·åˆç§Ÿ"><span>å¤šç”¨æˆ·åˆç§Ÿ</span></a></h3><blockquote><p>é€šè¿‡ä¿®æ”¹nginxçš„é…ç½®æ–‡ä»¶å®ç°ws pathè·¯å¾„åˆ†æµ</p></blockquote><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>location /ray {   #åˆ†æµè·¯å¾„
    proxy_redirect off;
    proxy_pass http://127.0.0.1:10000; #Xrayç«¯å£
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection &quot;upgrade&quot;;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="dockerç¦»çº¿é•œåƒ" tabindex="-1"><a class="header-anchor" href="#dockerç¦»çº¿é•œåƒ"><span>dockerç¦»çº¿é•œåƒ</span></a></h2><details><summary>ã€æŸ¥çœ‹è¯¦æƒ…ã€‘</summary><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>name: Alist_docker_amd64
on:
  workflow_dispatch:
    inputs:
      docker_images:
        description: &#39;è¯·å¡«å†™dockeré•œåƒåç§° å¤šä¸ªç”¨è‹±æ–‡é€—å·åˆ†å¼€&#39;
        required: true
        default: &#39;xhofe/alist:latest&#39;  # è®¾ç½®é»˜è®¤çš„ Docker é•œåƒåˆ—è¡¨

jobs:
  pull_and_package:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Clean up Docker to free space
      run: |
          docker system prune -a -f
          docker volume prune -f

    - name: Pull Docker Images and Package
      run: |
        images=&quot;${{ github.event.inputs.docker_images }}&quot;
        IFS=&#39;,&#39; read -r -a image_array &lt;&lt;&lt; &quot;$images&quot;
        for image in &quot;${image_array[@]}&quot;; do
          docker pull &quot;${image}&quot; --platform &quot;linux/amd64&quot;
          docker save &quot;${image}&quot; -o &quot;$(echo &quot;${image}&quot; | sed &#39;s/[\/:]/-/g&#39;)-amd64.tar&quot;
        done

    - name: Generate MD5 checksums
      run: |
          for file in *.tar; do
            md5sum &quot;$file&quot; &gt;&gt; &quot;${file}.md5&quot;
          done 
          
    - name: Get filenames in current directory
      run: |
       echo &quot;FILENAMES=$(ls *.tar 2&gt;/dev/null | tr &#39;\n&#39; &#39; &#39; | sed &#39;s/ $//&#39;)&quot; &gt;&gt; $GITHUB_ENV    
   
    - name: Compress each TAR file separately
      run: |
        for file in *.tar; do
          tar -czf &quot;${file}.gz&quot; &quot;$file&quot; &quot;${file}.md5&quot;
        done
      
    - name: Set Release Date
      id: set_date
      run: echo &quot;RELEASE_DATE=$(date +&#39;%Y-%m-%d&#39;)&quot; &gt;&gt; $GITHUB_ENV



    - name: Prepare MD5 content
      id: prepare_md5
      run: |
          echo &quot;MD5_CONTENTS&lt;&lt;EOF&quot; &gt;&gt; $GITHUB_ENV
          cat *-amd64.tar.md5 &gt;&gt; $GITHUB_ENV
          echo &quot;EOF&quot; &gt;&gt; $GITHUB_ENV
    
    - name: Upload artifacts
      uses: actions/upload-artifact@v4
      with:
        name: dockerimages
        path: &#39;*.gz&#39;
        retention-days: 1  # å°†ä¿ç•™å¤©æ•°è®¾ç½®ä¸º 1 å¤©
    - name: Create release
      id: create_release
      uses: ncipollo/release-action@v1
      with:
        tag: &quot;release-${{ env.RELEASE_DATE }}-${{ github.run_id }}&quot;
        name: &quot;${{ env.RELEASE_DATE }}: ${{ env.FILENAMES }}&quot;
        body: ${{ env.MD5_CONTENTS }}
        artifacts: |
                   *.tar
                   *.md5
                   *.gz
                

    - name: Clean up intermediate files
      run: |
        rm *-amd64.tar

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details></div><!--[--><!----><!--]--><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="vp-link vp-meta-label" href="https://github.com/dkyg666/dkyg666.github.io/edit/main/src/other/è½¯è·¯ç”±/OpenWrt/å…¶ä»–.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 43946866+dkyg666@users.noreply.github.com">dkyg666</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link vp-link prev" href="/other/%E8%BD%AF%E8%B7%AF%E7%94%B1/OpenWrt/OpenWrt.html" aria-label="OpenWrtæ‰©å®¹overlay"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->OpenWrtæ‰©å®¹overlay</div></a><!----></nav><!----><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer"><p id="hitokoto">  <a href="#" id="hitokoto_text">"äººç”Ÿæœ€å¤§çš„é—æ†¾,å°±æ˜¯åœ¨æœ€æ— èƒ½ä¸ºåŠ›çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªæƒ³è¦ä¿æŠ¤ä¸€ç”Ÿçš„äºº."</a> </p> </div><div class="vp-copyright">Copyright Â© 2024 à¦é»˜é£ </div></footer></div><!--]--><!--[--><!----><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DYmmM49d.js" defer></script>
  </body>
</html>
