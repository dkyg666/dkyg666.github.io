import{g as fu}from"./commonjsHelpers-Cpj98o6Y.js";function du(Gr,bi){for(var Rr=0;Rr<bi.length;Rr++){const fr=bi[Rr];if(typeof fr!="string"&&!Array.isArray(fr)){for(const xn in fr)if(xn!=="default"&&!(xn in Gr)){const wr=Object.getOwnPropertyDescriptor(fr,xn);wr&&Object.defineProperty(Gr,xn,wr.get?wr:{enumerable:!0,get:()=>fr[xn]})}}}return Object.freeze(Object.defineProperty(Gr,Symbol.toStringTag,{value:"Module"}))}var To={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(Gr,bi){(function(Rr,fr){Gr.exports=fr()})(self,function(){return function(){var Rr={4593:function(it,we){var M,oe,T,t,e,y=function(_){for(var m=[],n=0;n<_.length;++n){var c=_.charCodeAt(n);c<128?m.push(c):c<2048?(m.push(192|c>>6),m.push(128|63&c)):c<65536?(m.push(224|c>>12),m.push(128|63&c>>6),m.push(128|63&c)):(m.push(240|c>>18),m.push(128|63&c>>12),m.push(128|63&c>>6),m.push(128|63&c))}return m},p=function(_){for(var m=[],n=0;n<_.length;){var c=_[n++];c<128||(c<224?(c=(31&c)<<6,c|=63&_[n++]):c<240?(c=(15&c)<<12,c|=(63&_[n++])<<6,c|=63&_[n++]):(c=(7&c)<<18,c|=(63&_[n++])<<12,c|=(63&_[n++])<<6,c|=63&_[n++])),m.push(String.fromCharCode(c))}return m.join("")},u={};M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oe=function(_){for(var m=0,n=[],c=0|_.length/3;0<c--;){var d=(_[m]<<16)+(_[m+1]<<8)+_[m+2];m+=3,n.push(M.charAt(63&d>>18)),n.push(M.charAt(63&d>>12)),n.push(M.charAt(63&d>>6)),n.push(M.charAt(63&d))}return _.length-m==2?(d=(_[m]<<16)+(_[m+1]<<8),n.push(M.charAt(63&d>>18)),n.push(M.charAt(63&d>>12)),n.push(M.charAt(63&d>>6)),n.push("=")):_.length-m==1&&(d=_[m]<<16,n.push(M.charAt(63&d>>18)),n.push(M.charAt(63&d>>12)),n.push("==")),n.join("")},T=function(){for(var _=[],m=0;m<M.length;++m)_[M.charCodeAt(m)]=m;return _[61]=0,_}(),t=function(_){for(var m=0,n=[],c=0|_.length/4;0<c--;){var d=(T[_.charCodeAt(m)]<<18)+(T[_.charCodeAt(m+1)]<<12)+(T[_.charCodeAt(m+2)]<<6)+T[_.charCodeAt(m+3)];n.push(255&d>>16),n.push(255&d>>8),n.push(255&d),m+=4}return n&&(_.charAt(m-2)=="="?(n.pop(),n.pop()):_.charAt(m-1)=="="&&n.pop()),n},e={encode:function(_){for(var m=[],n=0;n<_.length;++n)m.push(_.charCodeAt(n));return m},decode:function(_){for(var m=0;m<s.length;++m)a[m]=String.fromCharCode(a[m]);return a.join("")}},u.decodeArray=function(_){var m=t(_);return new Uint8Array(m)},u.encodeASCII=function(_){var m=e.encode(_);return oe(m)},u.decodeASCII=function(_){var m=t(_);return e.decode(m)},u.encode=function(_){var m=y(_);return oe(m)},u.decode=function(_){var m=t(_);return p(m)},we.decode=u.decode,we.decodeArray=u.decodeArray,we.encode=u.encode,we.encodeASCII=u.encodeASCII},452:function(it,we){(function(M){var oe={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},T=function(O){var K=O;return oe.hasOwnProperty(O)&&(K=oe[O]),String.fromCharCode(K)},t=15,e=32,y={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},p={17:2,18:4,21:6,22:8,23:10,19:13,20:15},u={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},_={25:2,26:4,29:6,30:8,31:10,27:13,28:15},m=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],n={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(O){this.time=O},log:function(O,K){var re=this.verboseFilter[O];this.verboseLevel>=re&&console.log(this.time+" ["+O+"] "+K)}},c=function(O){for(var K=[],re=0;re<O.length;re++)K.push(O[re].toString(16));return K},d=function(O,K,re,H,ee){this.foreground=O||"white",this.underline=K||!1,this.italics=re||!1,this.background=H||"black",this.flash=ee||!1};d.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(O){for(var K=["foreground","underline","italics","background","flash"],re=0;re<K.length;re++){var H=K[re];O.hasOwnProperty(H)&&(this[H]=O[H])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(O){return this.foreground===O.foreground&&this.underline===O.underline&&this.italics===O.italics&&this.background===O.background&&this.flash===O.flash},copy:function(O){this.foreground=O.foreground,this.underline=O.underline,this.italics=O.italics,this.background=O.background,this.flash=O.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var I=function(O,K,re,H,ee,se){this.uchar=O||" ",this.penState=new d(K,re,H,ee,se)};I.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(O,K){this.uchar=O,this.penState.copy(K)},setPenState:function(O){this.penState.copy(O)},equals:function(O){return this.uchar===O.uchar&&this.penState.equals(O.penState)},copy:function(O){this.uchar=O.uchar,this.penState.copy(O.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var k=function(){this.chars=[];for(var O=0;O<e;O++)this.chars.push(new I);this.pos=0,this.currPenState=new d};k.prototype={equals:function(O){for(var K=!0,re=0;re<e;re++)if(!this.chars[re].equals(O.chars[re])){K=!1;break}return K},copy:function(O){for(var K=0;K<e;K++)this.chars[K].copy(O.chars[K])},isEmpty:function(){for(var O=!0,K=0;K<e;K++)if(!this.chars[K].isEmpty()){O=!1;break}return O},setCursor:function(O){this.pos!==O&&(this.pos=O),this.pos<0?(n.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>e&&(n.log("ERROR","Too large cursor position "+this.pos),this.pos=e)},moveCursor:function(O){var K=this.pos+O;if(O>1)for(var re=this.pos+1;re<K+1;re++)this.chars[re].setPenState(this.currPenState);this.setCursor(K)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(O){O>=144&&this.backSpace();var K=T(O);this.pos>=e?n.log("ERROR","Cannot insert "+O.toString(16)+" ("+K+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(K,this.currPenState),this.moveCursor(1))},clearFromPos:function(O){var K;for(K=O;K<e;K++)this.chars[K].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var O=[],K=!0,re=0;re<e;re++){var H=this.chars[re].uchar;H!==" "&&(K=!1),O.push(H)}return K?"":O.join("")},setPenStyles:function(O){this.currPenState.setStyles(O),this.chars[this.pos].setPenState(this.currPenState)}};var q=function(){this.rows=[];for(var O=0;O<t;O++)this.rows.push(new k);this.currRow=14,this.nrRollUpRows=null,this.reset()};q.prototype={reset:function(){for(var O=0;O<t;O++)this.rows[O].clear();this.currRow=14},equals:function(O){for(var K=!0,re=0;re<t;re++)if(!this.rows[re].equals(O.rows[re])){K=!1;break}return K},copy:function(O){for(var K=0;K<t;K++)this.rows[K].copy(O.rows[K])},isEmpty:function(){for(var O=!0,K=0;K<t;K++)if(!this.rows[K].isEmpty()){O=!1;break}return O},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(O){this.rows[this.currRow].insertChar(O)},setPen:function(O){this.rows[this.currRow].setPenStyles(O)},moveCursor:function(O){this.rows[this.currRow].moveCursor(O)},setCursor:function(O){n.log("INFO","setCursor: "+O),this.rows[this.currRow].setCursor(O)},setPAC:function(O){n.log("INFO","pacData = "+JSON.stringify(O));var K=O.row-1;this.nrRollUpRows&&K<this.nrRollUpRows-1&&(K=this.nrRollUpRows-1),this.currRow=K;var re=this.rows[this.currRow];if(O.indent!==null){var H=O.indent,ee=Math.max(H-1,0);re.setCursor(O.indent),O.color=re.chars[ee].penState.foreground}var se={foreground:O.color,underline:O.underline,italics:O.italics,background:"black",flash:!1};this.setPen(se)},setBkgData:function(O){n.log("INFO","bkgData = "+JSON.stringify(O)),this.backSpace(),this.setPen(O),this.insertChar(32)},setRollUpRows:function(O){this.nrRollUpRows=O},rollUp:function(){if(this.nrRollUpRows!==null){n.log("TEXT",this.getDisplayText());var O=this.currRow+1-this.nrRollUpRows,K=this.rows.splice(O,1)[0];K.clear(),this.rows.splice(this.currRow,0,K),n.log("INFO","Rolling up")}else n.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(O){O=O||!1;for(var K=[],re="",H=-1,ee=0;ee<t;ee++){var se=this.rows[ee].getTextString();se&&(H=ee+1,O?K.push("Row "+H+': "'+se+'"'):K.push(se.trim()))}return K.length>0&&(re=O?"["+K.join(" | ")+"]":K.join(`
`)),re},getTextAndFormat:function(){return this.rows}};var x=function(O,K){this.chNr=O,this.outputFilter=K,this.mode=null,this.verbose=0,this.displayedMemory=new q,this.nonDisplayedMemory=new q,this.lastOutputScreen=new q,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};x.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(O){this.outputFilter=O},setPAC:function(O){this.writeScreen.setPAC(O)},setBkgData:function(O){this.writeScreen.setBkgData(O)},setMode:function(O){O!==this.mode&&(this.mode=O,n.log("INFO","MODE="+O),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=O)},insertChars:function(O){for(var K=0;K<O.length;K++)this.writeScreen.insertChar(O[K]);var re=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";n.log("INFO",re+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(n.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){n.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){n.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){n.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(O){n.log("INFO","RU("+O+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(O)},cc_FON:function(){n.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){n.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){n.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){n.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){n.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){n.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){n.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(n.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var O=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=O,this.writeScreen=this.nonDisplayedMemory,n.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(O){n.log("INFO","TO("+O+") - Tab Offset"),this.writeScreen.moveCursor(O)},cc_MIDROW:function(O){var K={flash:!1};if(K.underline=O%2==1,K.italics=O>=46,K.italics)K.foreground="white";else{var re=Math.floor(O/2)-16;K.foreground=["white","green","blue","cyan","red","yellow","magenta"][re]}n.log("INFO","MIDROW: "+JSON.stringify(K)),this.writeScreen.setPen(K)},outputDataUpdate:function(){var O=n.time;O!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(O,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,O,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:O):this.cueStartTime=O,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(O){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,O,this.displayedMemory),this.cueStartTime=O))}};var $=function(O,K,re){this.field=O||1,this.outputs=[K,re],this.channels=[new x(1,K),new x(2,re)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};$.prototype={getHandler:function(O){return this.channels[O].getHandler()},setHandler:function(O,K){this.channels[O].setHandler(K)},addData:function(O,K){var re,H,ee,se=!1;this.lastTime=O,n.setTime(O);for(var Te=0;Te<K.length;Te+=2)H=127&K[Te],ee=127&K[Te+1],H>=16&&H<=31&&H===this.lastCmdA&&ee===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,n.log("DEBUG","Repeated command ("+c([H,ee])+") is dropped")):H!==0||ee!==0?(n.log("DATA","["+c([K[Te],K[Te+1]])+"] -> ("+c([H,ee])+")"),(re=this.parseCmd(H,ee))||(re=this.parseMidrow(H,ee)),re||(re=this.parsePAC(H,ee)),re||(re=this.parseBackgroundAttributes(H,ee)),re||(se=this.parseChars(H,ee))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(se):n.log("WARNING","No channel found yet. TEXT-MODE?")),re?this.dataCounters.cmd+=2:se?this.dataCounters.char+=2:(this.dataCounters.other+=2,n.log("WARNING","Couldn't parse cleaned data "+c([H,ee])+" orig: "+c([K[Te],K[Te+1]])))):this.dataCounters.padding+=2},parseCmd:function(O,K){var re;if(!((O===20||O===21||O===28||O===29)&&32<=K&&K<=47||(O===23||O===31)&&33<=K&&K<=35))return!1;re=O===20||O===21||O===23?1:2;var H=this.channels[re-1];return O===20||O===21||O===28||O===29?K===32?H.cc_RCL():K===33?H.cc_BS():K===34?H.cc_AOF():K===35?H.cc_AON():K===36?H.cc_DER():K===37?H.cc_RU(2):K===38?H.cc_RU(3):K===39?H.cc_RU(4):K===40?H.cc_FON():K===41?H.cc_RDC():K===42?H.cc_TR():K===43?H.cc_RTD():K===44?H.cc_EDM():K===45?H.cc_CR():K===46?H.cc_ENM():K===47&&H.cc_EOC():H.cc_TO(K-32),this.lastCmdA=O,this.lastCmdB=K,this.currChNr=re,!0},parseMidrow:function(O,K){var re=null;if((O===17||O===25)&&32<=K&&K<=47){if((re=O===17?1:2)!==this.currChNr)return n.log("ERROR","Mismatch channel in midrow parsing"),!1;var H=this.channels[re-1];return H.insertChars([32]),H.cc_MIDROW(K),n.log("DEBUG","MIDROW ("+c([O,K])+")"),this.lastCmdA=O,this.lastCmdB=K,!0}return!1},parsePAC:function(O,K){var re,H;if(!((17<=O&&O<=23||25<=O&&O<=31)&&64<=K&&K<=127||(O===16||O===24)&&64<=K&&K<=95))return!1;re=O<=23?1:2,H=64<=K&&K<=95?re===1?y[O]:u[O]:re===1?p[O]:_[O];var ee=this.interpretPAC(H,K);return this.channels[re-1].setPAC(ee),this.lastCmdA=O,this.lastCmdB=K,this.currChNr=re,!0},interpretPAC:function(O,K){var re,H={color:null,italics:!1,indent:null,underline:!1,row:O};return re=K>95?K-96:K-64,H.underline=(1&re)==1,re<=13?H.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(re/2)]:re<=15?(H.italics=!0,H.color="white"):H.indent=4*Math.floor((re-16)/2),H},parseChars:function(O,K){var re=null,H=null,ee=null;if(O>=25?(re=2,ee=O-8):(re=1,ee=O),17<=ee&&ee<=19){var se;se=ee===17?K+80:ee===18?K+112:K+144,n.log("INFO","Special char '"+T(se)+"' in channel "+re),H=[se],this.lastCmdA=O,this.lastCmdB=K}else 32<=O&&O<=127&&(H=K===0?[O]:[O,K],this.lastCmdA=null,this.lastCmdB=null);if(H){var Te=c(H);n.log("DEBUG","Char codes =  "+Te.join(","))}return H},parseBackgroundAttributes:function(O,K){var re,H,ee;return((O===16||O===24)&&32<=K&&K<=47||(O===23||O===31)&&45<=K&&K<=47)&&(re={},O===16||O===24?(H=Math.floor((K-32)/2),re.background=m[H],K%2==1&&(re.background=re.background+"_semi")):K===45?re.background="transparent":(re.foreground="black",K===47&&(re.underline=!0)),ee=O<24?1:2,this.channels[ee-1].setBkgData(re),this.lastCmdA=O,this.lastCmdB=K,!0)},reset:function(){for(var O=0;O<this.channels.length;O++)this.channels[O]&&this.channels[O].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(O){for(var K=0;K<this.channels.length;K++)this.channels[K]&&this.channels[K].cueSplitAtTime(O)}},M.logger=n,M.PenState=d,M.CaptionScreen=q,M.Cea608Parser=$,M.findCea608Nalus=function(O,K,re){for(var H=0,ee=K,se=[],Te=function(Ee,Pe,Ve,et){if(Ee!==4||Pe<8)return null;var _e=Ve.getUint8(et),Oe=Ve.getUint16(et+1),_t=Ve.getUint32(et+3),dt=Ve.getUint8(et+7);return _e==181&&Oe==49&&_t==1195456820&&dt==3};ee<K+re;){if(H=O.getUint32(ee),(31&O.getUint8(ee+4))==6)for(var X=ee+5,Ie=-1;X<ee+4+H-1;){Ie=0;for(var Le=255;Le===255;)Ie+=Le=O.getUint8(X),X++;var je=0;for(Le=255;Le===255;)je+=Le=O.getUint8(X),X++;Te(Ie,je,O,X)&&se.push([X,je]),X+=je}ee+=H+4}return se},M.extractCea608DataFromRange=function(O,K){var re=K[0],H=[[],[]];re+=8;var ee=31&O.getUint8(re);re+=2;for(var se=0;se<ee;se++){var Te=O.getUint8(re),X=4&Te,Ie=3&Te;re++;var Le=O.getUint8(re);re++;var je=O.getUint8(re);re++,X&&(127&Le)+(127&je)!=0&&(Ie===0?(H[0].push(Le),H[0].push(je)):Ie===1&&(H[1].push(Le),H[1].push(je)))}return H}})(we)},8416:function(it,we,M){var oe=M(1139),T=M(5448),t=M(6398),e=M(2032),y=(M(5530),typeof window<"u"&&window||M.g),p=y.dashjs;p||(p=y.dashjs={}),p.MediaPlayer=oe.Z,p.FactoryMaker=T.Z,p.Debug=t.Z,p.Version=(0,e.e)()},6398:function(it,we,M){var oe=M(5595),T=M(8512),t=M(5448),e=1,y=2,p=3,u=4,_=5;function m(c){c=c||{};var d,I,k,q,x=this.context,$=(0,oe.Z)(x).getInstance(),O=c.settings,K=[];function re(Le){return Le&&Le.bind?Le.bind(window.console):window.console.log.bind(window.console)}function H(){for(var Le=arguments.length,je=new Array(Le),Ee=0;Ee<Le;Ee++)je[Ee]=arguments[Ee];Ie.apply(void 0,[e,this].concat(je))}function ee(){for(var Le=arguments.length,je=new Array(Le),Ee=0;Ee<Le;Ee++)je[Ee]=arguments[Ee];Ie.apply(void 0,[y,this].concat(je))}function se(){for(var Le=arguments.length,je=new Array(Le),Ee=0;Ee<Le;Ee++)je[Ee]=arguments[Ee];Ie.apply(void 0,[p,this].concat(je))}function Te(){for(var Le=arguments.length,je=new Array(Le),Ee=0;Ee<Le;Ee++)je[Ee]=arguments[Ee];Ie.apply(void 0,[u,this].concat(je))}function X(){for(var Le=arguments.length,je=new Array(Le),Ee=0;Ee<Le;Ee++)je[Ee]=arguments[Ee];Ie.apply(void 0,[_,this].concat(je))}function Ie(Le,je){var Ee="",Pe=null;I&&(Pe=new Date().getTime(),Ee+="["+(Pe-q)+"]"),k&&je&&je.getClassName&&(Ee+="["+je.getClassName()+"]",je.getType&&(Ee+="["+je.getType()+"]")),Ee.length>0&&(Ee+=" ");for(var Ve=arguments.length,et=new Array(Ve>2?Ve-2:0),_e=2;_e<Ve;_e++)et[_e-2]=arguments[_e];Array.apply(null,et).forEach(function(Oe){Ee+=Oe+" "}),K[Le]&&O&&O.get().debug.logLevel>=Le&&K[Le](Ee),O&&O.get().debug.dispatchEvent&&$.trigger(T.Z.LOG,{message:Ee,level:Le})}return d={getLogger:function(Le){return{fatal:H.bind(Le),error:ee.bind(Le),warn:se.bind(Le),info:Te.bind(Le),debug:X.bind(Le)}},setLogTimestampVisible:function(Le){I=Le},setCalleeNameVisible:function(Le){k=Le}},I=!0,k=!0,q=new Date().getTime(),typeof window<"u"&&window.console&&(K[e]=re(window.console.error),K[y]=re(window.console.error),K[p]=re(window.console.warn),K[u]=re(window.console.info),K[_]=re(window.console.debug)),d}m.__dashjs_factory_name="Debug";var n=t.Z.getSingletonFactory(m);n.LOG_LEVEL_NONE=0,n.LOG_LEVEL_FATAL=e,n.LOG_LEVEL_ERROR=y,n.LOG_LEVEL_WARNING=p,n.LOG_LEVEL_INFO=u,n.LOG_LEVEL_DEBUG=_,t.Z.updateSingletonFactory(m.__dashjs_factory_name,n),we.Z=n},5595:function(it,we,M){var oe=M(5448),T=M(8825);function t(){var y={};function p(_,m,n){var c=-1;return y[_]&&y[_].some(function(d,I){if(d&&d.callback===m&&(!n||n===d.scope))return c=I,!0}),c}var u={on:function(_,m,n){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!_)throw new Error("event type cannot be null or undefined");if(!m||typeof m!="function")throw new Error("listener must be a function: "+m);var d=c.priority||0;if(!(p(_,m,n)>=0)){y[_]=y[_]||[];var I={callback:m,scope:n,priority:d};n&&n.getStreamId&&(I.streamId=n.getStreamId()),n&&n.getType&&(I.mediaType=n.getType()),c&&c.mode&&(I.mode=c.mode);var k=y[_].some(function(q,x){if(q&&d>q.priority)return y[_].splice(x,0,I),!0});k||y[_].push(I)}},off:function(_,m,n){if(_&&m&&y[_]){var c=p(_,m,n);c<0||(y[_][c]=null)}},trigger:function(_){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(_&&y[_]){if((m=m||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");m.type=_,n.streamId&&(m.streamId=n.streamId),n.mediaType&&(m.mediaType=n.mediaType),y[_].filter(function(c){return!(!c||n.streamId&&c.streamId&&c.streamId!==n.streamId||n.mediaType&&c.mediaType&&c.mediaType!==n.mediaType||n.mode&&c.mode&&c.mode!==n.mode||!c.mode&&n.mode&&n.mode===T.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(c){return c&&c.callback.call(c.scope,m)})}},reset:function(){y={}}};return u}t.__dashjs_factory_name="EventBus";var e=oe.Z.getSingletonFactory(t);e.EVENT_PRIORITY_LOW=0,e.EVENT_PRIORITY_HIGH=5e3,oe.Z.updateSingletonFactory(t.__dashjs_factory_name,e),we.Z=e},5448:function(it,we){var M=function(){var oe,T=[],t={},e={};function y(m,n){for(var c in T){var d=T[c];if(d.context===m&&d.name===n)return d.instance}return null}function p(m,n){return n[m]}function u(m,n,c){m in c&&(c[m]=n)}function _(m,n,c){var d,I=m.__dashjs_factory_name,k=n[I];if(k){var q=k.instance;if(!k.override)return q.apply({context:n,factory:oe},c);for(var x in d=m.apply({context:n},c),q=q.apply({context:n,factory:oe,parent:d},c))d.hasOwnProperty(x)&&(d[x]=q[x])}else d=m.apply({context:n},c);return d.getClassName=function(){return I},d}return oe={extend:function(m,n,c,d){!d[m]&&n&&(d[m]={instance:n,override:c})},getSingletonInstance:y,setSingletonInstance:function(m,n,c){for(var d in T){var I=T[d];if(I.context===m&&I.name===n)return void(T[d].instance=c)}T.push({name:n,context:m,instance:c})},deleteSingletonInstances:function(m){T=T.filter(function(n){return n.context!==m})},getSingletonFactory:function(m){var n=p(m.__dashjs_factory_name,t);return n||(n=function(c){var d;return c===void 0&&(c={}),{getInstance:function(){return d||(d=y(c,m.__dashjs_factory_name)),d||(d=_(m,c,arguments),T.push({name:m.__dashjs_factory_name,context:c,instance:d})),d}}},t[m.__dashjs_factory_name]=n),n},getSingletonFactoryByName:function(m){return p(m,t)},updateSingletonFactory:function(m,n){u(m,n,t)},getClassFactory:function(m){var n=p(m.__dashjs_factory_name,e);return n||(n=function(c){return c===void 0&&(c={}),{create:function(){return _(m,c,arguments)}}},e[m.__dashjs_factory_name]=n),n},getClassFactoryByName:function(m){return p(m,e)},updateClassFactory:function(m,n){u(m,n,e)}},oe}();we.Z=M},1264:function(it,we,M){var oe=M(5448),T=M(703),t=M(6398),e=M(3393),y=M(7855),p=M(5595),u=M(8512);function _(d){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},_(d)}function m(d,I,k){return I in d?Object.defineProperty(d,I,{value:k,enumerable:!0,configurable:!0,writable:!0}):d[I]=k,d}function n(){var d,I,k=this.context,q=(0,p.Z)(k).getInstance(),x={"streaming.delay.liveDelay":u.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":u.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":u.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":u.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":u.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},$={debug:{logLevel:t.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:e.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:e.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:e.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:e.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(d={},m(d,y.w.MPD_TYPE,500),m(d,y.w.XLINK_EXPANSION_TYPE,500),m(d,y.w.MEDIA_SEGMENT_TYPE,1e3),m(d,y.w.INIT_SEGMENT_TYPE,1e3),m(d,y.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),m(d,y.w.INDEX_SEGMENT_TYPE,1e3),m(d,y.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),m(d,y.w.LICENSE,1e3),m(d,y.w.OTHER_TYPE,1e3),m(d,"lowLatencyReductionFactor",10),d),retryAttempts:(I={},m(I,y.w.MPD_TYPE,3),m(I,y.w.XLINK_EXPANSION_TYPE,1),m(I,y.w.MEDIA_SEGMENT_TYPE,3),m(I,y.w.INIT_SEGMENT_TYPE,3),m(I,y.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),m(I,y.w.INDEX_SEGMENT_TYPE,3),m(I,y.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),m(I,y.w.LICENSE,3),m(I,y.w.OTHER_TYPE,3),m(I,"lowLatencyMultiplyFactor",5),I),abr:{movingAverageMethod:e.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:e.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:e.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:e.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},O=T.Z.clone($);function K(re,H,ee){for(var se in re)re.hasOwnProperty(se)&&(H.hasOwnProperty(se)?_(re[se])!=="object"||re[se]instanceof Array||re[se]===null?(H[se]=T.Z.clone(re[se]),x[ee+se]&&q.trigger(x[ee+se])):K(re[se],H[se],ee.slice()+se+"."):console.error("Settings parameter "+ee+se+" is not supported"))}return{get:function(){return O},update:function(re){_(re)==="object"&&K(re,O,"")},reset:function(){O=T.Z.clone($)}}}n.__dashjs_factory_name="Settings";var c=oe.Z.getSingletonFactory(n);we.Z=c},703:function(it,we,M){var oe=M(3875),T=M.n(oe),t=M(1067);function e(u){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},e(u)}function y(u,_){for(var m=0;m<_.length;m++){var n=_[m];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,n.key,n)}}var p=function(){function u(){(function(n,c){if(!(n instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u)}var _,m;return _=u,m=[{key:"mixin",value:function(n,c,d){var I,k={};if(n)for(var q in c)c.hasOwnProperty(q)&&(I=c[q],q in n&&(n[q]===I||q in k&&k[q]===I)||(e(n[q])==="object"&&n[q]!==null?n[q]=u.mixin(n[q],I,d):n[q]=d(I)));return n}},{key:"clone",value:function(n){if(!n||e(n)!=="object")return n;var c;if(n instanceof Array){c=[];for(var d=0,I=n.length;d<I;++d)d in n&&c.push(u.clone(n[d]))}else c={};return u.mixin(c,n,u.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(n,c){try{if(!c||c.length===0)return n;var d=new URL(n);return c.forEach(function(I){I.key&&I.value&&d.searchParams.set(I.key,I.value)}),d.href}catch{return n}}},{key:"parseHttpHeaders",value:function(n){var c={};if(!n)return c;for(var d=n.trim().split(`\r
`),I=0,k=d.length;I<k;I++){var q=d[I],x=q.indexOf(": ");x>0&&(c[q.substring(0,x)]=q.substring(x+2))}return c}},{key:"generateUuid",value:function(){var n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var d=(n+16*Math.random())%16|0;return n=Math.floor(n/16),(c=="x"?d:3&d|8).toString(16)})}},{key:"generateHashCode",value:function(n){var c=0;if(n.length===0)return c;for(var d=0;d<n.length;d++)c=(c<<5)-c+n.charCodeAt(d),c|=0;return c}},{key:"getRelativeUrl",value:function(n,c){try{var d=new URL(n),I=new URL(c);if(d.protocol=I.protocol,d.origin!==I.origin)return c;var k=T().relative(d.pathname.substr(0,d.pathname.lastIndexOf("/")),I.pathname.substr(0,I.pathname.lastIndexOf("/"))),q=k.length===0?1:0;return k+=I.pathname.substr(I.pathname.lastIndexOf("/")+q,I.pathname.length-1),I.pathname.length<k.length?I.pathname:k}catch{return c}}},{key:"parseUserAgent",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var c=n===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,t.UAParser)(c)}catch{return{}}}},{key:"stringHasProtocol",value:function(n){return/(http(s?)):\/\//i.test(n)}}],m&&y(_,m),u}();we.Z=p},2032:function(it,we,M){function oe(){return"4.7.4"}M.d(we,{e:function(){return oe}})},2230:function(it,we){function M(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var oe=function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T)}var t,e;return t=T,(e=[{key:"extend",value:function(y,p){if(y){var u=!!p&&p.override,_=!!p&&p.publicOnly;for(var m in y)!y.hasOwnProperty(m)||this[m]&&!u||_&&y[m].indexOf("public_")===-1||(this[m]=y[m])}}}])&&M(t.prototype,e),T}();we.Z=oe},4351:function(it,we,M){function oe(p){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},oe(p)}function T(p,u){return T=Object.setPrototypeOf||function(_,m){return _.__proto__=m,_},T(p,u)}function t(p,u){return!u||oe(u)!=="object"&&typeof u!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(p):u}function e(p){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},e(p)}var y=function(p){(function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&T(c,d)})(n,p);var u,_,m=(u=n,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var c,d=e(u);if(_){var I=e(this).constructor;c=Reflect.construct(d,arguments,I)}else c=d.apply(this,arguments);return t(this,c)});function n(){var c;return function(d,I){if(!(d instanceof I))throw new TypeError("Cannot call a class as a function")}(this,n),(c=m.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",c.BUFFERING_COMPLETED="bufferingCompleted",c.BUFFER_CLEARED="bufferCleared",c.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",c.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",c.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",c.CMSD_STATIC_HEADER="cmsdStaticHeader",c.CURRENT_TRACK_CHANGED="currentTrackChanged",c.DATA_UPDATE_COMPLETED="dataUpdateCompleted",c.INBAND_EVENTS="inbandEvents",c.INITIAL_STREAM_SWITCH="initialStreamSwitch",c.INIT_FRAGMENT_LOADED="initFragmentLoaded",c.INIT_FRAGMENT_NEEDED="initFragmentNeeded",c.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",c.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",c.LOADING_COMPLETED="loadingCompleted",c.LOADING_PROGRESS="loadingProgress",c.LOADING_DATA_PROGRESS="loadingDataProgress",c.LOADING_ABANDONED="loadingAborted",c.MANIFEST_UPDATED="manifestUpdated",c.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",c.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",c.QUOTA_EXCEEDED="quotaExceeded",c.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",c.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",c.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",c.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",c.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",c.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",c.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",c.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",c.SOURCE_BUFFER_ERROR="sourceBufferError",c.STREAMS_COMPOSED="streamsComposed",c.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",c.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",c.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",c.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",c.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",c.URL_RESOLUTION_FAILED="urlResolutionFailed",c.VIDEO_CHUNK_RECEIVED="videoChunkReceived",c.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",c.XLINK_ELEMENT_LOADED="xlinkElementLoaded",c.XLINK_READY="xlinkReady",c.SEEK_TARGET="seekTarget",c.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",c.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",c.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",c.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",c.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",c}return n}(M(8342).Z);we.Z=y},8512:function(it,we,M){function oe(_){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},oe(_)}function T(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")}function t(_,m){return t=Object.setPrototypeOf||function(n,c){return n.__proto__=c,n},t(_,m)}function e(_,m){return!m||oe(m)!=="object"&&typeof m!="function"?function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(_):m}function y(_){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},y(_)}var p=function(_){(function(I,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(k&&k.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),k&&t(I,k)})(d,_);var m,n,c=(m=d,n=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var I,k=y(m);if(n){var q=y(this).constructor;I=Reflect.construct(k,arguments,q)}else I=k.apply(this,arguments);return e(this,I)});function d(){return T(this,d),c.apply(this,arguments)}return d}(M(4351).Z),u=new p;we.Z=u},8342:function(it,we){function M(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var oe=function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T)}var t,e;return t=T,(e=[{key:"extend",value:function(y,p){if(y){var u=!!p&&p.override,_=!!p&&p.publicOnly;for(var m in y)!y.hasOwnProperty(m)||this[m]&&!u||_&&y[m].indexOf("public_")===-1||(this[m]=y[m])}}}])&&M(t.prototype,e),T}();we.Z=oe},9326:function(it,we,M){var oe=M(3186),T=M(7855),t=M(5448),e=M(8825),y=M(7387),p=M(1553);function u(_){var m,n,c,d,I,k=(_=_||{}).eventBus,q=_.debug,x=_.urlUtils,$=_.type,O=_.streamInfo,K=_.segmentsController,re=_.timelineConverter,H=_.baseURLController;function ee(){return $}function se(){c=null}function Te(Ee,Pe,Ve){var et,_e,Oe=H.resolve(Ve.path),_t={};return Oe&&Pe!==Oe.url&&x.isRelative(Pe)?(et=Oe.url,_e=Oe.serviceLocation,_t=Oe.queryParams,Pe&&(et=x.resolve(Pe,et))):et=Pe,!x.isRelative(et)&&(Ee.url=et,Ee.serviceLocation=_e,Ee.queryParams=_t,!0)}function X(Ee,Pe){if(Pe==null)return null;var Ve=new oe.Z,et=Pe.representation,_e=et.adaptation.period.mpd.manifest.Period_asArray[et.adaptation.period.index].AdaptationSet_asArray[et.adaptation.index].Representation_asArray[et.index].bandwidth,Oe=Pe.media;return Oe=(0,y.vi)(Oe,"Number",Pe.replacementNumber),Oe=(0,y.vi)(Oe,"Time",Pe.replacementTime),Oe=(0,y.vi)(Oe,"Bandwidth",_e),Oe=(0,y.Aj)(Oe,et.id),Oe=(0,y.eR)(Oe),Ve.mediaType=ee(),Ve.type=T.w.MEDIA_SEGMENT_TYPE,Ve.range=Pe.mediaRange,Ve.startTime=Pe.presentationStartTime,Ve.mediaStartTime=Pe.mediaStartTime,Ve.duration=Pe.duration,Ve.timescale=et.timescale,Ve.availabilityStartTime=Pe.availabilityStartTime,Ve.availabilityEndTime=Pe.availabilityEndTime,Ve.availabilityTimeComplete=et.availabilityTimeComplete,Ve.wallStartTime=Pe.wallStartTime,Ve.quality=et.index,Ve.index=Pe.index,Ve.mediaInfo=Ee,Ve.adaptationIndex=et.adaptation.index,Ve.representationId=et.id,Te(Ve,Oe,et)?Ve:void 0}function Ie(Ee,Pe,Ve){var et=null;if(!Pe||!Pe.segmentInfoType)return et;var _e=K.getSegmentByTime(Pe,Ve);return _e&&(c=_e,n.debug("Index for time "+Ve+" is "+_e.index),et=X(Ee,_e)),et}function Le(Ee,Pe,Ve){var et=null,_e=K.getSegmentByIndex(Pe,Ve,c?c.mediaStartTime:-1);if(_e)et=X(Ee,_e),c=_e;else{if(d&&!I)return n.debug(ee()+" No segment found at index: "+Ve+". Wait for next loop"),null;I=!0}return et}function je(){n.debug("Dynamic stream complete"),I=!0}return m={getCurrentIndex:function(){return c?c.index:-1},getInitRequest:function(Ee,Pe){return Pe?function(Ve,et,_e){var Oe=new oe.Z,_t=et.adaptation.period,dt=_t.start;if(Oe.mediaType=_e,Oe.type=T.w.INIT_SEGMENT_TYPE,Oe.range=et.range,Oe.availabilityStartTime=re.calcAvailabilityStartTimeFromPresentationTime(dt,et,d),Oe.availabilityEndTime=re.calcAvailabilityEndTimeFromPresentationTime(dt+_t.duration,et,d),Oe.quality=et.index,Oe.mediaInfo=Ve,Oe.representationId=et.id,Te(Oe,et.initialization,et))return Oe.url=(0,y.vi)(Oe.url,"Bandwidth",et.bandwidth),Oe}(Ee,Pe,ee()):null},getNextSegmentRequest:function(Ee,Pe){return Pe&&Pe.segmentInfoType?Le(Ee,Pe,c?c.index+1:0):null},getNextSegmentRequestIdempotent:function(Ee,Pe){var Ve=c?c.index+1:0,et=K.getSegmentByIndex(Pe,Ve,c?c.mediaStartTime:-1);return et?X(Ee,et):null},getSegmentRequestForTime:Ie,getStreamId:function(){return O.id},getStreamInfo:function(){return O},getType:ee,getValidTimeAheadOfTargetTime:function(Ee,Pe,Ve,et){try{if(isNaN(Ee)||!Pe||!Ve)return NaN;if(Ee<0&&(Ee=0),isNaN(et)&&(et=.5),Ie(Pe,Ve,Ee))return Ee;if(Ve.adaptation.period.start+Ve.adaptation.period.duration<Ee)return NaN;for(var _e=isFinite(Ve.adaptation.period.duration)?Ve.adaptation.period.start+Ve.adaptation.period.duration:Ee+30,Oe=Math.min(Ee+et,_e),_t=NaN,dt=null;Oe<=_e;){var Ze=null;if(Oe<=_e&&(Ze=Ie(Pe,Ve,Oe)),Ze){_t=Oe,dt=Ze;break}Oe+=et}if(dt){var Je=dt.startTime+dt.duration;return Ee>dt.startTime&&Je-Ee>et?Ee:!isNaN(dt.startTime)&&Ee<dt.startTime&&_t>dt.startTime?dt.startTime+.001:Math.min(Je-et,_t)}return _t}catch{return NaN}},initialize:function(Ee){d=Ee,I=!1,K.initialize(Ee)},isLastSegmentRequested:function(Ee,Pe){return!Ee||!c?!1:I?!0:!isFinite(Ee.adaptation.period.duration)||c.presentationStartTime+c.duration>Pe?!1:Ee.mediaFinishedInformation&&!isNaN(Ee.mediaFinishedInformation.numberOfSegments)&&!isNaN(c.index)&&c.index>=Ee.mediaFinishedInformation.numberOfSegments-1&&(!d||Ee.segmentInfoType===p.Z.SEGMENT_TEMPLATE||d&&Ee.segmentInfoType===p.Z.SEGMENT_LIST&&Ee.adaptation.period.nextPeriodId)?!0:!!(d&&Ee.adaptation.period.nextPeriodId&&Ee.segmentInfoType===p.Z.SEGMENT_TIMELINE&&Ee.mediaFinishedInformation&&!isNaN(Ee.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&c&&!isNaN(c.mediaStartTime)&&!isNaN(c.duration)&&c.mediaStartTime+c.duration>=Ee.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(Ee,Pe){return Pe&&Pe.segmentInfoType?Le(Ee,Pe,c?c.index:0):null},reset:function(){se(),k.off(e.Z.DYNAMIC_TO_STATIC,je,m)}},n=q.getLogger(m),se(),k.on(e.Z.DYNAMIC_TO_STATIC,je,m),m}u.__dashjs_factory_name="DashHandler",we.Z=t.Z.getClassFactory(u)},1553:function(it,we){function M(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var oe=new(function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T),this.init()}var t,e;return t=T,(e=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&M(t.prototype,e),T}());we.Z=oe},7802:function(it,we,M){var oe=M(5448),T=M(1724),t=M(3636),e=M(1736),y=M(5246);function p(_){_=_||{};var m,n,c=this.context,d=_.dashConstants,I=_.type,k=_.segmentBaseController;function q(x){return x?x.segments?n[d.SEGMENT_BASE]:n[x.segmentInfoType]:null}return m={initialize:function(x){n[d.SEGMENT_TIMELINE]=(0,T.Z)(c).create(_,x),n[d.SEGMENT_TEMPLATE]=(0,t.Z)(c).create(_,x),n[d.SEGMENT_LIST]=(0,e.Z)(c).create(_,x),n[d.SEGMENT_BASE]=(0,y.Z)(c).create(_,x)},updateInitData:function(x,$){return $?Promise.resolve():k.getSegmentBaseInitSegment({representation:x,mediaType:I})},updateSegmentData:function(x,$){return $?Promise.resolve():k.getSegmentList({mimeType:x.mimeType,representation:x,mediaType:I})},getSegmentByIndex:function(x,$,O){var K=q(x);return K?K.getSegmentByIndex(x,$,O):null},getSegmentByTime:function(x,$){var O=q(x);return O?O.getSegmentByTime(x,$):null},getMediaFinishedInformation:function(x){var $=q(x);return $?$.getMediaFinishedInformation(x):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},n={},m}p.__dashjs_factory_name="SegmentsController";var u=oe.Z.getClassFactory(p);we.Z=u},1736:function(it,we,M){var oe=M(5448),T=M(3393),t=M(7387);function e(p,u){var _=(p=p||{}).timelineConverter;function m(){if(!_||!_.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(T.Z.MISSING_CONFIG_ERROR)}function n(c,d){if(m(),!c)return null;var I=c.adaptation.period.mpd.manifest.Period_asArray[c.adaptation.period.index].AdaptationSet_asArray[c.adaptation.index].Representation_asArray[c.index].SegmentList,k=I.SegmentURL_asArray.length,q=c&&!isNaN(c.startNumber)?c.startNumber:1,x=Math.max(q-1,0),$=Math.max(d-x,0),O=null;if($<k){var K=I.SegmentURL_asArray[$];(O=(0,t.NF)(_,u,c,d))&&(O.replacementTime=(q+d-1)*c.segmentDuration,O.media=K.media?K.media:"",O.mediaRange=K.mediaRange,O.indexRange=K.indexRange)}return O}return{getSegmentByIndex:n,getSegmentByTime:function(c,d){if(m(),!c)return null;var I=c.segmentDuration;if(isNaN(I))return null;var k=_.calcPeriodRelativeTimeFromMpdRelativeTime(c,d);return n(c,Math.floor(k/I))},getMediaFinishedInformation:function(c){var d={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!c)return d;var I=c.adaptation.period.mpd.manifest.Period_asArray[c.adaptation.period.index].AdaptationSet_asArray[c.adaptation.index].Representation_asArray[c.index].SegmentList,k=c&&!isNaN(c.startNumber)?c.startNumber:1,q=Math.max(k-1,0);return d.numberOfSegments=q+I.SegmentURL_asArray.length,d}}}e.__dashjs_factory_name="ListSegmentsGetter";var y=oe.Z.getClassFactory(e);we.Z=y},5246:function(it,we,M){var oe=M(5448),T=M(3393);function t(y){var p=(y=y||{}).timelineConverter;function u(){if(!p||!p.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(T.Z.MISSING_CONFIG_ERROR)}function _(m,n){if(u(),!m)return null;var c,d=m.segments?m.segments.length:-1;if(n<d&&(c=m.segments[n])&&c.index===n)return c;for(var I=0;I<d;I++)if((c=m.segments[I])&&c.index===n)return c;return null}return{getSegmentByIndex:_,getSegmentByTime:function(m,n){u();var c=function(d,I){if(!d)return-1;var k,q,x,$,O,K=d.segments,re=K?K.length:null,H=-1;if(K&&re>0){for(O=0;O<re;O++)if(x=(q=K[O]).presentationStartTime,I+(k=($=q.duration)/2)>=x&&I-k<x+$){H=q.index;break}}return H}(m,n);return _(m,c)},getMediaFinishedInformation:function(m){var n={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return m&&m.segments&&(n.numberOfSegments=m.segments.length),n}}}t.__dashjs_factory_name="SegmentBaseGetter";var e=oe.Z.getClassFactory(t);we.Z=e},7387:function(it,we,M){M.d(we,{Aj:function(){return e},NF:function(){return _},TJ:function(){return m},eR:function(){return t},vi:function(){return y}});var oe=M(2011);function T(n,c){for(;n.length<c;)n="0"+n;return n}function t(n){return n&&n.split("$$").join("$")}function e(n,c){if(!c||!n||n.indexOf("$RepresentationID$")===-1)return n;var d=c.toString();return n.split("$RepresentationID$").join(d)}function y(n,c,d){var I,k,q,x,$,O,K=c.length,re=2;if(!n)return n;for(;;){if((I=n.indexOf("$"+c))<0||(k=n.indexOf("$",I+K))<0)return n;if((q=n.indexOf("%0",I+K))>I&&q<k)switch(x=n.charAt(k-1),$=parseInt(n.substring(q+re,k-1),10),x){case"d":case"i":case"u":O=T(d.toString(),$);break;case"x":O=T(d.toString(16),$);break;case"X":O=T(d.toString(16),$).toUpperCase();break;case"o":O=T(d.toString(8),$);break;default:return n}else O=d;n=n.substring(0,I)+O+n.substring(k+1)}}function p(n,c,d,I,k,q,x,$){var O,K=new oe.Z;return K.representation=n,K.duration=c,K.presentationStartTime=d,K.mediaStartTime=I,K.availabilityStartTime=k.calcAvailabilityStartTimeFromPresentationTime(q,n,x),K.availabilityEndTime=k.calcAvailabilityEndTimeFromPresentationTime(q+c,n,x),K.wallStartTime=k.calcWallTimeForSegment(K,x),K.replacementNumber=(O=$,K.representation.startNumber+O),K.index=$,K}function u(n,c,d,I){var k=c.adaptation.period;if(isFinite(k.duration)&&k.start+k.duration<=d.presentationStartTime)return!1;if(I){if(c.availabilityTimeOffset==="INF")return!0;var q=n.getClientReferenceTime();return d.availabilityStartTime.getTime()<=q&&(!isFinite(d.availabilityEndTime)||d.availabilityEndTime.getTime()>=q)}return!0}function _(n,c,d,I){var k,q,x;k=d.segmentDuration,isNaN(k)&&(k=d.adaptation.period.duration),q=parseFloat((d.adaptation.period.start+I*k).toFixed(5)),x=parseFloat((q+k).toFixed(5));var $=p(d,k,q,n.calcMediaTimeFromPresentationTime(q,d),n,x,c,I);return u(n,d,$,c)?$:null}function m(n,c,d,I,k,q,x,$,O,K){var re,H,ee=I/q,se=k/q;return re=n.calcPresentationTimeFromMediaTime(ee,d),u(n,d,H=p(d,se,re,ee,n,re+se,c,O),c)?(H.replacementTime=K||I,x=y(x,"Number",H.replacementNumber),x=y(x,"Time",H.replacementTime),H.media=x,H.mediaRange=$,H):null}},3636:function(it,we,M){var oe=M(5448),T=M(3393),t=M(7387);function e(p,u){var _=(p=p||{}).timelineConverter;function m(){if(!_||!_.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(T.Z.MISSING_CONFIG_ERROR)}function n(c,d){if(m(),!c)return null;var I=c.adaptation.period.mpd.manifest.Period_asArray[c.adaptation.period.index].AdaptationSet_asArray[c.adaptation.index].Representation_asArray[c.index].SegmentTemplate;d=Math.max(d,0);var k=(0,t.NF)(_,u,c,d);if(k){k.replacementTime=Math.round((d-1)*c.segmentDuration*c.timescale,10);var q=I.media;q=(0,t.vi)(q,"Number",k.replacementNumber),q=(0,t.vi)(q,"Time",k.replacementTime),k.media=q}return k}return{getSegmentByIndex:n,getSegmentByTime:function(c,d){if(m(),!c)return null;var I=c.segmentDuration;if(isNaN(I))return null;var k=_.calcPeriodRelativeTimeFromMpdRelativeTime(c,d);return n(c,Math.floor(k/I))},getMediaFinishedInformation:function(c){var d={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!c)return d;var I=c.segmentDuration;return isNaN(I)?d.numberOfSegments=1:d.numberOfSegments=Math.ceil(c.adaptation.period.duration/I),d}}}e.__dashjs_factory_name="TemplateSegmentsGetter";var y=oe.Z.getClassFactory(e);we.Z=y},1724:function(it,we,M){var oe=M(5448),T=M(3393),t=M(7387);function e(p,u){var _=(p=p||{}).timelineConverter,m=p.dashMetrics;function n(){if(!_)throw new Error(T.Z.MISSING_CONFIG_ERROR)}function c(I,k){var q,x,$,O,K,re,H,ee=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentTemplate||I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,se=ee.SegmentTimeline,Te=ee.SegmentURL_asArray,X=0,Ie=-1;H=I.timescale;var Le=!1;for($=0,O=(q=se.S_asArray).length;$<O&&!Le;$++)for(re=0,(x=q[$]).hasOwnProperty("r")&&(re=x.r),x.hasOwnProperty("t")&&(X=x.t),re<0&&(re=d(I,q[$+1],x,H,X/H)),K=0;K<=re&&!Le;K++)(Le=k(X,ee,Te,x,H,++Ie,$))&&(I.segmentDuration=x.d/H),X+=x.d}function d(I,k,q,x,$){var O;if(k&&k.hasOwnProperty("t"))O=k.t/x;else try{var K=0;if(isNaN(I.adaptation.period.start)||isNaN(I.adaptation.period.duration)||!isFinite(I.adaptation.period.duration)){var re=m.getCurrentDVRInfo();K=isNaN(re.end)?0:re.end}else K=I.adaptation.period.start+I.adaptation.period.duration;O=_.calcMediaTimeFromPresentationTime(K,I),I.segmentDuration=q.d/x}catch{O=0}return Math.max(Math.ceil((O-$)/(q.d/x))-1,0)}return{getSegmentByIndex:function(I,k,q){if(n(),!I)return null;var x=null,$=!1;return c(I,function(O,K,re,H,ee,se,Te){if($||q<0){var X=K.media,Ie=H.mediaRange;return re&&(X=re[Te].media||"",Ie=re[Te].mediaRange),x=(0,t.TJ)(_,u,I,O,H.d,ee,X,Ie,se,H.tManifest),!0}return O>=q*ee-.5*H.d&&($=!0),!1}),x},getSegmentByTime:function(I,k){if(n(),!I)return null;k===void 0&&(k=null);var q=null,x=_.calcMediaTimeFromPresentationTime(k,I);return c(I,function($,O,K,re,H,ee,se){var Te=parseFloat((x*H).toPrecision(15));if(Te<$+re.d&&Te>=$){var X=O.media,Ie=re.mediaRange;return K&&(X=K[se].media||"",Ie=K[se].mediaRange),q=(0,t.TJ)(_,u,I,$,re.d,H,X,Ie,ee,re.tManifest),!0}return!1}),q},getMediaFinishedInformation:function(I){if(!I)return 0;var k,q,x,$,O,K,re,H=(I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentTemplate||I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList).SegmentTimeline,ee=0,se=0,Te=0;for(re=I.timescale,$=(k=H.S_asArray).length,x=0;x<$;x++)for(K=0,(q=k[x]).hasOwnProperty("r")&&(K=q.r),q.hasOwnProperty("t")&&(se=(ee=q.t)/re),K<0&&(K=d(I,k[x+1],q,re,se)),O=0;O<=K;O++)Te++,se=(ee+=q.d)/re;return{numberOfSegments:Te,mediaTimeOfLastSignaledSegment:se}}}}e.__dashjs_factory_name="TimelineSegmentsGetter";var y=oe.Z.getClassFactory(e);we.Z=y},2011:function(it,we){we.Z=function M(){(function(oe,T){if(!(oe instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(it,we){we.Z=function M(){(function(oe,T){if(!(oe instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.schemeIdUri="",this.value=""}},1139:function(it,we,M){M.d(we,{Z:function(){return cu}});var oe=M(452),T=M.n(oe),t=M(3393),e=M(1553),y=M(3860),p=M(5595),u=M(8512),_=M(5448),m=M(6398),n=M(8825);function c(){var i,r,l,E,R,A,h,w,F,j,B,N,U,Z,le,ne,ue,fe,G,ie,Y,ce,g,P,C,D=this.context,b=(0,p.Z)(D).getInstance();function te(){L(),Z=!1,j=0,B=0,ue=0,g=!1,fe=!0,G=!1,P=!1,ie=NaN,ne=NaN,h&&(b.off(u.Z.DATA_UPDATE_COMPLETED,qe,i),b.off(u.Z.LOADING_PROGRESS,Mt,i),b.off(u.Z.MANIFEST_UPDATED,lt,i),b.off(u.Z.STREAMS_COMPOSED,me,i),b.off(n.Z.PLAYBACK_ENDED,ft,i),b.off(n.Z.STREAM_INITIALIZING,he,i),b.off(n.Z.REPRESENTATION_SWITCH,ke,i),b.off(n.Z.BUFFER_LEVEL_STATE_CHANGED,st,i),ot(),h.removeEventListener("canplay",ht),h.removeEventListener("canplaythrough",gt),h.removeEventListener("play",qt),h.removeEventListener("waiting",Bt),h.removeEventListener("playing",sn),h.removeEventListener("pause",un),h.removeEventListener("error",Dt),h.removeEventListener("seeking",Ge),h.removeEventListener("seeked",ut),h.removeEventListener("timeupdate",tt),h.removeEventListener("progress",vt),h.removeEventListener("ratechange",wt),h.removeEventListener("loadedmetadata",jt),h.removeEventListener("loadeddata",Yt),h.removeEventListener("stalled",Kt),h.removeEventListener("ended",Vt),h.removeEventListener("volumechange",Qt)),F=null,h=null,N=null,U=null}function z(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((ae(ye)-Se()).toFixed(5))}function ae(ye){var Ye=ye||N;return Ye.start+Ye.duration}function Q(){var ye=arguments.length>0&&arguments[0]!==void 0&&arguments[0];N&&h&&h.getElement()?(ye&&U&&Ne(Se()),h.play()):Z=!0}function L(){N&&h&&h.pause()}function J(ye){var Ye=arguments.length>1&&arguments[1]!==void 0&&arguments[1],St=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Gt=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(N&&h&&h.getElement()){var gn=isNaN(ie)?h.getTime():ie;ye!==gn&&((Y=St===!0)||(ie=ye),r.info("Requesting seek to time: "+ye+(Y?" (internal)":"")),U&&Gt&&Ne(ye),h.setCurrentTime(ye,Ye))}}function pe(){if(N&&h&&U){var ye=l&&l.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,Ye=R.getCurrentDVRInfo(ye);return Ye&&Ye.range?Ye.range.end:0}}function Ne(ye){var Ye=new Date(w.getClientReferenceTime()),St=A.getRegularPeriods()[0],Gt=w.calcPresentationTimeFromWallTime(Ye,St);j=Gt-ye}function Se(){return N&&h?h.getTime():null}function Ce(){return N&&h?h.isPaused():null}function Re(){return N&&h?h.isSeeking():null}function $e(){return N&&h?h.isStalled():null}function nt(){return N&&h?h.getPlaybackRate():null}function We(){return N&&h?h.getEnded():null}function Qe(){return U}function Ct(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!Ce()&&U&&h.getReadyState()!==0&&!Re()&&!g){ye||(ye=l.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO);var Ye=Se(),St=ve(Ye,ye),Gt=!isNaN(St)&&St!==Ye;Gt&&!Re()&&($e()||ce||h.getReadyState()===1)&&(r.debug("UpdateCurrentTime: Seek to actual time: ".concat(St," from currentTime: ").concat(Ye)),J(St,!1,!1))}}function ve(ye,Ye){var St=R.getCurrentDVRInfo(Ye),Gt=St?St.range:null;return Gt?ye>Gt.end?Math.max(Gt.end-j,Gt.start):ye>0&&ye+.25<Gt.start&&Math.abs(ye-Gt.start)<31536e4?G?Math.max(Gt.end-j,Gt.start):Gt.start:ye:NaN}function Fe(){F===null&&(F=setInterval(function(){(function(){if(b.trigger(u.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:U,time:new Date}),Qe()){var ye=Date.now();(isNaN(ne)||ye>ne+C.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(l.addDVRMetric(),Ce()?function(){var Ye=Date.now();(!le||Ye>le+500)&&(le=Ye,tt())}():Ct(),ne=ye)}})()},C.get().streaming.wallclockTimeUpdateInterval))}function ot(){clearInterval(F),F=null}function qe(ye){var Ye=A.convertRepresentationToRepresentationInfo(ye.currentRepresentation),St=Ye?Ye.mediaInfo.streamInfo:null;St!==null&&N.id===St.id&&(N=St)}function ht(){b.trigger(u.Z.CAN_PLAY)}function gt(){b.trigger(u.Z.CAN_PLAY_THROUGH)}function st(ye){ye.streamId===l.getActiveStreamInfo().id&&(ce=ye.state===y.Z.BUFFER_EMPTY,C.get().streaming.buffer.setStallState&&h.setStallState(ye.mediaType,ye.state===y.Z.BUFFER_EMPTY))}function qt(){r.info("Native video element event: play"),Ct(),Fe(),b.trigger(u.Z.PLAYBACK_STARTED,{startTime:Se()})}function Bt(){r.info("Native video element event: waiting"),b.trigger(u.Z.PLAYBACK_WAITING,{playingTime:Se()})}function sn(){r.info("Native video element event: playing"),Y=!1,b.trigger(u.Z.PLAYBACK_PLAYING,{playingTime:Se()})}function un(){r.info("Native video element event: pause"),b.trigger(u.Z.PLAYBACK_PAUSED,{ended:We()})}function Ge(){if(!Y){var ye=Se();isNaN(ie)||ie===ye||(ye=ie),ie=NaN,r.info("Seeking to: "+ye),Fe(),b.trigger(u.Z.PLAYBACK_SEEKING,{seekTime:ye,streamId:N.id})}}function ut(){r.info("Native video element event: seeked"),Y=!1,b.trigger(u.Z.PLAYBACK_SEEKED)}function tt(){N&&b.trigger(u.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:z(),time:Se(),streamId:N.id})}function vt(){b.trigger(u.Z.PLAYBACK_PROGRESS,{streamId:N.id})}function wt(){var ye=nt();r.info("Native video element event: ratechange: ",ye),b.trigger(u.Z.PLAYBACK_RATE_CHANGED,{playbackRate:ye})}function jt(){r.info("Native video element event: loadedmetadata"),b.trigger(u.Z.PLAYBACK_METADATA_LOADED),Fe()}function Yt(){r.info("Native video element event: loadeddata"),b.trigger(u.Z.PLAYBACK_LOADED_DATA)}function Vt(){r.info("Native video element event: ended"),L(),ot();var ye=l?l.getActiveStreamInfo():null;ye&&b.trigger(u.Z.PLAYBACK_ENDED,{isLast:ye.isLast})}function Qt(){b.trigger(u.Z.PLAYBACK_VOLUME_CHANGED)}function ft(ye){if(F&&ye.isLast){r.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Ye=ye.seekTime?ye.seekTime:ae();h.setCurrentTime(Ye),L(),ot()}}function Dt(ye){var Ye=ye.target||ye.srcElement;b.trigger(u.Z.PLAYBACK_ERROR,{error:Ye.error})}function xt(){U=!1}function Mt(ye){if(ye.stream===!1&&G&&!isNaN(ye.request.duration)){var Ye=1.2*ye.request.duration;Ye>j&&(r.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Ye.toFixed(2)),j=Ye,B=Ye)}}function Kt(ye){b.trigger(u.Z.PLAYBACK_STALLED,{e:ye})}function he(ye){var Ye;(Ye=ye.mediaInfo)&&Ye.supplementalProperties&&Ye.supplementalProperties[t.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Ye.supplementalProperties[t.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(r.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),G=!0)}function ke(ye){var Ye=l.getActiveStreamInfo();ye&&Ye&&ye.currentRepresentation&&ye.streamId&&ye.streamId===Ye.id&&ye.mediaType&&(ye.mediaType===t.Z.VIDEO||ye.mediaType===t.Z.AUDIO)&&(fe=ye.currentRepresentation.availabilityTimeComplete,(G=!fe)&&!P&&(P=!0))}function lt(){g=!0}function me(){g=!1}return i={initialize:function(ye,Ye){N=ye,Ye!==!0&&(h.addEventListener("canplay",ht),h.addEventListener("canplaythrough",gt),h.addEventListener("play",qt),h.addEventListener("waiting",Bt),h.addEventListener("playing",sn),h.addEventListener("pause",un),h.addEventListener("error",Dt),h.addEventListener("seeking",Ge),h.addEventListener("seeked",ut),h.addEventListener("timeupdate",tt),h.addEventListener("progress",vt),h.addEventListener("ratechange",wt),h.addEventListener("loadedmetadata",jt),h.addEventListener("loadeddata",Yt),h.addEventListener("stalled",Kt),h.addEventListener("ended",Vt),h.addEventListener("volumechange",Qt),U=N.manifestInfo.isDynamic,ce=!1,Y=!1,b.on(u.Z.DATA_UPDATE_COMPLETED,qe,i),b.on(u.Z.LOADING_PROGRESS,Mt,i),b.on(u.Z.MANIFEST_UPDATED,lt,i),b.on(u.Z.STREAMS_COMPOSED,me,i),b.on(n.Z.PLAYBACK_ENDED,ft,i,{priority:p.Z.EVENT_PRIORITY_HIGH}),b.on(n.Z.STREAM_INITIALIZING,he,i),b.on(n.Z.REPRESENTATION_SWITCH,ke,i),b.on(n.Z.BUFFER_LEVEL_STATE_CHANGED,st,i),b.on(n.Z.DYNAMIC_TO_STATIC,xt,i),Z&&(Z=!1,Q()))},setConfig:function(ye){ye&&(ye.streamController&&(l=ye.streamController),ye.serviceDescriptionController&&(E=ye.serviceDescriptionController),ye.dashMetrics&&(R=ye.dashMetrics),ye.adapter&&(A=ye.adapter),ye.videoModel&&(h=ye.videoModel),ye.timelineConverter&&(w=ye.timelineConverter),ye.settings&&(C=ye.settings))},getTimeToStreamEnd:z,getBufferLevel:function(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Ye=null;return l.getActiveStreamProcessors().forEach(function(St){if(!ye||ye.length===0||ye.indexOf(St.getType())===-1){var Gt=St.getBufferLevel();Ye=Ye===null?Gt:Math.min(Ye,Gt)}}),Ye},getPlaybackStalled:function(){return ce},getTime:Se,getLowLatencyModeEnabled:function(){return G},getInitialCatchupModeActivated:function(){return P},getIsManifestUpdateInProgress:function(){return g},getPlaybackRate:nt,getPlayedRanges:function(){return N&&h?h.getPlayedRanges():null},getEnded:We,getIsDynamic:Qe,getStreamController:function(){return l},computeAndSetLiveDelay:function(ye,Ye){var St,Gt,gn,On=!isNaN(ye)&&isFinite(ye)?ye:NaN,wn=A.getSuggestedPresentationDelay(),Hn=E.getServiceDescriptionSettings();return St=isNaN(C.get().streaming.delay.liveDelay)?C.get().streaming.delay.liveDelayFragmentCount===null||isNaN(C.get().streaming.delay.liveDelayFragmentCount)||isNaN(On)?Hn&&!isNaN(Hn.liveDelay)&&Hn.liveDelay>0?Hn.liveDelay:C.get().streaming.delay.useSuggestedPresentationDelay===!0&&wn!==null&&!isNaN(wn)&&wn>0?wn:isNaN(On)?Ye&&!isNaN(Ye.minBufferTime)?4*Ye.minBufferTime:4*N.manifestInfo.minBufferTime:4*On:On*C.get().streaming.delay.liveDelayFragmentCount:C.get().streaming.delay.liveDelay,(gn=A.getAvailabilityStartTime())!==null&&(ue=gn),Gt=Ye&&Ye.dvrWindowSize>0?Math.min(St,Ye.dvrWindowSize):St,j=Gt,B=Gt,Gt},getLiveDelay:function(){return j},getOriginalLiveDelay:function(){return B},getCurrentLiveLatency:function(){if(!U||isNaN(ue))return NaN;var ye=Se();if(isNaN(ye)||ye===0)return 0;var Ye=new Date().getTime()+1e3*w.getClientTimeOffset();return Math.max(((Ye-ue-1e3*ye)/1e3).toFixed(3),0)},play:Q,isPaused:Ce,isStalled:$e,pause:L,isSeeking:Re,getStreamEndTime:ae,seek:J,seekToOriginalLive:function(){var ye=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Ye=arguments.length>1&&arguments[1]!==void 0&&arguments[1],St=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Gt=pe();if(Gt!==0){var gn=Gt-(j=B);J(gn,ye,Ye,St)}},seekToCurrentLive:function(){var ye=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Ye=arguments.length>1&&arguments[1]!==void 0&&arguments[1],St=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Gt=pe();if(Gt!==0){var gn=Gt-j;J(gn,ye,Ye,St)}},reset:te,updateCurrentTime:Ct,getAvailabilityStartTime:function(){return ue}},r=(0,m.Z)(D).getInstance().getLogger(i),te(),i}c.__dashjs_factory_name="PlaybackController";var d=_.Z.getSingletonFactory(c),I=M(3186),k="loading",q="executed",x="failed";function $(i){var r,l,E,R,A=(i=i||{}).eventBus,h=i.events,w=i.dashMetrics,F=i.fragmentLoader,j=i.debug,B=i.streamInfo,N=i.type;function U(g){var P;return!!g&&(P=!1,E.some(function(C){if(D=g,b=C,!isNaN(D.index)&&D.startTime===b.startTime&&D.adaptationIndex===b.adaptationIndex&&D.type===b.type||function(te,z){return isNaN(te.index)&&isNaN(z.index)&&te.quality===z.quality}(g,C)||function(te,z){return te.action===I.Z.ACTION_COMPLETE&&te.action===z.action}(g,C))return P=!0;var D,b}),P)}function Z(g){return isNaN(g.duration)?.25:Math.min(g.duration/8,.5)}function le(g){E=E.filter(function(P){var C=Z(P);return isNaN(P.startTime)||g!==void 0&&P.startTime>=g-C})}function ne(g,P){P<=g+.5||(E=E.filter(function(C){var D=Z(C);return isNaN(C.startTime)||C.startTime>=P-D||isNaN(C.duration)||C.startTime+C.duration<=g+D}))}function ue(g,P,C){for(var D=g.length-1;D>=0;D--){var b=g[D],te=b.startTime,z=te+b.duration;if(C=isNaN(C)?Z(b):C,!isNaN(te)&&!isNaN(z)&&P+C>=te&&P-C<z||isNaN(te)&&isNaN(P))return b}return null}function fe(g,P){w.addSchedulingInfo(g,P),w.addRequestsQueue(g.mediaType,R,E)}function G(g){g.sender===F&&(R.splice(R.indexOf(g.request),1),g.response&&!g.error&&E.push(g.request),fe(g.request,g.error?x:q),A.trigger(h.FRAGMENT_LOADING_COMPLETED,{request:g.request,response:g.response,error:g.error,sender:this},{streamId:B.id,mediaType:N}))}function ie(g){g.sender===F&&A.trigger(h.FRAGMENT_LOADING_PROGRESS,{request:g.request,response:g.response,error:g.error,sender:this},{streamId:B.id,mediaType:N})}function Y(g){g.sender===F&&A.trigger(h.FRAGMENT_LOADING_ABANDONED,{request:g.request},{streamId:B.id,mediaType:N})}function ce(){E=[],R=[]}return r={getStreamId:function(){return B.id},getType:function(){return N},getRequests:function(g){var P=g?g.state instanceof Array?g.state:[g.state]:[],C=[];return P.forEach(function(D){var b=function(te){var z;switch(te){case k:z=R;break;case q:z=E;break;default:z=[]}return z}(D);C=C.concat(function(te,z){return z.hasOwnProperty("time")?[ue(te,z.time,z.threshold)]:te.filter(function(ae){for(var Q in z)if(Q!=="state"&&z.hasOwnProperty(Q)&&ae[Q]!=z[Q])return!1;return!0})}(b,g))}),C},isFragmentLoaded:U,isFragmentLoadedOrPending:function(g){var P,C=!1,D=0;if(!(C=U(g)))for(D=0;D<R.length;D++)P=R[D],g.url===P.url&&g.startTime===P.startTime&&(C=!0);return C},removeExecutedRequestsBeforeTime:le,removeExecutedRequestsAfterTime:function(g){E=E.filter(function(P){return isNaN(P.startTime)||g!==void 0&&P.startTime<g})},syncExecutedRequestsWithBufferedRange:function(g,P){if(g&&g.length!==0){for(var C=0,D=0,b=g.length;D<b;D++)ne(C,g.start(D)),C=g.end(D);P>0&&ne(C,P)}else le()},abortRequests:function(){l.debug("abort requests"),F.abort(),R=[]},executeRequest:function(g){g.action===I.Z.ACTION_DOWNLOAD?(fe(g,k),R.push(g),function(P){A.trigger(h.FRAGMENT_LOADING_STARTED,{request:P},{streamId:B.id,mediaType:N}),F.load(P)}(g)):l.warn("Unknown request action.")},reset:function(){A.off(h.LOADING_COMPLETED,G,this),A.off(h.LOADING_DATA_PROGRESS,ie,this),A.off(h.LOADING_ABANDONED,Y,this),F&&F.reset(),ce()},resetInitialSettings:ce,addExecutedRequest:function(g){E.push(g)}},l=j.getLogger(r),ce(),A.on(h.LOADING_COMPLETED,G,r),A.on(h.LOADING_DATA_PROGRESS,ie,r),A.on(h.LOADING_ABANDONED,Y,r),r}$.__dashjs_factory_name="FragmentModel";var O=_.Z.getClassFactory($);O.FRAGMENT_MODEL_LOADING=k,O.FRAGMENT_MODEL_EXECUTED=q,O.FRAGMENT_MODEL_CANCELED="canceled",O.FRAGMENT_MODEL_FAILED=x,_.Z.updateClassFactory($.__dashjs_factory_name,O);var K=O,re=M(5459);function H(i){return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},H(i)}function ee(i,r){return ee=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},ee(i,r)}function se(i,r){return!r||H(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function Te(i){return Te=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Te(i)}var X=new(function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&ee(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=Te(r);if(l){var w=Te(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return se(this,A)});function R(){var A;return function(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")}(this,R),(A=E.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,A.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,A.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,A.SEGMENT_BASE_LOADER_ERROR_CODE=15,A.TIME_SYNC_FAILED_ERROR_CODE=16,A.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,A.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,A.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,A.APPEND_ERROR_CODE=20,A.REMOVE_ERROR_CODE=21,A.DATA_UPDATE_FAILED_ERROR_CODE=22,A.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,A.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,A.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,A.DOWNLOAD_ERROR_ID_SIDX_CODE=26,A.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,A.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,A.DOWNLOAD_ERROR_ID_XLINK_CODE=29,A.MANIFEST_ERROR_ID_PARSE_CODE=31,A.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,A.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,A.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,A.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,A.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",A.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",A.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",A.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",A.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",A.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",A.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",A.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",A.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",A.APPEND_ERROR_MESSAGE="chunk is not defined",A.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",A.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",A.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",A.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",A.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",A.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",A}return R}(M(2230).Z)),Ie=M(1264),Le=M(7855);function je(i){var r,l,E,R,A,h,w=this.context,F=(0,Ie.Z)(w).getInstance(),j=i.textController,B=i.eventBus,N=[],U=[],Z=!1,le=i.mediaSource,ne=null;function ue(b){return new Promise(function(te){D(function(){R.changeType&&R.changeType(b),te()})})}function fe(b){return R=j.getTextSourceBuffer(b),Promise.resolve()}function G(){if(typeof R.addEventListener=="function")try{R.addEventListener("updateend",P,!1),R.addEventListener("error",C,!1),R.addEventListener("abort",C,!1)}catch{h=setInterval(P,50)}else h=setInterval(P,50)}function ie(b){return new Promise(function(te){R&&F.get().streaming.buffer.useAppendWindow?D(function(){try{if(!R)return void te();var z=le.duration,ae=0;b&&!isNaN(b.start)&&!isNaN(b.duration)&&isFinite(b.duration)&&(z=b.start+b.duration),b&&!isNaN(b.start)&&(ae=b.start),R.appendWindowEnd===z&&R.appendWindowStart===ae||(R.appendWindowStart=0,R.appendWindowEnd=z+.01,R.appendWindowStart=Math.max(ae-.1,0),E.debug("Updated append window for ".concat(A.type,". Set start to ").concat(R.appendWindowStart," and end to ").concat(R.appendWindowEnd))),te()}catch{E.warn("Failed to set append window"),te()}}):te()})}function Y(b){return new Promise(function(te){R?D(function(){try{R.timestampOffset===b||isNaN(b)||(R.timestampOffset=b,E.debug("Set MSE timestamp offset to ".concat(b))),te()}catch{te()}}):te()})}function ce(){if(!Z&&U.length>0){Z=!0;var b=U[0];U.splice(0,1);var te=function(){Z=!1,U.length>0&&ce.call(this),b&&b.data&&b.data.segmentType&&b.data.segmentType!==Le.w.INIT_SEGMENT_TYPE&&delete b.data.bytes,b.promise.resolve({chunk:b.data})};try{ne=b.request,b.data.bytes.byteLength===0?te.call(this):(R.appendBuffer?R.appendBuffer(b.data.bytes):R.append(b.data.bytes,b.data),D(te.bind(this)))}catch(z){E.fatal('SourceBuffer append failed "'+z+'"'),U.length>0?ce():Z=!1,delete b.data.bytes,b.promise.reject({chunk:b.data,error:new re.Z(z.code,z.message)})}}}function g(){N.length>0&&(R.updating||(N.shift()(),g()))}function P(){R.updating||g()}function C(b){var te,z,ae=b.target||{};te=u.Z.SOURCE_BUFFER_ERROR,z={error:ae,lastRequestAppended:ne},B.trigger(te,z,{streamId:A.streamInfo.id,mediaType:l})}function D(b){N.push(b),R.updating||g()}return r={getType:function(){return l},getAllBufferRanges:function(){try{return R.buffered}catch(b){return E.error("getAllBufferRanges exception: "+b.message),null}},getBuffer:function(){return R},append:function(b){var te=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(ae,Q){b?(U.push({data:b,promise:{resolve:ae,reject:Q},request:z}),D(ce.bind(te))):Q({chunk:b,error:new re.Z(X.APPEND_ERROR_CODE,X.APPEND_ERROR_MESSAGE)})})},remove:function(b){return new Promise(function(te,z){var ae=b.start,Q=b.end;ae>=0&&Q>ae?D(function(){try{R.remove(ae,Q),D(function(){te({from:ae,to:Q,unintended:!1}),b.resolve&&b.resolve()})}catch(L){z({from:ae,to:Q,unintended:!1,error:new re.Z(X.REMOVE_ERROR_CODE,X.REMOVE_ERROR_MESSAGE)}),b.reject&&b.reject(L)}}):te()})},abort:function(){return new Promise(function(b){try{U=[],le.readyState==="open"?D(function(){try{R&&R.abort(),b()}catch{b()}}):(R&&R.setTextTrack&&le.readyState==="ended"&&R.abort(),b())}catch{b()}})},reset:function(){if(R){try{N=[],function(){try{typeof R.removeEventListener=="function"&&(R.removeEventListener("updateend",P,!1),R.removeEventListener("error",C,!1),R.removeEventListener("abort",C,!1)),clearInterval(h)}catch(b){E.error(b)}}(),Z=!1,U=[],R.getClassName&&R.getClassName()==="TextSourceBuffer"||(E.debug("Removing sourcebuffer from media source"),le.removeSourceBuffer(R))}catch{}R=null}ne=null},updateTimestampOffset:Y,initializeForStreamSwitch:function(b,te,z){l=(A=b).type;var ae=A.codec;(function(L){R=L.getBuffer()})(z),G();var Q=[];return Q.push(new Promise(function(L){D(function(){var J=R.appendWindowStart,pe=R.appendWindowEnd;R&&(R.abort(),R.appendWindowStart=J,R.appendWindowEnd=pe),L()})})),Q.push(ie(A.streamInfo)),F.get().streaming.buffer.useChangeTypeForTrackSwitch&&Q.push(ue(ae)),te&&te.MSETimeOffset!==void 0&&Q.push(Y(te.MSETimeOffset)),Promise.all(Q)},initializeForFirstUse:function(b,te,z){l=(A=te).type;var ae=A.codec;try{if(ae.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return fe(b);R=le.addSourceBuffer(ae),G();var Q=[];return Q.push(ie(A.streamInfo)),z&&z.MSETimeOffset!==void 0&&Q.push(Y(z.MSETimeOffset)),Promise.all(Q)}catch(L){return A.type==t.Z.TEXT&&!A.isFragmented||ae.indexOf('codecs="stpp')!==-1||ae.indexOf('codecs="vtt')!==-1||ae.indexOf("text/vtt")!==-1?fe(b):Promise.reject(L)}},updateAppendWindow:ie,changeType:ue},E=(0,m.Z)(w).getInstance().getLogger(r),r}je.__dashjs_factory_name="SourceBufferSink";var Ee=_.Z.getClassFactory(je);function Pe(i){var r,l,E,R=this.context,A=[],h=i;function w(F,j){return A=A.filter(function(B){return!((isNaN(j)||B.start<j)&&(isNaN(F)||B.end>F))}),Promise.resolve()}return r={getAllBufferRanges:function(){for(var F=[],j=0;j<A.length;j++){var B=A[j];F.length===0||B.start>F[F.length-1].end?F.push({start:B.start,end:B.end}):F[F.length-1].end=B.end}var N={start:function(U){return F[U].start},end:function(U){return F[U].end}};return Object.defineProperty(N,"length",{get:function(){return F.length}}),N},append:function(F){return F.segmentType!=="InitializationSegment"?(A.push(F),A.sort(function(j,B){return j.start-B.start}),E=null):E=F,l.debug("PreBufferSink appended chunk s: "+F.start+"; e: "+F.end),h&&h({chunk:F}),Promise.resolve()},remove:w,abort:function(){return Promise.resolve()},discharge:function(F,j){var B=function(N,U){return A.filter(function(Z){return(isNaN(U)||Z.start<U)&&(isNaN(N)||Z.end>N)})}(F,j);return E&&(B.push(E),E=null),w(F,j),B},reset:function(){A=[],E=null,h=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(F){F()},getBuffer:function(){return this}},l=(0,m.Z)(R).getInstance().getLogger(r),r}Pe.__dashjs_factory_name="PreBufferSink";var Ve=_.Z.getClassFactory(Pe);function et(){var i={};return{save:function(r){var l=r.streamId,E=r.representationId;i[l]=i[l]||{},i[l][E]=r},extract:function(r,l){return i&&i[r]&&i[r][l]?i[r][l]:null},reset:function(){i={}}}}et.__dashjs_factory_name="InitCache";var _e=_.Z.getSingletonFactory(et),Oe=.01,_t="BufferController";function dt(i){i=i||{};var r,l,E,R,A,h,w,F,j,B,N,U,Z,le,ne,ue,fe,G,ie,Y,ce=this.context,g=(0,p.Z)(ce).getInstance(),P=i.errHandler,C=i.fragmentModel,D=i.representationController,b=i.adapter,te=i.textController,z=i.abrController,ae=i.playbackController,Q=i.streamInfo,L=i.type,J=i.settings;function pe(he){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(lt,me){h=he,j&&ke&&typeof j.discharge=="function"?(B=j,Se(ke).then(function(){lt()}).catch(function(ye){me(ye)})):lt()})}function Ne(he){return b.convertRepresentationToRepresentationInfo(D.getRepresentationForQuality(he))}function Se(he){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(lt,me){fe&&he?h?(N=!1,Re(he,ke).then(function(ye){lt(ye)}).catch(function(ye){me(ye)})):(N=!0,Ce().then(function(ye){lt(ye)}).catch(function(ye){me(ye)})):lt(null)})}function Ce(){var he=this;return new Promise(function(ke,lt){var me=z.getQualityFor(L,Q.id);j=Ve(ce).create(Ct.bind(he)),wt(Ne(me)).then(function(){ke(j)}).catch(function(){lt()})})}function Re(he,ke){return new Promise(function(lt,me){var ye=z.getQualityFor(L,Q.id);j=Ee(ce).create({mediaSource:h,textController:te,eventBus:g}),function(Ye,St,Gt){var gn=Ne(Gt);return St&&St[L]&&(L===t.Z.VIDEO||L===t.Z.AUDIO)?j.initializeForStreamSwitch(Ye,gn,St[L]):j.initializeForFirstUse(Q,Ye,gn)}(he,ke,ye).then(function(){return wt(Ne(ye))}).then(function(){lt(j)}).catch(function(Ye){l.fatal("Caught error on create SourceBuffer: "+Ye),P.error(new re.Z(X.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,X.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+L)),me(Ye)})})}function $e(he){J.get().streaming.cacheInitSegments&&(l.info("Init fragment finished loading saving to",L+"'s init cache"),fe.save(he.chunk)),l.debug("Append Init fragment",L," with representationId:",he.chunk.representationId," and quality:",he.chunk.quality,", data size:",he.chunk.bytes.byteLength),We(he.chunk)}function nt(he){We(he.chunk,he.request)}function We(he){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;j&&(j.append(he,ke).then(function(lt){Ct(lt)}).catch(function(lt){Ct(lt)}),he.mediaInfo.type===t.Z.VIDEO&&Mt(u.Z.VIDEO_CHUNK_RECEIVED,{}))}function Qe(he){if(he&&he.length>0)for(var ke=0,lt=he.length;ke<lt;ke++)l.debug("Buffered range: "+he.start(ke)+" - "+he.end(ke)+", currentTime = ",ae.getTime())}function Ct(he){if(he.error)return he.error.code===22&&function(){if(A=.8*ft(),l.warn("Quota exceeded, Critical Buffer: "+A),A>0){var me=Math.max(.2*A,1),ye=A-me,Ye=Math.min(J.get().streaming.buffer.bufferTimeAtTopQuality,.9*ye),St=Math.min(J.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*ye),Gt={streaming:{buffer:{bufferToKeep:parseFloat(me.toFixed(5)),bufferTimeAtTopQuality:parseFloat(Ye.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(St.toFixed(5))}}};J.update(Gt)}}(),void(he.error.code!==22&&xt()||(l.warn("Clearing playback buffer to overcome quota exceed situation"),Mt(u.Z.QUOTA_EXCEEDED,{quotaExceededTime:he.chunk.start}),ut(Ge())));if(j&&(st(),(le=he.chunk)&&le.endFragment)){le&&!isNaN(le.index)&&(w=Math.max(le.index,w),qt());var ke=j.getAllBufferRanges();le.segmentType===Le.w.MEDIA_SEGMENT_TYPE&&(Qe(ke),ot(),function(){if(!isNaN(Y)&&!N)if(L===t.Z.AUDIO||L===t.Z.VIDEO){var me=ae.getTime(),ye=gt(me,0),Ye=gt(Y,0);if(ye&&Ye&&ye.start===Ye.start)Y=NaN;else{var St=D.getCurrentRepresentation().segmentDuration,Gt=gt(Y,St);Gt&&(J.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(me-Y)>St?Y<=Gt.end&&ae.seek(Math.max(Y,Gt.start),!1,!0):me<Gt.start&&ae.seek(Gt.start,!1,!0))}}else Y=NaN}());var lt=!1;U&&(U.indexOf(le)>0&&(lt=!0),U=null),le&&!lt&&Mt(u.Z.BYTES_APPENDED_END_FRAGMENT,{quality:le.quality,startTime:le.start,index:le.index,segmentType:le.segmentType})}}function ve(){return new Promise(function(he,ke){var lt=Fe();if(!lt||lt.length===0)return ot(),void he();ut(lt).then(function(){he()}).catch(function(me){ke(me)})})}function Fe(he){var ke=[],lt=j.getAllBufferRanges();if(!lt||lt.length===0)return ke;if(!he&&he!==0||isNaN(he))ke.push({start:lt.start(0),end:lt.end(lt.length-1)+.5});else{var me=function(Ye,St){var Gt=J.get().streaming.buffer.bufferToKeep,gn=St.start(0);if(Ye-gn>Gt){var On=Math.max(0,Ye-Gt),wn=C.getRequests({state:K.FRAGMENT_MODEL_EXECUTED,time:Ye,threshold:Oe})[0];if(wn&&(On=Math.min(wn.startTime,On)),On>0)return{start:gn,end:On}}return null}(he,lt),ye=function(Ye,St){var Gt=St.end(St.length-1)+.5,gn=Dt(Ye),On=Q.manifestInfo.duration>=J.get().streaming.buffer.longFormContentDurationThreshold?J.get().streaming.buffer.bufferTimeAtTopQualityLongForm:J.get().streaming.buffer.bufferTimeAtTopQuality,wn=isNaN(gn)?Ye:Math.min(gn,Ye+On);if(wn>=St.end(St.length-1))return null;var Hn=C.getRequests({state:K.FRAGMENT_MODEL_EXECUTED,time:Ye,threshold:Oe})[0];if(Hn&&(wn=Math.max(Hn.startTime+Hn.duration,wn)),J.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Fn=0;Fn<St.length;Fn++)if(St.start(Fn)<=Ye&&Ye<=St.end(Fn)&&St.start(Fn)<=wn&&wn<=St.end(Fn)){var dr=wn;wn=Fn+1<St.length?St.start(Fn+1):St.end(Fn)+1,l.debug("Buffered range ["+St.start(Fn)+", "+St.end(Fn)+"] overlaps with targetTime "+Ye+" and range to be pruned ["+dr+", "+Gt+"], using ["+wn+", "+Gt+"] instead"+(wn<Gt?"":" (no actual pruning)"));break}}return wn<St.end(St.length-1)?{start:wn,end:Gt}:null}(he,lt);me&&ke.push(me),ye&&ke.push(ye)}return ke}function ot(){(!ie||L===t.Z.TEXT&&te.isTextEnabled())&&st()}function qe(){Bt()}function ht(){Bt(),Y=NaN}function gt(he,ke){if(!j)return null;var lt,me,ye=j.getAllBufferRanges(),Ye=0,St=0,Gt=null,gn=null,On=0,wn=isNaN(ke)?.15:ke;if(ye!=null){for(me=0,lt=ye.length;me<lt;me++)if(Ye=ye.start(me),St=ye.end(me),Gt===null)On=Math.abs(Ye-he),(he>=Ye&&he<St||On<=wn)&&(Gt=Ye,gn=St);else{if(!((On=Ye-gn)<=wn))break;gn=St}if(Gt!==null)return{start:Gt,end:gn}}return null}function st(){if(ae){var he=ae.getTime()||0;N&&(he=isNaN(Y)?0:Y);var ke=J.get().streaming.gaps.jumpGaps&&!isNaN(J.get().streaming.gaps.smallGapLimit)?J.get().streaming.gaps.smallGapLimit:NaN;R=Math.max(function(lt,me){var ye;return J.get().streaming.gaps.jumpGaps&&(me=J.get().streaming.gaps.smallGapLimit),(ye=gt(lt,me))===null?0:ye.end-lt}(he,ke),0),Mt(u.Z.BUFFER_LEVEL_UPDATED,{}),Bt()}}function qt(){var he=w>=F-1,ke=ae.getTimeToStreamEnd(Q)-R<1e-5;!he&&!ke||E||(Qt(!0),l.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(Q.id," and type ").concat(L)))}function Bt(){L!==t.Z.AUDIO&&L!==t.Z.VIDEO||((!ae.getLowLatencyModeEnabled()&&R<J.get().streaming.buffer.stallThreshold||R===0)&&!E?sn(y.Z.BUFFER_EMPTY):(E||R>=J.get().streaming.buffer.stallThreshold||ae.getLowLatencyModeEnabled()&&R>0)&&sn(y.Z.BUFFER_LOADED))}function sn(he){Z===he||he===y.Z.BUFFER_EMPTY&&ae.getTime()===0||L===t.Z.TEXT&&!te.isTextEnabled()||(Z=he,Mt(u.Z.BUFFER_LEVEL_STATE_CHANGED,{}),Mt(he===y.Z.BUFFER_LOADED?u.Z.BUFFER_LOADED:u.Z.BUFFER_EMPTY),l.debug(he===y.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function un(){j&&L!==t.Z.TEXT&&(E||ut(Ge()))}function Ge(){var he=[],ke=j.getAllBufferRanges();if(!ke||ke.length===0)return he;var lt=ae.getTime(),me=Math.max(0,lt-J.get().streaming.buffer.bufferToKeep),ye=C.getRequests({state:K.FRAGMENT_MODEL_EXECUTED,time:lt,threshold:Oe})[0];if(ye)me=Math.min(ye.startTime,me);else if(lt===0&&ae.getIsDynamic())return[];if(ke.start(0)<=me){for(var Ye={start:0,end:me},St=0;St<ke.length&&ke.end(St)<=me;St++)Ye.end=ke.end(St);Ye.start<Ye.end&&he.push(Ye)}return he}function ut(he){return new Promise(function(ke,lt){if(he&&j&&he.length!==0){var me=[];he.forEach(function(ye){me.push(function(Ye){return new Promise(function(St,Gt){Ye.resolve=St,Ye.reject=Gt,G.push(Ye)})}(ye))}),ue||tt(),Promise.all(me).then(function(){ke()}).catch(function(ye){lt(ye)})}else ke()})}function tt(){try{if(G.length===0||!j)return l.debug("Nothing to prune, halt pruning"),G=[],void(ue=!1);var he=j.getBuffer();if(!he||!he.buffered||he.buffered.length===0)return l.debug("SourceBuffer is empty (or does not exist), halt pruning"),G=[],void(ue=!1);var ke=G.shift();l.debug("".concat(L,": Removing buffer from: ").concat(ke.start," to ").concat(ke.end)),ue=!0,ae.getTime()<ke.end&&Qt(!1),j.remove(ke).then(function(lt){vt(lt)}).catch(function(lt){vt(lt)})}catch{ue=!1}}function vt(he){l.debug("onRemoved buffer from:",he.from,"to",he.to),j&&(Qe(j.getAllBufferRanges()),G.length===0&&(ue=!1,st()),he.unintended&&(l.warn("Detected unintended removal from:",he.from,"to",he.to,"setting streamprocessor time to",he.from),Mt(u.Z.SEEK_TARGET,{time:he.from})),ue?tt():(ie?ie=!1:st(),Mt(u.Z.BUFFER_CLEARED,{from:he.from,to:he.to,unintended:he.unintended,hasEnoughSpaceToAppend:xt()})))}function wt(he){return new Promise(function(ke){he&&he.MSETimeOffset!==void 0&&j&&j.updateTimestampOffset?j.updateTimestampOffset(he.MSETimeOffset).then(function(){ke()}).catch(function(){ke()}):ke()})}function jt(){return j&&!E?j.updateAppendWindow(Q):Promise.resolve()}function Yt(){++ne*(J.get().streaming.wallclockTimeUpdateInterval/1e3)>=J.get().streaming.buffer.bufferPruningInterval&&(ne=0,un())}function Vt(){Bt()}function Qt(he){(E=he)?Mt(u.Z.BUFFERING_COMPLETED):F=Number.POSITIVE_INFINITY}function ft(){try{var he,ke,lt=j.getAllBufferRanges(),me=0;if(!lt)return me;for(ke=0,he=lt.length;ke<he;ke++)me+=lt.end(ke)-lt.start(ke);return me}catch{return 0}}function Dt(he){try{var ke=he,lt=j.getAllBufferRanges();if(!lt||lt.length===0)return NaN;for(var me=0;ke===he&&me<lt.length;){var ye=lt.start(me),Ye=lt.end(me);ke>=ye&&ke<=Ye&&(ke=Ye),me+=1}return ke===he?NaN:ke}catch{}}function xt(){var he=ft();return isNaN(he)||he<A}function Mt(he,ke){var lt=ke||{};g.trigger(he,lt,{streamId:Q.id,mediaType:L})}function Kt(he,ke){if(A=Number.POSITIVE_INFINITY,Z=void 0,F=Number.POSITIVE_INFINITY,w=0,le=null,E=!1,ue=!1,R=0,ne=0,G=[],Y=NaN,N=!1,j){var lt=j;j=null,he||ke||lt.abort().then(function(){lt.reset(ke),lt=null})}ie=!1}return r={initialize:function(he){pe(he),g.on(u.Z.INIT_FRAGMENT_LOADED,$e,r),g.on(u.Z.MEDIA_FRAGMENT_LOADED,nt,r),g.on(u.Z.WALLCLOCK_TIME_UPDATED,Yt,r),g.on(n.Z.PLAYBACK_PLAYING,ht,r),g.on(n.Z.PLAYBACK_PROGRESS,ot,r),g.on(n.Z.PLAYBACK_TIME_UPDATED,ot,r),g.on(n.Z.PLAYBACK_RATE_CHANGED,Vt,r),g.on(n.Z.PLAYBACK_STALLED,qe,r)},getStreamId:function(){return Q.id},getType:function(){return L},getBufferControllerType:function(){return _t},createBufferSink:Se,dischargePreBuffer:function(){if(j&&B&&typeof B.discharge=="function"){var he=B.getAllBufferRanges();if(he.length>0){for(var ke="Beginning "+L+"PreBuffer discharge, adding buffer for:",lt=0;lt<he.length;lt++)ke+=" start: "+he.start(lt)+", end: "+he.end(lt)+";";l.debug(ke)}else l.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");U=[];for(var me=B.discharge(),ye=null,Ye=0;Ye<me.length;Ye++){var St=me[Ye];if(St.segmentType!==Le.w.INIT_SEGMENT_TYPE){var Gt=fe.extract(St.streamId,St.representationId);Gt&&ye!==Gt&&(U.push(Gt),j.append(Gt),ye=Gt)}U.push(St),j.append(St)}B.reset(),B=null}},getBuffer:function(){return j},getBufferLevel:function(){return R},getRangeAt:gt,hasBufferAtTime:function(he){try{var ke=j.getAllBufferRanges();if(!ke||ke.length===0)return!1;for(var lt=0;lt<ke.length;){var me=ke.start(lt),ye=ke.end(lt);if(he>=me&&he<=ye)return!0;lt+=1}return!1}catch(Ye){return l.error(Ye),!1}},pruneBuffer:un,setMediaSource:pe,getMediaSource:function(){return h},appendInitSegmentFromCache:function(he){var ke=fe.extract(Q.id,he);return!!ke&&(l.info("Append Init fragment",L," with representationId:",ke.representationId," and quality:",ke.quality,", data size:",ke.bytes.byteLength),We(ke),!0)},getIsBufferingCompleted:function(){return E},setIsBufferingCompleted:Qt,getIsPruningInProgress:function(){return ue},reset:function(he,ke){g.off(u.Z.INIT_FRAGMENT_LOADED,$e,this),g.off(u.Z.MEDIA_FRAGMENT_LOADED,nt,this),g.off(u.Z.WALLCLOCK_TIME_UPDATED,Yt,this),g.off(n.Z.PLAYBACK_PLAYING,ht,this),g.off(n.Z.PLAYBACK_PROGRESS,ot,this),g.off(n.Z.PLAYBACK_TIME_UPDATED,ot,this),g.off(n.Z.PLAYBACK_RATE_CHANGED,Vt,this),g.off(n.Z.PLAYBACK_STALLED,qe,this),Kt(he,ke)},prepareForPlaybackSeek:function(){return E&&Qt(!1),j.abort()},prepareForReplacementTrackSwitch:function(he){return new Promise(function(ke,lt){j.abort().then(function(){return jt()}).then(function(){return J.get().streaming.buffer.useChangeTypeForTrackSwitch?j.changeType(he):Promise.resolve()}).then(function(){return ve()}).then(function(){Qt(!1),ke()}).catch(function(me){lt(me)})})},prepareForNonReplacementTrackSwitch:function(he){return new Promise(function(ke,lt){jt().then(function(){return J.get().streaming.buffer.useChangeTypeForTrackSwitch?j.changeType(he):Promise.resolve()}).then(function(){ke()}).catch(function(me){lt(me)})})},prepareForForceReplacementQualitySwitch:function(he){return new Promise(function(ke,lt){j.abort().then(function(){return jt()}).then(function(){return ve()}).then(function(){return wt(he)}).then(function(){Qt(!1),ke()}).catch(function(me){lt(me)})})},updateAppendWindow:jt,getAllRangesWithSafetyFactor:Fe,getContinuousBufferTimeForTargetTime:Dt,clearBuffers:ut,pruneAllSafely:ve,updateBufferTimestampOffset:wt,setSeekTarget:function(he){Y=he},segmentRequestingCompleted:function(he){isNaN(he)||(F=he,qt())}},l=(0,m.Z)(ce).getInstance().getLogger(r),fe=_e(ce).getInstance(),Kt(),r}dt.__dashjs_factory_name=_t;var Ze=_.Z.getClassFactory(dt),Je="NotFragmentedTextBufferController";function de(i){i=i||{};var r,l,E,R,A,h,w=this.context,F=(0,p.Z)(w).getInstance(),j=i.textController,B=i.errHandler,N=i.streamInfo,U=i.type;function Z(ue){R=ue}function le(ue){var fe,G;l!==ue&&(l=ue)&&(fe=u.Z.BUFFERING_COMPLETED,G={},F.trigger(fe,G,{streamId:N.id,mediaType:U}))}function ne(ue){ue.chunk.bytes&&!l&&(h.save(ue.chunk),A.append(ue.chunk),le(!0))}return r={initialize:function(ue){Z(ue)},getStreamId:function(){return N.id},getType:function(){return U},getBufferControllerType:function(){return Je},createBufferSink:function(ue){return new Promise(function(fe,G){try{(A=Ee(w).create({mediaSource:R,textController:j,eventBus:F})).initializeForFirstUse(N,ue),E||(A.getBuffer()&&typeof A.getBuffer().initialize=="function"&&A.getBuffer().initialize(),E=!0),fe(A)}catch(ie){B.error(new re.Z(X.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,X.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+U)),G(ie)}})},dischargePreBuffer:function(){},getBuffer:function(){return A},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:Z,getMediaSource:function(){return R},appendInitSegmentFromCache:function(ue){return h.extract(N.id,ue)!==null},getIsBufferingCompleted:function(){return l},setIsBufferingCompleted:le,getIsPruningInProgress:function(){return!1},reset:function(ue){F.off(u.Z.INIT_FRAGMENT_LOADED,ne,r),!ue&&A&&(A.abort(),A.reset(),A=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return l=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},E=!1,R=null,l=!1,h=_e(w).getInstance(),F.on(u.Z.INIT_FRAGMENT_LOADED,ne,r),r}de.__dashjs_factory_name=Je;var ge=_.Z.getClassFactory(de);function Be(i){i=i||{};var r,l,E,R,A,h,w,F,j,B,N,U,Z,le=this.context,ne=(0,p.Z)(le).getInstance(),ue=i.dashMetrics,fe=i.mediaPlayerModel,G=i.fragmentModel,ie=i.abrController,Y=i.playbackController,ce=i.textController,g=i.type,P=i.bufferController,C=i.representationController,D=i.settings;function b(){U=!0}function te(){U=!1}function z($e){if(!P.getIsBufferingCompleted()){ae();var nt=isNaN($e)?0:$e;A=setTimeout(Q,nt)}}function ae(){A&&(clearTimeout(A),A=null)}function Q(){try{if(function(){try{return g===t.Z.TEXT&&!ce.isTextEnabled()||Y.isPaused()&&(!Y.getStreamController().getInitialPlayback()||!Y.getStreamController().getAutoPlay())&&!D.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void ae();if(function(){try{return!!U&&C.getCurrentRepresentationInfo()&&(isNaN(j)||B||(We=l.id,Qe=ie.getMaxAllowedIndexFor(g,We),!(!isNaN(F)&&F==Qe||(E.info("Top quality "+g+" index has changed from "+F+" to "+Qe),F=Qe,0)))||function(){var Ct=C.getCurrentRepresentationInfo();return!g||!Ct||ue.getCurrentBufferLevel(g)<L()}())}catch{return!1}var We,Qe}()){var $e=!1;Z&&($e=ie.checkPlaybackQuality(g,l.id)),$e||(nt=C.getCurrentRepresentationInfo(),N||nt.quality!==j||B?(B?(E.debug("Switch track for "+g+", representation id = "+nt.id),B=!1):E.debug("Quality has changed, get init request for representationid = "+nt.id),ne.trigger(u.Z.INIT_FRAGMENT_NEEDED,{representationId:nt.id,sender:r},{streamId:l.id,mediaType:g}),Z=!1,N=!1):(E.debug("Media segment needed for ".concat(g," and stream id ").concat(l.id)),ne.trigger(u.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:l.id,mediaType:g}),Z=!0))}else z(Y.getLowLatencyModeEnabled()?D.get().streaming.scheduling.lowLatencyTimeout:D.get().streaming.scheduling.defaultTimeout)}catch{z(Y.getLowLatencyModeEnabled()?D.get().streaming.scheduling.lowLatencyTimeout:D.get().streaming.scheduling.defaultTimeout)}var nt}function L(){var $e=NaN,nt=C.getCurrentRepresentationInfo();return g&&nt&&($e=g===t.Z.TEXT?function(){try{if(ce.isTextEnabled()){var We=C.getCurrentRepresentationInfo();if(isNaN(We.fragmentDuration)){var Qe=ue.getCurrentSchedulingInfo(y.Z.SCHEDULING_INFO);return Qe?Qe.duration:0}return We.fragmentDuration}return 0}catch{return 0}}():g===t.Z.AUDIO&&h?function(){try{var We=ue.getCurrentBufferLevel(t.Z.VIDEO),Qe=C.getCurrentRepresentationInfo();return isNaN(Qe.fragmentDuration)?We+1:Math.max(We+1,Qe.fragmentDuration)}catch{return 0}}():function(){try{var We=C.getCurrentRepresentationInfo().mediaInfo.streamInfo;return ie.isPlayingAtTopQuality(We)?We.manifestInfo.duration>=D.get().streaming.buffer.longFormContentDurationThreshold?D.get().streaming.buffer.bufferTimeAtTopQualityLongForm:D.get().streaming.buffer.bufferTimeAtTopQuality:fe.getStableBufferTime()}catch{return fe.getStableBufferTime()}}()),$e}function J(){pe(!0)}function pe($e){if(Y&&G){var nt=G.getRequests({state:K.FRAGMENT_MODEL_EXECUTED,time:Y.getTime(),threshold:0})[0];nt&&Y.getTime()>=nt.startTime&&((!w.mediaInfo||nt.mediaInfo.type===w.mediaInfo.type&&nt.mediaInfo.index!==w.mediaInfo.index)&&$e&&ne.trigger(u.Z.TRACK_CHANGE_RENDERED,{mediaType:g,oldMediaInfo:w.mediaInfo,newMediaInfo:nt.mediaInfo,streamId:l.id}),nt.quality===w.quality&&nt.adaptationIndex===w.adaptationIndex||!$e||(E.debug("Quality change rendered for streamId ".concat(l.id," and type ").concat(g)),ne.trigger(u.Z.QUALITY_CHANGE_RENDERED,{mediaType:g,oldQuality:w.quality,newQuality:nt.quality,streamId:l.id})),w={mediaInfo:nt.mediaInfo,quality:nt.quality,adaptationIndex:nt.adaptationIndex})}}function Ne(){G.abortRequests(),ae()}function Se(){D.get().streaming.scheduling.scheduleWhilePaused||z()}function Ce($e){ue.updatePlayListTraceMetrics({playbackspeed:$e.playbackRate.toString()})}function Re(){Z=!0,R=0,j=NaN,w={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},F=NaN,B=!1,N=!1,U=!0}return r={initialize:function($e){h=$e,ne.on(u.Z.URL_RESOLUTION_FAILED,Ne,r),ne.on(n.Z.PLAYBACK_STARTED,Se,r),ne.on(n.Z.PLAYBACK_RATE_CHANGED,Ce,r),ne.on(n.Z.PLAYBACK_TIME_UPDATED,J,r),ne.on(n.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,b,r),ne.on(n.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,te,r)},getType:function(){return g},getStreamId:function(){return l.id},setTimeToLoadDelay:function($e){R=$e},getTimeToLoadDelay:function(){return R},setSwitchTrack:function($e){B=$e},getSwitchTrack:function(){return B},startScheduleTimer:z,clearScheduleTimer:ae,reset:function(){ne.off(u.Z.URL_RESOLUTION_FAILED,Ne,r),ne.off(n.Z.PLAYBACK_STARTED,Se,r),ne.off(n.Z.PLAYBACK_RATE_CHANGED,Ce,r),ne.off(n.Z.PLAYBACK_TIME_UPDATED,J,r),ne.off(n.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,b,r),ne.off(n.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,te,r),ae(),pe(!1),Re(),l=null},getBufferTarget:L,getPlaybackController:function(){return Y},setCheckPlaybackQuality:function($e){Z=$e},setInitSegmentRequired:function($e){N=$e},setLastInitializedQuality:function($e){j=$e}},E=(0,m.Z)(le).getInstance().getLogger(r),Re(),l=i.streamInfo,r}Be.__dashjs_factory_name="ScheduleController";var f=_.Z.getClassFactory(Be),o=M(7387);function v(i){var r,l,E,R,A,h,w=(i=i||{}).eventBus,F=i.events,j=i.abrController,B=i.dashMetrics,N=i.playbackController,U=i.timelineConverter,Z=i.type,le=i.streamInfo,ne=i.dashConstants,ue=i.segmentsController,fe=i.isDynamic,G=i.adapter;function ie(){return Z}function Y(){return E}function ce(){return h}function g(){l=null,E=!0,R=[],A=null}function P(ae){return new Promise(function(Q,L){var J=ae.hasInitialization(),pe=ae.hasSegments(),Ne=[];Ne.push(ue.updateInitData(ae,J)),Ne.push(ue.updateSegmentData(ae,pe)),Promise.all(Ne).then(function(Se){var Ce;Se[0]&&!Se[0].error&&(ae=function(Re,$e){return $e&&!$e.error&&$e.representation?$e.representation:Re}(ae,Se[0])),Se[1]&&!Se[1].error&&(ae=function(Re,$e){if($e&&!$e.error){var nt,We,Qe,Ct,ve=$e.segments,Fe=[],ot=0;for(nt=0,We=ve?ve.length:0;nt<We;nt++)Qe=ve[nt],(Ct=(0,o.TJ)(U,fe,Re,Qe.startTime,Qe.duration,Qe.timescale,Qe.media,Qe.mediaRange,ot))&&(Fe.push(Ct),Ct=null,ot++);return Fe.length>0&&(Re.segments=Fe),Re}}(ae,Se[1])),(Ce=ae).mediaFinishedInformation=ue.getMediaFinishedInformation(Ce),function(Re){if(Y()){var $e,nt,We=B.getCurrentManifestUpdate(),Qe=!1;if(We){for(var Ct=0;Ct<We.representationInfo.length;Ct++)if(($e=We.representationInfo[Ct]).index===Re.index&&$e.mediaType===ie()){Qe=!0;break}Qe||B.addManifestUpdateRepresentationInfo(Re,ie())}if(function(){for(var Fe=0,ot=R.length;Fe<ot;Fe++){var qe=R[Fe].segmentInfoType;if(!R[Fe].hasInitialization()||(qe===ne.SEGMENT_BASE||qe===ne.BASE_URL)&&!R[Fe].segments)return!1}return!0}()){j.setPlaybackQuality(Z,le,(nt=h,R.indexOf(nt)));var ve=B.getCurrentDVRInfo(Z);ve&&B.updateManifestUpdateInfo({latency:ve.range.end-N.getTime()}),B.getCurrentRepresentationSwitch(ce().adaptation.type)||C(),b()}}}(ae),Q()}).catch(function(Se){L(Se)})})}function C(){(function(){if(!(j&&B&&N&&U))throw new Error(t.Z.MISSING_CONFIG_ERROR)})();var ae=new Date,Q=ce(),L=1e3*N.getTime();Q&&B.addRepresentationSwitch(Q.adaptation.type,ae,L,Q.id),w.trigger(n.Z.REPRESENTATION_SWITCH,{mediaType:Z,streamId:le.id,currentRepresentation:Q,numberOfRepresentations:R.length},{streamId:le.id,mediaType:Z})}function D(ae){return ae==null||ae>=R.length?null:R[ae]}function b(ae){E=!1,w.trigger(F.DATA_UPDATE_COMPLETED,{data:l,currentRepresentation:h,error:ae},{streamId:le.id,mediaType:Z})}function te(ae){h=ae,A=G.convertRepresentationToRepresentationInfo(h)}function z(ae){if(ae.newDuration){var Q=ce();Q&&Q.adaptation.period&&(Q.adaptation.period.duration=ae.newDuration)}}return r={getStreamId:function(){return le.id},getType:ie,getData:function(){return l},isUpdating:Y,updateData:function(ae,Q,L,J,pe){return new Promise(function(Ne,Se){if(E=!0,R=Q,l=ae,te(D(pe)),L!==t.Z.VIDEO&&L!==t.Z.AUDIO&&(L!==t.Z.TEXT||!J))return b(),void Ne();for(var Ce=[],Re=0,$e=R.length;Re<$e;Re++){var nt=R[Re];Ce.push(P(nt))}Promise.all(Ce).then(function(){te(D(pe)),Ne()}).catch(function(We){Se(We)})})},getCurrentRepresentation:ce,getCurrentRepresentationInfo:function(){return A},getRepresentationForQuality:D,prepareQualityChange:function(ae){te(D(ae)),C()},reset:function(){w.off(n.Z.MANIFEST_VALIDITY_CHANGED,z,r),g()}},g(),w.on(n.Z.MANIFEST_VALIDITY_CHANGED,z,r),r}v.__dashjs_factory_name="RepresentationController";var S=_.Z.getClassFactory(v),W=M(3106),V=M(9326),be=M(7473),ze=M(2594);function Me(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}var De=function i(){Me(this,i),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};De.INITIAL_PLAYOUT_START_REASON="initial_playout",De.SEEK_START_REASON="seek",De.RESUME_FROM_PAUSE_START_REASON="resume",De.METRICS_COLLECTION_START_REASON="metrics_collection_start";var Ae=function i(){Me(this,i),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};Ae.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",Ae.REBUFFERING_REASON="rebuffering",Ae.USER_REQUEST_STOP_REASON="user_request",Ae.END_OF_PERIOD_STOP_REASON="end_of_period",Ae.END_OF_CONTENT_STOP_REASON="end_of_content",Ae.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",Ae.FAILURE_STOP_REASON="failure";var xe=M(7802);function Xe(){return{ntpToUTC:function(i){var r=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(r.getTime()+i).getTime()}}}Xe.__dashjs_factory_name="TimeUtils";var mt=_.Z.getSingletonFactory(Xe);function rt(i){i=i||{};var r,l,E,R,A,h,w,F,j,B,N,U,Z,le,ne,ue=this.context,fe=(0,p.Z)(ue).getInstance(),G=i.streamInfo,ie=i.type,Y=i.errHandler,ce=i.mimeType,g=i.timelineConverter,P=i.adapter,C=i.manifestModel,D=i.mediaPlayerModel,b=i.fragmentModel,te=i.abrController,z=i.playbackController,ae=i.mediaController,Q=i.textController,L=i.dashMetrics,J=i.settings,pe=i.boxParser,Ne=i.segmentBlacklistController;function Se(){return G.id}function Ce(){return ie}function Re(){return P.getIsTextTrack(F.getData())}function $e(){A=[],R=null,le=0,j=!1,B=!1,N=!1,ne=null}function nt(he){return!isNaN(he)&&!isNaN(G.duration)&&isFinite(G.duration)&&he>=G.start+G.duration}function We(he){var ke=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(he.sender){if(z.getIsManifestUpdateInProgress())ot();else if((!Re()||Q.isTextEnabled())&&h&&he.representationId&&!h.appendInitSegmentFromCache(he.representationId)){var lt=F.getCurrentRepresentation();if(lt.range===0)return void Qe();var me=U?U.getInitRequest(R,lt):null;me?b.executeRequest(me):ke&&(w.setInitSegmentRequired(!0),ot())}}}function Qe(he){var ke=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(z.getIsManifestUpdateInProgress()||h.getIsPruningInProgress())ot();else{var lt=Fe();lt?(j=!1,B=!1,Ct(lt)):ve(ke)}}function Ct(he){isNaN(he.startTime+he.duration)||(le=he.startTime+he.duration),he.delayLoadingTime=new Date().getTime()+w.getTimeToLoadDelay(),w.setTimeToLoadDelay(0),function(ke){var lt=ke.url;return ke.range&&(lt=lt.concat("_",ke.range)),Ne.contains(lt)}(he)?(l.warn("Fragment request url ".concat(he.url," for stream id ").concat(G.id," and media type ").concat(ie," is on the ignore list and will be skipped")),ot()):(l.debug("Next fragment request url for stream id ".concat(G.id," and media type ").concat(ie," is ").concat(he.url)),b.executeRequest(he))}function ve(he){var ke,lt=F.getCurrentRepresentation();if(!J.get().streaming.gaps.enableSeekFix||!j&&z.getTime()!==0||(E?E&&lt.segmentInfoType===e.Z.SEGMENT_TIMELINE&&(ke=U.getValidTimeAheadOfTargetTime(le,R,lt,J.get().streaming.gaps.threshold)):ke=U.getValidTimeAheadOfTargetTime(le,R,lt,J.get().streaming.gaps.threshold),isNaN(ke)||ke===le)){if(U.isLastSegmentRequested(lt,le)){var me=U.getCurrentIndex();return l.debug("Segment requesting for stream ".concat(G.id," has finished")),fe.trigger(u.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:me},{streamId:G.id,mediaType:ie}),h.segmentRequestingCompleted(me),void w.clearScheduleTimer()}he&&ot()}else z.isSeeking()||z.getTime()===0?(l.warn("Adjusting playback time ".concat(ke," because of gap in the manifest. Seeking by ").concat(ke-le)),z.seek(ke,!1,!1)):(l.warn("Adjusting buffering time ".concat(ke," because of gap in the manifest. Adjusting time by ").concat(ke-le)),Kt(ke),he&&ot())}function Fe(){var he,ke=Yt();if(isNaN(le)||Ce()===t.Z.TEXT&&!Q.isTextEnabled())return null;if(U){var lt=F&&ke?F.getRepresentationForQuality(ke.quality):null;he=j?U.getSegmentRequestForTime(R,lt,le):B?U.repeatSegmentRequest(R,lt):U.getNextSegmentRequest(R,lt)}return he}function ot(){w.startScheduleTimer(z.getLowLatencyModeEnabled()?J.get().streaming.scheduling.lowLatencyTimeout:J.get().streaming.scheduling.defaultTimeout)}function qe(he){he.error||h.getIsBufferingCompleted()||h.updateBufferTimestampOffset(he.currentRepresentation)}function ht(he){L.addBufferState(ie,he.state,w.getBufferTarget()),he.state!==y.Z.BUFFER_EMPTY||z.isSeeking()||(l.info("Buffer is empty! Stalling!"),L.pushPlayListTraceMetrics(new Date,Ae.REBUFFERING_REASON))}function gt(he){b.syncExecutedRequestsWithBufferedRange(h.getBuffer().getAllBufferRanges(),G.duration),he.quotaExceeded&&he.from>z.getTime()&&Kt(he.from),he.hasEnoughSpaceToAppend&&he.quotaExceeded&&w.startScheduleTimer()}function st(he){if(he&&he.lastRequestAppended&&he.lastRequestAppended.url){var ke=he.lastRequestAppended.url;he.lastRequestAppended.range&&(ke=ke.concat("_",he.lastRequestAppended.range)),l.warn("Blacklisting segment with url ".concat(ke)),Ne.add(ke)}}function qt(he){if(l.debug("Appended bytes for ".concat(he.mediaType," and stream id ").concat(he.streamId)),he.segmentType===Le.w.INIT_SEGMENT_TYPE){var ke=he.quality;w.setLastInitializedQuality(ke),l.info("["+ie+"] lastInitializedRepresentationInfo changed to "+he.quality)}ne?Bt(ne):w.startScheduleTimer(0)}function Bt(he){var ke=b.getRequests({state:K.FRAGMENT_MODEL_LOADING});if(ke&&ke.length>0)return l.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(ne=he);h.updateBufferTimestampOffset(he).then(function(){w.setCheckPlaybackQuality(!1),R.segmentAlignment||R.subSegmentAlignment?w.startScheduleTimer():xt(),ne=null,N=!1}).catch(function(){ne=null,N=!1})}function sn(he){l.info("onFragmentLoadingAbandoned request: "+he.request.url+" has been aborted"),z.isSeeking()||w.getSwitchTrack()||N||(l.info("onFragmentLoadingAbandoned request: "+he.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),he.request&&he.request.isInitializationRequest()?w.setInitSegmentRequired(!0):Kt(he.request.startTime+he.request.duration/2),w.startScheduleTimer(0))}function un(he){l.info("OnFragmentLoadingCompleted for stream id "+G.id+" and media type "+ie+" - Url:",he.request?he.request.url:"undefined",he.request.range?", Range:"+he.request.range:""),Re()&&w.startScheduleTimer(0),he.error&&he.request.serviceLocation&&function(ke){l.info("Fragment loading completed with an error"),ke&&ke.request&&ke.request.type&&(ke.request.type===Le.w.INIT_SEGMENT_TYPE?We({representationId:ke.request.representationId,sender:{}},!1):ke.request.type===Le.w.MEDIA_SEGMENT_TYPE&&(Kt(ke.request.startTime+ke.request.duration/2),Qe({},!1)))}(he)}function Ge(){Kt(z.getTime()),jt().startScheduleTimer()}function ut(he){var ke=he.currentTrackInfo;if(ke){var lt=A.find(function(me){return me.index===ke.index&&me.lang===ke.lang});lt&&wt(lt).then(function(){h.setIsBufferingCompleted(!1),Kt(z.getTime()),w.setInitSegmentRequired(!0),w.startScheduleTimer()})}}function tt(he){Kt(he.quotaExceededTime),w.clearScheduleTimer()}function vt(){return h?h.getBuffer():null}function wt(he){he===R||he&&R&&he.type!==R.type||(R=he);var ke=P.getRealAdaptation(G,R),lt=P.getVoRepresentations(R);if(F){var me,ye=F.getData(),Ye=te.getMaxAllowedIndexFor(ie,G.id),St=te.getMinAllowedIndexFor(ie,G.id),Gt=null;return ye!==null&&ye.id===ke.id||ie===t.Z.TEXT?me=te.getQualityFor(ie,G.id):(Gt=te.getThroughputHistory().getAverageThroughput(ie,E)||te.getInitialBitrateFor(ie,G.id),me=te.getQualityForBitrate(R,Gt,G.id)),St!==void 0&&me<St&&(me=St),me>Ye&&(me=Ye),F.updateData(ke,lt,ie,R.isFragmented,me)}return Promise.resolve()}function jt(){return w}function Yt(he){var ke;return he!==void 0?((0,W.SE)(he),ke=F?F.getRepresentationForQuality(he):null):ke=F?F.getCurrentRepresentation():null,P.convertRepresentationToRepresentationInfo(ke)}function Vt(){return!!h&&h.getIsBufferingCompleted()}function Qt(he){if(J.get().streaming.enableManifestTimescaleMismatchFix){var ke=he.chunk,lt=ke.bytes,me=Yt(ke.quality),ye=F&&me?F.getRepresentationForQuality(me.quality):null;me&&ye&&(ye.timescale=pe.getMediaTimescaleFromMoov(lt))}}function ft(he){var ke=he.chunk,lt=ke.bytes,me=ke.quality,ye=Yt(me),Ye=F&&ye?F.getRepresentationForQuality(ye.quality):null;if(ye&&Ye){var St;if(J.get().streaming.parseInbandPrft&&he.request.type===Le.w.MEDIA_SEGMENT_TYPE){var Gt=function(Fn,dr){var Ur=Fn.getBoxes("prft"),Sr=[];return Ur.forEach(function(br){Sr.push(function(cr,gr){var Jn="unknown";switch(cr.flags){case 0:Jn=e.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:Jn=e.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:Jn=e.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var Er=1e3*cr.ntp_timestamp_sec+cr.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:Jn,ntpTimestamp:Er=mt(ue).getInstance().ntpToUTC(Er),mediaTime:cr.media_time/gr}}(br,dr))}),Sr}(St=St||pe.parse(lt),Ye.timescale);Gt&&Gt.length&&fe.trigger(n.Z.INBAND_PRFT,{data:Gt},{streamId:G.id,mediaType:ie})}var gn=P.getEventsFor(ye.mediaInfo,null,G),On=P.getEventsFor(ye,Ye,G);if(gn&&gn.length>0||On&&On.length>0){var wn=b.getRequests({state:K.FRAGMENT_MODEL_EXECUTED,quality:me,index:ke.index})[0],Hn=function(Fn,dr,Ur,Sr){try{for(var br={},cr=[],gr=Ur.concat(Sr),Jn=0,Er=gr.length;Jn<Er;Jn++)br[gr[Jn].schemeIdUri+"/"+gr[Jn].value]=gr[Jn];var Ar=Fn.getBoxes("emsg");if(!Ar||Ar.length===0)return cr;for(var or=Fn.getBox("sidx"),Kr=!or||isNaN(or.earliest_presentation_time)||isNaN(or.timescale)?dr&&!isNaN(dr.mediaStartTime)?dr.mediaStartTime:0:or.earliest_presentation_time/or.timescale,_i=Math.max(Kr,0),Ti=F.getCurrentRepresentation(),vr=0,Si=Ar.length;vr<Si;vr++){var Ir=P.getEvent(Ar[vr],br,_i,Ti);Ir&&cr.push(Ir)}return cr}catch{return[]}}(St=St||pe.parse(lt),wn,gn,On);fe.trigger(u.Z.INBAND_EVENTS,{events:Hn},{streamId:G.id})}}}function Dt(){var he=z.getTime();J.get().streaming.buffer.flushBufferAtTrackSwitch&&z.seek(he+.001,!1,!0),Kt(he),h.setSeekTarget(he),w.startScheduleTimer()}function xt(){var he=z.getTime(),ke=h.getContinuousBufferTimeForTargetTime(he);Kt(isNaN(ke)?he:ke),w.startScheduleTimer()}function Mt(he){he&&!isNaN(he.time)&&(Kt(he.time),h.setSeekTarget(he.time))}function Kt(he){le=he,j=!0}return r={initialize:function(he,ke,lt){Z=(0,xe.Z)(ue).create({events:u.Z,eventBus:fe,streamInfo:G,timelineConverter:g,dashConstants:e.Z,segmentBaseController:i.segmentBaseController,type:ie}),U=(0,V.Z)(ue).create({streamInfo:G,type:ie,timelineConverter:g,dashMetrics:L,mediaPlayerModel:D,baseURLController:i.baseURLController,errHandler:Y,segmentsController:Z,settings:J,boxParser:pe,events:u.Z,eventBus:fe,errors:X,debug:(0,m.Z)(ue).getInstance(),requestModifier:(0,be.Z)(ue).getInstance(),dashConstants:e.Z,constants:t.Z,urlUtils:(0,ze.Z)(ue).getInstance()}),E=G.manifestInfo.isDynamic,U.initialize(E),te.registerStreamType(ie,r),F=S(ue).create({streamInfo:G,type:ie,abrController:te,dashMetrics:L,playbackController:z,timelineConverter:g,dashConstants:e.Z,events:u.Z,eventBus:fe,errors:X,isDynamic:E,adapter:P,segmentsController:Z}),h=function(me,ye){return me?me!==t.Z.TEXT||ye?Ze(ue).create({streamInfo:G,type:me,mediaPlayerModel:D,manifestModel:C,fragmentModel:b,errHandler:Y,mediaController:ae,representationController:F,adapter:P,textController:Q,abrController:te,playbackController:z,settings:J}):ge(ue).create({streamInfo:G,type:me,mimeType:ce,fragmentModel:b,textController:Q,errHandler:Y,settings:J}):(Y.error(new re.Z(X.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,X.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(ie,lt),h&&h.initialize(he),(w=f(ue).create({streamInfo:G,type:ie,mimeType:ce,adapter:P,dashMetrics:L,mediaPlayerModel:D,fragmentModel:b,abrController:te,playbackController:z,textController:Q,mediaController:ae,bufferController:h,representationController:F,settings:J})).initialize(ke),le=0,j=!1,B=!1},getStreamId:Se,getType:Ce,isUpdating:function(){return!!F&&F.isUpdating()},getBufferController:function(){return h},dischargePreBuffer:function(){h.dischargePreBuffer()},getFragmentModel:function(){return b},getScheduleController:jt,getRepresentationController:function(){return F},getRepresentationInfo:Yt,getBufferLevel:function(){return h?h.getBufferLevel():0},isBufferingCompleted:Vt,createBufferSinks:function(he){var ke=vt();return ke?Promise.resolve(ke):h?h.createBufferSink(R,he):Promise.resolve(null)},updateStreamInfo:function(he){return G=he,Vt()?Promise.resolve():h.updateAppendWindow()},getStreamInfo:function(){return G},selectMediaInfo:wt,clearMediaInfoArray:function(){A=[]},addMediaInfo:function(he){A.indexOf(he)===-1&&A.push(he)},prepareTrackSwitch:function(){return new Promise(function(he){l.debug("Preparing track switch for type ".concat(ie));var ke=ie===t.Z.TEXT||J.get().streaming.trackSwitchMode[ie]===t.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&z.getTimeToStreamEnd(G)>J.get().streaming.buffer.stallThreshold;if(h.getIsBufferingCompleted()&&!ke)return h.prepareForNonReplacementTrackSwitch(R.codec).then(function(){fe.trigger(u.Z.BUFFERING_COMPLETED,{},{streamId:G.id,mediaType:ie})}).catch(function(){fe.trigger(u.Z.BUFFERING_COMPLETED,{},{streamId:G.id,mediaType:ie})}),void he();w.clearScheduleTimer(),w.setSwitchTrack(!0),ke?(fe.trigger(u.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ie,streamId:G.id},{mediaType:ie,streamId:G.id}),b.abortRequests(),h.prepareForReplacementTrackSwitch(R.codec).then(function(){var lt=Yt();return h.updateBufferTimestampOffset(lt)}).then(function(){Dt(),he()}).catch(function(){Dt(),he()})):h.prepareForNonReplacementTrackSwitch(R.codec).then(function(){xt(),he()}).catch(function(){xt(),he()})})},prepareQualityChange:function(he){ne&&l.warn("Canceling queued representation switch to ".concat(ne.quality," for ").concat(ie)),l.debug("Preparing quality switch for type ".concat(ie));var ke=he.newQuality;N=!0,w.clearScheduleTimer(),F.prepareQualityChange(ke);var lt=Yt(ke);he.reason&&he.reason.forceReplace?function(me){b.abortRequests(),fe.trigger(u.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ie,streamId:G.id},{mediaType:ie,streamId:G.id}),w.setCheckPlaybackQuality(!1),h.prepareForForceReplacementQualitySwitch(me).then(function(){Dt(),ne=null,N=!1}).catch(function(){Dt(),ne=null,N=!1})}(lt):he&&he.reason&&he.reason.forceAbandon?function(me){h.updateBufferTimestampOffset(me).then(function(){b.abortRequests(),B=!0,w.setCheckPlaybackQuality(!1),w.startScheduleTimer(),N=!1,ne=null}).catch(function(){ne=null,N=!1})}(lt):J.get().streaming.buffer.fastSwitchEnabled?function(me){var ye=z.getTime(),Ye=1.5*(isNaN(me.fragmentDuration)?1:me.fragmentDuration),St=b.getRequests({state:K.FRAGMENT_MODEL_EXECUTED,time:ye+Ye,threshold:0})[0];if(St&&!Re()){var Gt=h.getBufferLevel(),gn=te.getAbandonmentStateFor(G.id,ie);St.quality<me.quality&&Gt>=Ye&&gn!==y.Z.ABANDON_LOAD?h.updateBufferTimestampOffset(me).then(function(){b.abortRequests(),Kt(ye+Ye),w.setCheckPlaybackQuality(!1),w.startScheduleTimer(),N=!1}).catch(function(){N=!1}):Bt(me)}else Bt(me)}(lt):Bt(lt),L.pushPlayListTraceMetrics(new Date,Ae.REPRESENTATION_SWITCH_STOP_REASON),L.createPlaylistTraceMetrics(lt.id,1e3*z.getTime(),z.getPlaybackRate())},getMediaInfo:function(){return R},getMediaSource:function(){return h.getMediaSource()},setMediaSource:function(he){return h.setMediaSource(he,R)},getBuffer:vt,setExplicitBufferingTime:Kt,finalisePlayList:function(he,ke){L.pushPlayListTraceMetrics(he,ke)},probeNextRequest:function(){var he=Yt(),ke=F&&he?F.getRepresentationForQuality(he.quality):null;return U.getNextSegmentRequestIdempotent(R,ke)},prepareInnerPeriodPlaybackSeeking:function(he){return new Promise(function(ke){if(h.hasBufferAtTime(he.seekTime))return h.pruneBuffer(),nt(h.getContinuousBufferTimeForTargetTime(he.seekTime))&&h.setIsBufferingCompleted(!0),void ke();w.clearScheduleTimer(),b.abortRequests(),h.prepareForPlaybackSeek().then(function(){var lt=h.getAllRangesWithSafetyFactor(he.seekTime);return h.clearBuffers(lt)}).then(function(){var lt=h.getContinuousBufferTimeForTargetTime(he.seekTime);if(nt(lt))h.setIsBufferingCompleted(!0),ke();else{var me=isNaN(lt)?he.seekTime:lt;Kt(me),h.setSeekTarget(me);var ye=[];ye.push(h.updateAppendWindow());var Ye=Yt();ye.push(h.updateBufferTimestampOffset(Ye)),Promise.all(ye).then(function(){w.setInitSegmentRequired(!0),w.setCheckPlaybackQuality(!1),w.startScheduleTimer(),ke()})}}).catch(function(lt){l.error(lt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(he,ke){try{w.clearScheduleTimer(),b.abortRequests(),h.prepareForPlaybackSeek().then(function(){return h.pruneAllSafely()}).then(function(){he()})}catch(lt){ke(lt)}})},reset:function(he,ke){U&&U.reset(),h&&(h.reset(he,ke),h=null),w&&(w.reset(),w=null),F&&(F.reset(),F=null),Z&&(Z=null),te&&te.unRegisterStreamType(Se(),ie),fe.off(u.Z.DATA_UPDATE_COMPLETED,qe,r),fe.off(u.Z.INIT_FRAGMENT_NEEDED,We,r),fe.off(u.Z.MEDIA_FRAGMENT_NEEDED,Qe,r),fe.off(u.Z.INIT_FRAGMENT_LOADED,Qt,r),fe.off(u.Z.MEDIA_FRAGMENT_LOADED,ft,r),fe.off(u.Z.BUFFER_LEVEL_STATE_CHANGED,ht,r),fe.off(u.Z.BUFFER_CLEARED,gt,r),fe.off(u.Z.SEEK_TARGET,Mt,r),fe.off(u.Z.FRAGMENT_LOADING_ABANDONED,sn,r),fe.off(u.Z.FRAGMENT_LOADING_COMPLETED,un,r),fe.off(u.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Ge,r),fe.off(u.Z.SET_NON_FRAGMENTED_TEXT,ut,r),fe.off(u.Z.QUOTA_EXCEEDED,tt,r),fe.off(u.Z.SOURCE_BUFFER_ERROR,st,r),fe.off(u.Z.BYTES_APPENDED_END_FRAGMENT,qt,r),$e(),ie=null,G=null}},l=(0,m.Z)(ue).getInstance().getLogger(r),$e(),fe.on(u.Z.DATA_UPDATE_COMPLETED,qe,r,{priority:p.Z.EVENT_PRIORITY_HIGH}),fe.on(u.Z.INIT_FRAGMENT_NEEDED,We,r),fe.on(u.Z.MEDIA_FRAGMENT_NEEDED,Qe,r),fe.on(u.Z.INIT_FRAGMENT_LOADED,Qt,r),fe.on(u.Z.MEDIA_FRAGMENT_LOADED,ft,r),fe.on(u.Z.BUFFER_LEVEL_STATE_CHANGED,ht,r),fe.on(u.Z.BUFFER_CLEARED,gt,r),fe.on(u.Z.SEEK_TARGET,Mt,r),fe.on(u.Z.FRAGMENT_LOADING_ABANDONED,sn,r),fe.on(u.Z.FRAGMENT_LOADING_COMPLETED,un,r),fe.on(u.Z.QUOTA_EXCEEDED,tt,r),fe.on(u.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Ge,r),fe.on(u.Z.SET_NON_FRAGMENTED_TEXT,ut,r),fe.on(u.Z.SOURCE_BUFFER_ERROR,st,r),fe.on(u.Z.BYTES_APPENDED_END_FRAGMENT,qt,r),r}rt.__dashjs_factory_name="StreamProcessor";var Zt=_.Z.getClassFactory(rt),It=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},Ft=M(9032);function Pt(i,r){if(i){if(typeof i=="string")return tn(i,r);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?tn(i,r):void 0}}function tn(i,r){(r==null||r>i.length)&&(r=i.length);for(var l=0,E=new Array(r);l<r;l++)E[l]=i[l];return E}function fn(i){i=i||{};var r,l,E=this.context,R=i.requestModifier,A=i.lowLatencyThroughputModel,h=i.boxParser,w=(0,Ie.Z)(E).getInstance();function F(N){var U,Z=new Date,le=N.request,ne=new Headers;if(le.range&&ne.append("Range","bytes="+le.range),N.headers)for(var ue in N.headers){var fe=N.headers[ue];fe&&ne.append(ue,fe)}le.requestStartDate||(le.requestStartDate=Z),R&&R.modifyRequestHeader&&R.modifyRequestHeader({setRequestHeader:function(g,P){ne.append(g,P)}},{url:N.url}),typeof window.AbortController=="function"&&(U=new AbortController,N.abortController=U,U.signal.onabort=N.onabort);var G={method:N.method,headers:ne,credentials:N.withCredentials?"include":void 0,signal:U?U.signal:void 0},ie=w.get().streaming.abr.fetchThroughputCalculationMode,Y=Date.now(),ce=0;new Promise(function(g){if(ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&A&&(ce=A.getThroughputCapacityDelayMS(le,1e3*l.getCurrentBufferLevel(le.mediaType))))return setTimeout(g,ce);g()}).then(function(){var g=Date.now();fetch(N.url,G).then(function(P){N.response||(N.response={}),N.response.status=P.status,N.response.statusText=P.statusText,N.response.responseURL=P.url,P.ok||N.onerror();var C,D="",b=function(qe,ht){var gt;if(typeof Symbol>"u"||qe[Symbol.iterator]==null){if(Array.isArray(qe)||(gt=Pt(qe))){gt&&(qe=gt);var st=0,qt=function(){};return{s:qt,n:function(){return st>=qe.length?{done:!0}:{done:!1,value:qe[st++]}},e:function(Ge){throw Ge},f:qt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Bt,sn=!0,un=!1;return{s:function(){gt=qe[Symbol.iterator]()},n:function(){var Ge=gt.next();return sn=Ge.done,Ge},e:function(Ge){un=!0,Bt=Ge},f:function(){try{sn||gt.return==null||gt.return()}finally{if(un)throw Bt}}}}(P.headers.keys());try{for(b.s();!(C=b.n()).done;){var te=C.value;D+=te+": "+P.headers.get(te)+`\r
`}}catch(qe){b.e(qe)}finally{b.f()}if(N.response.responseHeaders=D,!P.body)return P.arrayBuffer().then(function(qe){N.response.response=qe;var ht={loaded:qe.byteLength,total:qe.byteLength,stream:!1};N.progress(ht),N.onload(),N.onend()});var z,ae,Q,L,J=parseInt(P.headers.get("Content-Length"),10),pe=0,Ne=!1,Se=new Uint8Array,Ce=0;if(ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&A){var Re=g,$e=0,nt=(Q=P.body.tee(),L=2,function(qe){if(Array.isArray(qe))return qe}(Q)||function(qe,ht){if(typeof Symbol<"u"&&Symbol.iterator in Object(qe)){var gt=[],st=!0,qt=!1,Bt=void 0;try{for(var sn,un=qe[Symbol.iterator]();!(st=(sn=un.next()).done)&&(gt.push(sn.value),!ht||gt.length!==ht);st=!0);}catch(Ge){qt=!0,Bt=Ge}finally{try{st||un.return==null||un.return()}finally{if(qt)throw Bt}}return gt}}(Q,L)||Pt(Q,L)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),We=nt[0],Qe=nt[1];z=We.getReader(),ae=[],z.read().then(function qe(ht){var gt=ht.value,st=ht.done;if($e=Date.now(),gt&&gt.length){var qt=$e-Re,Bt=gt.length;ae.push({chunkDownloadTimeRelativeMS:$e-g,chunkDownloadDurationMS:qt,chunkBytes:Bt,kbps:Math.round(8*Bt/(qt/1e3)),bufferLevel:l.getCurrentBufferLevel(le.mediaType)})}if(st){var sn=$e-g,un=ae.reduce(function(Ge,ut){return Ge+ut.chunkBytes},0);return A.addMeasurement(le,sn,ae,Y,ce,D),void N.progress({loaded:un,total:un,lengthComputable:!0,time:A.getEstimatedDownloadDurationMS(le),stream:!0})}return Re=Date.now(),z.read().then(qe)}),N.reader=Qe.getReader()}else N.reader=P.body.getReader();var Ct=[],ve=[],Fe=[],ot=!0;j(N,function qe(ht){var gt=ht.value;if(ht.done){if(Se){if(ie!==t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var st=null,qt=null;ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(st=function(Ge,ut){try{var tt,vt;tt=Ge.filter(function(Dt,xt){return xt<Ge.length-1}),vt=ut.filter(function(Dt,xt){return xt<ut.length-1});var wt=[];if(tt.length>1){for(var jt=0,Yt=0,Vt=0;Vt<tt.length;Vt++)if(tt[Vt]&&vt[Vt]){var Qt=vt[Vt].ts-tt[Vt].ts;if(Qt>1)wt.push(8*vt[Vt].bytes/Qt),Yt=0;else{Yt===0&&(Yt=tt[Vt].ts,jt=0);var ft=vt[Vt].ts-Yt;ft>1?(jt+=vt[Vt].bytes,wt.push(8*jt/ft),Yt=0):jt+=vt[Vt].bytes}}if(wt.length>0)return wt.reduce(function(Dt,xt){return Dt+xt},0)/wt.length}return null}catch{return null}}(ve,Fe),st&&(qt=8*pe/st)):ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(qt=B(Ct,pe)),N.progress({loaded:pe,total:isNaN(J)?pe:J,lengthComputable:!0,time:qt,stream:!0})}N.response.response=Se.buffer}return N.onload(),void N.onend()}if(gt&&gt.length>0){Se=function(Ge,ut){if(Ge.length===0)return ut;var tt=new Uint8Array(Ge.length+ut.length);return tt.set(Ge),tt.set(ut,Ge.length),tt}(Se,gt),pe+=gt.length,Ct.push({ts:Date.now(),bytes:gt.length}),ie===t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&ot&&h.findLastTopIsoBoxCompleted(["moof"],Se,Ce).found&&(ot=!1,ve.push({ts:performance.now(),bytes:gt.length}));var Bt=h.findLastTopIsoBoxCompleted(["moov","mdat"],Se,Ce);if(Bt.found){var sn,un=Bt.lastCompletedOffset+Bt.size;ie!==t.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||ot||(ot=!0,Fe.push({ts:performance.now(),bytes:Se.length})),un===Se.length?(sn=Se,Se=new Uint8Array):(sn=new Uint8Array(Se.subarray(0,un)),Se=Se.subarray(un)),N.progress({data:sn.buffer,lengthComputable:!1,noTrace:!0}),Ce=0}else Ce=Bt.lastCompletedOffset,Ne||(N.progress({lengthComputable:!1,noTrace:!0}),Ne=!0)}j(N,qe)})}).catch(function(P){N.onerror&&N.onerror(P)})})}function j(N,U){N.reader.read().then(U).catch(function(Z){N.onerror&&N.response.status===200&&N.onerror(Z)})}function B(N,U){try{if((N=N.filter(function(ne){return ne.bytes>U/4/N.length})).length>1){var Z=0,le=(N[N.length-1].ts-N[0].ts)/N.length;return N.forEach(function(ne,ue){var fe=N[ue+1];if(fe){var G=fe.ts-ne.ts;Z+=G<le?G:0}}),Z}return null}catch{return null}}return r={load:function(N){R&&R.modifyRequest?(0,be.k)(N,R).then(function(){return F(N)}):F(N)},abort:function(N){if(N.abortController)N.abortController.abort();else if(N.reader)try{N.reader.cancel(),N.onabort()}catch{}},calculateDownloadedTime:B,setup:function(N){l=N.dashMetrics}},r}fn.__dashjs_factory_name="FetchLoader";var Sn=_.Z.getClassFactory(fn),_n=M(1180);function An(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var Gn=function(){function i(){(function(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")})(this,i),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var r,l;return r=i,(l=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==e.Z.BASE_URL&&this.segmentInfoType!==e.Z.SEGMENT_BASE&&!this.indexRange}}])&&An(r.prototype,l),i}(),yn=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.period=null,this.index=-1,this.type=null},Qn=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};Qn.DEFAULT_ID="defaultId";var kn=Qn,Vn=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},$n=M(2610),Kn=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},tr=function i(r,l,E,R){(function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")})(this,i),this.url=r||"",this.serviceLocation=l||r||"",this.dvbPriority=E||1,this.dvbWeight=R||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};tr.DEFAULT_DVB_PRIORITY=1,tr.DEFAULT_DVB_WEIGHT=1;var nr=tr,Nr=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},bt=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},Et=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function Tt(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var Ue=function(){function i(){(function(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")})(this,i),this.schemeIdUri=null,this.value=null,this.id=null}var r,l;return r=i,(l=[{key:"init",value:function(E){return E&&(this.schemeIdUri=E.schemeIdUri?E.schemeIdUri:null,this.value=E.value?E.value:null,this.id=E.id?E.id:null,E[e.Z.DVB_URL]&&(this.dvbUrl=E[e.Z.DVB_URL]),E[e.Z.DVB_MIMETYPE]&&(this.dvbMimeType=E[e.Z.DVB_MIMETYPE]),E[e.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=E[e.Z.DVB_FONTFAMILY])),this}}])&&Tt(r.prototype,l),i}(),ct=M(3101),He=M.n(ct);function at(){return{areEqual:function(i,r){return He()(i,r)}}}at.__dashjs_factory_name="ObjectUtils";var Ot=_.Z.getSingletonFactory(at),Lt=M(7803),Wt=function i(r,l){(function(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")})(this,i),this.url=r||"",this.serviceLocation=l||null,this.queryParams={}},Xt=function i(r,l,E){(function(R,A){if(!(R instanceof A))throw new TypeError("Cannot call a class as a function")})(this,i),this.url=r||"",this.serviceLocation=l||null,this.ttl=E||NaN,this.queryParams={}};function Ut(i,r){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(i);r&&(E=E.filter(function(R){return Object.getOwnPropertyDescriptor(i,R).enumerable})),l.push.apply(l,E)}return l}function yt(i){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?Ut(Object(l),!0).forEach(function(E){zt(i,E,l[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):Ut(Object(l)).forEach(function(E){Object.defineProperty(i,E,Object.getOwnPropertyDescriptor(l,E))})}return i}function zt(i,r,l){return r in i?Object.defineProperty(i,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[r]=l,i}function Ht(i,r){var l;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(l=rn(i))||r){l&&(i=l);var E=0,R=function(){};return{s:R,n:function(){return E>=i.length?{done:!0}:{done:!1,value:i[E++]}},e:function(F){throw F},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A,h=!0,w=!1;return{s:function(){l=i[Symbol.iterator]()},n:function(){var F=l.next();return h=F.done,F},e:function(F){w=!0,A=F},f:function(){try{h||l.return==null||l.return()}finally{if(w)throw A}}}}function rn(i,r){if(i){if(typeof i=="string")return dn(i,r);var l=Object.prototype.toString.call(i).slice(8,-1);return l==="Object"&&i.constructor&&(l=i.constructor.name),l==="Map"||l==="Set"?Array.from(i):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?dn(i,r):void 0}}function dn(i,r){(r==null||r>i.length)&&(r=i.length);for(var l=0,E=new Array(r);l<r;l++)E[l]=i[l];return E}function vn(){var i,r,l,E,R=this.context,A=(0,ze.Z)(R).getInstance(),h=Number.isInteger||function(g){return typeof g=="number"&&isFinite(g)&&Math.floor(g)===g};function w(g,P){if(!g)throw new Error("adaptation is not defined");if(!P)throw new Error("type is not defined");if(g.Representation_asArray&&g.Representation_asArray.length){var C=ue(g.Representation_asArray[0]);if(C&&C.length>0&&Lt.Y.indexOf(C[0].schemeIdUri)>=0)return P===t.Z.IMAGE}if(g.ContentComponent_asArray&&g.ContentComponent_asArray.length>0){if(g.ContentComponent_asArray.length>1)return P===t.Z.MUXED;if(g.ContentComponent_asArray[0].contentType===P)return!0}var D=P===t.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(P);if(g.Representation_asArray&&g.Representation_asArray.length){var b=g.Representation_asArray[0].codecs;if(D.test(b))return!0}if(g.hasOwnProperty(e.Z.MIME_TYPE))return D.test(g.mimeType);if(g.Representation_asArray){for(var te,z=0;z<g.Representation_asArray.length;z++)if((te=g.Representation_asArray[z]).hasOwnProperty(e.Z.MIME_TYPE))return D.test(te.mimeType)}return!1}function F(g){if(!g)throw new Error("adaptation is not defined");if(g.hasOwnProperty(e.Z.SEGMENT_TEMPLATE)||g.hasOwnProperty(e.Z.SEGMENT_TIMELINE)||g.hasOwnProperty(e.Z.SEGMENT_LIST)||g.hasOwnProperty(e.Z.SEGMENT_BASE))return!0;if(g.Representation_asArray&&g.Representation_asArray.length>0){var P=g.Representation_asArray[0];if(P.hasOwnProperty(e.Z.SEGMENT_TEMPLATE)||P.hasOwnProperty(e.Z.SEGMENT_TIMELINE)||P.hasOwnProperty(e.Z.SEGMENT_LIST)||P.hasOwnProperty(e.Z.SEGMENT_BASE))return!0}return!1}function j(g){return w(g,t.Z.VIDEO)}function B(g){return w(g,t.Z.TEXT)}function N(g){return w(g,t.Z.IMAGE)}function U(g){return g&&Array.isArray(g.Representation_asArray)&&g.Representation_asArray.sort(function(P,C){return P.bandwidth-C.bandwidth}),g}function Z(g,P){return g&&g.Period_asArray&&h(P)&&g.Period_asArray[P]?g.Period_asArray[P].AdaptationSet_asArray:[]}function le(g){return g&&g.Period_asArray?g.Period_asArray:[]}function ne(g){var P=!1;return g&&g.hasOwnProperty("type")&&(P=g.type===e.Z.DYNAMIC),P}function ue(g){return g&&g.EssentialProperty_asArray&&g.EssentialProperty_asArray.length?g.EssentialProperty_asArray.map(function(P){return{schemeIdUri:P.schemeIdUri,value:P.value}}):null}function fe(g){if(!g||!g.S_asArray)return NaN;var P=g.S_asArray[0],C=g.S_asArray[1];return P.hasOwnProperty("d")?P.d:C.t-P.t}function G(g,P){if(!g)throw new Error("Period cannot be null or undefined");var C=kn.DEFAULT_ID+"_"+P;return g.hasOwnProperty(e.Z.ID)&&g.id.length>0&&g.id!=="__proto__"&&(C=g.id),C}function ie(g,P,C){var D,b=[];if(!g)return b;for(D=0;D<g.length;D++){var te=new Nr;if(te.timescale=1,te.representation=P,!g[D].hasOwnProperty(t.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");te.schemeIdUri=g[D].schemeIdUri,g[D].hasOwnProperty(e.Z.TIMESCALE)&&(te.timescale=g[D].timescale),g[D].hasOwnProperty(e.Z.VALUE)&&(te.value=g[D].value),b.push(te),te.period=C}return b}function Y(g){var P=[],C=g.BaseURL_asArray||[g.baseUri],D=!1;return C.some(function(b){if(b){var te=new nr,z=b.__text||b;return A.isRelative(z)&&(D=!0,g.baseUri&&(z=A.resolve(z,g.baseUri))),te.url=z,b.hasOwnProperty(e.Z.SERVICE_LOCATION)&&b.serviceLocation.length?te.serviceLocation=b.serviceLocation:te.serviceLocation=z,b.hasOwnProperty(e.Z.DVB_PRIORITY)&&(te.dvbPriority=b[e.Z.DVB_PRIORITY]),b.hasOwnProperty(e.Z.DVB_WEIGHT)&&(te.dvbWeight=b[e.Z.DVB_WEIGHT]),b.hasOwnProperty(e.Z.AVAILABILITY_TIME_OFFSET)&&(te.availabilityTimeOffset=b[e.Z.AVAILABILITY_TIME_OFFSET]),b.hasOwnProperty(e.Z.AVAILABILITY_TIME_COMPLETE)&&(te.availabilityTimeComplete=b[e.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),P.push(te),D}}),P}function ce(g){var P=new Et;return P.serverUrl=g.__text,g.hasOwnProperty(e.Z.DEFAULT_SERVICE_LOCATION)&&(P.defaultServiceLocation=g[e.Z.DEFAULT_SERVICE_LOCATION],P.defaultServiceLocationArray=P.defaultServiceLocation.split(" ")),g.hasOwnProperty(e.Z.QUERY_BEFORE_START)&&(P.queryBeforeStart=g[e.Z.QUERY_BEFORE_START].toLowerCase()==="true"),g.hasOwnProperty(e.Z.CLIENT_REQUIREMENT)&&(P.clientRequirement=g[e.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),P}return i={getIsTypeOf:w,getIsText:B,getIsFragmented:F,getProducerReferenceTimesForAdaptation:function(g){var P=g&&g.hasOwnProperty(e.Z.PRODUCERREFERENCETIME_ASARRAY)?g[e.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(g&&g.hasOwnProperty(e.Z.REPRESENTATION_ASARRAY)?g[e.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(D){var b;D.hasOwnProperty(e.Z.PRODUCERREFERENCETIME_ASARRAY)&&P.push.apply(P,function(te){if(Array.isArray(te))return dn(te)}(b=D[e.Z.PRODUCERREFERENCETIME_ASARRAY])||function(te){if(typeof Symbol<"u"&&Symbol.iterator in Object(te))return Array.from(te)}(b)||rn(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())});var C=[];return P.forEach(function(D){var b=new bt;D.hasOwnProperty(e.Z.ID)&&(b[e.Z.ID]=D[e.Z.ID],D.hasOwnProperty(e.Z.WALL_CLOCK_TIME)&&(b[e.Z.WALL_CLOCK_TIME]=D[e.Z.WALL_CLOCK_TIME],D.hasOwnProperty(e.Z.PRESENTATION_TIME)&&(b[e.Z.PRESENTATION_TIME]=D[e.Z.PRESENTATION_TIME],D.hasOwnProperty(e.Z.INBAND)&&(b[e.Z.INBAND]=D[e.Z.INBAND]!=="false"),D.hasOwnProperty(e.Z.TYPE)&&(b[e.Z.TYPE]=D[e.Z.TYPE]),C.push(b))))}),C},getLanguageForAdaptation:function(g){var P="";return g&&g.hasOwnProperty(e.Z.LANG)&&(P=g.lang),P},getViewpointForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.VIEWPOINT_ASARRAY)&&g[e.Z.VIEWPOINT_ASARRAY].length?g[e.Z.VIEWPOINT_ASARRAY].map(function(P){return new Ue().init(P)}):[]},getRolesForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.ROLE_ASARRAY)&&g[e.Z.ROLE_ASARRAY].length?g[e.Z.ROLE_ASARRAY].map(function(P){return new Ue().init(P)}):[]},getAccessibilityForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.ACCESSIBILITY_ASARRAY)&&g[e.Z.ACCESSIBILITY_ASARRAY].length?g[e.Z.ACCESSIBILITY_ASARRAY].map(function(P){return new Ue().init(P)}):[]},getAudioChannelConfigurationForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&g[e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?g[e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(P){return new Ue().init(P)}):[]},getAudioChannelConfigurationForRepresentation:function(g){return g&&g.hasOwnProperty(e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&g[e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?g[e.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(P){return new Ue().init(P)}):[]},getAdaptationForIndex:function(g,P,C){var D=Z(P,C);return D.length>0&&h(g)?D[g]:null},getIndexForAdaptation:function(g,P,C){if(!g)return-1;for(var D=Z(P,C),b=0;b<D.length;b++)if(Ot(R).getInstance().areEqual(D[b],g))return b;return-1},getAdaptationForId:function(g,P,C){var D,b,te=Z(P,C);for(D=0,b=te.length;D<b;D++)if(te[D].hasOwnProperty(e.Z.ID)&&te[D].id===g)return te[D];return null},getAdaptationsForType:function(g,P,C){var D,b,te=Z(g,P),z=[];for(D=0,b=te.length;D<b;D++)w(te[D],C)&&z.push(U(te[D]));return z},getRealPeriods:le,getRealPeriodForIndex:function(g,P){var C=le(P);return C.length>0&&h(g)?C[g]:null},getCodec:function(g,P,C){var D=null;if(g&&g.Representation_asArray&&g.Representation_asArray.length>0){var b=h(P)&&P>=0&&P<g.Representation_asArray.length?g.Representation_asArray[P]:g.Representation_asArray[0];b&&(D=b.mimeType+';codecs="'+b.codecs+'"',C&&b.width!==void 0&&(D+=';width="'+b.width+'";height="'+b.height+'"'))}return D&&(D=D.replace(/\sprofiles=[^;]*/g,"")),D},getSelectionPriority:function(g){try{var P=g&&g.selectionPriority!==void 0?parseInt(g.selectionPriority):1;return isNaN(P)?1:P}catch{return 1}},getMimeType:function(g){return g&&g.Representation_asArray&&g.Representation_asArray.length>0?g.Representation_asArray[0].mimeType:null},getKID:function(g){return g&&g.hasOwnProperty(e.Z.CENC_DEFAULT_KID)?g[e.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(g){if(!g||!Array.isArray(g.Label_asArray))return[];for(var P=[],C=0;C<g.Label_asArray.length;C++)P.push({lang:g.Label_asArray[C].lang,text:g.Label_asArray[C].__text||g.Label_asArray[C]});return P},getContentProtectionData:function(g){return g&&g.hasOwnProperty(e.Z.CONTENTPROTECTION_ASARRAY)&&g.ContentProtection_asArray.length!==0?g.ContentProtection_asArray:null},getIsDynamic:ne,getId:function(g){return g&&g[e.Z.ID]||null},hasProfile:function(g,P){var C=!1;return g&&g.profiles&&g.profiles.length>0&&(C=g.profiles.indexOf(P)!==-1),C},getDuration:function(g){return g&&g.hasOwnProperty(e.Z.MEDIA_PRESENTATION_DURATION)?g.mediaPresentationDuration:g&&g.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(g){return g&&g.bandwidth?g.bandwidth:NaN},getManifestUpdatePeriod:function(g){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=NaN;return g&&g.hasOwnProperty(e.Z.MINIMUM_UPDATE_PERIOD)&&(C=g.minimumUpdatePeriod),isNaN(C)?C:Math.max(C-P,1)},getPublishTime:function(g){return g&&g.hasOwnProperty(e.Z.PUBLISH_TIME)?new Date(g[e.Z.PUBLISH_TIME]):null},getRepresentationCount:function(g){return g&&Array.isArray(g.Representation_asArray)?g.Representation_asArray.length:0},getBitrateListForAdaptation:function(g){var P=U(g);return(P&&Array.isArray(P.Representation_asArray)?P.Representation_asArray:[]).map(function(C){return{bandwidth:C.bandwidth,width:C.width||0,height:C.height||0,scanType:C.scanType||null,id:C.id||null}})},getRepresentationFor:function(g,P){return P&&P.Representation_asArray&&P.Representation_asArray.length>0&&h(g)?P.Representation_asArray[g]:null},getRepresentationsForAdaptation:function(g){var P,C,D,b,te=[],z=function(Se){if(Se&&Se.period&&h(Se.period.index)){var Ce=Se.period.mpd.manifest.Period_asArray[Se.period.index];if(Ce&&Ce.AdaptationSet_asArray&&h(Se.index))return U(Ce.AdaptationSet_asArray[Se.index])}}(g);if(z&&z.Representation_asArray){if(g&&g.period&&h(g.period.index)){var ae=Y(g.period.mpd.manifest);ae&&(C=ae[0])}for(var Q=0,L=z.Representation_asArray.length;Q<L;++Q){var J=z.Representation_asArray[Q],pe=new Gn;if(pe.index=Q,pe.adaptation=g,J.hasOwnProperty(e.Z.ID)&&(pe.id=J.id),J.hasOwnProperty(e.Z.CODECS)&&(pe.codecs=J.codecs),J.hasOwnProperty(e.Z.MIME_TYPE)&&(pe.mimeType=J[e.Z.MIME_TYPE]),J.hasOwnProperty(e.Z.CODEC_PRIVATE_DATA)&&(pe.codecPrivateData=J.codecPrivateData),J.hasOwnProperty(e.Z.BANDWITH)&&(pe.bandwidth=J.bandwidth),J.hasOwnProperty(e.Z.WIDTH)&&(pe.width=J.width),J.hasOwnProperty(e.Z.HEIGHT)&&(pe.height=J.height),J.hasOwnProperty(e.Z.SCAN_TYPE)&&(pe.scanType=J.scanType),J.hasOwnProperty(e.Z.MAX_PLAYOUT_RATE)&&(pe.maxPlayoutRate=J.maxPlayoutRate),J.hasOwnProperty(e.Z.SEGMENT_BASE)?(P=J.SegmentBase,pe.segmentInfoType=e.Z.SEGMENT_BASE):J.hasOwnProperty(e.Z.SEGMENT_LIST)?(P=J.SegmentList).hasOwnProperty(e.Z.SEGMENT_TIMELINE)?pe.segmentInfoType=e.Z.SEGMENT_TIMELINE:pe.segmentInfoType=e.Z.SEGMENT_LIST:J.hasOwnProperty(e.Z.SEGMENT_TEMPLATE)?((P=J.SegmentTemplate).hasOwnProperty(e.Z.SEGMENT_TIMELINE)?pe.segmentInfoType=e.Z.SEGMENT_TIMELINE:pe.segmentInfoType=e.Z.SEGMENT_TEMPLATE,P.hasOwnProperty(e.Z.INITIALIZATION_MINUS)&&(pe.initialization=P.initialization.split("$Bandwidth$").join(J.bandwidth).split("$RepresentationID$").join(J.id))):pe.segmentInfoType=e.Z.BASE_URL,pe.essentialProperties=ue(J),P){if(P.hasOwnProperty(e.Z.INITIALIZATION)){var Ne=P.Initialization;Ne.hasOwnProperty(e.Z.SOURCE_URL)&&(pe.initialization=Ne.sourceURL),Ne.hasOwnProperty(e.Z.RANGE)&&(pe.range=Ne.range)}else B(z)&&F(z)&&z.mimeType&&z.mimeType.indexOf("application/mp4")===-1&&(pe.range=0);P.hasOwnProperty(e.Z.TIMESCALE)&&(pe.timescale=P.timescale),P.hasOwnProperty(e.Z.DURATION)?pe.segmentDuration=P.duration/pe.timescale:J.hasOwnProperty(e.Z.SEGMENT_TEMPLATE)&&(P=J.SegmentTemplate).hasOwnProperty(e.Z.SEGMENT_TIMELINE)&&(pe.segmentDuration=fe(P.SegmentTimeline)/pe.timescale),P.hasOwnProperty(e.Z.MEDIA)&&(pe.media=P.media),P.hasOwnProperty(e.Z.START_NUMBER)&&(pe.startNumber=P.startNumber),P.hasOwnProperty(e.Z.INDEX_RANGE)&&(pe.indexRange=P.indexRange),P.hasOwnProperty(e.Z.PRESENTATION_TIME_OFFSET)&&(pe.presentationTimeOffset=P.presentationTimeOffset/pe.timescale),P.hasOwnProperty(e.Z.AVAILABILITY_TIME_OFFSET)?pe.availabilityTimeOffset=P.availabilityTimeOffset:C&&C.availabilityTimeOffset!==void 0&&(pe.availabilityTimeOffset=C.availabilityTimeOffset),P.hasOwnProperty(e.Z.AVAILABILITY_TIME_COMPLETE)?pe.availabilityTimeComplete=P.availabilityTimeComplete!=="false":C&&C.availabilityTimeComplete!==void 0&&(pe.availabilityTimeComplete=C.availabilityTimeComplete)}pe.MSETimeOffset=(b=(D=pe).presentationTimeOffset,D.adaptation.period.start-b),pe.path=[g.period.index,g.index,Q],te.push(pe)}}return te},getAdaptationsForPeriod:function(g){var P,C,D,b=g&&h(g.index)?g.mpd.manifest.Period_asArray[g.index]:null,te=[];if(b&&b.AdaptationSet_asArray)for(D=0;D<b.AdaptationSet_asArray.length;D++)C=b.AdaptationSet_asArray[D],P=new yn,C.hasOwnProperty(e.Z.ID)&&(P.id=C.id),P.index=D,P.period=g,w(C,t.Z.MUXED)?P.type=t.Z.MUXED:w(C,t.Z.AUDIO)?P.type=t.Z.AUDIO:j(C)?P.type=t.Z.VIDEO:B(C)?P.type=t.Z.TEXT:N(C)?P.type=t.Z.IMAGE:r.warn("Unknown Adaptation stream type"),te.push(P);return te},getRegularPeriods:function(g){var P,C,D=!!g&&ne(g.manifest),b=[],te=null,z=null,ae=null,Q=null;for(C=0,P=g&&g.manifest&&g.manifest.Period_asArray?g.manifest.Period_asArray.length:0;C<P;C++)(z=g.manifest.Period_asArray[C]).hasOwnProperty(e.Z.START)?(Q=new kn).start=z.start:te!==null&&te.hasOwnProperty(e.Z.DURATION)&&ae!==null?(Q=new kn).start=parseFloat((ae.start+ae.duration).toFixed(5)):C!==0||D||((Q=new kn).start=0),ae!==null&&isNaN(ae.duration)&&(Q!==null?ae.duration=parseFloat((Q.start-ae.start).toFixed(5)):r.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Q!==null&&(Q.id=G(z,C),Q.index=C,Q.mpd=g,z.hasOwnProperty(e.Z.DURATION)&&(Q.duration=z.duration),ae&&(ae.nextPeriodId=Q.id),b.push(Q),te=z,ae=Q),z=null,Q=null;return b.length===0||ae!==null&&isNaN(ae.duration)&&(ae.duration=parseFloat((function(L){(function(){if(!l||!l.hasOwnProperty("error"))throw new Error(t.Z.MISSING_CONFIG_ERROR)})();var J,pe=ne(L.mpd.manifest);return L.mpd.manifest.mediaPresentationDuration?J=L.mpd.manifest.mediaPresentationDuration:L.duration?J=L.duration:pe?J=Number.POSITIVE_INFINITY:l.error(new re.Z(X.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",L)),J}(ae)-ae.start).toFixed(5))),b},getMpd:function(g){var P=new Vn;return g&&(P.manifest=g,g.hasOwnProperty(e.Z.AVAILABILITY_START_TIME)?P.availabilityStartTime=new Date(g.availabilityStartTime.getTime()):g.loadedTime&&(P.availabilityStartTime=new Date(g.loadedTime.getTime())),g.hasOwnProperty(e.Z.AVAILABILITY_END_TIME)&&(P.availabilityEndTime=new Date(g.availabilityEndTime.getTime())),g.hasOwnProperty(e.Z.MINIMUM_UPDATE_PERIOD)&&(P.minimumUpdatePeriod=g.minimumUpdatePeriod),g.hasOwnProperty(e.Z.MEDIA_PRESENTATION_DURATION)&&(P.mediaPresentationDuration=g.mediaPresentationDuration),g.hasOwnProperty(e.Z.SUGGESTED_PRESENTATION_DELAY)&&(P.suggestedPresentationDelay=g.suggestedPresentationDelay),g.hasOwnProperty(e.Z.TIMESHIFT_BUFFER_DEPTH)&&(P.timeShiftBufferDepth=g.timeShiftBufferDepth),g.hasOwnProperty(e.Z.MAX_SEGMENT_DURATION)&&(P.maxSegmentDuration=g.maxSegmentDuration),g.hasOwnProperty(e.Z.PUBLISH_TIME)&&(P.publishTime=new Date(g.publishTime))),P},getEventsForPeriod:function(g){var P,C,D=g&&g.mpd&&g.mpd.manifest?g.mpd.manifest:null,b=D?D.Period_asArray:null,te=b&&g&&h(g.index)?b[g.index].EventStream_asArray:null,z=[];if(te)for(P=0;P<te.length;P++){var ae=new Nr;if(ae.period=g,ae.timescale=1,!te[P].hasOwnProperty(t.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(ae.schemeIdUri=te[P][t.Z.SCHEME_ID_URI],te[P].hasOwnProperty(e.Z.TIMESCALE)&&(ae.timescale=te[P][e.Z.TIMESCALE]),te[P].hasOwnProperty(e.Z.VALUE)&&(ae.value=te[P][e.Z.VALUE]),te[P].hasOwnProperty(e.Z.PRESENTATION_TIME_OFFSET)&&(ae.presentationTimeOffset=te[P][e.Z.PRESENTATION_TIME_OFFSET]),C=0;te[P].Event_asArray&&C<te[P].Event_asArray.length;C++){var Q=te[P].Event_asArray[C],L=new Kn;L.presentationTime=0,L.eventStream=ae,Q.hasOwnProperty(e.Z.PRESENTATION_TIME)&&(L.presentationTime=Q.presentationTime);var J=ae.presentationTimeOffset?ae.presentationTimeOffset/ae.timescale:0;L.calculatedPresentationTime=L.presentationTime/ae.timescale+g.start-J,Q.hasOwnProperty(e.Z.DURATION)&&(L.duration=Q.duration/ae.timescale),Q.hasOwnProperty(e.Z.ID)?L.id=Q.id:L.id=null,Q.Signal&&Q.Signal.Binary?L.messageData=E.decodeArray(Q.Signal.Binary.toString()):L.messageData=Q.messageData||Q.__cdata||Q.__text,z.push(L)}}return z},getEssentialPropertiesForAdaptation:function(g){var P={};if(g&&g.hasOwnProperty(e.Z.ESSENTIAL_PROPERTY_ASARRAY)){var C,D=Ht(g.EssentialProperty_asArray);try{for(D.s();!(C=D.n()).done;){var b=C.value;b.hasOwnProperty(t.Z.SCHEME_ID_URI)&&(P[b[t.Z.SCHEME_ID_URI]]=yt({},b))}}catch(te){D.e(te)}finally{D.f()}}return P},getEssentialPropertiesAsArrayForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.ESSENTIAL_PROPERTY_ASARRAY)&&g.EssentialProperty_asArray.length?g.EssentialProperty_asArray.map(function(P){return new Ue().init(P)}):[]},getEssentialPropertiesForRepresentation:ue,getEventStreamForAdaptationSet:function(g,P,C){var D,b,te;return g&&g.Period_asArray&&P&&P.period&&h(P.period.index)&&(b=g.Period_asArray[P.period.index])&&b.AdaptationSet_asArray&&h(P.index)&&(te=b.AdaptationSet_asArray[P.index])&&(D=te.InbandEventStream_asArray),ie(D,null,C)},getEventStreamForRepresentation:function(g,P,C){var D,b,te,z;return g&&g.Period_asArray&&P&&P.adaptation&&P.adaptation.period&&h(P.adaptation.period.index)&&(b=g.Period_asArray[P.adaptation.period.index])&&b.AdaptationSet_asArray&&h(P.adaptation.index)&&(te=b.AdaptationSet_asArray[P.adaptation.index])&&te.Representation_asArray&&h(P.index)&&(z=te.Representation_asArray[P.index])&&(D=z.InbandEventStream_asArray),ie(D,P,C)},getUTCTimingSources:function(g){var P=ne(g),C=!!g&&g.hasOwnProperty(e.Z.AVAILABILITY_START_TIME),D=g?g.UTCTiming_asArray:null,b=[];return(P||C)&&D&&D.forEach(function(te){var z=new $n.Z;te.hasOwnProperty(t.Z.SCHEME_ID_URI)&&(z.schemeIdUri=te.schemeIdUri,te.hasOwnProperty(e.Z.VALUE)&&(z.value=te.value.toString(),b.push(z)))}),b},getBaseURLsFromElement:Y,getRepresentationSortFunction:function(){return function(g,P){return g.bandwidth-P.bandwidth}},getContentSteering:function(g){if(g&&g.hasOwnProperty(e.Z.CONTENT_STEERING_AS_ARRAY))return ce(g[e.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(g){return g&&g.hasOwnProperty(e.Z.LOCATION_AS_ARRAY)?g[e.Z.LOCATION_AS_ARRAY].map(function(P){var C=P.__text||P,D=P.hasOwnProperty(e.Z.SERVICE_LOCATION)?P[e.Z.SERVICE_LOCATION]:null;return new Wt(C,D)}):[]},getPatchLocation:function(g){return g&&g.hasOwnProperty(e.Z.PATCH_LOCATION_AS_ARRAY)?g[e.Z.PATCH_LOCATION_AS_ARRAY].map(function(P){var C=P.__text||P,D=P.hasOwnProperty(e.Z.SERVICE_LOCATION)?P[e.Z.SERVICE_LOCATION]:null,b=P.hasOwnProperty(e.Z.TTL)?1e3*parseFloat(P[e.Z.TTL]):NaN;return new Xt(C,D,b)}):[]},getSuggestedPresentationDelay:function(g){return g&&g.hasOwnProperty(e.Z.SUGGESTED_PRESENTATION_DELAY)?g.suggestedPresentationDelay:null},getAvailabilityStartTime:function(g){return g&&g.hasOwnProperty(e.Z.AVAILABILITY_START_TIME)&&g.availabilityStartTime!==null?g.availabilityStartTime.getTime():null},getServiceDescriptions:function(g){var P=[];if(g&&g.hasOwnProperty(e.Z.SERVICE_DESCRIPTION)){var C,D=Ht(g.ServiceDescription_asArray);try{for(D.s();!(C=D.n()).done;){var b=C.value,te=null,z=null,ae=null,Q=null,L=null,J=null,pe=null;for(var Ne in b)b.hasOwnProperty(Ne)&&(Ne===e.Z.ID?te=b[Ne]:Ne===e.Z.SERVICE_DESCRIPTION_SCOPE?z=b[Ne].schemeIdUri:Ne===e.Z.SERVICE_DESCRIPTION_LATENCY?ae={target:parseInt(b[Ne].target),max:parseInt(b[Ne].max),min:parseInt(b[Ne].min),referenceId:parseInt(b[Ne].referenceId)}:Ne===e.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?Q={max:parseFloat(b[Ne].max),min:parseFloat(b[Ne].min)}:Ne===e.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?L={mediaType:b[Ne].mediaType,max:parseInt(b[Ne].max),min:parseInt(b[Ne].min),target:parseInt(b[Ne].target),type:b[Ne].type,maxQualityDifference:parseInt(b[Ne].maxQualityDifference)}:Ne===e.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?J={mediaType:b[Ne].mediaType,max:parseInt(b[Ne].max),min:parseInt(b[Ne].min),target:parseInt(b[Ne].target)}:Ne===e.Z.CONTENT_STEERING&&(pe=ce(b[Ne])));P.push({id:te,schemeIdUri:z,latency:ae,playbackRate:Q,operatingQuality:L,operatingBandwidth:J,contentSteering:pe})}}catch(Se){D.e(Se)}finally{D.f()}}return P},getSegmentAlignment:function(g){return!(!g||!g.hasOwnProperty(e.Z.SEGMENT_ALIGNMENT))&&g[e.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(g){return!(!g||!g.hasOwnProperty(e.Z.SUB_SEGMENT_ALIGNMENT))&&g[e.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(g){var P={};if(g&&g.hasOwnProperty(e.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var C,D=Ht(g.SupplementalProperty_asArray);try{for(D.s();!(C=D.n()).done;){var b=C.value;b.hasOwnProperty(t.Z.SCHEME_ID_URI)&&(P[b[t.Z.SCHEME_ID_URI]]=yt({},b))}}catch(te){D.e(te)}finally{D.f()}}return P},getSupplementalPropertiesAsArrayForAdaptation:function(g){return g&&g.hasOwnProperty(e.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&g.SupplementalProperty_asArray.length?g.SupplementalProperty_asArray.map(function(P){return new Ue().init(P)}):[]},getSupplementalPropertiesForRepresentation:function(g){var P={};if(g&&g.hasOwnProperty(e.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var C,D=Ht(g.SupplementalProperty_asArray);try{for(D.s();!(C=D.n()).done;){var b=C.value;b.hasOwnProperty(t.Z.SCHEME_ID_URI)&&(P[b[t.Z.SCHEME_ID_URI]]=yt({},b))}}catch(te){D.e(te)}finally{D.f()}}return P},getSupplementalPropertiesAsArrayForRepresentation:function(g){return g&&g.hasOwnProperty(e.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&g.SupplementalProperty_asArray.length?g.SupplementalProperty_asArray.map(function(P){return new Ue().init(P)}):[]},setConfig:function(g){g&&(g.errHandler&&(l=g.errHandler),g.BASE64&&(E=g.BASE64))}},r=(0,m.Z)(R).getInstance().getLogger(i),i}vn.__dashjs_factory_name="DashManifestModel";var $t=_.Z.getSingletonFactory(vn),pt=M(703);function At(i,r){var l;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(l=function(F,j){if(F){if(typeof F=="string")return kt(F,j);var B=Object.prototype.toString.call(F).slice(8,-1);return B==="Object"&&F.constructor&&(B=F.constructor.name),B==="Map"||B==="Set"?Array.from(F):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?kt(F,j):void 0}}(i))||r){l&&(i=l);var E=0,R=function(){};return{s:R,n:function(){return E>=i.length?{done:!0}:{done:!1,value:i[E++]}},e:function(F){throw F},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var A,h=!0,w=!1;return{s:function(){l=i[Symbol.iterator]()},n:function(){var F=l.next();return h=F.done,F},e:function(F){w=!0,A=F},f:function(){try{h||l.return==null||l.return()}finally{if(w)throw A}}}}function kt(i,r){(r==null||r>i.length)&&(r=i.length);for(var l=0,E=new Array(r);l<r;l++)E[l]=i[l];return E}function nn(){var i,r,l,E,R,A,h,w,F,j,B=this.context,N=(0,p.Z)(B).getInstance(),U=(0,Ie.Z)(B).getInstance();function Z(){l={pr:1,nor:null,st:null,sf:null,sid:"".concat(pt.Z.generateUuid()),cid:null},F={},w={},j={},ne()}function le(){ne()}function ne(){if(A){var b=A.getStreamController();if(b&&typeof b.getActiveStream=="function"){var te=b.getActiveStream();te&&(h=te.getProcessors())}}}function ue(b,te){var z,ae={},Q=At(te);try{for(Q.s();!(z=Q.n()).done;){var L=z.value;b[L]&&(ae[L]=b[L])}}catch(J){Q.e(J)}finally{Q.f()}return ae}function fe(b){var te=U.get().streaming.cmcd.enabledKeys;return b.filter(function(z){return te.includes(z)})}function G(b){try{return b.type===Le.w.MPD_TYPE?((z=ie()).ot="m",z):b.type===Le.w.MEDIA_SEGMENT_TYPE?(te=b.mediaType,j.hasOwnProperty(te)||(j[te]=!1),w.hasOwnProperty(te)||(w[te]=!1),F.hasOwnProperty(te)||(F[te]=!1),function(ae){var Q,L=ie(),J=function(Qe){try{var Ct=Qe.quality,ve=Qe.mediaInfo.bitrateList;return parseInt(ve[Ct].bandwidth/1e3)}catch{return null}}(ae),pe=function(Qe){try{return isNaN(Qe.duration)?NaN:Math.round(1e3*Qe.duration)}catch{return null}}(ae),Ne=function(Qe){try{return 100*parseInt(E.getThroughputHistory().getSafeAverageThroughput(Qe)/100)}catch{return null}}(ae.mediaType),Se=function(Qe){try{var Ct=l.pr,ve=R.getCurrentBufferLevel(Qe);return isNaN(Ct)||isNaN(ve)?null:100*parseInt(ve/Ct*10)}catch{return null}}(ae.mediaType),Ce=Y(ae.mediaType),Re=function(Qe){try{var Ct=E.getTopBitrateInfoFor(Qe);return Math.round(Ct.bitrate/1e3)}catch{return null}}(ae.mediaType),$e=l.pr,nt=function(Qe){if(h&&h.length!==0){var Ct,ve=At(h);try{for(ve.s();!(Ct=ve.n()).done;){var Fe=Ct.value;if(Fe.getType()===Qe)return Fe.probeNextRequest()}}catch(ot){ve.e(ot)}finally{ve.f()}}}(ae.mediaType);ae.mediaType===t.Z.VIDEO&&(Q="v"),ae.mediaType===t.Z.AUDIO&&(Q="a"),ae.mediaType===t.Z.TEXT&&(Q=ae.mediaInfo.mimeType==="application/mp4"?"tt":"c");var We=U.get().streaming.cmcd.rtp;return We||(We=function(Qe){try{var Ct=A.getPlaybackRate();Ct||(Ct=1);var ve=Qe.quality,Fe=Qe.mediaType,ot=Qe.mediaInfo,qe=Qe.duration;if(!ot)return NaN;var ht=Y(Fe);ht===0&&(ht=500);var gt=ot.bitrateList[ve].bandwidth*qe/1e3/(ht/Ct/1e3),st=U.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(U.get().streaming.cmcd.rtpSafetyFactor)?U.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(gt*st/100)+1)}catch{return NaN}}(ae)),isNaN(We)||(L.rtp=We),nt&&(ae.url!==nt.url?L.nor=encodeURIComponent(pt.Z.getRelativeUrl(ae.url,nt.url)):nt.range&&(L.nrr=nt.range)),J&&(L.br=J),Q&&(L.ot=Q),isNaN(pe)||(L.d=pe),isNaN(Ne)||(L.mtp=Ne),isNaN(Se)||(L.dl=Se),isNaN(Ce)||(L.bl=Ce),isNaN(Re)||(L.tb=Re),isNaN($e)||$e===1||(L.pr=$e),F[ae.mediaType]&&(L.bs=!0,F[ae.mediaType]=!1),!w[ae.mediaType]&&j[ae.mediaType]||(L.su=!0,w[ae.mediaType]=!1,j[ae.mediaType]=!0),L}(b)):b.type===Le.w.INIT_SEGMENT_TYPE?function(){var ae=ie();return ae.ot="i",ae.su=!0,ae}():b.type===Le.w.OTHER_TYPE||b.type===Le.w.XLINK_EXPANSION_TYPE?function(){var ae=ie();return ae.ot="o",ae}():b.type===Le.w.LICENSE?function(ae){var Q=ie();return Q.ot="k",Q}():null}catch{return null}var te,z}function ie(){var b={},te=U.get().streaming.cmcd.cid?U.get().streaming.cmcd.cid:l.cid;return b.v=1,b.sid=U.get().streaming.cmcd.sid?U.get().streaming.cmcd.sid:l.sid,b.sid="".concat(b.sid),te&&(b.cid="".concat(te)),isNaN(l.pr)||l.pr===1||l.pr===null||(b.pr=l.pr),l.st&&(b.st=l.st),l.sf&&(b.sf=l.sf),b}function Y(b){try{var te=R.getCurrentBufferLevel(b);return isNaN(te)?null:100*parseInt(10*te)}catch{return null}}function ce(b){try{l.pr=b.playbackRate}catch{}}function g(b){try{var te=i.getIsDynamic(b.data)?"l":"v",z=b.protocol&&b.protocol==="MSS"?"s":"d";l.st="".concat(te),l.sf="".concat(z)}catch{}}function P(b){try{b.state&&b.mediaType&&b.state===n.Z.BUFFER_EMPTY&&(F[b.mediaType]||(F[b.mediaType]=!0),w[b.mediaType]||(w[b.mediaType]=!0))}catch{}}function C(){for(var b in F)F.hasOwnProperty(b)&&(F[b]=!0);for(var te in w)w.hasOwnProperty(te)&&(w[te]=!0)}function D(b){try{if(!b)return null;var te=Object.keys(b).sort(function(Q,L){return Q.localeCompare(L)}),z=te.length,ae=te.reduce(function(Q,L,J){return L==="v"&&b[L]===1||(typeof b[L]=="string"&&L!=="ot"&&L!=="sf"&&L!=="st"?Q+="".concat(L,"=").concat(JSON.stringify(b[L])):Q+="".concat(L,"=").concat(b[L]),J<z-1&&(Q+=",")),Q},"");return(ae=ae.replace(/=true/g,"")).replace(/,\s*$/,"")}catch{return null}}return r={getQueryParameter:function(b){try{if(U.get().streaming.cmcd&&U.get().streaming.cmcd.enabled){var te=G(b),z=function(Q){try{var L=U.get().streaming.cmcd.enabledKeys;return Object.keys(Q).filter(function(J){return L.includes(J)}).reduce(function(J,pe){return J[pe]=Q[pe],J},{})}catch{return Q}}(te),ae=D(z);return N.trigger(_n.Z.CMCD_DATA_GENERATED,{url:b.url,mediaType:b.mediaType,cmcdData:te,cmcdString:ae}),{key:"CMCD",value:ae}}return null}catch{return null}},getHeaderParameters:function(b){try{if(U.get().streaming.cmcd&&U.get().streaming.cmcd.enabled){var te=G(b),z=ue(te,fe(["br","d","ot","tb"])),ae=ue(te,fe(["bl","dl","mtp","nor","nrr","su"])),Q=ue(te,fe(["bs","rtp"])),L=ue(te,fe(["cid","pr","sf","sid","st","v"])),J={"CMCD-Object":D(z),"CMCD-Request":D(ae),"CMCD-Status":D(Q),"CMCD-Session":D(L)};return N.trigger(_n.Z.CMCD_DATA_GENERATED,{url:b.url,mediaType:b.mediaType,cmcdData:te,headers:J}),J}return null}catch{return null}},setConfig:function(b){b&&(b.abrController&&(E=b.abrController),b.dashMetrics&&(R=b.dashMetrics),b.playbackController&&(A=b.playbackController))},reset:function(){N.off(n.Z.PLAYBACK_RATE_CHANGED,ce,this),N.off(n.Z.MANIFEST_LOADED,g,this),N.off(n.Z.BUFFER_LEVEL_STATE_CHANGED,P,r),N.off(n.Z.PLAYBACK_SEEKED,C,r),Z()},initialize:function(){N.on(n.Z.PLAYBACK_RATE_CHANGED,ce,r),N.on(n.Z.MANIFEST_LOADED,g,r),N.on(n.Z.BUFFER_LEVEL_STATE_CHANGED,P,r),N.on(n.Z.PLAYBACK_SEEKED,C,r),N.on(n.Z.PERIOD_SWITCH_COMPLETED,le,r)}},i=$t(B).getInstance(),Z(),r}nn.__dashjs_factory_name="CmcdModel";var on=_.Z.getSingletonFactory(nn);function pn(i){return pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pn(i)}function En(i,r){En=function(w,F){return new A(w,void 0,F)};var l=Yn(RegExp),E=RegExp.prototype,R=new WeakMap;function A(w,F,j){var B=l.call(this,w,F);return R.set(B,j||R.get(w)),B}function h(w,F){var j=R.get(F);return Object.keys(j).reduce(function(B,N){return B[N]=w[j[N]],B},Object.create(null))}return qn(A,l),A.prototype.exec=function(w){var F=E.exec.call(this,w);return F&&(F.groups=h(F,this)),F},A.prototype[Symbol.replace]=function(w,F){if(typeof F=="string"){var j=R.get(this);return E[Symbol.replace].call(this,w,F.replace(/\$<([^>]+)>/g,function(N,U){return"$"+j[U]}))}if(typeof F=="function"){var B=this;return E[Symbol.replace].call(this,w,function(){var N=[];return N.push.apply(N,arguments),pn(N[N.length-1])!=="object"&&N.push(h(N,B)),F.apply(this,N)})}return E[Symbol.replace].call(this,w,F)},En.apply(this,arguments)}function qn(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),r&&Pn(i,r)}function Yn(i){var r=typeof Map=="function"?new Map:void 0;return Yn=function(l){if(l===null||(E=l,Function.toString.call(E).indexOf("[native code]")===-1))return l;var E;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(l))return r.get(l);r.set(l,R)}function R(){return Nn(l,arguments,jn(this).constructor)}return R.prototype=Object.create(l.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),Pn(R,l)},Yn(i)}function Nn(i,r,l){return Nn=Un()?Reflect.construct:function(E,R,A){var h=[null];h.push.apply(h,R);var w=new(Function.bind.apply(E,h));return A&&Pn(w,A.prototype),w},Nn.apply(null,arguments)}function Un(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pn(i,r){return Pn=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Pn(i,r)}function jn(i){return jn=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},jn(i)}var mr="static",rr="dynamic",sr="cmsd-",zn=sr+mr,zr=sr+rr,Cr="stream",Wr=["mb","st","sf","v"],Xr={video:"v",audio:"a",text:"tt",stream:Cr},Qr=/^[-0-9]/;function Dr(){var i,r,l,E,R=this.context,A=(0,p.Z)(R).getInstance();function h(){l={},E={}}function w(Z){Z&&Object.keys(Z).forEach(function(le){Wr.includes(le)||delete Z[le]})}function F(Z){return!Z||Z.toLowerCase()!=="false"&&(Qr.test(Z)?parseInt(Z,10):Z.replace(/["]+/g,""))}function j(Z){try{for(var le={},ne=Z.split(","),ue=0;ue<ne.length;ue++){var fe=ne[ue].split("="),G=fe[0],ie=F(fe[1]);le[G]=ie}return le}catch(Y){r.error("Failed to parse CMSD-Static response header value:",Y)}}function B(Z){try{for(var le={},ne=Z.split(","),ue=ne[ne.length-1].split(";"),fe=1;fe<ue.length;fe++){var G=ue[fe].split("="),ie=G[0],Y=F(G[1]);le[ie]=Y}return le}catch(ce){return r.error("Failed to parse CMSD-Dynamic response header value:",ce),[]}}function N(Z){return Xr[Z]||"o"}function U(Z,le,ne){var ue=Z===mr?l:E,fe=ue[le]||{},G=ue[Cr]||{};return fe[ne]||G[ne]}return i={setConfig:function(){},initialize:function(){},reset:function(){h()},parseResponseHeaders:function(Z,le){for(var ne=null,ue=null,fe=Z.split(`\r
`),G=fe.length-1;G>=0;G--){var ie=fe[G].match(En(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(ie&&ie.groups){var Y=ie.groups.key.toLowerCase(),ce=ie.groups.value;switch(Y){case zn:ne=j(ce),A.trigger(u.Z.CMSD_STATIC_HEADER,ne);break;case zr:ue||(ue=B(ce))}}}var g=Cr;return ne&&ne.ot?g=ne.ot:le&&(g=N(le)),w(l[g]),w(E[g]),ne&&(l[g]=Object.assign(l[g]||{},ne)),ue&&(E[g]=Object.assign(E[g]||{},ue)),{static:ne,dynamic:ue}},getMaxBitrate:function(Z){var le=N(Z);return U(rr,le,"mb")||-1},getEstimatedThroughput:function(Z){var le=N(Z);return U(rr,le,"etp")||null},getResponseDelay:function(Z){var le=N(Z);return U(rr,le,"rd")||null},getRoundTripTime:function(Z){var le=N(Z);return U(rr,le,"rtt")||null}},r=(0,m.Z)(R).getInstance().getLogger(i),h(),i}Dr.__dashjs_factory_name="CmsdModel";var Nt=_.Z.getSingletonFactory(Dr);function en(){var i,r,l=this.context,E={};function R(){r=(0,m.Z)(l).getInstance().getLogger(i)}function A(w){for(var F={},j=0,B=0,N=0,U=0,Z=w.length,le=0;le<Z;++le)j+=w[le].chunkDownloadTimeRelativeMS,B+=w[le].bufferLevel,N+=w[le].chunkDownloadTimeRelativeMS*w[le].bufferLevel,U+=w[le].chunkDownloadTimeRelativeMS*w[le].chunkDownloadTimeRelativeMS;return F.m=(N-j*B/Z)/(U-j*j/Z),F.b=B/Z-F.m*j/Z,function(ne){return F.m*ne+F.b}}function h(w){var F,j=!0,B=w.reduce(function(N,U){return N+U.bufferLevelAtSegmentEnd},0)/w.length;return w.forEach(function(N){Math.abs(N.bufferLevelAtSegmentEnd/N.bufferLevelAtSegmentStart)<.95&&(j=!1),N.bufferLevelAtSegmentEnd/B<.8&&(j=!1),F?F>N.bitrate&&(j=!1):F=N.bitrate}),j}return i={setup:R,addMeasurement:function(w,F,j,B,N){w&&w.mediaType&&!E[w.mediaType]&&(E[w.mediaType]=[]);var U=w.mediaInfo.bitrateList.find(function(Z){return Z.id===w.representationId});E[w.mediaType].push({index:w.index,repId:w.representationId,mediaType:w.mediaType,requestTimeMS:B,adjustedAvailabilityStartTimeMS:w.availabilityStartTime.getTime(),segDurationMS:1e3*w.duration,chunksDurationMS:j.reduce(function(Z,le){return Z+le.chunkDownloadDurationMS},0),segmentBytes:j.reduce(function(Z,le){return Z+le.chunkBytes},0),bitrate:U&&U.bandwidth,bitrateList:w.mediaInfo.bitrateList,chunkMeasurements:j,fetchDownloadDurationMS:F,throughputCapacityDelayMS:N,getEstimatedBufferLevel:A(j.slice(1))}),E[w.mediaType].length>10&&E[w.mediaType].shift()},getThroughputCapacityDelayMS:function(w,F){var j=E[w.mediaType]&&E[w.mediaType].slice(-3);return!j||j.length<3?0:h(j)?F/4>250?250:F/4:0},getEstimatedDownloadDurationMS:function(w){var F=E[w.mediaType].slice(-1).pop(),j=E[w.mediaType].slice(-3),B=F.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;F.bufferLevelAtSegmentStart=F.getEstimatedBufferLevel(B/2),F.bufferLevelAtSegmentEnd=F.getEstimatedBufferLevel(B);var N=h(j),U=N?.6:.8;if(F.isBufferStable&&1.05*F.segDurationMS<F.fetchDownloadDurationMS)return F.fetchDownloadDurationMS;if(!N||F.segDurationMS<F.fetchDownloadDurationMS||F.adjustedAvailabilityStartTimeMS<=F.requestTimeMS+F.throughputCapacityDelayMS-F.segDurationMS)return .8*F.fetchDownloadDurationMS;for(var Z=F.requestTimeMS+F.throughputCapacityDelayMS-F.adjustedAvailabilityStartTimeMS,le=0,ne=0,ue=0,fe=0;fe<F.chunkMeasurements.length;fe++){var G=F.chunkMeasurements[fe];if(Z<ne+G.chunkDownloadDurationMS)break;ne+=G.chunkDownloadDurationMS,le+=G.chunkBytes,ue++}if(Z<0&&r.warn("request time was before adjusted availibitly start time"),le&&ne&&ue>.2*F.chunkMeasurements.length){var ie=le/ne,Y=F.segmentBytes/ie;return F.fetchDownloadDurationMS<Y?F.fetchDownloadDurationMS*U:Y*U}var ce=F.bitrate;return F.bitrateList.some(function(g){if(g.bandwidth>F.bitrate)return ce=g.bandwidth,!0}),ce===F.bitrate?F.fetchDownloadDurationMS*U:U*F.segmentBytes*8*1e3/ce}},R(),i}en.__dashjs_factory_name="LowLatencyThroughputModel";var cn=_.Z.getSingletonFactory(en),Ln=M(5717);function Tn(i,r,l){return r in i?Object.defineProperty(i,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[r]=l,i}function Bn(i){i=i||{};var r,l,E,R,A,h,w,F,j,B,N,U=this.context,Z=i.errHandler,le=i.dashMetrics,ne=i.mediaPlayerModel,ue=i.requestModifier,fe=i.boxParser,G=i.errors,ie=i.requestTimeout||0,Y=(0,p.Z)(U).getInstance(),ce=(0,Ie.Z)(U).getInstance();function g(P,C){var D,b=P.request,te=[],z=!0,ae=!0,Q=new Date,L=Q,J=0,pe=null,Ne=null;if(!ue||!le||!Z)throw new Error("config object is not correct or missing");var Se,Ce=function(ht){b.requestStartDate=Q,b.requestEndDate=new Date,b.firstByteDate=b.firstByteDate||Q,b.fileLoaderType=Ne;var gt=D.response?D.response.responseURL:null,st=D.response?D.response.status:null,qt=D.response&&D.response.getAllResponseHeaders?D.response.getAllResponseHeaders():D.response?D.response.responseHeaders:null,Bt=qt&&ce.get().streaming.cmsd&&ce.get().streaming.cmsd.enabled?w.parseResponseHeaders(qt,b.mediaType):null;le.addHttpRequest(b,gt,st,qt,ht?te:null,Bt)},Re=function(ht){ae=!1,Ce(ht),b.type===Le.w.MPD_TYPE&&(le.addManifestUpdate(b),Y.trigger(u.Z.MANIFEST_LOADING_FINISHED,{request:b}))},$e=function(){if(pe&&(clearTimeout(pe),pe=null),l.indexOf(D)!==-1&&(l.splice(l.indexOf(D),1),ae))if(Re(!1),C>0){try{ce.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&b.type===Le.w.MEDIA_SEGMENT_TYPE&&ne.getRetryAttemptsForType(Le.w.MEDIA_SEGMENT_TYPE)===C&&Y.trigger(u.Z.ATTEMPT_BACKGROUND_SYNC)}catch{}C--;var ht={config:P};R.push(ht),ht.timeout=setTimeout(function(){R.indexOf(ht)!==-1&&(R.splice(R.indexOf(ht),1),g(P,C))},ne.getRetryIntervalsForType(b.type))}else{if(b.type===Le.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;Z.error(new re.Z(A[b.type],b.url+" is not available",{request:b,response:D.response})),P.error&&P.error(b,"error",D.response.statusText,D.response),P.complete&&P.complete(b,D.response.statusText)}};b.hasOwnProperty("availabilityTimeComplete")&&b.availabilityTimeComplete===!1&&window.fetch&&b.responseType==="arraybuffer"&&b.type===Le.w.MEDIA_SEGMENT_TYPE?((Se=Sn(U).create({requestModifier:ue,lowLatencyThroughputModel:j,boxParser:fe})).setup({dashMetrics:le}),Ne=t.Z.FILE_LOADER_TYPES.FETCH):(Se=(0,Ft.Z)(U).create({requestModifier:ue}),Ne=t.Z.FILE_LOADER_TYPES.XHR);var nt=null,We=ue.modifyRequestURL?ue.modifyRequestURL(b.url):b.url;if(ce.get().streaming.cmcd&&ce.get().streaming.cmcd.enabled){var Qe=ce.get().streaming.cmcd.mode;if(Qe===t.Z.CMCD_MODE_QUERY){var Ct=function(ht){try{var gt=[],st=h.getQueryParameter(ht);return st&&gt.push(st),gt}catch{return[]}}(b);We=pt.Z.addAditionalQueryParameterToUrl(We,Ct)}else Qe===t.Z.CMCD_MODE_HEADER&&(nt=h.getHeaderParameters(b))}var ve=F.getXHRWithCredentialsForType(b.type);if(b.queryParams){var Fe=Object.keys(b.queryParams).map(function(ht){return{key:ht,value:b.queryParams[ht]}});We=pt.Z.addAditionalQueryParameterToUrl(We,Fe)}b.url=We,D={url:We,method:Le.w.GET,withCredentials:ve,request:b,onload:function(){D.response.status>=200&&D.response.status<=299&&(Re(!0),P.success&&P.success(D.response.response,D.response.statusText,D.response.responseURL),P.complete&&P.complete(b,D.response.statusText))},onend:$e,onerror:$e,progress:function(ht){var gt=new Date;z&&(z=!1,(!ht.lengthComputable||ht.lengthComputable&&ht.total!==ht.loaded)&&(b.firstByteDate=gt)),ht.lengthComputable&&(b.bytesLoaded=ht.loaded,b.bytesTotal=ht.total),ht.noTrace||(te.push({s:L,d:ht.time?ht.time:gt.getTime()-L.getTime(),b:[ht.loaded?ht.loaded-J:0]}),L=gt,J=ht.loaded),pe&&(clearTimeout(pe),pe=null),ce.get().streaming.fragmentRequestProgressTimeout>0&&(pe=setTimeout(function(){B.warn("Abort request "+D.url+" due to progress timeout"),D.response.onabort=null,D.loader.abort(D),$e()},ce.get().streaming.fragmentRequestProgressTimeout)),P.progress&&ht&&P.progress(ht)},onabort:function(){Ce(!0),pe&&(clearTimeout(pe),pe=null),P.abort&&P.abort(b)},ontimeout:function(ht){var gt;if(ht.lengthComputable){var st=ht.loaded/ht.total*100;gt="Request timeout: loaded: "+ht.loaded+", out of: "+ht.total+" : "+st.toFixed(3)+"% Completed"}else gt="Request timeout: non-computable download size";B.warn(gt)},loader:Se,timeout:ie,headers:nt};var ot=new Date().getTime();if(isNaN(b.delayLoadingTime)||ot>=b.delayLoadingTime)l.push(D),Se.load(D);else{var qe={httpRequest:D};E.push(qe),qe.delayTimeout=setTimeout(function(){if(E.indexOf(qe)!==-1){E.splice(E.indexOf(qe),1);try{Q=new Date,L=Q,l.push(qe.httpRequest),Se.load(qe.httpRequest)}catch{qe.httpRequest.onerror()}}},b.delayLoadingTime-ot)}}return r={load:function(P){P.request?g(P,ne.getRetryAttemptsForType(P.request.type)):P.error&&P.error(P.request,"error")},abort:function(){R.forEach(function(P){clearTimeout(P.timeout),P.config.request&&P.config.abort&&P.config.abort(P.config.request)}),R=[],E.forEach(function(P){return clearTimeout(P.delayTimeout)}),E=[],l.forEach(function(P){P.request.type!==Le.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(P.onloadend=P.onerror=P.onprogress=void 0,P.loader.abort(P))}),l=[]}},B=(0,m.Z)(U).getInstance().getLogger(r),l=[],E=[],R=[],h=on(U).getInstance(),w=Nt(U).getInstance(),j=cn(U).getInstance(),F=(0,Ln.Z)(U).getInstance(),Tn(N={},Le.w.MPD_TYPE,G.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Tn(N,Le.w.XLINK_EXPANSION_TYPE,G.DOWNLOAD_ERROR_ID_XLINK_CODE),Tn(N,Le.w.INIT_SEGMENT_TYPE,G.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Tn(N,Le.w.MEDIA_SEGMENT_TYPE,G.DOWNLOAD_ERROR_ID_CONTENT_CODE),Tn(N,Le.w.INDEX_SEGMENT_TYPE,G.DOWNLOAD_ERROR_ID_CONTENT_CODE),Tn(N,Le.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,G.DOWNLOAD_ERROR_ID_CONTENT_CODE),Tn(N,Le.w.OTHER_TYPE,G.DOWNLOAD_ERROR_ID_CONTENT_CODE),A=N,r}Bn.__dashjs_factory_name="HTTPLoader";var In=_.Z.getClassFactory(Bn);function er(){var i;function r(){i={}}function l(){r()}return l(),{getLoader:function(E){for(var R in i)if(i.hasOwnProperty(R)&&E.startsWith(R))return i[R];return In},registerLoader:function(E,R){i[E]=R},unregisterLoader:function(E){i[E]&&delete i[E]},unregisterAllLoader:r,reset:l}}er.__dashjs_factory_name="SchemeLoaderFactory";var Zn=_.Z.getSingletonFactory(er);function Cn(i){i=i||{};var r,l,E=this.context;return r=Zn(E).getInstance(),{load:function(R){if(!l){var A=r.getLoader(R&&R.request?R.request.url:null);l=A(E).create({errHandler:i.errHandler,mediaPlayerModel:i.mediaPlayerModel,requestModifier:i.requestModifier,dashMetrics:i.dashMetrics,boxParser:i.boxParser?i.boxParser:null,constants:i.constants?i.constants:null,dashConstants:i.dashConstants?i.dashConstants:null,urlUtils:i.urlUtils?i.urlUtils:null,requestTimeout:isNaN(i.requestTimeout)?0:i.requestTimeout,errors:i.errors})}l.load(R)},abort:function(){l&&l.abort()}}}Cn.__dashjs_factory_name="URLLoader";var Wn=_.Z.getClassFactory(Cn);function Xn(i){return Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Xn(i)}function ur(i,r){return ur=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},ur(i,r)}function ir(i,r){return!r||Xn(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function lr(i){return lr=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},lr(i)}var pr=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&ur(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=lr(r);if(l){var w=lr(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return ir(this,A)});function R(A){var h;return function(w,F){if(!(w instanceof F))throw new TypeError("Cannot call a class as a function")}(this,R),(h=E.call(this,A)).checkForExistenceOnly=!0,h}return R}(I.Z);function qr(i){i=i||{};var r,l,E=this.context,R=i.eventBus,A=i.events,h=i.urlUtils,w=i.errors,F=i.streamId;return r={checkForExistence:function(j){var B=function(U){R.trigger(A.CHECK_FOR_EXISTENCE_COMPLETED,{request:j,exists:U})};if(j){var N=new pr(j.url);l.load({request:N,success:function(){B(!0)},error:function(){B(!1)}})}else B(!1)},load:function(j){var B=function(N,U){R.trigger(A.LOADING_COMPLETED,{request:j,response:N||null,error:U||null,sender:r})};j?l.load({request:j,progress:function(N){R.trigger(A.LOADING_PROGRESS,{request:j,stream:N.stream,streamId:F}),N.data&&R.trigger(A.LOADING_DATA_PROGRESS,{request:j,response:N.data||null,error:null,sender:r})},success:function(N){B(N)},error:function(N,U,Z){B(void 0,new re.Z(w.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,Z,U))},abort:function(N){N&&R.trigger(A.LOADING_ABANDONED,{mediaType:N.mediaType,request:N,sender:r})}}):B(void 0,new re.Z(w.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,w.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){l&&l.abort()},reset:function(){l&&(l.abort(),l=null)}},l=Wn(E).create({errHandler:i.errHandler,errors:w,dashMetrics:i.dashMetrics,mediaPlayerModel:i.mediaPlayerModel,requestModifier:i.requestModifier,urlUtils:h,constants:t.Z,boxParser:i.boxParser,dashConstants:i.dashConstants,requestTimeout:i.settings.get().streaming.fragmentRequestTimeout}),r}qr.__dashjs_factory_name="FragmentLoader";var Or=_.Z.getClassFactory(qr);function Mr(){return{modifyResponseAsync:function(i){return Promise.resolve(i)}}}Mr.__dashjs_factory_name="SegmentResponseModifier";var Jr=_.Z.getSingletonFactory(Mr);function $r(i){i=i||{};var r,l,E,R=this.context,A=(0,p.Z)(R).getInstance(),h=i.errHandler,w=i.mediaPlayerModel,F=i.dashMetrics,j=(0,m.Z)(R).getInstance(),B=Jr(R).getInstance(),N=i.streamInfo;function U(){return N.id}function Z(){for(var ne in E)E[ne].reset();E={}}function le(ne){if(ne.sender){var ue=ne.request,fe=ne.response,G=ue.isInitializationRequest(),ie=ue.mediaInfo.streamInfo;if(ne.error&&(ue.mediaType===t.Z.AUDIO||ue.mediaType===t.Z.VIDEO||ue.mediaType===t.Z.TEXT&&ue.mediaInfo.isFragmented)&&A.trigger(u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:ne.request.serviceLocation}),fe&&ie){var Y=function(ce,g,P,C){var D=new It;return D.streamId=P,D.mediaInfo=g.mediaInfo,D.segmentType=g.type,D.start=g.startTime,D.duration=g.duration,D.end=D.start+D.duration,D.bytes=ce,D.index=g.index,D.quality=g.quality,D.representationId=g.representationId,D.endFragment=C,D}(fe,ue,N.id,ne.type!==u.Z.FRAGMENT_LOADING_PROGRESS);B.modifyResponseAsync(Y).then(function(ce){A.trigger(G?u.Z.INIT_FRAGMENT_LOADED:u.Z.MEDIA_FRAGMENT_LOADED,{chunk:ce,request:ue},{streamId:ie.id,mediaType:ue.mediaType})}).catch(function(ce){l.error(ce),A.trigger(G?u.Z.INIT_FRAGMENT_LOADED:u.Z.MEDIA_FRAGMENT_LOADED,{chunk:Y,request:ue},{streamId:ie.id,mediaType:ue.mediaType})})}else l.warn("No "+ue.mediaType+" bytes to push or stream is inactive.")}}return r={getStreamId:U,getModel:function(ne){var ue=E[ne];return ue||(ue=K(R).create({streamInfo:N,type:ne,dashMetrics:F,fragmentLoader:Or(R).create({dashMetrics:F,mediaPlayerModel:w,errHandler:h,requestModifier:(0,be.Z)(R).getInstance(),settings:i.settings,boxParser:i.boxParser,eventBus:A,events:u.Z,errors:X,dashConstants:i.dashConstants,urlUtils:i.urlUtils,streamId:U()}),debug:j,eventBus:A,events:u.Z}),E[ne]=ue),ue},reset:function(){A.off(n.Z.FRAGMENT_LOADING_COMPLETED,le,this),A.off(n.Z.FRAGMENT_LOADING_PROGRESS,le,this),Z()}},l=j.getLogger(r),Z(),A.on(n.Z.FRAGMENT_LOADING_COMPLETED,le,r),A.on(n.Z.FRAGMENT_LOADING_PROGRESS,le,r),r}$r.__dashjs_factory_name="FragmentController";var Ai=_.Z.getClassFactory($r),Ii=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},ei=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function ti(i){var r,l,E=this.context,R=i.streamInfo;function A(w){l.setTrackByIndex(w)}function h(){l&&l.reset()}return r={getStreamId:function(){return R.id},initialize:function(){l.addTracks();var w=l.getTracks();w&&w.length>0&&A(0)},provide:function(w,F){if(typeof F=="function"){var j,B,N=l.getCurrentTrack();if(!N||N.segmentDuration<=0||w==null)F(null);else{(B=l.getThumbnailRequestForTime(w))&&(N.segmentDuration=B.duration),j=w%N.segmentDuration;var U=Math.floor(j*N.tilesHor*N.tilesVert/N.segmentDuration),Z=new Ii;if(Z.width=Math.floor(N.widthPerTile),Z.height=Math.floor(N.heightPerTile),Z.x=Math.floor(U%N.tilesHor)*N.widthPerTile,Z.y=Math.floor(U/N.tilesHor)*N.heightPerTile,"readThumbnail"in N)return N.readThumbnail(w,function(ne){Z.url=ne,F(Z)});if(B)Z.url=B.url,N.segmentDuration=NaN;else{var le=Math.floor(w/N.segmentDuration);Z.url=function(ne,ue){var fe=ue+ne.startNumber,G=(0,o.vi)(ne.templateUrl,"Number",fe);return G=(0,o.vi)(G,"Time",(fe-1)*ne.segmentDuration*ne.timescale),G=(0,o.vi)(G,"Bandwidth",ne.bandwidth),(0,o.eR)(G)}(N,le)}F(Z)}}},setTrackByIndex:A,getCurrentTrackIndex:function(){return l.getCurrentTrackIndex()},getBitrateList:function(){var w=l.getTracks(),F=0;return w.map(function(j){var B=new ei;return B.mediaType=t.Z.IMAGE,B.qualityIndex=F++,B.bitrate=j.bitrate,B.width=j.width,B.height=j.height,B})},reset:h},h(),l=(0,Lt.Z)(E).create({streamInfo:R,adapter:i.adapter,baseURLController:i.baseURLController,timelineConverter:i.timelineConverter,debug:i.debug,eventBus:i.eventBus,events:i.events,dashConstants:i.dashConstants,dashMetrics:i.dashMetrics,segmentBaseController:i.segmentBaseController}),r}ti.__dashjs_factory_name="ThumbnailController";var Ri=_.Z.getClassFactory(ti),Yr=M(7417);function ni(i){var r;i=i||{};var l=[],E=(0,p.Z)(this.context).getInstance(),R=i.updateEventName,A=i.addBlacklistEventName;function h(w){l.indexOf(w)===-1&&(l.push(w),E.trigger(R,{entry:w}))}return r={add:h,contains:function(w){return!!(l.length&&w&&w.length)&&l.indexOf(w)!==-1},reset:function(){l=[]}},A&&E.on(A,function(w){h(w.entry)},r),r}ni.__dashjs_factory_name="BlackListController";var Pr=_.Z.getClassFactory(ni),wi=[t.Z.VIDEO,t.Z.AUDIO,t.Z.TEXT,t.Z.MUXED,t.Z.IMAGE];function Rn(i){i=i||{};var r,l,E,R,A,h,w,F,j,B,N,U,Z,le,ne,ue,fe,G,ie=this.context,Y=(0,p.Z)(ie).getInstance(),ce=(0,ze.Z)(ie).getInstance(),g=i.manifestModel,P=i.mediaPlayerModel,C=i.dashMetrics,D=i.manifestUpdater,b=i.adapter,te=i.timelineConverter,z=i.capabilities,ae=i.errHandler,Q=i.abrController,L=i.playbackController,J=i.eventController,pe=i.mediaController,Ne=i.protectionController,Se=i.textController,Ce=i.videoModel,Re=i.streamInfo,$e=i.settings;function nt(ft,Dt){return new Promise(function(xt,Mt){gt(),B=!0,qt();var Kt=Ce.getElement(),he=[];wi.forEach(function(ke){(ke!==t.Z.TEXT||ft)&&(ke!==t.Z.VIDEO||!Kt||Kt&&/^VIDEO$/i.test(Kt.nodeName))&&he.push(We(ke,ft))}),Promise.all(he).then(function(){return ke=Dt,new Promise(function(lt){var me={},ye=E.map(function(Ye){return Ye.createBufferSinks(ke)});Promise.all(ye).then(function(Ye){Ye.forEach(function(St){St&&(me[St.getType()]=St)}),lt(me)}).catch(function(){lt(me)})});var ke}).then(function(ke){if(B=!1,E.length===0){var lt="No streams to play.";ae.error(new re.Z(X.MANIFEST_ERROR_ID_NOSTREAMS_CODE,lt,g.getValue())),l.fatal(lt)}else Bt();ft&&Se.createTracks(Re),xt(ke)}).catch(function(ke){Mt(ke)})})}function We(ft,Dt){var xt,Mt=b.getAllMediaInfoForType(Re,ft),Kt=[],he=null;if(!Mt||Mt.length===0)return l.info("No "+ft+" data."),Promise.resolve();ft===t.Z.VIDEO&&(w=!0),ft===t.Z.AUDIO&&(F=!0);for(var ke=0,lt=Mt.length;ke<lt;ke++)he=Mt[ke],ft===t.Z.TEXT&&he.isEmbedded&&(Se.addEmbeddedTrack(Re,he),Kt.push(he)),Qe(he)&&pe.addTrack(he);if(Kt.length>0&&(pe.setInitialMediaSettingsForType(ft,Re),Se.addMediaInfosToBuffer(Re,ft,Kt)),Mt=Mt.filter(function(ye){return!ye.isEmbedded}),Mt.length===0)return Promise.resolve();if(ft===t.Z.IMAGE)return(U=Ri(ie).create({streamInfo:Re,adapter:b,baseURLController:i.baseURLController,timelineConverter:i.timelineConverter,debug:ue,eventBus:Y,events:u.Z,dashConstants:e.Z,dashMetrics:i.dashMetrics,segmentBaseController:i.segmentBaseController})).initialize(),Promise.resolve();Y.trigger(u.Z.STREAM_INITIALIZING,{streamInfo:Re,mediaInfo:he}),pe.setInitialMediaSettingsForType(ft,Re);var me=function(ye,Ye){var St=ye&&ye.length>0?ye[0]:null,Gt=N.getModel(St?St.type:null),gn=St?St.type:null,On=St?St.mimeType:null,wn=St?St.isFragmented:null,Hn=Zt(ie).create({streamInfo:Re,type:gn,mimeType:On,timelineConverter:te,adapter:b,manifestModel:g,mediaPlayerModel:P,fragmentModel:Gt,dashMetrics:i.dashMetrics,baseURLController:i.baseURLController,segmentBaseController:i.segmentBaseController,abrController:Q,playbackController:L,mediaController:pe,textController:Se,errHandler:ae,settings:$e,boxParser:ne,segmentBlacklistController:Z});Hn.initialize(Ye,w,wn),E.push(Hn);for(var Fn=0;Fn<ye.length;Fn++)Hn.addMediaInfo(ye[Fn]);return gn===t.Z.TEXT&&Se.addMediaInfosToBuffer(Re,gn,ye,Gt),Hn}(Mt,Dt);return(xt=pe.getCurrentTrackFor(ft,Re.id))?(Q.updateTopQualityIndex(xt),me.selectMediaInfo(ft===t.Z.TEXT&&xt.isEmbedded?Mt[0]:xt)):Promise.resolve()}function Qe(ft){var Dt,xt=ft?ft.type:null;return xt===t.Z.MUXED?(Dt="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",l.fatal(Dt),ae.error(new re.Z(X.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Dt,g.getValue())),!1):!(xt!==t.Z.TEXT&&xt!==t.Z.IMAGE&&ft.contentProtection&&!z.supportsEncryptedMedia()&&(ae.error(new re.Z(X.CAPABILITY_MEDIAKEYS_ERROR_CODE,X.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function Ct(ft){for(var Dt=E?E.length:0,xt=0;xt<Dt;xt++){var Mt=E[xt].getFragmentModel();Mt.abortRequests(),Mt.resetInitialSettings(),E[xt].reset(!1,ft)}Se&&Se.deactivateStream(Re),E=[],A=!1,h=!1,Vt(!1),Fe(!1),Y.trigger(u.Z.STREAM_DEACTIVATED,{streamInfo:Re})}function ve(ft){Ct(ft),R=!1,w=!1,F=!1,j={},B=!1,fe=!1,G=[]}function Fe(ft){fe=ft}function ot(){return Re?Re.start:NaN}function qe(){return Re?Re.id:null}function ht(){return Re}function gt(){if(!Ce||!Q)throw new Error(t.Z.MISSING_CONFIG_ERROR)}function st(ft){ft.error&&(ae.error(ft.error),l.fatal(ft.error.message))}function qt(){if(J){var ft=b.getEventsFor(Re);ft&&ft.length>0&&J.addInlineEvents(ft,Re.id)}}function Bt(){for(var ft=E.length,Dt=j.audio||j.video?new re.Z(X.DATA_UPDATE_FAILED_ERROR_CODE,X.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,xt=0;xt<ft;xt++)if(E[xt].isUpdating()||B)return;if(Ne){Ne.clearMediaInfoArray();for(var Mt=0;Mt<ft&&E[Mt];Mt++){var Kt=E[Mt].getType(),he=E[Mt].getMediaInfo();if(Kt===t.Z.AUDIO||Kt===t.Z.VIDEO||Kt===t.Z.TEXT&&he.isFragmented){var ke=E[Mt].getMediaInfo();ke&&Ne.initializeForMedia(ke)}}Ne.handleKeySystemFromManifest()}Dt?ae.error(Dt):R||(R=!0,Ce.waitForReadyState(t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){Y.trigger(u.Z.STREAM_INITIALIZED,{streamInfo:Re})}))}function sn(){var ft=vt(),Dt=ft.length;if(Dt!==0){for(var xt=0;xt<Dt;xt++)if(!ft[xt].isBufferingCompleted()&&(ft[xt].getType()===t.Z.AUDIO||ft[xt].getType()===t.Z.VIDEO))return void l.debug("onBufferingCompleted - One streamProcessor has finished but",ft[xt].getType(),"one is not buffering completed");l.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),h=!0,Y.trigger(u.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:Re},{streamInfo:Re})}else l.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function un(ft){j[ft.mediaType]=ft.error,Bt()}function Ge(ft){J&&J.addInbandEvents(ft.events,Re.id)}function ut(ft){return ft&&ft.type?tt(ft.type):null}function tt(ft){return ft?vt().filter(function(Dt){return Dt.getType()===ft})[0]:null}function vt(){for(var ft,Dt,xt=[],Mt=0;Mt<E.length;Mt++)(ft=(Dt=E[Mt]).getType())!==t.Z.AUDIO&&ft!==t.Z.VIDEO&&ft!==t.Z.TEXT||xt.push(Dt);return xt}function wt(ft,Dt){var xt=ht(),Mt=Dt.getStreamInfo();if(!Mt||!xt)return!0;var Kt=b.getAdaptationForType(Mt.index,ft,Mt),he=b.getAdaptationForType(xt.index,ft,xt);return Kt&&he?!(!jt(he)&&jt(Kt)):!Kt&&!he}function jt(ft){return!!ft&&!!(ft.ContentProtection||ft.Representation_asArray&&ft.Representation_asArray.length>0&&ft.Representation_asArray[0].ContentProtection)}function Yt(ft,Dt){var xt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!ft||!ft.hasOwnProperty("getStreamInfo"))return!1;var Mt=ft.getStreamInfo(),Kt=xt?xt.getStreamInfo():ht();if(!Mt||!Kt)return!1;var he=b.getAdaptationForType(Mt.index,Dt,Mt),ke=b.getAdaptationForType(Kt.index,Dt,Kt);if(!he||!ke)return!he&&!ke;var lt=he&&ke&&he.mimeType===ke.mimeType,me=ke.Representation_asArray.map(function(Gt){return Gt.codecs}),ye=he.Representation_asArray.map(function(Gt){return Gt.codecs}),Ye=ye.some(function(Gt){return me.indexOf(Gt)>-1}),St=ye.some(function(Gt){return me.some(function(gn){return z.codecRootCompatibleWithCodec(gn,Gt)})});return Ye||St&&lt}function Vt(ft){le=ft}function Qt(){return le}return r={initialize:function(){Y.on(u.Z.BUFFERING_COMPLETED,sn,r),Y.on(u.Z.DATA_UPDATE_COMPLETED,un,r),Y.on(u.Z.INBAND_EVENTS,Ge,r),Ne&&(Y.on(u.Z.KEY_ERROR,st,r),Y.on(u.Z.SERVER_CERTIFICATE_UPDATED,st,r),Y.on(u.Z.LICENSE_REQUEST_COMPLETE,st,r),Y.on(u.Z.KEY_SYSTEM_SELECTED,st,r),Y.on(u.Z.KEY_SESSION_CREATED,st,r),Y.on(u.Z.KEY_STATUSES_CHANGED,st,r)),Se.initializeForStream(Re),Y.trigger(u.Z.STREAM_UPDATED,{streamInfo:Re})},getStreamId:function(){return Re?Re.id:null},activate:function(ft,Dt){return new Promise(function(xt,Mt){if(!A)return Qt()?(A=!0,Y.trigger(u.Z.STREAM_ACTIVATED,{streamInfo:Re}),void xt(Dt)):void function(Kt,he){return nt(Kt,he)}(ft,Dt).then(function(Kt){A=!0,Y.trigger(u.Z.STREAM_ACTIVATED,{streamInfo:Re}),xt(Kt)}).catch(function(Kt){Mt(Kt)});xt(Dt)})},deactivate:Ct,getIsActive:function(){return A},getDuration:function(){return Re?Re.duration:NaN},getStartTime:ot,getId:qe,getStreamInfo:ht,getHasAudioTrack:function(){return F},getHasVideoTrack:function(){return w},startPreloading:function(ft,Dt){return new Promise(function(xt,Mt){Qt()?Mt():(l.info("[startPreloading] Preloading next stream with id ".concat(qe())),Vt(!0),nt(ft,Dt).then(function(){for(var Kt=0;Kt<E.length&&E[Kt];Kt++)E[Kt].setExplicitBufferingTime(ot()),E[Kt].getScheduleController().startScheduleTimer();xt()}).catch(function(){Vt(!1),Mt()}))})},initializeForTextWithMediaSource:function(ft){return new Promise(function(Dt,xt){We(t.Z.TEXT,ft).then(function(){return(Mt=tt(t.Z.TEXT))?Mt.createBufferSinks():Promise.resolve();var Mt}).then(function(){Se.createTracks(Re),Dt()}).catch(function(Mt){xt(Mt)})})},getThumbnailController:function(){return U},getBitrateListFor:function(ft){if(gt(),ft===t.Z.IMAGE)return U?U.getBitrateList():[];var Dt=function(xt){for(var Mt=null,Kt=0;Kt<E.length;Kt++)if((Mt=E[Kt]).getType()===xt)return Mt.getMediaInfo();return null}(ft);return Q.getBitrateList(Dt)},updateData:function(ft){return new Promise(function(Dt){B=!0,Re=ft,J&&qt();for(var xt=[],Mt=0,Kt=E.length;Mt<Kt;Mt++){var he=E[Mt],ke=he.getMediaInfo();xt.push(he.updateStreamInfo(Re));var lt=b.getAllMediaInfoForType(Re,he.getType());if(lt=lt.filter(function(Ye){return!Ye.isEmbedded})){he.clearMediaInfoArray();for(var me=0;me<lt.length;me++){var ye=lt[me];he.addMediaInfo(lt[me]),b.areMediaInfosEqual(ke,ye)&&(Q.updateTopQualityIndex(ye),xt.push(he.selectMediaInfo(ye)))}}}Promise.all(xt).then(function(){for(xt=[];G.length>0;){var Ye=G.pop(),St=Ye.newMediaInfo,Gt=ut(Ye.oldMediaInfo);if(!Gt)return;xt.push(Gt.prepareTrackSwitch()),xt.push(Gt.selectMediaInfo(St))}return Promise.all(xt)}).then(function(){B=!1,Bt(),Y.trigger(u.Z.STREAM_UPDATED,{streamInfo:Re}),Dt()})})},reset:function(ft){N&&(N.reset(),N=null),Q&&Re&&Q.clearDataForStream(Re.id),Z&&(Z.reset(),Z=null),ve(ft),Re=null,Y.off(u.Z.DATA_UPDATE_COMPLETED,un,r),Y.off(u.Z.BUFFERING_COMPLETED,sn,r),Y.off(u.Z.INBAND_EVENTS,Ge,r),Ne&&(Y.off(u.Z.KEY_ERROR,st,r),Y.off(u.Z.SERVER_CERTIFICATE_UPDATED,st,r),Y.off(u.Z.LICENSE_REQUEST_COMPLETE,st,r),Y.off(u.Z.KEY_SYSTEM_SELECTED,st,r),Y.off(u.Z.KEY_SESSION_CREATED,st,r),Y.off(u.Z.KEY_STATUSES_CHANGED,st,r))},getProcessors:vt,setMediaSource:function(ft){return new Promise(function(Dt,xt){for(var Mt=[],Kt=0;Kt<E.length;)Qe(E[Kt].getMediaInfo())?(Mt.push(E[Kt].setMediaSource(ft)),Kt++):(E[Kt].reset(),E.splice(Kt,1));Promise.all(Mt).then(function(){for(var he=0;he<E.length;he++)E[he].dischargePreBuffer();if(E.length===0){var ke="No streams to play.";ae.error(new re.Z(X.MANIFEST_ERROR_ID_NOSTREAMS_CODE,ke+"nostreams",g.getValue())),l.fatal(ke)}Dt()}).catch(function(he){l.error(he),xt(he)})})},isMediaCodecCompatible:function(ft){var Dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Yt(ft,t.Z.VIDEO,Dt)&&Yt(ft,t.Z.AUDIO,Dt)},isProtectionCompatible:function(ft){return!ft||wt(t.Z.VIDEO,ft)&&wt(t.Z.AUDIO,ft)},getPreloaded:Qt,getIsEndedEventSignaled:function(){return fe},setIsEndedEventSignaled:Fe,getAdapter:function(){return b},getHasFinishedBuffering:function(){return h},setPreloaded:Vt,startScheduleControllers:function(){for(var ft=E.length,Dt=0;Dt<ft&&E[Dt];Dt++)E[Dt].getScheduleController().startScheduleTimer()},prepareTrackChange:function(ft){if(A&&Re){h=!1;var Dt=ft.newMediaInfo,xt=g.getValue();b.setCurrentMediaInfo(Re.id,Dt.type,Dt);var Mt=ut(Dt);if(Mt){var Kt=L.getTime();l.info("Stream -  Process track changed at current time "+Kt),xt.refreshManifestOnSwitchTrack?(G.push(ft),D.getIsUpdating()||(l.debug("Stream -  Refreshing manifest for switch track"),D.refreshManifest())):Mt.selectMediaInfo(Dt).then(function(){Dt.type!==t.Z.VIDEO&&Dt.type!==t.Z.AUDIO||Q.updateTopQualityIndex(Dt),Mt.prepareTrackSwitch()})}}},prepareQualityChange:function(ft){var Dt=tt(ft.mediaType);Dt&&Dt.prepareQualityChange(ft)}},function(){try{ue=(0,m.Z)(ie).getInstance(),l=ue.getLogger(r),ve(),ne=(0,Yr.Z)(ie).getInstance(),Z=Pr(ie).create({updateEventName:u.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:u.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),N=Ai(ie).create({streamInfo:Re,mediaPlayerModel:P,dashMetrics:C,errHandler:ae,settings:$e,boxParser:ne,dashConstants:e.Z,urlUtils:ce})}catch(ft){throw ft}}(),r}Rn.__dashjs_factory_name="Stream";var _r=_.Z.getClassFactory(Rn),Lr=function i(r){(function(l,E){if(!(l instanceof E))throw new TypeError("Cannot call a class as a function")})(this,i),this.url=r||null,this.type=Le.w.CONTENT_STEERING_TYPE,this.responseType="json"},Tr=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function ri(){var i,r,l,E,R,A,h,w,F,j,B,N,U,Z,le,ne=this.context,ue=(0,ze.Z)(ne).getInstance();function fe(Q){g(Q,"baseUrl")}function G(Q){g(Q,"location")}function ie(Q){if(Q&&Q.request&&Q.request.serviceLocation&&Q.request.requestStartDate&&Q.request.requestEndDate&&!isNaN(Q.request.bytesTotal)){var L=Q.request.serviceLocation,J=Q.request.requestEndDate.getTime()-Q.request.requestStartDate.getTime();ce(L,parseInt(8*Q.request.bytesTotal/J*1e3))}}function Y(Q){Q&&Q.httpRequest&&Q.httpRequest._serviceLocation&&!isNaN(Q.throughput)&&ce(Q.httpRequest._serviceLocation,1e3*Q.throughput)}function ce(Q,L){R[Q]||(R[Q]=[]),R[Q].push(L),R[Q].length>4&&R[Q].shift()}function g(Q,L){if(Q&&Q.request&&Q.request.serviceLocation){var J=Q.request.serviceLocation;E[L].all.indexOf(J)===-1&&E[L].all.push(J),E[L].current=J}}function P(){var Q=B.getValue(),L=le.getContentSteering(Q);return L||(L=U.getServiceDescriptionSettings().contentSteering),L}function C(){return new Promise(function(Q){try{var L=P();if(!L||!L.serverUrl)return void Q();var J=function(Ne){var Se=Ne.serverUrl;l&&l.reloadUri&&(Se=ue.isRelative(l.reloadUri)?ue.resolve(l.reloadUri,Ne.serverUrl):l.reloadUri);var Ce=[],Re=E.baseUrl.all.concat(E.location.all);if(Re.length>0){var $e=Re.map(function(Qe){var Ct=function(ve){if(!ve||!R[ve]||R[ve].length===0)return-1;var Fe=R[ve].reduce(function(ot,qe){return ot+qe})/R[ve].length;return parseInt(Fe)}(Qe);return{serviceLocation:Qe,throughput:Ct}});$e.sort(function(Qe,Ct){return Ct.throughput-Qe.throughput});var nt="",We="";$e.forEach(function(Qe,Ct){Ct!==0&&(nt="".concat(nt,","),Qe.throughput>-1&&(We="".concat(We,","))),nt="".concat(nt).concat(Qe.serviceLocation),Qe.throughput>-1&&(We="".concat(We).concat(Qe.throughput))}),Ce.push({key:"_DASH_pathway",value:'"'.concat(nt,'"')}),Ce.push({key:"_DASH_throughput",value:We})}return Se=pt.Z.addAditionalQueryParameterToUrl(Se,Ce)}(L),pe=new Lr(J);h.load({request:pe,success:function(Ne){(function(Se){Se&&Se[e.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(Se[e.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((l=new Tr).version=Se[e.Z.CONTENT_STEERING_RESPONSE.VERSION],Se[e.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(Se[e.Z.CONTENT_STEERING_RESPONSE.TTL])&&(l.ttl=Se[e.Z.CONTENT_STEERING_RESPONSE.TTL]),Se[e.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(l.reloadUri=Se[e.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),Se[e.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(l.pathwayPriority=Se[e.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),Se[e.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(l.pathwayClones=Se[e.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],l.pathwayClones=l.pathwayClones.filter(function(Ce){return function(Re){return Re[e.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&Re[e.Z.CONTENT_STEERING_RESPONSE.ID]&&Re[e.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&Re[e.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][e.Z.CONTENT_STEERING_RESPONSE.HOST]}(Ce)})),te())})(Ne),Z.trigger(n.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:l,url:J}),Q()},error:function(Ne,Se,Ce,Re){(function($e,nt){try{switch(r.warn("Error fetching data from content steering server",$e),nt.status){case 410:break;case 429:var We=nt&&nt.getResponseHeader?nt.getResponseHeader("retry-after"):null;We!==null&&(l||(l={}),l.ttl=parseInt(We)),te();break;default:te()}}catch(Qe){r.error(Qe)}})(Ne,Re),Q(Ne)},complete:function(){E.baseUrl.all=D(E.baseUrl),E.location.all=D(E.location)}})}catch(Ne){Q(Ne)}})}function D(Q){return Q.all&&Q.all.length!==0&&Q.current?Q.all.filter(function(L){return L===Q.current}):[]}function b(Q){try{var L=[];return Q&&Q.length!==0&&l&&l.pathwayClones&&l.pathwayClones.length!==0&&l.pathwayClones.forEach(function(J){var pe=Q.filter(function($e){return J[e.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===$e.serviceLocation}),Ne=null;if(pe&&pe.length>0&&(Ne=pe[0]),Ne){var Se=new URL(Ne.url),Ce=J[e.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][e.Z.CONTENT_STEERING_RESPONSE.HOST];Ce=pt.Z.stringHasProtocol(Ce)?Ce:"".concat(Se.protocol,"//").concat(Ce);var Re={synthesizedUrl:"".concat(Ce).concat(Se.pathname),serviceLocation:J[e.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:J[e.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][e.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:Ne};L.push(Re)}}),L}catch(J){return r.error(J),[]}}function te(){l&&l.ttl&&!isNaN(l.ttl)&&(A&&clearTimeout(A),A=setTimeout(function(){C()},1e3*l.ttl))}function z(){A&&clearTimeout(A),A=null}function ae(){l=null,R={},E={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},z()}return i={reset:function(){ae(),Z.off(n.Z.FRAGMENT_LOADING_STARTED,fe,i),Z.off(n.Z.MANIFEST_LOADING_STARTED,G,i),Z.off(n.Z.MANIFEST_LOADING_FINISHED,ie,i),Z.off(n.Z.THROUGHPUT_MEASUREMENT_STORED,Y,i)},setConfig:function(Q){Q&&(Q.adapter&&(le=Q.adapter),Q.errHandler&&(w=Q.errHandler),Q.dashMetrics&&(F=Q.dashMetrics),Q.mediaPlayerModel&&(j=Q.mediaPlayerModel),Q.requestModifier&&(N=Q.requestModifier),Q.manifestModel&&(B=Q.manifestModel),Q.serviceDescriptionController&&(U=Q.serviceDescriptionController),Q.eventBus&&(Z=Q.eventBus))},loadSteeringData:C,getCurrentSteeringResponseData:function(){return l},shouldQueryBeforeStart:function(){var Q=P();return!!Q&&Q.queryBeforeStart},getSteeringDataFromManifest:P,stopSteeringRequestTimer:z,getSynthesizedBaseUrlElements:function(Q){try{return b(Q).map(function(L){var J=new nr(L.synthesizedUrl,L.serviceLocation);return J.queryParams=L.queryParams,J.dvbPriority=L.reference.dvbPriority,J.dvbWeight=L.reference.dvbWeight,J.availabilityTimeOffset=L.reference.availabilityTimeOffset,J.availabilityTimeComplete=L.reference.availabilityTimeComplete,J})}catch(L){return r.error(L),[]}},getSynthesizedLocationElements:function(Q){try{return b(Q).map(function(L){var J=new Wt(L.synthesizedUrl,L.serviceLocation);return J.queryParams=L.queryParams,J})}catch(L){return r.error(L),[]}},initialize:function(){h=Wn(ne).create({errHandler:w,dashMetrics:F,mediaPlayerModel:j,requestModifier:N,errors:X}),Z.on(n.Z.FRAGMENT_LOADING_STARTED,fe,i),Z.on(n.Z.MANIFEST_LOADING_STARTED,G,i),Z.on(n.Z.MANIFEST_LOADING_FINISHED,ie,i),Z.on(n.Z.THROUGHPUT_MEASUREMENT_STORED,Y,i)}},r=(0,m.Z)(ne).getInstance().getLogger(i),ae(),i}ri.__dashjs_factory_name="ContentSteeringController";var ar=_.Z.getSingletonFactory(ri);function ii(){var i,r,l,E=this.context,R=(0,Ie.Z)(E).getInstance();return i={select:function(A){if(!A||A.length===0)return null;var h=null;return R.get().streaming.applyContentSteering&&(h=function(w){var F=l.getCurrentSteeringResponseData();return F&&F.pathwayPriority&&F.pathwayPriority.length>0?function(){for(var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],N=0,U=null,Z=function(){var le=j[N],ne=B.findIndex(function(ue){return ue.serviceLocation&&ue.serviceLocation===le});if(ne!==-1&&!r.contains(B[ne].serviceLocation))return U=B[ne],"break";N+=1};N<j.length&&Z()!=="break";);return U}(F.pathwayPriority,w):null}(A)),h||(h=function(w){return w[0]}(A)),h},setConfig:function(A){A.blacklistController&&(r=A.blacklistController),A.contentSteeringController&&(l=A.contentSteeringController)},reset:function(){r.reset()}},r=Pr(E).create({updateEventName:u.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:u.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),l=ar(E).getInstance(),i}ii.__dashjs_factory_name="LocationSelector";var yr=_.Z.getClassFactory(ii);function ai(){var i,r,l,E,R,A,h,w,F,j,B,N,U,Z,le=this.context,ne=(0,p.Z)(le).getInstance(),ue=(0,ze.Z)(le).getInstance();function fe(){l=NaN,h=!1,R=!0,A=!1,G()}function G(){E!==null&&(clearTimeout(E),E=null)}function ie(z){G(),A||(isNaN(z)&&!isNaN(l)&&(z=1e3*l),isNaN(z)||(r.debug("Refresh manifest in "+z+" milliseconds."),E=setTimeout(P,z)))}function Y(){var z=arguments.length>0&&arguments[0]!==void 0&&arguments[0];h=!0;var ae=F.getValue(),Q=ae.url,L=null,J=B.getPatchLocation(ae),pe=j.select(J),Ne=null;if(pe&&!z)Q=pe.url,L=pe.serviceLocation,Ne=pe.queryParams;else{var Se=ce(ae),Ce=j.select(Se);Ce&&(Q=Ce.url,L=Ce.serviceLocation,Ne=Ce.queryParams)}ue.isRelative(Q)&&(Q=ue.resolve(Q,ae.url)),w.load(Q,L,Ne)}function ce(z){var ae=B.getLocation(z),Q=U.getSynthesizedLocationElements(ae);return ae.concat(Q)}function g(z){if(z){if(B.getIsPatch(z)){var ae=z;z=F.getValue();var Q=B.isPatchValid(z,ae),L=Q;if(Q){var J=B.getPublishTime(z);L=B.applyPatchToManifest(z,ae);var pe=B.getPublishTime(z);L=J.getTime()!=pe.getTime()}if(!L)return r.debug("Patch provided is invalid, performing full manifest refresh"),void Y(!0);z.loadedTime=new Date}}else(z=F.getValue()).loadedTime=new Date;if(F.getValue()&&F.getValue().type===e.Z.DYNAMIC&&z.type===e.Z.STATIC)return ne.trigger(u.Z.DYNAMIC_TO_STATIC),h=!1,void(A=!0);F.setValue(z);var Ne=new Date,Se=(Ne.getTime()-z.loadedTime.getTime())/1e3;1e3*(l=B.getManifestUpdatePeriod(z,Se))>2147483647&&(l=2147483647e-3),ne.trigger(u.Z.MANIFEST_UPDATED,{manifest:z}),r.info("Manifest has been refreshed at "+Ne+"["+Ne.getTime()/1e3+"] "),R||ie()}function P(){R||(h?ie(Z.get().streaming.manifestUpdateRetryInterval):Y())}function C(z){z.error?z.error.code===X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&N.error(z.error):g(z.manifest)}function D(){R=!1,ie()}function b(){(R=!Z.get().streaming.scheduling.scheduleWhilePaused)&&G()}function te(){h=!1}return i={initialize:function(){fe(),ne.on(u.Z.STREAMS_COMPOSED,te,this),ne.on(n.Z.PLAYBACK_STARTED,D,this),ne.on(n.Z.PLAYBACK_PAUSED,b,this),ne.on(u.Z.INTERNAL_MANIFEST_LOADED,C,this)},setManifest:function(z){g(z)},refreshManifest:Y,getIsUpdating:function(){return h},setConfig:function(z){z&&(z.manifestModel&&(F=z.manifestModel),z.adapter&&(B=z.adapter),z.manifestLoader&&(w=z.manifestLoader),z.errHandler&&(N=z.errHandler),z.locationSelector&&(j=z.locationSelector),z.settings&&(Z=z.settings),z.contentSteeringController&&(U=z.contentSteeringController))},reset:function(){ne.off(n.Z.PLAYBACK_STARTED,D,this),ne.off(n.Z.PLAYBACK_PAUSED,b,this),ne.off(u.Z.STREAMS_COMPOSED,te,this),ne.off(u.Z.INTERNAL_MANIFEST_LOADED,C,this),fe()}},r=(0,m.Z)(le).getInstance().getLogger(i),j=yr(le).create(),i}ai.__dashjs_factory_name="ManifestUpdater";var ia=_.Z.getClassFactory(ai);function Ni(){var i,r,l,E,R,A,h,w,F,j,B,N,U,Z,le,ne,ue=this.context,fe=(0,p.Z)(ue).getInstance(),G=(0,ze.Z)(ue).getInstance();function ie(){w=[],F=[],j=null,B=null,U=null,N=NaN,l=!1,E=!1,Z=R.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Y(){R.get().streaming.utcSynchronization.enabled&&!l&&!E&&U&&U.value&&U.schemeIdUri&&!isNaN(N)&&!isNaN(R.get().streaming.utcSynchronization.backgroundAttempts)&&(B&&(Date.now()-B)/1e3<30||(w=[],E=!0,ce(isNaN(R.get().streaming.utcSynchronization.backgroundAttempts)?2:R.get().streaming.utcSynchronization.backgroundAttempts)))}function ce(Ce){try{if(Ce<=0)return void Ne();var Re=Date.now();A[U.schemeIdUri](U.value,function($e){var nt=Date.now(),We=P(Re,nt,$e);w.push(We),ce(Ce-1)},function(){Ne()})}catch{Ne()}}function g(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Re=Ce||0;if(!F||F.length===0||Re>=F.length)C();else{var $e=F[Re];if($e)if(A.hasOwnProperty($e.schemeIdUri)){var nt=new Date().getTime();A[$e.schemeIdUri]($e.value,function(We){var Qe=new Date().getTime(),Ct=P(nt,Qe,We);U=$e,C(Ct)},function(){g(Re+1)})}else g(Re+1);else C()}}function P(Ce,Re,$e){return $e-(Re-(Re-Ce)/2)}function C(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,Re=isNaN(Ce);Re&&R.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?J():pe(Re,Ce)}function D(Ce){var Re=Date.parse(Ce);return isNaN(Re)&&(Re=function($e){var nt,We,Qe=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec($e);return nt=Date.UTC(parseInt(Qe[1],10),parseInt(Qe[2],10)-1,parseInt(Qe[3],10),parseInt(Qe[4],10),parseInt(Qe[5],10),Qe[6]&&(parseInt(Qe[6],10)||0),Qe[7]&&1e3*parseFloat(Qe[7])||0),Qe[9]&&Qe[10]&&(We=60*parseInt(Qe[9],10)+parseInt(Qe[10],10),nt+=(Qe[8]==="+"?-1:1)*We*60*1e3),new Date(nt).getTime()}(Ce)),Re}function b(Ce){return Date.parse(Ce)}function te(Ce){return Date.parse(Ce)}function z(Ce,Re,$e){$e()}function ae(Ce,Re,$e){var nt=D(Ce);isNaN(nt)?$e():Re(nt)}function Q(Ce,Re,$e,nt,We){var Qe,Ct,ve=!1,Fe=new XMLHttpRequest,ot=We?Le.w.HEAD:Le.w.GET,qe=Re.match(/\S+/g);if(Re=qe.shift(),Qe=function(){ve||(ve=!0,qe.length?Q(Ce,qe.join(" "),$e,nt,We):nt())},Ct=function(){var gt,st;Fe.status===200&&(gt=We?Fe.getResponseHeader("Date"):Fe.response,st=Ce(gt),isNaN(st)||($e(st),ve=!0))},G.isRelative(Re)){var ht=ne.resolve();ht&&(Re=G.resolve(Re,ht.url))}Fe.open(ot,Re),Fe.timeout=5e3,Fe.onload=Ct,Fe.onloadend=Qe,Fe.send()}function L(Ce,Re,$e){Q(te,Ce,Re,$e,!0)}function J(){var Ce=h.getLatestMPDRequestHeaderValueByID("Date"),Re=Ce!==null?new Date(Ce).getTime():Number.NaN;isNaN(Re)?pe(!0):pe(!1,Re-Date.now())}function pe(Ce,Re){if(isNaN(N)||isNaN(Re)||Ce||function(nt){try{var We,Qe=Se(nt),Ct=isNaN(Z)?30:Z,ve=isNaN(R.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:R.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,Fe=isNaN(R.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:R.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,ot=isNaN(R.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:R.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Qe?(We=Math.min(Ct*ve,Fe),r.debug("Increasing timeBetweenSyncAttempts to ".concat(We))):(We=Math.max(Ct/ve,ot),r.debug("Decreasing timeBetweenSyncAttempts to ".concat(We))),Z=We}catch{}}(Re),!Ce&&!isNaN(Re)){j=Date.now(),l=!1;var $e=isNaN(N);N=Re,$e&&Y(),r.debug("Completed UTC sync. Setting client - server offset to ".concat(Re))}Ce&&(U=null,l=!1,le.error(new re.Z(X.TIME_SYNC_FAILED_ERROR_CODE,X.TIME_SYNC_FAILED_ERROR_MESSAGE))),fe.trigger(u.Z.UPDATE_TIME_SYNC_OFFSET,{offset:Re}),fe.trigger(u.Z.TIME_SYNCHRONIZATION_COMPLETED)}function Ne(){if(w&&w.length!==0){var Ce=w.reduce(function(Re,$e){return Re+$e},0)/w.length;Se(Ce)?r.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(r.debug("Completed background UTC sync. Setting client - server offset to ".concat(Ce)),N=Ce,fe.trigger(u.Z.UPDATE_TIME_SYNC_OFFSET,{offset:N})),E=!1,B=Date.now()}}function Se(Ce){try{if(isNaN(N))return!0;var Re=R.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(R.get().streaming.utcSynchronization.maximumAllowedDrift)?R.get().streaming.utcSynchronization.maximumAllowedDrift:100;return Ce>=N-Re&&Ce<=N+Re}catch{return!0}}return i={initialize:function(){ie(),A={"urn:mpeg:dash:utc:http-head:2014":L,"urn:mpeg:dash:utc:http-xsdate:2014":Q.bind(null,D),"urn:mpeg:dash:utc:http-iso:2014":Q.bind(null,b),"urn:mpeg:dash:utc:direct:2014":ae,"urn:mpeg:dash:utc:http-head:2012":L,"urn:mpeg:dash:utc:http-xsdate:2012":Q.bind(null,D),"urn:mpeg:dash:utc:http-iso:2012":Q.bind(null,b),"urn:mpeg:dash:utc:direct:2012":ae,"urn:mpeg:dash:utc:http-ntp:2014":z,"urn:mpeg:dash:utc:ntp:2014":z,"urn:mpeg:dash:utc:sntp:2014":z}},attemptSync:function(Ce,Re){F=Ce,l||(function($e){try{if(!$e||!R.get().streaming.utcSynchronization.enabled)return!1;var nt=isNaN(Z)?30:Z;return!(j&&nt&&!isNaN(nt))||(Date.now()-j)/1e3>=nt}catch{return!0}}(Re)?(l=!0,g()):fe.trigger(u.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(Ce){Ce&&(Ce.dashMetrics&&(h=Ce.dashMetrics),Ce.baseURLController&&(ne=Ce.baseURLController),Ce.errHandler&&(le=Ce.errHandler),Ce.settings&&(R=Ce.settings))},reset:function(){ie(),fe.off(u.Z.ATTEMPT_BACKGROUND_SYNC,Y,i)}},r=(0,m.Z)(ue).getInstance().getLogger(i),fe.on(u.Z.ATTEMPT_BACKGROUND_SYNC,Y,i),i}Ni.__dashjs_factory_name="TimeSyncController";var Ci=_.Z.getSingletonFactory(Ni);Ci.HTTP_TIMEOUT_MS=5e3,_.Z.updateSingletonFactory(Ni.__dashjs_factory_name,Ci);var bo=Ci;function aa(){var i,r,l,E,R,A=this.context,h=(0,p.Z)(A).getInstance();return i={attachMediaSource:function(w){var F=window.URL.createObjectURL(r);return w.setSource(F),E==="managedMediaSource"&&(w.setDisableRemotePlayback(!0),r.addEventListener("startstreaming",function(){h.trigger(n.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),r.addEventListener("endstreaming",function(){h.trigger(n.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),F},createMediaSource:function(){var w="WebKitMediaSource"in window,F="MediaSource"in window;return"ManagedMediaSource"in window?(r=new ManagedMediaSource,E="managedMediaSource",R.info("Created ManagedMediaSource")):F?(r=new MediaSource,E="mediaSource",R.info("Created MediaSource")):w&&(r=new WebKitMediaSource,R.info("Created WebkitMediaSource")),r},detachMediaSource:function(w){w.setSource(null)},setConfig:function(w){w&&w.settings&&(l=w.settings)},setDuration:function w(F){r&&r.readyState==="open"&&(F===null&&isNaN(F)||r.duration!==F&&(F!==1/0||l.get().streaming.buffer.mediaSourceDurationInfinity||(F=Math.pow(2,32)),function(j){for(var B=j.sourceBuffers,N=0;N<B.length;N++)if(B[N].updating)return!0;return!1}(r)?setTimeout(w.bind(null,F),50):(R.info("Set MediaSource duration:"+F),r.duration=F)))},setSeekable:function(w,F){r&&typeof r.setLiveSeekableRange=="function"&&typeof r.clearLiveSeekableRange=="function"&&r.readyState==="open"&&w>=0&&w<F&&(r.clearLiveSeekableRange(),r.setLiveSeekableRange(w,F))},signalEndOfStream:function(w){if(w&&w.readyState==="open"){for(var F=w.sourceBuffers,j=0;j<F.length;j++)if(F[j].updating||F[j].buffered.length===0)return;R.info("call to mediaSource endOfStream"),w.endOfStream()}}},R=(0,m.Z)(A).getInstance().getLogger(i),i}aa.__dashjs_factory_name="MediaSourceController";var Ao=_.Z.getSingletonFactory(aa);function oa(){var i,r,l,E,R,A,h,w,F,j,B,N="urn:mpeg:dash:event:2012",U="discarded",Z="updated",le="added",ne=this.context,ue=(0,p.Z)(ne).getInstance();function fe(){if(!h||!w)throw new Error("setConfig function has to be called previously")}function G(){B=!1,l={},E={},R=null,j=!1,A=Date.now()/1e3}function ie(){try{if(!j){j=!0;var z=w.getTime(),ae=z-A;ae=A>0?Math.max(0,ae):0,Y(E,ae,z),Y(l,ae,z),ce(E),ce(l),A=z,j=!1}}catch(Q){j=!1,r.error(Q)}}function Y(z,ae,Q){try{D(z,function(L){if(L!==void 0){var J=isNaN(L.duration)?0:L.duration;L.calculatedPresentationTime<=Q&&L.calculatedPresentationTime+ae+J>=Q?te(L,n.Z.EVENT_MODE_ON_START):(b(Q,J+ae,L.calculatedPresentationTime)||function(pe){try{var Ne=pe.eventStream.period.start+pe.eventStream.period.duration;return pe.calculatedPresentationTime>Ne}catch(Se){return r.error(Se),!1}}(L))&&(r.debug("Removing event ".concat(L.id," from period ").concat(L.eventStream.period.id," as it is expired or invalid")),function(pe,Ne){try{var Se=Ne.eventStream.schemeIdUri,Ce=Ne.eventStream.period.id,Re=Ne.eventStream.value,$e=Ne.id;pe[Ce][Se]=pe[Ce][Se].filter(function(nt){return Re&&nt.eventStream.value&&nt.eventStream.value!==Re||nt.id!==$e}),pe[Ce][Se].length===0&&delete pe[Ce][Se]}catch(nt){r.error(nt)}}(z,L))}})}catch(L){r.error(L)}}function ce(z){try{for(var ae in z)z.hasOwnProperty(ae)&&Object.keys(z[ae]).length===0&&delete z[ae]}catch(Q){r.error(Q)}}function g(z,ae){var Q=arguments.length>2&&arguments[2]!==void 0&&arguments[2],L=z.eventStream.schemeIdUri,J=z.eventStream.value,pe=z.id,Ne=U;ae[L]||(ae[L]=[]);var Se=ae[L].findIndex(function(Re){return(!J||Re.eventStream.value&&Re.eventStream.value===J)&&Re.id===pe});if(Se===-1)ae[L].push(z),z.triggeredReceivedEvent=!1,z.triggeredStartEvent=!1,Ne=le;else if(Q){var Ce=ae[L][Se];z.triggeredReceivedEvent=Ce.triggeredReceivedEvent,z.triggeredStartEvent=Ce.triggeredStartEvent,ae[L][Se]=z,Ne=Z}return Ne}function P(z){try{if(z.eventStream.value==1){var ae,Q=z.calculatedPresentationTime;ae=z.calculatedPresentationTime==4294967295?NaN:z.calculatedPresentationTime+z.duration,ue.trigger(n.Z.MANIFEST_VALIDITY_CHANGED,{id:z.id,validUntil:Q,newDuration:ae,newManifestValidAfter:NaN},{mode:n.Z.EVENT_MODE_ON_START})}}catch(L){r.error(L)}}function C(z){try{var ae=w.getTime();D(z,function(Q){var L=Q.eventStream&&Q.eventStream.period&&!isNaN(Q.eventStream.period.duration)?Q.eventStream.period.duration:NaN,J=Q.eventStream&&Q.eventStream.period&&!isNaN(Q.eventStream.period.start)?Q.eventStream.period.start:NaN;if(!isNaN(L)&&!isNaN(J)){var pe=Q.calculatedPresentationTime;Math.abs(pe-ae)<300&&te(Q,n.Z.EVENT_MODE_ON_START)}})}catch(Q){r.error(Q)}}function D(z,ae){try{if(z)for(var Q=Object.keys(z),L=0;L<Q.length;L++)for(var J=z[Q[L]],pe=Object.keys(J),Ne=0;Ne<pe.length;Ne++)J[pe[Ne]].forEach(function(Se){Se!==void 0&&ae(Se)})}catch(Se){r.error(Se)}}function b(z,ae,Q){try{return z-ae>Q}catch(L){return r.error(L),!1}}function te(z,ae){try{var Q=w.getTime(),L=z.id;if(ae===n.Z.EVENT_MODE_ON_RECEIVE&&!z.triggeredReceivedEvent)return r.debug("Received event ".concat(L)),z.triggeredReceivedEvent=!0,void ue.trigger(z.eventStream.schemeIdUri,{event:z},{mode:ae});z.triggeredStartEvent||(z.eventStream.schemeIdUri===N&&z.eventStream.value==1?z.duration===0&&z.presentationTimeDelta===0||(r.debug("Starting manifest refresh event ".concat(L," at ").concat(Q)),function(){try{fe(),h.refreshManifest()}catch(J){r.error(J)}}()):z.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&z.eventStream.value==1?(r.debug("Starting callback event ".concat(L," at ").concat(Q)),function(J){try{(0,Ft.Z)(ne).create({}).load({method:"get",url:J,request:{responseType:"arraybuffer"}})}catch(pe){r.error(pe)}}(z.messageData)):(r.debug("Starting event ".concat(L," from period ").concat(z.eventStream.period.id," at ").concat(Q)),ue.trigger(z.eventStream.schemeIdUri,{event:z},{mode:ae})),z.triggeredStartEvent=!0)}catch(J){r.error(J)}}return i={addInlineEvents:function(z,ae){try{if(fe(),l[ae]||(l[ae]={}),z)for(var Q=0;Q<z.length;Q++){var L=z[Q];if(!b(w.getTime(),isNaN(L.duration)?0:L.duration,L.calculatedPresentationTime)){var J=g(L,l[ae],!0);J===le?(r.debug("Added inline event with id ".concat(L.id," from period ").concat(ae)),te(L,n.Z.EVENT_MODE_ON_RECEIVE)):J===Z&&r.debug("Updated inline event with id ".concat(L.id," from period ").concat(ae))}}}catch(pe){throw pe}},addInbandEvents:function(z,ae){try{fe(),E[ae]||(E[ae]={});for(var Q=0;Q<z.length;Q++){var L=z[Q];b(w.getTime(),isNaN(L.duration)?0:L.duration,L.calculatedPresentationTime)||(g(L,E[ae],!1)===le?(L.eventStream.schemeIdUri===N&&P(L),r.debug("Added inband event with id ".concat(L.id," from period ").concat(ae)),te(L,n.Z.EVENT_MODE_ON_RECEIVE)):r.debug("Inband event with scheme_id_uri ".concat(L.eventStream.schemeIdUri,", value ").concat(L.eventStream.value,", period id ").concat(ae," and event id ").concat(L.id," was ignored because it has been added before.")))}ie()}catch(J){throw J}},getInbandEvents:function(){return E},getInlineEvents:function(){return l},start:function(){try{fe(),r.debug("Start Event Controller");var z=F.get().streaming.eventControllerRefreshDelay;B||isNaN(z)||(B=!0,R=setInterval(ie,z))}catch(ae){throw ae}},setConfig:function(z){try{if(!z)return;z.manifestUpdater&&(h=z.manifestUpdater),z.playbackController&&(w=z.playbackController),z.settings&&(F=z.settings)}catch(ae){throw ae}},reset:function(){(function(){try{R!==null&&B&&(clearInterval(R),R=null,B=!1,function(){try{C(E),C(l)}catch(z){r.error(z)}}())}catch(z){throw z}})(),G()}},r=(0,m.Z)(ne).getInstance().getLogger(i),G(),i}oa.__dashjs_factory_name="EventController";var Io=_.Z.getSingletonFactory(oa),Fr={LEVELS:{WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Di(i,r){(r==null||r>i.length)&&(r=i.length);for(var l=0,E=new Array(r);l<r;l++)E[l]=i[l];return E}function sa(){var i,r,l,E,R,A,h,w,F,j,B,N,U,Z,le,ne,ue,fe,G,ie,Y,ce,g,P,C,D,b,te,z,ae,Q,L,J,pe,Ne,Se,Ce,Re,$e,nt,We,Qe,Ct,ve,Fe,ot,qe,ht,gt=this.context,st=(0,p.Z)(gt).getInstance();function qt(){if(!(A&&A.hasOwnProperty("load")&&Y&&Y.hasOwnProperty("initialize")&&Y.hasOwnProperty("reset")&&Y.hasOwnProperty("getClientTimeOffset")&&h&&ie&&F&&J))throw new Error(t.Z.MISSING_CONFIG_ERROR)}function Bt(){if(!R||!R.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function sn(){(function(){try{var Ke=w.getStreamsInfo();if(!g&&Ke.length===0)throw new Error("There are no periods in the MPD");g&&Ke.length>0&&F.updateManifestUpdateInfo({currentTime:J.getTime(),buffered:L.getBufferRange(),presentationStartTime:Ke[0].start,clientTimeOffset:Y.getClientTimeOffset()}),ce.length>0&&function(mn){mn.length!==0?ce=ce.filter(function(ln){var Mn=mn.filter(function(bn){return bn.id===ln.getId()}).length>0||ln.getId()===g.getId();return Mn||(r.debug("Removing stream ".concat(ln.getId())),ln.reset(!0)),Mn}):r.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Ke);for(var Rt=[],Jt=0,an=Ke.length;Jt<an;Jt++){var hn=Ke[Jt];Rt.push(Ge(hn)),F.addManifestUpdateStreamInfo(hn)}Promise.all(Rt).then(function(){return new Promise(function(mn,ln){g?mn():ut(Ke,mn,ln)})}).then(function(){st.trigger(u.Z.STREAMS_COMPOSED),Gt()}).catch(function(mn){throw mn})}catch(mn){ie.error(new re.Z(X.MANIFEST_ERROR_ID_NOSTREAMS_CODE,mn.message+" nostreamscomposed",h.getValue())),ae=!0,vr()}})()}function un(){Fe=!0}function Ge(Ke){var Rt=Kr(Ke.id);return Rt?Rt.updateData(Ke):(Rt=_r(gt).create({manifestModel:h,mediaPlayerModel:Ne,dashMetrics:F,manifestUpdater:R,adapter:w,timelineConverter:Y,capabilities:l,capabilitiesFilter:E,errHandler:ie,baseURLController:U,segmentBaseController:Z,textController:C,abrController:ne,playbackController:J,eventController:fe,mediaController:ue,protectionController:P,videoModel:L,streamInfo:Ke,settings:ve}),ce.push(Rt),Rt.initialize(),Promise.resolve())}function ut(Ke,Rt,Jt){try{Kt();var an=F.getCurrentDVRInfo().range;if(an.end<an.start){ot&&clearTimeout(ot);var hn=Math.min(1e3*(-1*(an.end-an.start)+2),2147483647);return r.debug("Waiting for ".concat(hn," ms before playback can start")),st.trigger(u.Z.AST_IN_FUTURE,{delay:hn}),void(ot=setTimeout(function(){ut(Ke,Rt,Jt)},hn))}ve.get().streaming.applyProducerReferenceTime&&pe.calculateProducerReferenceTimeOffsets(Ke);var mn=Ke[0].manifestInfo;if(ve.get().streaming.applyServiceDescription&&pe.applyServiceDescription(mn),w.getIsDynamic()){var ln=Sr(Ke,mn);J.computeAndSetLiveDelay(ln,mn)}(ve.get().streaming.applyContentSteering&&N.shouldQueryBeforeStart()?N.loadSteeringData():Promise.resolve()).then(function(){var Mn=h.getValue();Mn&&U.update(Mn),tt(),Rt()}).catch(function(Mn){r.error(Mn),tt(),Rt()})}catch(Mn){Jt(Mn)}}function tt(){var Ke=function(){var an;if(w.getIsDynamic()){var hn=F.getCurrentDVRInfo();an=(hn&&hn.range?hn.range.end:0)-J.getOriginalLiveDelay();var mn=hn?hn.range:null;if(mn){if(isNaN(qe)&&qe.toString().indexOf("posix:")===-1){var ln=Fn(!0);isNaN(ln)||(r.info("Start time from URI parameters: ".concat(ln)),an=Math.min(an,ln))}else{r.info("Start time provided by the app: ".concat(qe));var Mn=dr(!0,qe);isNaN(Mn)||(an=Math.min(an,Mn))}var bn=ve.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;an=Math.max(an,mn.start+bn)}}else if(an=Ir()[0].getStreamInfo().start,isNaN(qe)){var hr=Fn(!1);isNaN(hr)||(r.info("Start time from URI parameters: ".concat(hr)),an=Math.max(an,hr))}else{r.info("Start time provided by the app: ".concat(qe));var Br=dr(!1,qe);isNaN(Br)||(an=Math.max(an,Br))}return an}(),Rt=Mt(Ke),Jt=Rt!==null?Rt:ce[0];st.trigger(u.Z.INITIAL_STREAM_SWITCH,{startTime:Ke}),vt(Jt,null,Ke),nt||(nt=setInterval(function(){!te&&J.getTimeToStreamEnd()<=0&&!J.isSeeking()&&st.trigger(u.Z.PLAYBACK_ENDED,{isLast:or().isLast})},200))}function vt(Ke,Rt,Jt){try{if(te||!Ke||Rt===Ke&&Ke.getIsActive())return;te=!0,st.trigger(u.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:Rt?Rt.getStreamInfo():null,toStreamInfo:Ke.getStreamInfo()});var an=!1;g=Ke,Rt&&(an=Dt(Ke,Rt),Rt.deactivate(an)),Jt=isNaN(Jt)?!an&&Rt?Ke.getStreamInfo().start:NaN:Jt,r.info("Switch to stream ".concat(Ke.getId(),". Seektime is ").concat(Jt,", current playback time is ").concat(J.getTime(),". Seamless period switch is set to ").concat(an)),Qe=Qe.filter(function(hn){return hn.getId()!==g.getId()}),J.initialize(or(),!!Rt),L.getElement()?wt(Jt,an,!1):jt(Jt,an)}catch{te=!1}}function wt(Ke,Rt){var Jt,an=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function hn(){if(Q&&Q.readyState==="open"){r.debug("MediaSource is open!"),window.URL.revokeObjectURL(Jt),Q.removeEventListener("sourceopen",hn),Q.removeEventListener("webkitsourceopen",hn),Hn();var ln=F.getCurrentDVRInfo();j.setSeekable(ln.range.start,ln.range.end),an?(isNaN(Ke)||J.seek(Ke,!0,!0),g.setMediaSource(Q).then(function(){g.initializeForTextWithMediaSource(Q)})):jt(Ke,Rt)}}function mn(){Q.addEventListener("sourceopen",hn,!1),Q.addEventListener("webkitsourceopen",hn,!1),Jt=j.attachMediaSource(L),r.debug("MediaSource attached to element.  Waiting on open...")}Q?Rt?jt(Ke,Rt):(j.detachMediaSource(L),mn()):(Q=j.createMediaSource(),mn())}function jt(Ke,Rt){g.activate(Q,Rt?We:void 0,Ke).then(function(Jt){if(Jt){var an=Object.keys(Jt);an.length>0&&Jt[an[0]].getBuffer().changeType&&(Ct=!0),We=Jt}isNaN(Ke)||(st.trigger(u.Z.SEEK_TARGET,{time:Ke},{streamId:g.getId()}),J.seek(Ke,!1,!0),g.startScheduleControllers()),te=!1,st.trigger(u.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:or()})})}function Yt(Ke){var Rt=Mt(Ke.seekTime);Rt&&Rt!==g?Rt&&Rt!==g&&(Vt(),function(Jt,an){var hn=Jt&&!isNaN(Jt.seekTime)?Jt.seekTime:NaN,mn=g.getProcessors().map(function(ln){return ln.prepareOuterPeriodPlaybackSeeking(Jt)});Promise.all(mn).then(function(){vt(an,g,hn)}).catch(function(ln){ie.error(ln)})}(Ke,Rt)):(Vt(),function(Jt){g.getProcessors().forEach(function(an){return an.prepareInnerPeriodPlaybackSeeking(Jt)}),Jn(Ae.USER_REQUEST_STOP_REASON)}(Ke)),Er(De.SEEK_START_REASON)}function Vt(){Qt()}function Qt(){Qe&&Qe.length>0&&(Qe.forEach(function(Ke){Ke.deactivate(!0)}),Qe=[])}function ft(Ke){if(Ke.newMediaInfo.streamInfo.id===g.getId()){if(Qt(),ve.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&Ke.oldMediaInfo&&Ke.oldMediaInfo.codec!==Ke.newMediaInfo.codec){var Rt=J.getTime();return g.deactivate(!1),void wt(Rt,!1,!1)}g.prepareTrackChange(Ke)}}function Dt(Ke,Rt){try{return ve.get().streaming.buffer.reuseExistingSourceBuffers&&(Rt.isProtectionCompatible(Ke)||Fe)&&(Ct&&ve.get().streaming.buffer.useChangeTypeForTrackSwitch||Rt.isMediaCodecCompatible(Ke,Rt))}catch{return!1}}function xt(Ke){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Q&&!Ke.getPreloaded()){var Jt=Dt(Ke,Rt);Jt&&Ke.startPreloading(Q,We).then(function(){Qe.push(Ke)})}}function Mt(Ke){if(isNaN(Ke))return null;for(var Rt=ce.length,Jt=0;Jt<Rt;Jt++){var an=ce[Jt];if(Ke<parseFloat((an.getStartTime()+an.getDuration()).toFixed(5)))return an}return null}function Kt(){try{var Ke=w.getIsDynamic(),Rt=w.getStreamsInfo()[0].manifestInfo,Jt=J.getTime(),an=Y.calcTimeShiftBufferWindow(ce,Ke),hn=On();if(an.start===void 0||an.end===void 0)return;hn&&hn.length!==0?hn.forEach(function(mn){F.addDVRInfo(mn.getType(),Jt,Rt,an)}):F.addDVRInfo(t.Z.VIDEO,Jt,Rt,an)}catch{}}function he(Ke){if(Re&&b){var Rt=Ne.getInitialBufferLevel(),Jt=[t.Z.TEXT];(isNaN(Rt)||Rt<=J.getBufferLevel(Jt)||w.getIsDynamic()&&Rt>J.getLiveDelay())&&(Re=!1,Er(De.INITIAL_PLAYOUT_START_REASON),J.play())}Ke&&Ke.mediaType&&F.addBufferLevel(Ke.mediaType,new Date,1e3*Ke.bufferLevel)}function ke(Ke){Ke.streamInfo.id===g.getId()&&Ke.reason&&Ke.reason.forceReplace&&Qt(),Kr(Ke.streamInfo.id).prepareQualityChange(Ke)}function lt(){if(w.getIsDynamic()&&J.getOriginalLiveDelay()!==0&&g){var Ke=w.getStreamsInfo();if(Ke.length>0){var Rt=Ke[0].manifestInfo,Jt=Sr(Ke,Rt);J.computeAndSetLiveDelay(Jt,Rt)}}}function me(){if(cr()){var Ke=L.getPlaybackQuality();Ke&&F.addDroppedFrames(Ke)}}function ye(){r.debug("[onPlaybackStarted]"),!Re&&Ce&&Er(De.RESUME_FROM_PAUSE_START_REASON),Re&&(Re=!1),$e&&($e=!1,ve.get().streaming.applyContentSteering&&!N.shouldQueryBeforeStart()&&N.loadSteeringData()),Ce=!1}function Ye(Ke){r.debug("[onPlaybackPaused]"),Ke.ended||(Ce=!0,Jn(Ae.USER_REQUEST_STOP_REASON))}function St(Ke){r.debug("Stream with id ".concat(Ke.streamInfo.id," finished buffering"));var Rt=Ke.streamInfo.isLast;Q&&Rt?(r.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),j.signalEndOfStream(Q)):Gt()}function Gt(){if(g&&g.getHasFinishedBuffering())for(var Ke=function(){var hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var mn=hn||g||null;if(mn){var ln=mn.getStreamInfo();return ce.filter(function(Mn){var bn=Mn.getStreamInfo();return bn.start>ln.start&&ln.id!==bn.id})}}catch{return[]}}(g),Rt=0;Rt<Ke.length;){var Jt=Ke[Rt],an=Rt===0?g:Ke[Rt-1];!Jt.getPreloaded()&&an.getHasFinishedBuffering()&&Q&&xt(Jt,an),Rt+=1}}function gn(){nt&&(clearInterval(nt),nt=null)}function On(){return g?g.getProcessors():[]}function wn(Ke){if(g&&!g.getIsEndedEventSignaled()){g.setIsEndedEventSignaled(!0);var Rt=function(){var Jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,an=Jt||g||null;if(!an)return null;for(var hn=an.getStreamInfo(),mn=hn.start,ln=0,Mn=-1,bn=NaN;ln<ce.length;){var hr=ce[ln].getStreamInfo(),Br=hr.start-mn;Br>0&&(isNaN(bn)||Br<bn)&&hn.id!==hr.id&&(bn=Br,Mn=ln),ln+=1}return Mn>=0?ce[Mn]:null}();Rt?(r.debug("StreamController onEnded, found next stream with id ".concat(Rt.getStreamInfo().id,". Switching from ").concat(g.getStreamInfo().id," to ").concat(Rt.getStreamInfo().id)),vt(Rt,g,NaN)):(r.debug("StreamController no next stream found"),g.setIsEndedEventSignaled(!1)),Jn(Rt?Ae.END_OF_PERIOD_STOP_REASON:Ae.END_OF_CONTENT_STOP_REASON)}Ke&&Ke.isLast&&(gn(),N.stopSteeringRequestTimer())}function Hn(Ke){var Rt=Ke||or().manifestInfo.duration;j.setDuration(Rt)}function Fn(Ke){var Rt=le.getURIFragmentData();if(!Rt||!Rt.t)return NaN;var Jt=Ir()[0].getStreamInfo().start;return Rt.t=Rt.t.split(",")[0],Ur(Ke,Rt.t,Jt)}function dr(Ke,Rt){var Jt=0;return Ke||(Jt=Ir()[0].getStreamInfo().start),Ur(Ke,Rt,Jt)}function Ur(Ke,Rt,Jt){var an=w.getRegularPeriods()[0],hn=Rt.toString(),mn=hn.indexOf("posix:")!==-1?hn.substring(6)==="now"?Date.now()/1e3:parseFloat(hn.substring(6)):NaN;return Ke&&!isNaN(mn)?Y.calcPresentationTimeFromWallTime(new Date(1e3*mn),an):parseFloat(hn)+Jt}function Sr(Ke,Rt){try{var Jt=NaN;if(Rt&&!isNaN(Rt.maxFragmentDuration)&&isFinite(Rt.maxFragmentDuration))return Rt.maxFragmentDuration;if(Ke&&Ke.length===1){var an=Ke[0],hn=[t.Z.VIDEO,t.Z.AUDIO,t.Z.TEXT].reduce(function(ln,Mn){var bn=w.getMediaInfoForType(an,Mn);return bn&&bn.isFragmented!==!1&&ln.push(bn),ln},[]).reduce(function(ln,Mn){var bn=w.getVoRepresentations(Mn);return bn&&bn.length>0&&bn.forEach(function(hr){hr&&ln.push(hr)}),ln},[]).reduce(function(ln,Mn){var bn=w.convertRepresentationToRepresentationInfo(Mn);return bn&&bn.fragmentDuration&&!isNaN(bn.fragmentDuration)&&ln.push(bn.fragmentDuration),ln},[]);Jt=Math.max.apply(Math,function(ln){if(Array.isArray(ln))return Di(ln)}(mn=hn)||function(ln){if(typeof Symbol<"u"&&Symbol.iterator in Object(ln))return Array.from(ln)}(mn)||function(ln,Mn){if(ln){if(typeof ln=="string")return Di(ln,Mn);var bn=Object.prototype.toString.call(ln).slice(8,-1);return bn==="Object"&&ln.constructor&&(bn=ln.constructor.name),bn==="Map"||bn==="Set"?Array.from(ln):bn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bn)?Di(ln,Mn):void 0}}(mn)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())}return isFinite(Jt)?Jt:NaN}catch{return NaN}var mn}function br(Ke){if(Ke.error)ae=!0,vr();else{r.info("Manifest updated... updating data system wide.");var Rt=Ke.manifest;w.updatePeriods(Rt);var Jt=w.getUTCTimingSources();!w.getIsDynamic()||Jt&&Jt.length!==0||st.trigger(n.Z.CONFORMANCE_VIOLATION,{level:Fr.LEVELS.WARNING,event:Fr.EVENTS.NO_UTC_TIMING_ELEMENT});var an=w.getIsDynamic()?Jt.concat(Se.getUTCTimingSources()):Jt;E.filterUnsupportedFeatures(Rt).then(function(){U.initialize(Rt),B.attemptSync(an,w.getIsDynamic())})}}function cr(){return!!g&&g.getHasVideoTrack()}function gr(){return!!g&&g.getHasAudioTrack()}function Jn(Ke,Rt){Rt=Rt||new Date,On().forEach(function(Jt){Jt.finalisePlayList(Rt,Ke)}),F.addPlayList()}function Er(Ke){F.createPlaylistMetrics(1e3*J.getTime(),Ke)}function Ar(Ke){if(Ke.error){var Rt="";switch(Ke.error.code){case 1:Rt="MEDIA_ERR_ABORTED";break;case 2:Rt="MEDIA_ERR_NETWORK";break;case 3:Rt="MEDIA_ERR_DECODE",ht.counts.mediaErrorDecode+=1;break;case 4:Rt="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:Rt="MEDIA_ERR_ENCRYPTED";break;default:Rt="UNKNOWN"}Rt==="MEDIA_ERR_DECODE"&&ve.get().errors.recoverAttempts.mediaErrorDecode>=ht.counts.mediaErrorDecode?function(){r.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Jt=J.getTime();g.deactivate(!1),r.warn("MediaSource has been resetted. Resuming playback from time ".concat(Jt)),wt(Jt,!1,!1)}():(z=!0,Ke.error.message&&(Rt+=" ("+Ke.error.message+")"),Ke.error.msExtendedCode&&(Rt+=" (0x"+(Ke.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),r.fatal("Video Element Error: "+Rt),Ke.error&&r.fatal(Ke.error),ie.error(new re.Z(Ke.error.code,Rt)),vr())}}function or(){return g?g.getStreamInfo():null}function Kr(Ke){for(var Rt=0,Jt=ce.length;Rt<Jt;Rt++)if(ce[Rt].getId()===Ke)return ce[Rt];return null}function _i(Ke){isNaN(Ke.newDuration)||Hn(Ke.newDuration)}function Ti(){ce=[],qe=NaN,P=null,te=!1,g=null,z=!1,ae=!1,Re=!0,$e=!0,Ce=!1,b=!0,nt=null,Fe=!1,Ct=!1,Qe=[],ot=null,ht={counts:{mediaErrorDecode:0}}}function vr(){qt(),B.reset(),Jn(z||ae?Ae.FAILURE_STOP_REASON:Ae.USER_REQUEST_STOP_REASON);for(var Ke=0,Rt=ce?ce.length:0;Ke<Rt;Ke++)ce[Ke].reset(z);st.off(n.Z.PLAYBACK_TIME_UPDATED,me,i),st.off(n.Z.PLAYBACK_SEEKING,Yt,i),st.off(n.Z.PLAYBACK_ERROR,Ar,i),st.off(n.Z.PLAYBACK_STARTED,ye,i),st.off(n.Z.PLAYBACK_PAUSED,Ye,i),st.off(n.Z.PLAYBACK_ENDED,wn,i),st.off(n.Z.METRIC_ADDED,Si,i),st.off(n.Z.MANIFEST_VALIDITY_CHANGED,_i,i),st.off(n.Z.BUFFER_LEVEL_UPDATED,he,i),st.off(n.Z.QUALITY_CHANGE_REQUESTED,ke,i),u.Z.KEY_SESSION_UPDATED&&st.off(u.Z.KEY_SESSION_UPDATED,un,i),st.off(u.Z.MANIFEST_UPDATED,br,i),st.off(u.Z.STREAM_BUFFERING_COMPLETED,St,i),st.off(u.Z.TIME_SYNCHRONIZATION_COMPLETED,sn,i),st.off(u.Z.CURRENT_TRACK_CHANGED,ft,i),st.off(u.Z.SETTING_UPDATED_LIVE_DELAY,lt,i),st.off(u.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,lt,i),U.reset(),R.reset(),fe.reset(),F.clearAllCurrentMetrics(),h.setValue(null),A.reset(),Y.reset(),G.reset(),Q&&(j.detachMediaSource(L),Q=null),L=null,P&&(P=null,D=null,h.getValue()&&st.trigger(u.Z.PROTECTION_DESTROYED,{data:h.getValue().url})),gn(),st.trigger(u.Z.STREAM_TEARDOWN_COMPLETE),Ti()}function Si(Ke){if(Ke.metric===y.Z.DVR_INFO){var Rt=gr()?t.Z.AUDIO:t.Z.VIDEO;Ke.mediaType===Rt&&j.setSeekable(Ke.value.range.start,Ke.value.range.end)}}function Ir(){return ce}return i={initialize:function(Ke,Rt){qt(),b=Ke,D=Rt,Y.initialize(),(R=ia(gt).create()).setConfig({manifestModel:h,adapter:w,manifestLoader:A,errHandler:ie,settings:ve,contentSteeringController:N}),R.initialize(),(fe=Io(gt).getInstance()).setConfig({manifestUpdater:R,playbackController:J,settings:ve}),fe.start(),B.setConfig({dashMetrics:F,baseURLController:U,errHandler:ie,settings:ve}),B.initialize(),j.setConfig({settings:ve}),P&&(st.trigger(u.Z.PROTECTION_CREATED,{controller:P}),P.setMediaElement(L.getElement()),D&&P.setProtectionData(D)),st.on(n.Z.PLAYBACK_TIME_UPDATED,me,i),st.on(n.Z.PLAYBACK_SEEKING,Yt,i),st.on(n.Z.PLAYBACK_ERROR,Ar,i),st.on(n.Z.PLAYBACK_STARTED,ye,i),st.on(n.Z.PLAYBACK_PAUSED,Ye,i),st.on(n.Z.PLAYBACK_ENDED,wn,i),st.on(n.Z.METRIC_ADDED,Si,i),st.on(n.Z.MANIFEST_VALIDITY_CHANGED,_i,i),st.on(n.Z.BUFFER_LEVEL_UPDATED,he,i),st.on(n.Z.QUALITY_CHANGE_REQUESTED,ke,i),u.Z.KEY_SESSION_UPDATED&&st.on(u.Z.KEY_SESSION_UPDATED,un,i),st.on(u.Z.MANIFEST_UPDATED,br,i),st.on(u.Z.STREAM_BUFFERING_COMPLETED,St,i),st.on(u.Z.TIME_SYNCHRONIZATION_COMPLETED,sn,i),st.on(u.Z.CURRENT_TRACK_CHANGED,ft,i),st.on(u.Z.SETTING_UPDATED_LIVE_DELAY,lt,i),st.on(u.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,lt,i)},getActiveStreamInfo:or,addDVRMetric:Kt,hasVideoTrack:cr,hasAudioTrack:gr,getStreamById:Kr,getStreamForTime:Mt,getTimeRelativeToStreamId:function(Ke,Rt){for(var Jt=null,an=0,hn=0,mn=null,ln=0;ln<ce.length;ln++){if(hn=(Jt=ce[ln]).getStartTime(),mn=Jt.getDuration(),Number.isFinite(hn)&&(an=hn),Jt.getId()===Rt)return Ke-an;Number.isFinite(mn)&&(an+=mn)}return null},load:function(Ke){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;qt(),qe=Rt,A.load(Ke)},loadWithManifest:function(Ke){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Bt(),qe=Rt,R.setManifest(Ke)},getActiveStreamProcessors:On,setConfig:function(Ke){Ke&&(Ke.capabilities&&(l=Ke.capabilities),Ke.capabilitiesFilter&&(E=Ke.capabilitiesFilter),Ke.manifestLoader&&(A=Ke.manifestLoader),Ke.manifestModel&&(h=Ke.manifestModel),Ke.mediaPlayerModel&&(Ne=Ke.mediaPlayerModel),Ke.customParametersModel&&(Se=Ke.customParametersModel),Ke.protectionController&&(P=Ke.protectionController),Ke.adapter&&(w=Ke.adapter),Ke.dashMetrics&&(F=Ke.dashMetrics),Ke.errHandler&&(ie=Ke.errHandler),Ke.timelineConverter&&(Y=Ke.timelineConverter),Ke.videoModel&&(L=Ke.videoModel),Ke.playbackController&&(J=Ke.playbackController),Ke.serviceDescriptionController&&(pe=Ke.serviceDescriptionController),Ke.contentSteeringController&&(N=Ke.contentSteeringController),Ke.textController&&(C=Ke.textController),Ke.abrController&&(ne=Ke.abrController),Ke.mediaController&&(ue=Ke.mediaController),Ke.settings&&(ve=Ke.settings),Ke.baseURLController&&(U=Ke.baseURLController),Ke.uriFragmentModel&&(le=Ke.uriFragmentModel),Ke.segmentBaseController&&(Z=Ke.segmentBaseController),Ke.manifestUpdater&&(R=Ke.manifestUpdater))},setProtectionData:function(Ke){D=Ke,P&&P.setProtectionData(D)},getIsStreamSwitchInProgress:function(){return te},switchToVideoElement:function(Ke){g&&(J.initialize(or()),wt(Ke,!1,!0))},getHasMediaOrInitialisationError:function(){return z||ae},getStreams:Ir,getActiveStream:function(){return g},getInitialPlayback:function(){return Re},getAutoPlay:function(){return b},refreshManifest:function(){R.getIsUpdating()||R.refreshManifest()},reset:vr},r=(0,m.Z)(gt).getInstance().getLogger(i),B=bo(gt).getInstance(),j=Ao(gt).getInstance(),G=_e(gt).getInstance(),Ti(),i}sa.__dashjs_factory_name="StreamController";var ua=_.Z.getSingletonFactory(sa);function la(){var i,r,l,E,R,A,h,w,F,j,B,N,U=this.context,Z=(0,p.Z)(U).getInstance();function le(){N.debug("Stopping the gap controller"),R&&(clearInterval(R),R=null),function(){Z.off(u.Z.WALLCLOCK_TIME_UPDATED,ie,this),Z.off(u.Z.INITIAL_STREAM_SWITCH,G,this),Z.off(u.Z.PLAYBACK_SEEKING,ne,this),Z.off(u.Z.BUFFER_REPLACEMENT_STARTED,ue,i),Z.off(u.Z.TRACK_CHANGE_RENDERED,fe,i)}(),R=null,A=NaN,E=0,j=null,B={}}function ne(){j&&(clearTimeout(j),j=null)}function ue(D){try{if(D.streamId!==w.getActiveStreamInfo().id||D.mediaType!==t.Z.VIDEO&&D.mediaType!==t.Z.AUDIO)return;D.streamId===w.getActiveStreamInfo().id&&(B[D.mediaType]=!0)}catch(b){N.error(b)}}function fe(D){D&&D.mediaType&&(B[D.mediaType]=!1)}function G(){R||function(){try{R||(N.debug("Starting the gap controller"),R=setInterval(function(){Y()&&C(h.getTime())},100))}catch{}}()}function ie(){if(Y(l.get().streaming.gaps.enableSeekFix)&&++E>=10){var D=h.getTime();r===D?C(D,!0):(r=D,A=NaN),E=0}}function Y(){var D=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!w.getActiveStream())return!1;var b=Object.keys(B).some(function(z){return B[z]}),te=!!D&&ce();return!b&&l.get().streaming.gaps.jumpGaps&&w.getActiveStreamProcessors().length>0&&(!h.isSeeking()||te)&&!h.isPaused()&&!w.getIsStreamSwitchInProgress()&&!w.getHasMediaOrInitialisationError()}function ce(){var D=w.getActiveStream(),b=parseFloat((D.getStartTime()+D.getDuration()).toFixed(5));return h.getTime()+l.get().streaming.gaps.threshold>=b}function g(D,b){try{if(!D||D.length<=1&&b>0)return NaN;for(var te=NaN,z=0;isNaN(te)&&z<D.length;){var ae=z>0?D.end(z-1):0;b<D.start(z)&&ae-b<l.get().streaming.gaps.threshold&&(te=z),z+=1}return te}catch{return null}}function P(D,b){for(var te=0,z=D.length;te<z;te++)if(b>=D.start(te)&&b<=D.end(te))return!0;return!1}function C(D){var b,te=arguments.length>1&&arguments[1]!==void 0&&arguments[1],z=l.get().streaming.gaps.enableStallFix,ae=l.get().streaming.gaps.stallSeek,Q=l.get().streaming.gaps.smallGapLimit,L=l.get().streaming.gaps.jumpLargeGaps,J=F.getBufferRange(),pe=NaN,Ne=!1;if(b=g(J,D),!isNaN(b)){var Se=J.start(b),Ce=Se-D;Ce>0&&(Ce<=Q||L)&&(pe=Se)}var Re=h.getTimeToStreamEnd();if(isNaN(pe)&&te&&isFinite(Re)&&!isNaN(Re)&&Re<Q&&(pe=parseFloat(h.getStreamEndTime().toFixed(5)),Ne=!0),z&&isNaN(pe)&&te&&isNaN(b)&&P(J,D)&&(ae===0?(N.warn("Toggle play pause to break stall"),F.pause(),F.play()):(N.warn("Jumping ".concat(ae,"s to break stall")),pe=D+ae)),pe>0&&A!==pe&&pe>D&&!j){var $e=pe-D;if(Ne){var nt=w.getStreamForTime(pe),We=nt&&!!nt.getPreloaded();N.warn("Jumping to end of stream because of gap from ".concat(D," to ").concat(pe,". Gap duration: ").concat($e)),h.seek(pe,!0,We)}else{var Qe=h.getIsDynamic(),Ct=b>0?J.end(b-1):D,ve=Qe?1e3*Math.max(0,$e-.1):0;j=window.setTimeout(function(){h.seek(pe,!0,!0),N.warn("Jumping gap occuring in period ".concat(w.getActiveStream().getStreamId()," starting at ").concat(Ct," and ending at ").concat(pe,". Jumping by: ").concat(pe-Ct)),j=null},ve)}A=pe}}return i={reset:le,setConfig:function(D){D&&(D.settings&&(l=D.settings),D.playbackController&&(h=D.playbackController),D.streamController&&(w=D.streamController),D.videoModel&&(F=D.videoModel))},initialize:function(){(function(){Z.on(u.Z.WALLCLOCK_TIME_UPDATED,ie,this),Z.on(u.Z.INITIAL_STREAM_SWITCH,G,this),Z.on(u.Z.PLAYBACK_SEEKING,ne,this),Z.on(u.Z.BUFFER_REPLACEMENT_STARTED,ue,i),Z.on(u.Z.TRACK_CHANGE_RENDERED,fe,i)})()}},N=(0,m.Z)(U).getInstance().getLogger(i),le(),i}la.__dashjs_factory_name="GapController";var Ro=_.Z.getSingletonFactory(la);function ca(){var i,r,l,E,R,A,h,w,F,j,B=this.context,N=(0,p.Z)(B).getInstance();function U(){r=!1;var ce=pt.Z.parseUserAgent();l=ce&&ce.browser&&ce.browser.name&&ce.browser.name.toLowerCase()==="safari"}function Z(){r=!1}function le(ce){if(ce.streamId===A.getActiveStreamInfo().id&&F){var g=h.getLiveDelay();h.getBufferLevel()>g/2&&(F=!1)}}function ne(ce){ce.streamId===A.getActiveStreamInfo().id&&(F=ce.state===y.Z.BUFFER_EMPTY)}function ue(){w.getCatchupModeEnabled()||E.setPlaybackRate(1)}function fe(){h.getIsDynamic()&&w.getCatchupModeEnabled()&&(w.getCatchupPlaybackRates().max>0||w.getCatchupPlaybackRates().min<0)&&!h.isPaused()&&!h.isSeeking()&&function(){try{return!(!h.getTime()>0||r)&&(ie()===t.Z.LIVE_CATCHUP_MODE_LOLP?function(ce,g){try{return Math.abs(G())>0||ce<g}catch{return!1}}(h.getBufferLevel(),R.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(G())>0}catch{return!1}}())}catch{return!1}}()&&function(){if(!r&&E){var ce,g=E.getPlaybackRate(),P=w.getCatchupPlaybackRates(),C=h.getBufferLevel(),D=G(),b=w.getCatchupMaxDrift();if(!isNaN(b)&&b>0&&D>b)j.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),r=!0,h.seekToCurrentLive(!0,!1);else{var te=h.getCurrentLiveLatency(),z=h.getLiveDelay();ce=ie()===t.Z.LIVE_CATCHUP_MODE_LOLP?function(Q,L,J,pe,Ne){var Se;if(Ne<pe){var Ce=Math.abs(Q.min),Re=5*(Ne-pe);Se=1-Ce+2*Ce/(1+Math.pow(Math.E,-Re)),j.debug("[LoL+ playback control_buffer-based] bufferLevel: "+Ne+", newRate: "+Se)}else{if(Math.abs(L-J)<=.02*J)Se=1;else{var $e=L-J,nt=$e<0?Math.abs(Q.min):Q.max,We=5*$e;Se=1-nt+2*nt/(1+Math.pow(Math.E,-We))}j.debug("[LoL+ playback control_latency-based] latency: "+L+", newRate: "+Se)}return Se}(P,te,z,R.get().streaming.liveCatchup.playbackBufferMin,C):function(Q,L,J,pe){if(F)return 1;var Ne=L-J,Se=Ne<0?Math.abs(Q.min):Q.max,Ce=5*Ne,Re=1-Se+2*Se/(1+Math.pow(Math.E,-Ce));return h.getPlaybackStalled()&&pe<=J/2&&Ne>0&&(Re=1),Re}(P,te,z,C);var ae=l?.25:.02/(.5/P.max);ce&&Math.abs(g-ce)>=ae&&(j.debug("[CatchupController]: Setting playback rate to ".concat(ce)),E.setPlaybackRate(ce))}}}()}function G(){return h.getCurrentLiveLatency()-h.getLiveDelay()}function ie(){var ce=R.get().streaming.liveCatchup.playbackBufferMin;return R.get().streaming.liveCatchup.mode!==t.Z.LIVE_CATCHUP_MODE_LOLP||ce===null||isNaN(ce)?t.Z.LIVE_CATCHUP_MODE_DEFAULT:t.Z.LIVE_CATCHUP_MODE_LOLP}function Y(){w.getCatchupPlaybackRates(!0)}return i={reset:function(){N.off(n.Z.BUFFER_LEVEL_UPDATED,le,i),N.off(n.Z.BUFFER_LEVEL_STATE_CHANGED,ne,i),N.off(n.Z.PLAYBACK_PROGRESS,fe,i),N.off(n.Z.PLAYBACK_TIME_UPDATED,fe,i),N.off(n.Z.PLAYBACK_SEEKED,Z,i),N.off(u.Z.SETTING_UPDATED_CATCHUP_ENABLED,ue,i),N.off(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Y,i),N.off(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Y,i),N.off(n.Z.STREAM_INITIALIZED,Y,i),U(),E.setPlaybackRate(1,!0)},setConfig:function(ce){ce&&(ce.settings&&(R=ce.settings),ce.videoModel&&(E=ce.videoModel),ce.streamController&&(A=ce.streamController),ce.playbackController&&(h=ce.playbackController),ce.mediaPlayerModel&&(w=ce.mediaPlayerModel))},initialize:function(){N.on(n.Z.BUFFER_LEVEL_UPDATED,le,i),N.on(n.Z.BUFFER_LEVEL_STATE_CHANGED,ne,i),N.on(n.Z.PLAYBACK_PROGRESS,fe,i),N.on(n.Z.PLAYBACK_TIME_UPDATED,fe,i),N.on(n.Z.PLAYBACK_SEEKED,Z,i),N.on(u.Z.SETTING_UPDATED_CATCHUP_ENABLED,ue,i),N.on(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Y,i),N.on(u.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Y,i),N.on(n.Z.STREAM_INITIALIZED,Y,i),Y()}},j=(0,m.Z)(B).getInstance().getLogger(i),U(),i}ca.__dashjs_factory_name="CatchupController";var wo=_.Z.getSingletonFactory(ca),No=[t.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],fa="video",da="audio";function ga(){var i,r,l,E,R,A=this.context;function h(){r={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},l=[]}function w(F,j,B){try{r[F][j]=B/1e3}catch(N){E.error(N)}}return i={getServiceDescriptionSettings:function(){return r},getProducerReferenceTimeOffsets:function(){return l},calculateProducerReferenceTimeOffsets:function(F){try{var j=[];if(F&&F.length>0){var B=[t.Z.VIDEO,t.Z.AUDIO,t.Z.TEXT],N=R.getAvailabilityStartTime()/1e3;F.forEach(function(U){var Z=B.reduce(function(le,ne){return le.concat(R.getAllMediaInfoForType(U,ne))},[]).reduce(function(le,ne){return R.getProducerReferenceTimes(U,ne).forEach(function(ue){var fe=R.getVoRepresentations(ne);if(fe&&fe.length>0&&fe[0].adaptation&&fe[0].segmentInfoType===e.Z.SEGMENT_TEMPLATE){var G=fe[0],ie=new Date(ue[e.Z.WALL_CLOCK_TIME]).getTime()/1e3-(ue[e.Z.PRESENTATION_TIME]/G[e.Z.TIMESCALE]-G[e.Z.PRESENTATION_TIME_OFFSET]+U.start),Y=N-ie;le.push({id:ue[e.Z.ID],to:Y})}}),le},[]);j=j.concat(Z)})}l=j}catch(U){E.error(U),l=[]}},applyServiceDescription:function(F){if(F&&F.serviceDescriptions){var j=F.serviceDescriptions.filter(function(U){return No.includes(U.schemeIdUri)}),B=F.serviceDescriptions.filter(function(U){return U.schemeIdUri==null}),N=j.length>0?j[j.length-1]:B[B.length-1];N&&(N.latency&&N.latency.target>0&&function(U){var Z;if(U.schemeIdUri,t.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,Z=function(fe){return{liveDelay:fe.latency.target/1e3,maxDrift:!isNaN(fe.latency.max)&&fe.latency.max>fe.latency.target?(fe.latency.max-fe.latency.target+500)/1e3:NaN,referenceId:fe.latency.referenceId||NaN}}(U),l.length>0){var le=function(fe){var G,ie=0,Y=l.filter(function(ce){return ce.id===fe.referenceId});return Y.length===0?(ie=l.length>0?l[0].to:0,G=l[0].id||NaN):(ie=Y[0].to||0,G=Y[0].id||NaN),{to:ie,id:G}}(Z),ne=le.to,ue=le.id;r.liveDelay=Z.liveDelay-ne,r.liveCatchup.maxDrift=Z.maxDrift,E.debug(`
                Found latency properties coming from service description. Applied time offset of `.concat(ne," from ProducerReferenceTime element with id ").concat(ue,`.
                Live Delay: `).concat(Z.liveDelay-ne,", Live catchup max drift: ").concat(Z.maxDrift,`
            `))}else r.liveDelay=Z.liveDelay,r.liveCatchup.maxDrift=Z.maxDrift,E.debug("Found latency properties coming from service description: Live Delay: ".concat(Z.liveDelay,", Live catchup max drift: ").concat(Z.maxDrift))}(N),N.playbackRate&&function(U){var Z=U.playbackRate.min?Math.round(1e3*(U.playbackRate.min-1))/1e3:NaN,le=U.playbackRate.max?Math.round(1e3*(U.playbackRate.max-1))/1e3:NaN;r.liveCatchup.playbackRate.min=Z,r.liveCatchup.playbackRate.max=le,E.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(Z)),E.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(le))}(N),N.operatingQuality,N.operatingBandwidth&&function(U){if(U&&U.operatingBandwidth&&U.operatingBandwidth.mediaType&&U.operatingBandwidth.mediaType!=="all"){var Z={};Z.minBandwidth=U.operatingBandwidth.min,Z.maxBandwidth=U.operatingBandwidth.max,Z.targetBandwidth=U.operatingBandwidth.target;var le=[];U.operatingBandwidth.mediaType===fa||U.operatingBandwidth.mediaType===da?le.push(U.operatingBandwidth.mediaType):U.operatingBandwidth.mediaType==="any"&&(le.push(da),le.push(fa)),le.forEach(function(ne){isNaN(Z.minBandwidth)||w("minBitrate",ne,Z.minBandwidth),isNaN(Z.maxBandwidth)||w("maxBitrate",ne,Z.maxBandwidth),isNaN(Z.targetBandwidth)||w("initialBitrate",ne,Z.targetBandwidth)})}}(N),N.contentSteering&&function(U){r.contentSteering=U.contentSteering}(N))}},reset:function(){h()},setConfig:function(F){F&&F.adapter&&(R=F.adapter)}},E=(0,m.Z)(A).getInstance().getLogger(i),h(),i}ga.__dashjs_factory_name="ServiceDescriptionController";var Co=_.Z.getSingletonFactory(ga),Do=M(3973),oi=M.n(Do),ha=M(3039);function Oi(){var i,r,l,E,R,A,h,w,F=this.context,j=(0,p.Z)(F).getInstance();function B(L,J){return L&&l[J]&&l[J][L]?l[J][L].list:[]}function N(L,J){return L&&l[J]&&l[J][L]?l[J][L].current:null}function U(L){var J=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(L&&L.streamInfo){var pe=L.type,Ne=L.streamInfo,Se=Ne.id,Ce=N(pe,Se);if(l[Se]&&l[Se][pe]&&(l[Se][pe].current=L,l[Se][pe].current&&(pe!==t.Z.TEXT&&!ne(L,Ce)||pe===t.Z.TEXT&&L.isFragmented)&&j.trigger(u.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:Ce,newMediaInfo:L,switchMode:E.get().streaming.trackSwitchMode[pe]},{streamId:Se}),!J)){var Re=fe(L);if(!Re||!l[Se][pe].storeLastSettings)return;Re.roles&&(Re.role=Re.roles[0],delete Re.roles),Re.accessibility&&(Re.accessibility=Re.accessibility[0]),Re.audioChannelConfiguration&&(Re.audioChannelConfiguration=Re.audioChannelConfiguration[0]),A[pe]=Re,w.setSavedMediaSettings(pe,Re)}}}function Z(L,J){L&&J&&(R[L]=J)}function le(L){return L?R[L]:null}function ne(L,J){if(!L&&!J)return!0;if(!L||!J)return!1;var pe=L.id===J.id,Ne=L.viewpoint===J.viewpoint,Se=JSON.stringify(L.viewpointsWithSchemeIdUri)===JSON.stringify(J.viewpointsWithSchemeIdUri),Ce=L.lang===J.lang,Re=L.codec===J.codec,$e=L.roles.toString()===J.roles.toString(),nt=JSON.stringify(L.rolesWithSchemeIdUri)===JSON.stringify(J.rolesWithSchemeIdUri),We=L.accessibility.toString()===J.accessibility.toString(),Qe=JSON.stringify(L.accessibilitiesWithSchemeIdUri)===JSON.stringify(J.accessibilitiesWithSchemeIdUri),Ct=L.audioChannelConfiguration.toString()===J.audioChannelConfiguration.toString(),ve=JSON.stringify(L.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(J.audioChannelConfigurationsWithSchemeIdUri);return pe&&Re&&Ne&&Se&&Ce&&$e&&nt&&We&&Qe&&Ct&&ve}function ue(){l={},A={},R={audio:null,video:null,text:null}}function fe(L){var J={lang:L.lang,viewpoint:L.viewpoint,roles:L.roles,accessibility:L.accessibility,audioChannelConfiguration:L.audioChannelConfiguration,codec:L.codec};return J.lang||J.viewpoint||J.role&&J.role.length>0||J.accessibility&&J.accessibility.length>0||J.audioChannelConfiguration&&J.audioChannelConfiguration.length>0?J:null}function G(L,J,pe){var Ne=[];return L.forEach(function(Se){J(pe,Se)&&Ne.push(Se)}),Ne.length!==0?Ne:L}function ie(L,J){try{return!L.lang||L.lang instanceof RegExp?J.lang.match(L.lang):J.lang!==""&&(0,ha.extendedFilter)(J.lang,oi()(L.lang)).length>0}catch{return!1}}function Y(L,J){return L.index===void 0||L.index===null||J.index===L.index}function ce(L,J){return!L.viewpoint||L.viewpoint===J.viewpoint}function g(L,J){var pe=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Ne=!L.role||!!J.roles.filter(function(Se){return Se===L.role})[0];return Ne||J.type===t.Z.AUDIO&&pe}function P(L,J){return L.accessibility?!!J.accessibility.filter(function(pe){return pe===L.accessibility})[0]:!J.accessibility.length}function C(L,J){return!L.audioChannelConfiguration||!!J.audioChannelConfiguration.filter(function(pe){return pe===L.audioChannelConfiguration})[0]}function D(L,J){return!L.codec||L.codec===J.codec}function b(L){var J,pe=0,Ne=[];return L.forEach(function(Se){(J=Math.max.apply(Math,Se.bitrateList.map(function(Ce){return Ce.bandwidth})))>pe?(pe=J,Ne=[Se]):J===pe&&Ne.push(Se)}),Ne}function te(L){var J,pe=1/0,Ne=[];return L.forEach(function(Se){var Ce=Se.bitrateList.reduce(function(Re,$e){var nt=Math.max(1,$e.width*$e.height);return Re+$e.bandwidth/nt},0);(J=Ce/Se.bitrateList.length)<pe?(pe=J,Ne=[Se]):J===pe&&Ne.push(Se)}),Ne}function z(L){var J,pe=0,Ne=[];return L.forEach(function(Se){(J=Se.representationCount)>pe?(pe=J,Ne=[Se]):J===pe&&Ne.push(Se)}),Ne}function ae(L,J){if(L===t.Z.TEXT)return J[0];var pe,Ne=E.get().streaming.selectionModeForInitialTrack,Se=h.getCustomInitialTrackSelectionFunction();if(Se&&typeof Se=="function")pe=Se(J);else switch(Ne){case t.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:pe=function(Ce){var Re,$e,nt=(Re=0,$e=[],Ce.forEach(function(We){isNaN(We.selectionPriority)||(We.selectionPriority>Re?(Re=We.selectionPriority,$e=[We]):We.selectionPriority===Re&&$e.push(We))}),$e);return nt.length>1&&(nt=b(nt)),nt.length>1&&(nt=z(nt)),nt}(J);break;case t.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:pe=function(Ce){var Re=b(Ce);return Re.length>1&&(Re=z(Re)),Re}(J);break;case t.Z.TRACK_SELECTION_MODE_FIRST_TRACK:pe=Q(J);break;case t.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:pe=function(Ce){var Re=te(Ce);return Re.length>1&&(Re=b(Re)),Re}(J);break;case t.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:pe=function(Ce){var Re=z(Ce);return Re.length>1&&(Re=b(Ce)),Re}(J);break;default:r.warn("Track selection mode ".concat(Ne," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),pe=Q(J)}return pe.length>0?pe[0]:J[0]}function Q(L){return L[0]}return i={setInitialMediaSettingsForType:function(L,J){var pe=A[L]||le(L),Ne=B(L,J.id),Se=[];pe||((pe=w.getSavedMediaSettings(L))&&delete pe.codec,Z(L,pe)),Ne&&Ne.length!==0&&(pe&&(Se=G(Se=Array.from(Ne),ie,pe),Se=G(Se,Y,pe),Se=G(Se,ce,pe),L===t.Z.AUDIO&&A[L]||(Se=G(Se,g,pe)),Se=G(Se,P,pe),Se=G(Se,C,pe),Se=G(Se,D,pe)),Se.length===0?U(ae(L,Ne),!0):Se.length>1?U(ae(L,Se)):U(Se[0]))},addTrack:function(L){if(L){var J=L.type;if((pe=J)===t.Z.AUDIO||pe===t.Z.VIDEO||pe===t.Z.TEXT||pe===t.Z.IMAGE){var pe,Ne,Se=L.streamInfo.id;l[Se]||(l[Se]={audio:{list:[],storeLastSettings:Ne=E.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:Ne,current:null},text:{list:[],storeLastSettings:Ne,current:null},image:{list:[],storeLastSettings:Ne,current:null}});for(var Ce=l[Se][J].list,Re=0,$e=Ce.length;Re<$e;++Re)if(ne(Ce[Re],L))return;Ce.push(L)}}},getTracksFor:B,getCurrentTrackFor:N,isCurrentTrack:function(L){if(!L)return!1;var J=L.type,pe=L.streamInfo.id;return l[pe]&&l[pe][J]&&ne(l[pe][J].current,L)},setTrack:U,selectInitialTrack:ae,setInitialSettings:Z,getInitialSettings:le,getTracksWithHighestBitrate:b,getTracksWithHighestEfficiency:te,getTracksWithWidestRange:z,isTracksEqual:ne,matchSettings:function(L,J){var pe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var Ne=!1;if(L.lang){if(L.lang instanceof RegExp)Ne=J.lang.match(L.lang);else if(J.lang!==""){var Se=oi()(L.lang);Se&&(Ne=(0,ha.extendedFilter)(J.lang,Se).length>0)}}else Ne=!0;var Ce=L.index===void 0||L.index===null||J.index===L.index,Re=!L.viewpoint||L.viewpoint===J.viewpoint,$e=!L.role||!!J.roles.filter(function(Qe){return Qe===L.role})[0],nt=!L.accessibility||!!J.accessibility.filter(function(Qe){return Qe===L.accessibility})[0],We=!L.audioChannelConfiguration||!!J.audioChannelConfiguration.filter(function(Qe){return Qe===L.audioChannelConfiguration})[0];return Ne&&Ce&&Re&&($e||J.type===t.Z.AUDIO&&pe)&&nt&&We}catch{return!1}},matchSettingsLang:ie,matchSettingsIndex:Y,matchSettingsViewPoint:ce,matchSettingsRole:g,matchSettingsAccessibility:P,matchSettingsAudioChannelConfig:C,saveTextSettingsDisabled:function(){w.setSavedMediaSettings(t.Z.TEXT,null)},setConfig:function(L){L&&(L.domStorage&&(w=L.domStorage),L.settings&&(E=L.settings),L.customParametersModel&&(h=L.customParametersModel))},reset:ue},r=(0,m.Z)(F).getInstance().getLogger(i),ue(),i}Oi.__dashjs_factory_name="MediaController";var ma=_.Z.getSingletonFactory(Oi);_.Z.updateSingletonFactory(Oi.__dashjs_factory_name,ma);var Oo=ma,si=NaN,pa=function i(r,l){(function(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")})(this,i),this.data={baseUrls:r||null,selectedIdx:l||si},this.children=[]};function ya(){var i,r,l,E,R=this.context,A=Ot(R).getInstance();function h(B,N,U){var Z=w(U);B[N]?A.areEqual(Z,B[N].data.baseUrls)||(B[N].data.baseUrls=Z,B[N].data.selectedIdx=si):B[N]=new pa(Z)}function w(B){var N=l.getBaseURLsFromElement(B),U=E.getSynthesizedBaseUrlElements(N);return U&&U.length>0&&(N=N.concat(U)),N}function F(B,N){var U=N||r;B(U.data),U.children&&U.children.forEach(function(Z){return F(B,Z)})}function j(){r=new pa}return i={reset:j,update:function(B){(function(N){(function(){if(!l||!l.hasOwnProperty("getBaseURLsFromElement")||!l.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var U=w(N);A.areEqual(U,r.data.baseUrls)||(r.data.baseUrls=U,r.data.selectedIdx=si),N&&N.Period_asArray&&N.Period_asArray.forEach(function(Z,le){h(r.children,le,Z),Z.AdaptationSet_asArray&&Z.AdaptationSet_asArray.forEach(function(ne,ue){h(r.children[le].children,ue,ne),ne.Representation_asArray&&ne.Representation_asArray.sort(l.getRepresentationSortFunction()).forEach(function(fe,G){h(r.children[le].children[ue].children,G,fe)})})})})(B)},getForPath:function(B){var N=r,U=[N.data];return B&&B.forEach(function(Z){(N=N.children[Z])&&U.push(N.data)}),U.filter(function(Z){return Z.baseUrls.length})},invalidateSelectedIndexes:function(B){F(function(N){isNaN(N.selectedIdx)||B===N.baseUrls[N.selectedIdx].serviceLocation&&(N.selectedIdx=si)})},setConfig:function(B){B.adapter&&(l=B.adapter),B.contentSteeringController&&(E=B.contentSteeringController)},getBaseUrls:function(B){return w(B)}},j(),i}ya.__dashjs_factory_name="BaseURLTreeModel";var Mo=_.Z.getClassFactory(ya);function Ea(i){var r=(i=i||{}).blacklistController;return{select:function(l){return l&&function(R){var A,h,w=0,F=[],j=0;if((h=R.sort(function(B,N){var U=B.dvbPriority-N.dvbPriority;return isNaN(U)?0:U}).filter(function(B,N,U){return!N||U[0].dvbPriority&&B.dvbPriority&&U[0].dvbPriority===B.dvbPriority})).length)return h.length>1&&(h.forEach(function(B){w+=B.dvbWeight,F.push(w)}),A=Math.floor(Math.random()*(w-1)),F.every(function(B,N){return j=N,!(A<B)})),h[j]}((E=[],l.filter(function(R){return!r.contains(R.serviceLocation)||(R.dvbPriority&&E.push(R.dvbPriority),!1)}).filter(function(R){return!E.length||!R.dvbPriority||E.indexOf(R.dvbPriority)===-1})));var E}}}Ea.__dashjs_factory_name="DVBSelector";var Po=_.Z.getClassFactory(Ea);function va(i){var r=(i=i||{}).blacklistController;return{select:function(l){var E,R=0;return l&&l.some(function(A,h){return R=h,!r.contains(A.serviceLocation)})&&(E=l[R]),E}}}va.__dashjs_factory_name="BasicSelector";var Lo=_.Z.getClassFactory(va);function _a(){var i,r,l,E=this.context;function R(){for(var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],w=0,F=NaN,j=function(){var N=A[w],U=h.findIndex(function(Z){return Z.serviceLocation&&Z.serviceLocation===N});if(U!==-1&&!l.contains(h[U].serviceLocation))return F=U,"break";w+=1};w<A.length;){var B=j();if(B==="break")break}return F}return i={selectBaseUrlIndex:function(A){var h=NaN;if(isNaN(A.selectedIdx)){var w=r.getSteeringDataFromManifest();w&&w.defaultServiceLocationArray.length>0&&(h=R(w.defaultServiceLocationArray,A.baseUrls))}var F=r.getCurrentSteeringResponseData();return A.baseUrls&&A.baseUrls.length&&F&&F.pathwayPriority&&F.pathwayPriority.length&&(h=R(F.pathwayPriority,A.baseUrls)),h},setConfig:function(A){A.blacklistController&&(l=A.blacklistController),A.contentSteeringController&&(r=A.contentSteeringController)}},r=ar(E).getInstance(),i}_a.__dashjs_factory_name="ContentSteeringSelector";var Fo=_.Z.getClassFactory(_a);function Ta(){var i,r,l,E,R,A,h=this.context,w=(0,p.Z)(h).getInstance(),F=(0,Ie.Z)(h).getInstance();function j(){r.reset()}return i={chooseSelector:function(B){(0,W.PS)(B,"boolean"),A=B?E:l},select:function(B){if(B){if(F.get().streaming.applyContentSteering){var N=R.selectBaseUrlIndex(B);isNaN(N)||N===-1||(B.selectedIdx=N)}if(!isNaN(B.selectedIdx))return B.baseUrls[B.selectedIdx];var U=A.select(B.baseUrls);return U?(B.selectedIdx=B.baseUrls.indexOf(U),U):(w.trigger(u.Z.URL_RESOLUTION_FAILED,{error:new re.Z(X.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,X.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(A===l&&j()))}},reset:j,setConfig:function(B){B.selector&&(A=B.selector),B.contentSteeringSelector&&(R=B.contentSteeringSelector)}},r=Pr(h).create({updateEventName:u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),l=Lo(h).create({blacklistController:r}),E=Po(h).create({blacklistController:r}),(R=Fo(h).create()).setConfig({blacklistController:r}),A=l,i}Ta.__dashjs_factory_name="BaseURLSelector";var xo=_.Z.getClassFactory(Ta);function Sa(){var i,r,l,E,R,A=this.context,h=(0,p.Z)(A).getInstance(),w=(0,ze.Z)(A).getInstance();function F(B){l.update(B),E.chooseSelector(r.getIsDVB(B)),h.trigger(n.Z.BASE_URLS_UPDATED,{baseUrls:j(B)})}function j(B){return l.getBaseUrls(B)}return i={reset:function(){l.reset(),E.reset()},initialize:function(B){l.setConfig({adapter:r,contentSteeringController:R}),F(B)},resolve:function(B){var N=l.getForPath(B).reduce(function(U,Z){var le=E.select(Z);return le?(w.isRelative(le.url)?U.url=w.resolve(le.url,U.url):(U.url=le.url,U.serviceLocation=le.serviceLocation),U.availabilityTimeOffset=le.availabilityTimeOffset,U.availabilityTimeComplete=le.availabilityTimeComplete,U.queryParams=le.queryParams,U):new nr},new nr);if(!w.isRelative(N.url))return N},setConfig:function(B){B.baseURLTreeModel&&(l=B.baseURLTreeModel),B.baseURLSelector&&(E=B.baseURLSelector),B.adapter&&(r=B.adapter),B.contentSteeringController&&(R=B.contentSteeringController)},getBaseUrls:j,update:F},l=Mo(A).create(),E=xo(A).create(),h.on(u.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(B){l.invalidateSelectedIndexes(B.entry)},i),i}Sa.__dashjs_factory_name="BaseURLController";var ko=_.Z.getClassFactory(Sa);function Mi(i){return Mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Mi(i)}function Pi(i,r){return Pi=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Pi(i,r)}function Zo(i,r){return!r||Mi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function ui(i){return ui=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ui(i)}var ba=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Pi(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=ui(r);if(l){var w=ui(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Zo(this,A)});function R(A,h){var w;return function(F,j){if(!(F instanceof j))throw new TypeError("Cannot call a class as a function")}(this,R),(w=E.call(this)).url=A||null,w.type=h||null,w.mediaType=t.Z.STREAM,w.responseType="",w}return R}(I.Z);function Aa(i){i=i||{};var r=this.context,l=(0,p.Z)(r).getInstance(),E=Wn(r).create({errHandler:i.errHandler,dashMetrics:i.dashMetrics,mediaPlayerModel:i.mediaPlayerModel,requestModifier:i.requestModifier,errors:X});return{load:function(R,A,h){var w=function(j,B){A.resolved=!0,A.resolvedContent=j||null,l.trigger(u.Z.XLINK_ELEMENT_LOADED,{element:A,resolveObject:h,error:j||B?null:new re.Z(X.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,X.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+R)})};if(R==="urn:mpeg:dash:resolve-to-zero:2013")w(null,!0);else{var F=new ba(R,Le.w.XLINK_EXPANSION_TYPE);E.load({request:F,success:function(j){w(j)},error:function(){w(null)}})}},reset:function(){E&&(E.abort(),E=null)}}}Aa.__dashjs_factory_name="XlinkLoader";var Uo=_.Z.getClassFactory(Aa),Ia=function(i){(i=i||{}).escapeMode===void 0&&(i.escapeMode=!0),i.attributePrefix===void 0&&(i.attributePrefix="_"),i.arrayAccessForm=i.arrayAccessForm||"none",i.emptyNodeForm=i.emptyNodeForm||"text",i.enableToStringFunc===void 0&&(i.enableToStringFunc=!0),i.arrayAccessFormPaths=i.arrayAccessFormPaths||[],i.skipEmptyTextNodesForObj===void 0&&(i.skipEmptyTextNodesForObj=!0),i.stripWhitespaces===void 0&&(i.stripWhitespaces=!0),i.datetimeAccessFormPaths=i.datetimeAccessFormPaths||[],i.useDoubleQuotes===void 0&&(i.useDoubleQuotes=!1),i.xmlElementsFilter=i.xmlElementsFilter||[],i.jsonPropertiesFilter=i.jsonPropertiesFilter||[],i.keepCData===void 0&&(i.keepCData=!1),i.ignoreRoot===void 0&&(i.ignoreRoot=!1);function r(G){var ie=G.localName;return ie==null&&(ie=G.baseName),ie!=null&&ie!=""||(ie=G.nodeName),ie}function l(G){return typeof G=="string"?G.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):G}function E(G,ie,Y,ce){for(var g=0;g<G.length;g++){var P=G[g];if(typeof P=="string"){if(P==ce)break}else if(P instanceof RegExp){if(P.test(ce))break}else if(typeof P=="function"&&P(ie,Y,ce))break}return g!=G.length}function R(G,ie,Y){i.arrayAccessForm==="property"&&(G[ie]instanceof Array?G[ie+"_asArray"]=G[ie]:G[ie+"_asArray"]=[G[ie]]),!(G[ie]instanceof Array)&&i.arrayAccessFormPaths.length>0&&E(i.arrayAccessFormPaths,G,ie,Y)&&(G[ie]=[G[ie]])}function A(G){var ie=G.split(/[-T:+Z]/g),Y=new Date(ie[0],ie[1]-1,ie[2]),ce=ie[5].split(".");if(Y.setHours(ie[3],ie[4],ce[0]),ce.length>1&&Y.setMilliseconds(ce[1]),ie[6]&&ie[7]){var g=60*ie[6]+Number(ie[7]);g=0+((/\d\d-\d\d:\d\d$/.test(G)?"-":"+")=="-"?-1*g:g),Y.setMinutes(Y.getMinutes()-g-Y.getTimezoneOffset())}else G.indexOf("Z",G.length-1)!==-1&&(Y=new Date(Date.UTC(Y.getFullYear(),Y.getMonth(),Y.getDate(),Y.getHours(),Y.getMinutes(),Y.getSeconds(),Y.getMilliseconds())));return Y}function h(G,ie,Y,ce){return!(ie==1&&i.xmlElementsFilter.length>0)||E(i.xmlElementsFilter,G,Y,ce)}function w(G,ie){if(G.nodeType==9){for(var Y=new Object,ce=G.childNodes,g=0;g<ce.length;g++)(C=ce[g]).nodeType==1&&(i.ignoreRoot?Y=w(C):(Y={})[D=r(C)]=w(C));return Y}if(G.nodeType==1){(Y=new Object).__cnt=0;var P=[];for(ce=G.childNodes,g=0;g<ce.length;g++){var C,D=r(C=ce[g]);if(C.nodeType!=8){var b=ie+"."+D;if(h(Y,C.nodeType,D,b))if(Y.__cnt++,Y[D]==null){var te=w(C,b);(D!="#text"||/[^\s]/.test(te))&&((z={})[D]=te,P.push(z)),Y[D]=te,R(Y,D,b)}else{var z;Y[D]!=null&&(Y[D]instanceof Array||(Y[D]=[Y[D]],R(Y,D,b))),te=w(C,b),(D!="#text"||/[^\s]/.test(te))&&((z={})[D]=te,P.push(z)),Y[D][Y[D].length]=te}}}Y.__children=P;for(var ae=r(G),Q=0;Q<G.attributes.length;Q++){var L=G.attributes[Q];Y.__cnt++;for(var J=L.value,pe=0,Ne=i.matchers.length;pe<Ne;pe++){var Se=i.matchers[pe];Se.test(L,ae)&&(J=Se.converter(L.value))}Y[i.attributePrefix+L.name]=J}var Ce=function(Re){return Re.prefix}(G);return Ce!=null&&Ce!=""&&(Y.__cnt++,Y.__prefix=Ce),Y["#text"]!=null&&(Y.__text=Y["#text"],Y.__text instanceof Array&&(Y.__text=Y.__text.join(`
`)),i.stripWhitespaces&&(Y.__text=Y.__text.trim()),delete Y["#text"],i.arrayAccessForm=="property"&&delete Y["#text_asArray"],Y.__text=function(Re,$e,nt){if(i.datetimeAccessFormPaths.length>0){var We=nt.split(".#")[0];return E(i.datetimeAccessFormPaths,Re,$e,We)?A(Re):Re}return Re}(Y.__text,D,ie+"."+D)),Y["#cdata-section"]!=null&&(Y.__cdata=Y["#cdata-section"],delete Y["#cdata-section"],i.arrayAccessForm=="property"&&delete Y["#cdata-section_asArray"]),Y.__cnt==0&&i.emptyNodeForm=="text"?Y="":Y.__cnt==1&&Y.__text!=null?Y=Y.__text:Y.__cnt!=1||Y.__cdata==null||i.keepCData?Y.__cnt>1&&Y.__text!=null&&i.skipEmptyTextNodesForObj&&(i.stripWhitespaces&&Y.__text==""||Y.__text.trim()=="")&&delete Y.__text:Y=Y.__cdata,delete Y.__cnt,!i.enableToStringFunc||Y.__text==null&&Y.__cdata==null||(Y.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),Y}if(G.nodeType==3||G.nodeType==4)return G.nodeValue}function F(G,ie,Y,ce){var g="<"+(G!=null&&G.__prefix!=null?G.__prefix+":":"")+ie;if(Y!=null)for(var P=0;P<Y.length;P++){var C=Y[P],D=G[C];i.escapeMode&&(D=l(D)),g+=" "+C.substr(i.attributePrefix.length)+"=",i.useDoubleQuotes?g+='"'+D+'"':g+="'"+D+"'"}return g+(ce?"/>":">")}function j(G,ie){return"</"+(G.__prefix!=null?G.__prefix+":":"")+ie+">"}function B(G,ie){return i.arrayAccessForm=="property"&&(ce="_asArray",(Y=ie.toString()).indexOf(ce,Y.length-ce.length)!==-1)||ie.toString().indexOf(i.attributePrefix)==0||ie.toString().indexOf("__")==0||G[ie]instanceof Function;var Y,ce}function N(G){var ie=0;if(G instanceof Object)for(var Y in G)B(G,Y)||ie++;return ie}function U(G,ie,Y){return i.jsonPropertiesFilter.length==0||Y==""||E(i.jsonPropertiesFilter,G,ie,Y)}function Z(G){var ie=[];if(G instanceof Object)for(var Y in G)Y.toString().indexOf("__")==-1&&Y.toString().indexOf(i.attributePrefix)==0&&ie.push(Y);return ie}function le(G){var ie="";return G instanceof Object?ie+=function(Y){var ce="";return Y.__cdata!=null&&(ce+="<![CDATA["+Y.__cdata+"]]>"),Y.__text!=null&&(i.escapeMode?ce+=l(Y.__text):ce+=Y.__text),ce}(G):G!=null&&(i.escapeMode?ie+=l(G):ie+=G),ie}function ne(G,ie){return G===""?ie:G+"."+ie}function ue(G,ie,Y,ce){var g="";if(G.length==0)g+=F(G,ie,Y,!0);else for(var P=0;P<G.length;P++)g+=F(G[P],ie,Z(G[P]),!1),g+=fe(G[P],ne(ce,ie)),g+=j(G[P],ie);return g}function fe(G,ie){var Y="";if(N(G)>0){for(var ce in G)if(!B(G,ce)&&(ie==""||U(G,ce,ne(ie,ce)))){var g=G[ce],P=Z(g);g==null||g==null?Y+=F(g,ce,P,!0):g instanceof Object?g instanceof Array?Y+=ue(g,ce,P,ie):g instanceof Date?(Y+=F(g,ce,P,!1),Y+=g.toISOString(),Y+=j(g,ce)):N(g)>0||g.__text!=null||g.__cdata!=null?(Y+=F(g,ce,P,!1),Y+=fe(g,ne(ie,ce)),Y+=j(g,ce)):Y+=F(g,ce,P,!0):(Y+=F(g,ce,P,!1),Y+=le(g),Y+=j(g,ce))}}return Y+le(G)}this.parseXmlString=function(G){var ie;if(G===void 0)return null;if(window.DOMParser){var Y=new window.DOMParser;try{(ie=Y.parseFromString(G,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(ie=null)}catch{ie=null}}else G.indexOf("<?")==0&&(G=G.substr(G.indexOf("?>")+2)),(ie=new ActiveXObject("Microsoft.XMLDOM")).async="false",ie.loadXML(G);return ie},this.asArray=function(G){return G===void 0||G==null?[]:G instanceof Array?G:[G]},this.toXmlDateTime=function(G){return G instanceof Date?G.toISOString():typeof G=="number"?new Date(G).toISOString():null},this.asDateTime=function(G){return typeof G=="string"?A(G):G},this.xml2json=function(G){return w(G)},this.xml_str2json=function(G){var ie=this.parseXmlString(G);return ie!=null?this.xml2json(ie):null},this.json2xml_str=function(G){return fe(G,"")},this.json2xml=function(G){var ie=this.json2xml_str(G);return this.parseXmlString(ie)},this.getVersion=function(){return"1.2.0"}},xr="onLoad";function Ra(i){i=i||{};var r,l,E,R,A,h,w=this.context,F=(0,p.Z)(w).getInstance(),j=(0,ze.Z)(w).getInstance();function B(ne,ue,fe){var G,ie,Y={};Y.elements=ne,Y.type=ue,Y.resolveType=fe,Y.elements.length===0&&U(Y);for(var ce=0;ce<Y.elements.length;ce++)G=Y.elements[ce],ie=j.isHTTPURL(G.url)?G.url:G.originalContent.BaseURL+G.url,h.load(ie,G,Y)}function N(ne){var ue,fe,G="";if(ue=ne.element,fe=ne.resolveObject,ue.resolvedContent){var ie=0;ue.resolvedContent.indexOf("<?xml")===0&&(ie=ue.resolvedContent.indexOf("?>")+2),G=ue.resolvedContent.substr(0,ie)+"<response>"+ue.resolvedContent.substr(ie)+"</response>",ue.resolvedContent=A.xml_str2json(G)}(function(Y){var ce;for(ce=0;ce<Y.elements.length;ce++)if(Y.elements[ce].resolved===!1)return!1;return!0})(fe)&&U(fe)}function U(ne){var ue,fe,G=[];if(function(ie){var Y,ce,g,P,C,D,b=[];for(P=ie.elements.length-1;P>=0;P--){if(ce=(Y=ie.elements[P]).type+"_asArray",Y.resolvedContent){if(Y.resolvedContent)for(C=0;C<Y.resolvedContent[ce].length;C++)g=Y.resolvedContent[ce][C],b.push(g)}else delete Y.originalContent["xlink:actuate"],delete Y.originalContent["xlink:href"],b.push(Y.originalContent);for(Y.parentElement[ce].splice(Y.index,1),D=0;D<b.length;D++)Y.parentElement[ce].splice(Y.index+D,0,b[D]);b=[]}ie.elements.length>0&&E.run(R)}(ne),ne.resolveType==="onActuate"&&F.trigger(u.Z.XLINK_READY,{manifest:R}),ne.resolveType===xr)switch(ne.type){case e.Z.PERIOD:for(ue=0;ue<R[e.Z.PERIOD+"_asArray"].length;ue++)(fe=R[e.Z.PERIOD+"_asArray"][ue]).hasOwnProperty(e.Z.ADAPTATION_SET+"_asArray")&&(G=G.concat(Z(fe[e.Z.ADAPTATION_SET+"_asArray"],fe,e.Z.ADAPTATION_SET,xr))),fe.hasOwnProperty(e.Z.EVENT_STREAM+"_asArray")&&(G=G.concat(Z(fe[e.Z.EVENT_STREAM+"_asArray"],fe,e.Z.EVENT_STREAM,xr)));B(G,e.Z.ADAPTATION_SET,xr);break;case e.Z.ADAPTATION_SET:F.trigger(u.Z.XLINK_READY,{manifest:R})}}function Z(ne,ue,fe,G){var ie,Y,ce,g=[];for(Y=ne.length-1;Y>=0;Y--)(ie=ne[Y]).hasOwnProperty("xlink:href")&&ie["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&ne.splice(Y,1);for(Y=0;Y<ne.length;Y++)(ie=ne[Y]).hasOwnProperty("xlink:href")&&ie.hasOwnProperty("xlink:actuate")&&ie["xlink:actuate"]===G&&(ce=le(ie["xlink:href"],ue,fe,Y,G,ie),g.push(ce));return g}function le(ne,ue,fe,G,ie,Y){return{url:ne,parentElement:ue,type:fe,index:G,resolveType:ie,originalContent:Y,resolvedContent:null,resolved:!1}}return r={resolveManifestOnLoad:function(ne){A=new Ia({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:l}),(R=ne).Period_asArray?B(Z(R.Period_asArray,R,e.Z.PERIOD,xr),e.Z.PERIOD,xr):F.trigger(u.Z.XLINK_READY,{manifest:R})},setMatchers:function(ne){ne&&(l=ne)},setIron:function(ne){ne&&(E=ne)},reset:function(){F.off(u.Z.XLINK_ELEMENT_LOADED,N,r),h&&(h.reset(),h=null)}},F.on(u.Z.XLINK_ELEMENT_LOADED,N,r),h=Uo(w).create({errHandler:i.errHandler,dashMetrics:i.dashMetrics,mediaPlayerModel:i.mediaPlayerModel,requestModifier:i.requestModifier,settings:i.settings}),r}Ra.__dashjs_factory_name="XlinkController";var Bo=_.Z.getClassFactory(Ra);function jr(i){return jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},jr(i)}function wa(i){function r(R,A){for(var h in R)A.hasOwnProperty(h)||(A[h]=R[h])}function l(R,A,h){for(var w=0,F=R.length;w<F;++w){var j=R[w];if(A[j.name])if(h[j.name]){if(j.merge){var B=A[j.name],N=h[j.name];jr(B)==="object"&&jr(N)==="object"?r(B,N):h[j.name]=B+N}}else h[j.name]=A[j.name]}}function E(R,A){for(var h=0,w=R.children.length;h<w;++h){var F=R.children[h],j=A[F.name+"_asArray"];if(j)for(var B=0,N=j.length;B<N;++B){var U=j[B];l(R.properties,A,U),E(F,U)}}}return{run:function(R){if(R===null||jr(R)!=="object")return R;if(R.Period_asArray&&"period"in i)for(var A=i.period,h=R.Period_asArray,w=0,F=h.length;w<F;++w){var j=h[w];if(E(A,j),"adaptationset"in i){var B=j.AdaptationSet_asArray;if(B)for(var N=i.adaptationset,U=0,Z=B.length;U<Z;++U)E(N,B[U])}}return R}}}wa.__dashjs_factory_name="ObjectIron";var Go=_.Z.getClassFactory(wa);function qo(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var Hr=function(){function i(E,R){(function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")})(this,i),this._test=E,this._converter=R}var r,l;return r=i,(l=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&qo(r.prototype,l),i}();function Li(i){return Li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Li(i)}function Dn(i,r,l){return r in i?Object.defineProperty(i,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[r]=l,i}function Fi(i,r){return Fi=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Fi(i,r)}function Yo(i,r){return!r||Li(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function li(i){return li=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},li(i)}var jo=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Fi(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=li(r);if(l){var w=li(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Yo(this,A)});function R(){return function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")}(this,R),E.call(this,function(A,h){var w,F=(Dn(w={},e.Z.MPD,[e.Z.ID,e.Z.PROFILES]),Dn(w,e.Z.PERIOD,[e.Z.ID]),Dn(w,e.Z.BASE_URL,[e.Z.SERVICE_LOCATION,e.Z.BYTE_RANGE]),Dn(w,e.Z.SEGMENT_BASE,[e.Z.INDEX_RANGE]),Dn(w,e.Z.INITIALIZATION,[e.Z.RANGE]),Dn(w,e.Z.REPRESENTATION_INDEX,[e.Z.RANGE]),Dn(w,e.Z.SEGMENT_LIST,[e.Z.INDEX_RANGE]),Dn(w,e.Z.BITSTREAM_SWITCHING,[e.Z.RANGE]),Dn(w,e.Z.SEGMENT_URL,[e.Z.MEDIA_RANGE,e.Z.INDEX_RANGE]),Dn(w,e.Z.SEGMENT_TEMPLATE,[e.Z.INDEX_RANGE,e.Z.MEDIA,e.Z.INDEX,e.Z.INITIALIZATION_MINUS,e.Z.BITSTREAM_SWITCHING_MINUS]),Dn(w,e.Z.ASSET_IDENTIFIER,[e.Z.VALUE,e.Z.ID]),Dn(w,e.Z.EVENT_STREAM,[e.Z.VALUE]),Dn(w,e.Z.ADAPTATION_SET,[e.Z.PROFILES,e.Z.MIME_TYPE,e.Z.SEGMENT_PROFILES,e.Z.CODECS,e.Z.CONTENT_TYPE]),Dn(w,e.Z.FRAME_PACKING,[e.Z.VALUE,e.Z.ID]),Dn(w,e.Z.AUDIO_CHANNEL_CONFIGURATION,[e.Z.VALUE,e.Z.ID]),Dn(w,e.Z.CONTENT_PROTECTION,[e.Z.VALUE,e.Z.ID]),Dn(w,e.Z.ESSENTIAL_PROPERTY,[e.Z.VALUE,e.Z.ID]),Dn(w,e.Z.SUPPLEMENTAL_PROPERTY,[e.Z.VALUE,e.Z.ID]),Dn(w,e.Z.INBAND_EVENT_STREAM,[e.Z.VALUE,e.Z.ID]),Dn(w,e.Z.ACCESSIBILITY,[e.Z.VALUE,e.Z.ID]),Dn(w,e.Z.ROLE,[e.Z.VALUE,e.Z.ID]),Dn(w,e.Z.RATING,[e.Z.VALUE,e.Z.ID]),Dn(w,e.Z.VIEWPOINT,[e.Z.VALUE,e.Z.ID]),Dn(w,e.Z.CONTENT_COMPONENT,[e.Z.CONTENT_TYPE]),Dn(w,e.Z.REPRESENTATION,[e.Z.ID,e.Z.DEPENDENCY_ID,e.Z.MEDIA_STREAM_STRUCTURE_ID]),Dn(w,e.Z.SUBSET,[e.Z.ID]),Dn(w,e.Z.METRICS,[e.Z.METRICS_MINUS]),Dn(w,e.Z.REPORTING,[e.Z.VALUE,e.Z.ID]),w);if(F.hasOwnProperty(h)){var j=F[h];return j!==void 0&&j.indexOf(A.name)>=0}return!1},function(A){return String(A)})}return R}(Hr);function xi(i){return xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xi(i)}function ki(i,r){return ki=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},ki(i,r)}function Ho(i,r){return!r||xi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function ci(i){return ci=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ci(i)}var Na=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,Vo=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&ki(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=ci(r);if(l){var w=ci(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Ho(this,A)});function R(){return function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")}(this,R),E.call(this,function(A){for(var h=[e.Z.MIN_BUFFER_TIME,e.Z.MEDIA_PRESENTATION_DURATION,e.Z.MINIMUM_UPDATE_PERIOD,e.Z.TIMESHIFT_BUFFER_DEPTH,e.Z.MAX_SEGMENT_DURATION,e.Z.MAX_SUBSEGMENT_DURATION,e.Z.SUGGESTED_PRESENTATION_DELAY,e.Z.START,t.Z.START_TIME,e.Z.DURATION],w=h.length,F=0;F<w;F++)if(A.nodeName===h[F])return Na.test(A.value);return!1},function(A){var h=Na.exec(A),w=31536e3*parseFloat(h[3]||0)+2592e3*parseFloat(h[5]||0)+86400*parseFloat(h[7]||0)+3600*parseFloat(h[9]||0)+60*parseFloat(h[11]||0)+parseFloat(h[13]||0);return h[1]!==void 0&&(w=-w),w})}return R}(Hr);function Zi(i){return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zi(i)}function Ui(i,r){return Ui=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Ui(i,r)}function Ko(i,r){return!r||Zi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function fi(i){return fi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},fi(i)}var Ca=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,zo=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Ui(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=fi(r);if(l){var w=fi(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Ko(this,A)});function R(){return function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")}(this,R),E.call(this,function(A){return Ca.test(A.value)},function(A){var h,w=Ca.exec(A);if(h=Date.UTC(parseInt(w[1],10),parseInt(w[2],10)-1,parseInt(w[3],10),parseInt(w[4],10),parseInt(w[5],10),w[6]&&parseInt(w[6],10)||0,w[7]&&1e3*parseFloat(w[7])||0),w[9]&&w[10]){var F=60*parseInt(w[9],10)+parseInt(w[10],10);h+=(w[8]==="+"?-1:1)*F*60*1e3}return new Date(h)})}return R}(Hr);function Bi(i){return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bi(i)}function Gi(i,r){return Gi=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Gi(i,r)}function Wo(i,r){return!r||Bi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function di(i){return di=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},di(i)}var Xo=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Qo=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Gi(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=di(r);if(l){var w=di(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Wo(this,A)});function R(){return function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")}(this,R),E.call(this,function(A){return Xo.test(A.value)},function(A){return parseFloat(A)})}return R}(Hr);function qi(i){return qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qi(i)}function Vr(i,r,l){return r in i?Object.defineProperty(i,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[r]=l,i}function Yi(i,r){return Yi=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Yi(i,r)}function Jo(i,r){return!r||qi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function gi(i){return gi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},gi(i)}var $o=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Yi(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=gi(r);if(l){var w=gi(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Jo(this,A)});function R(){return function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")}(this,R),E.call(this,function(A,h){var w,F=(Vr(w={},e.Z.ADAPTATION_SET,[e.Z.LANG]),Vr(w,e.Z.REPRESENTATION,[e.Z.LANG]),Vr(w,e.Z.CONTENT_COMPONENT,[e.Z.LANG]),Vr(w,e.Z.LABEL,[e.Z.LANG]),Vr(w,e.Z.GROUP_LABEL,[e.Z.LANG]),w);if(F.hasOwnProperty(h)){var j=F[h];return j!==void 0&&j.indexOf(A.name)>=0}return!1},function(A){return oi()(A)||String(A)})}return R}(Hr);function es(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var ts=function(){function i(E){var R;(function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")})(this,i),this._name=E,this._merge=(R=E)&&R.length&&R.charAt(0)===R.charAt(0).toUpperCase()}var r,l;return r=i,(l=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&es(r.prototype,l),i}();function ns(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var kr=function(){function i(E,R,A){var h=this;(function(w,F){if(!(w instanceof F))throw new TypeError("Cannot call a class as a function")})(this,i),this._name=E||"",this._properties=[],this._children=A||[],Array.isArray(R)&&R.forEach(function(w){h._properties.push(new ts(w))})}var r,l;return r=i,(l=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&ns(r.prototype,l),i}();function ji(i){return ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ji(i)}function Hi(i,r){return Hi=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Hi(i,r)}function rs(i,r){return!r||ji(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function hi(i){return hi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},hi(i)}var is=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Hi(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=hi(r);if(l){var w=hi(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return rs(this,A)});function R(){(function(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")})(this,R);var A=[e.Z.PROFILES,e.Z.WIDTH,e.Z.HEIGHT,e.Z.SAR,e.Z.FRAMERATE,e.Z.AUDIO_SAMPLING_RATE,e.Z.MIME_TYPE,e.Z.SEGMENT_PROFILES,e.Z.CODECS,e.Z.MAXIMUM_SAP_PERIOD,e.Z.START_WITH_SAP,e.Z.MAX_PLAYOUT_RATE,e.Z.CODING_DEPENDENCY,e.Z.SCAN_TYPE,e.Z.FRAME_PACKING,e.Z.AUDIO_CHANNEL_CONFIGURATION,e.Z.CONTENT_PROTECTION,e.Z.ESSENTIAL_PROPERTY,e.Z.ESSENTIAL_PROPERTY+"_asArray",e.Z.SUPPLEMENTAL_PROPERTY,e.Z.INBAND_EVENT_STREAM];return E.call(this,e.Z.ADAPTATION_SET,A,[new kr(e.Z.REPRESENTATION,A,[new kr(e.Z.SUB_REPRESENTATION,A)])])}return R}(kr);function Vi(i){return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Vi(i)}function Ki(i,r){return Ki=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},Ki(i,r)}function as(i,r){return!r||Vi(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function mi(i){return mi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},mi(i)}var os=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&Ki(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=mi(r);if(l){var w=mi(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return as(this,A)});function R(){(function(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")})(this,R);var A=[e.Z.SEGMENT_BASE,e.Z.SEGMENT_TEMPLATE,e.Z.SEGMENT_LIST];return E.call(this,e.Z.PERIOD,A,[new kr(e.Z.ADAPTATION_SET,A,[new kr(e.Z.REPRESENTATION,A)])])}return R}(kr);function Da(i){i=i||{};var r,l,E,R,A,h=this.context,w=i.debug;return r={parse:function(F){var j,B=window.performance.now();if(!(j=R.xml_str2json(F)))throw new Error("parsing the manifest failed");var N=window.performance.now();j.Patch?((j=j.Patch).add_asArray&&j.add_asArray.forEach(function(Z){return A.run(Z)}),j.replace_asArray&&j.replace_asArray.forEach(function(Z){return A.run(Z)})):(j=j.MPD,A.run(j));var U=window.performance.now();return l.info("Parsing complete: ( xml2json: "+(N-B).toPrecision(3)+"ms, objectiron: "+(U-N).toPrecision(3)+"ms, total: "+((U-B)/1e3).toPrecision(3)+"s)"),j.protocol="DASH",j},getMatchers:function(){return E},getIron:function(){return A}},l=w.getLogger(r),E=[new Vo,new zo,new Qo,new $o,new jo],R=new Ia({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:E}),A=Go(h).create({adaptationset:new is,period:new os}),r}Da.__dashjs_factory_name="DashParser";var ss=_.Z.getClassFactory(Da);function Oa(i){i=i||{};var r,l,E,R,A,h=this.context,w=i.debug,F=i.settings,j=(0,p.Z)(h).getInstance(),B=(0,ze.Z)(h).getInstance(),N=i.mssHandler,U=i.errHandler;function Z(ne){j.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:ne.manifest})}function le(ne){var ue=null;return ne.indexOf("SmoothStreamingMedia")>-1?(N&&(ue=N.createMssParser(),N.createMssFragmentProcessor(),N.registerEvents()),ue):ne.indexOf("MPD")>-1||ne.indexOf("Patch")>-1?ss(h).create({debug:w}):ue}return r={load:function(ne){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,G=new Date,ie=new ba(ne,Le.w.MPD_TYPE);ue&&(ie.serviceLocation=ue),fe&&(ie.queryParams=fe),ie.requestStartDate||(ie.requestStartDate=G),j.trigger(u.Z.MANIFEST_LOADING_STARTED,{request:ie}),E.load({request:ie,success:function(Y,ce,g){var P,C,D;if(R)if(g&&g!==ne?(C=B.parseBaseUrl(g),P=g):(B.isRelative(ne)&&(ne=B.resolve(ne,window.location.href)),C=B.parseBaseUrl(ne)),ce!="No Content")if(A===null&&(A=le(Y)),A!==null){R.setMatchers(A.getMatchers()),R.setIron(A.getIron());try{D=A.parse(Y)}catch{return void j.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new re.Z(X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(ne))})}if(D){if(D.url=P||ne,D.originalUrl||(D.originalUrl=D.url),F&&F.get().streaming.enableManifestDurationMismatchFix&&D.mediaPresentationDuration&&D.Period_asArray.length>1){var b=D.Period_asArray.reduce(function(te,z){return te+z.duration},0);!isNaN(b)&&D.mediaPresentationDuration>b&&(l.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),D.mediaPresentationDuration=b)}D.baseUri=C,D.loadedTime=new Date,R.resolveManifestOnLoad(D),j.trigger(u.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:Y})}else j.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new re.Z(X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(ne))})}else j.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new re.Z(X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,X.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(ne))});else j.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(Y,ce,g){j.trigger(u.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new re.Z(X.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,X.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(ne,", ").concat(g))})}})},reset:function(){j.off(u.Z.XLINK_READY,Z,r),N&&N.reset(),R&&(R.reset(),R=null),E&&(E.abort(),E=null)}},l=w.getLogger(r),j.on(u.Z.XLINK_READY,Z,r),E=Wn(h).create({errHandler:i.errHandler,dashMetrics:i.dashMetrics,mediaPlayerModel:i.mediaPlayerModel,requestModifier:i.requestModifier,urlUtils:B,constants:t.Z,dashConstants:e.Z,errors:X,requestTimeout:i.settings.get().streaming.manifestRequestTimeout}),R=Bo(h).create({errHandler:U,dashMetrics:i.dashMetrics,mediaPlayerModel:i.mediaPlayerModel,requestModifier:i.requestModifier,settings:i.settings}),A=null,r}Oa.__dashjs_factory_name="ManifestLoader";var us=_.Z.getClassFactory(Oa);function Ma(){var i=this.context,r=(0,p.Z)(i).getInstance();return{error:function(l){r.trigger(u.Z.ERROR,{error:l})}}}Ma.__dashjs_factory_name="ErrorHandler";var ls=_.Z.getSingletonFactory(Ma),Pa=M(1715);function La(){var i,r,l,E,R,A,h=this.context,w=(0,p.Z)(h).getInstance();function F(j,B){if(!B||!B.Period_asArray||B.Period_asArray.length===0)return Promise.resolve();var N=[];return B.Period_asArray.forEach(function(U){N.push(function(Z,le){return new Promise(function(ne){if(Z&&Z.AdaptationSet_asArray&&Z.AdaptationSet_asArray.length!==0){var ue=[];Z.AdaptationSet_asArray.forEach(function(fe){r.getIsTypeOf(fe,le)&&ue.push(function(G,ie){return new Promise(function(Y){if(G.Representation_asArray&&G.Representation_asArray.length!==0){var ce=[],g=[];G.Representation_asArray.forEach(function(P,C){var D=r.getCodec(G,C,!1),b=function(te,z,ae){switch(te){case t.Z.VIDEO:return function(Q,L){return{codec:L,width:Q.width||null,height:Q.height||null,framerate:Q.frameRate||null,bitrate:Q.bandwidth||null}}(z,ae);case t.Z.AUDIO:return function(Q,L){var J=Q.audioSamplingRate||null;return{codec:L,bitrate:Q.bandwidth||null,samplerate:J}}(z,ae);default:return null}}(ie,P,D);g.push(b),ce.push(l.supportsCodec(b,ie))}),Promise.all(ce).then(function(P){G.Representation_asArray=G.Representation_asArray.filter(function(C,D){return P[D]||A.debug("[Stream] Codec ".concat(g[D].codec," not supported ")),P[D]}),Y()}).catch(function(){Y()})}else Y()})}(fe,le))}),Promise.all(ue).then(function(){Z.AdaptationSet_asArray=Z.AdaptationSet_asArray.filter(function(fe){var G=fe.Representation_asArray&&fe.Representation_asArray.length>0;return G||(w.trigger(u.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:fe}),A.warn("AdaptationSet has been removed because of no supported Representation")),G}),ne()}).catch(function(){ne()})}else ne()})}(U,j))}),Promise.all(N)}return i={setConfig:function(j){j&&(j.adapter&&(r=j.adapter),j.capabilities&&(l=j.capabilities),j.settings&&(E=j.settings),j.customParametersModel&&(R=j.customParametersModel))},filterUnsupportedFeatures:function(j){return new Promise(function(B){var N=[];N.push(F(t.Z.VIDEO,j)),N.push(F(t.Z.AUDIO,j)),Promise.all(N).then(function(){E.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(U){U&&U.Period_asArray&&U.Period_asArray.length!==0&&U.Period_asArray.forEach(function(Z){Z.AdaptationSet_asArray=Z.AdaptationSet_asArray.filter(function(le){return!le.Representation_asArray||le.Representation_asArray.length===0||(le.Representation_asArray=le.Representation_asArray.filter(function(ne){var ue=r.getEssentialPropertiesForRepresentation(ne);if(ue&&ue.length>0)for(var fe=0;fe<ue.length;){if(!l.supportsEssentialProperty(ue[fe]))return A.debug("[Stream] EssentialProperty not supported: "+ue[fe].schemeIdUri),!1;fe+=1}return!0}),le.Representation_asArray&&le.Representation_asArray.length>0)})})}(j),function(U){var Z=R.getCustomCapabilitiesFilters();Z&&Z.length!==0&&U&&U.Period_asArray&&U.Period_asArray.length!==0&&U.Period_asArray.forEach(function(le){le.AdaptationSet_asArray=le.AdaptationSet_asArray.filter(function(ne){return!ne.Representation_asArray||ne.Representation_asArray.length===0||(ne.Representation_asArray=ne.Representation_asArray.filter(function(ue){return!Z.some(function(fe){return!fe(ue)})}),ne.Representation_asArray&&ne.Representation_asArray.length>0)})})}(j),B()}).catch(function(){B()})})}},A=(0,m.Z)(h).getInstance().getLogger(i),i}La.__dashjs_factory_name="CapabilitiesFilter";var cs=_.Z.getSingletonFactory(La),fs=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function Fa(){var i;return{initialize:function(r){if(i=new fs,!r)return null;var l=r.indexOf("#");if(l!==-1)for(var E=r.substr(l+1).split("&"),R=0,A=E.length;R<A;++R){var h=E[R],w=h.indexOf("=");if(w!==-1){var F=h.substring(0,w);i.hasOwnProperty(F)&&(i[F]=h.substr(w+1))}}},getURIFragmentData:function(){return i}}}Fa.__dashjs_factory_name="URIFragmentModel";var ds=_.Z.getSingletonFactory(Fa);function xa(){var i,r=this.context,l=(0,p.Z)(r).getInstance();return{getValue:function(){return i},setValue:function(E){i=E,E&&l.trigger(u.Z.MANIFEST_LOADED,{data:E})}}}xa.__dashjs_factory_name="ManifestModel";var gs=_.Z.getSingletonFactory(xa),zi=-.5;function ka(){var i,r,l,E,R=this.context,A=(0,Ie.Z)(R).getInstance();function h(j,B){return isNaN(j)?0:j>0?(B&&r.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):j<zi?(B&&r.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(zi,": ").concat(-50,"% playback speed.")),zi):j}function w(j,B){return isNaN(j)?0:j<0?(B&&r.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):j>1?(B&&r.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):j}function F(){var j=A.get().streaming.buffer.stableBufferTime>0?A.get().streaming.buffer.stableBufferTime:A.get().streaming.buffer.fastSwitchEnabled?20:12,B=l.getLiveDelay();return!isNaN(B)&&B>0?Math.min(j,B):j}return i={getCatchupMaxDrift:function(){if(!isNaN(A.get().streaming.liveCatchup.maxDrift)&&A.get().streaming.liveCatchup.maxDrift>0)return A.get().streaming.liveCatchup.maxDrift;var j=E.getServiceDescriptionSettings();return j&&j.liveCatchup&&!isNaN(j.liveCatchup.maxDrift)&&j.liveCatchup.maxDrift>0?j.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return A.get().streaming.liveCatchup.enabled!==null?A.get().streaming.liveCatchup.enabled:l.getInitialCatchupModeActivated()},getStableBufferTime:F,getInitialBufferLevel:function(){var j=A.get().streaming.buffer.initialBufferLevel;return isNaN(j)||j<0?0:Math.min(F(),j)},getRetryAttemptsForType:function(j){var B=isNaN(A.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:A.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return l.getLowLatencyModeEnabled()?A.get().streaming.retryAttempts[j]*B:A.get().streaming.retryAttempts[j]},getRetryIntervalsForType:function(j){var B=isNaN(A.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:A.get().streaming.retryIntervals.lowLatencyReductionFactor;return l.getLowLatencyModeEnabled()?A.get().streaming.retryIntervals[j]/B:A.get().streaming.retryIntervals[j]},getCatchupPlaybackRates:function(j){var B=A.get().streaming.liveCatchup.playbackRate;if(!isNaN(B.min)||!isNaN(B.max))return{min:h(B.min,j),max:w(B.max,j)};var N=E.getServiceDescriptionSettings();if(N&&N.liveCatchup&&(!isNaN(N.liveCatchup.playbackRate.min)||!isNaN(N.liveCatchup.playbackRate.max))){var U=N.liveCatchup.playbackRate;return{min:h(U.min,j),max:w(U.max,j)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(j,B){try{var N=A.get().streaming.abr[j][B];if(!isNaN(N)&&N!==-1)return N;var U=E.getServiceDescriptionSettings();return U&&U[j]&&!isNaN(U[j][B])?U[j][B]:-1}catch{return-1}},setConfig:function(j){j.playbackController&&(l=j.playbackController),j.serviceDescriptionController&&(E=j.serviceDescriptionController)},reset:function(){}},r=(0,m.Z)(R).getInstance().getLogger(i),i}ka.__dashjs_factory_name="MediaPlayerModel";var hs=_.Z.getSingletonFactory(ka),ms=M(1767);function Za(i){var r=(i=i||{}).abrController,l=i.switchHistory,E=i.droppedFramesHistory,R=i.currentRequest,A=i.useBufferOccupancyABR,h=i.useL2AABR,w=i.useLoLPABR,F=i.streamProcessor?i.streamProcessor.getScheduleController():null,j=i.streamProcessor?i.streamProcessor.getRepresentationInfo():null,B=i.videoModel?i.videoModel:null;function N(){return j?j.mediaInfo:null}return{getMediaType:function(){var U=N();return U?U.type:null},getMediaInfo:N,getDroppedFramesHistory:function(){return E},getCurrentRequest:function(){return R},getSwitchHistory:function(){return l},getStreamInfo:function(){var U=N();return U?U.streamInfo:null},getScheduleController:function(){return F},getAbrController:function(){return r},getRepresentationInfo:function(){return j},useBufferOccupancyABR:function(){return A},useL2AABR:function(){return h},useLoLPABR:function(){return w},getVideoModel:function(){return B}}}Za.__dashjs_factory_name="RulesContext";var Ua=_.Z.getClassFactory(Za),pi=M(2068);function Ba(){var i=[],r=[];return{push:function(l){l.newValue===pi.Z.NO_CHANGE&&(l.newValue=l.oldValue),i[l.oldValue]||(i[l.oldValue]={noDrops:0,drops:0,dropSize:0});var E=l.newValue-l.oldValue,R=E<0?1:0,A=R?-E:0,h=R?0:1;if(i[l.oldValue].drops+=R,i[l.oldValue].dropSize+=A,i[l.oldValue].noDrops+=h,r.push({idx:l.oldValue,noDrop:h,drop:R,dropSize:A}),r.length>8){var w=r.shift();i[w.idx].drops-=w.drop,i[w.idx].dropSize-=w.dropSize,i[w.idx].noDrops-=w.noDrop}},getSwitchRequests:function(){return i},reset:function(){i=[],r=[]}}}Ba.__dashjs_factory_name="SwitchRequestHistory";var ps=_.Z.getClassFactory(Ba);function Ga(){var i={},r={},l={};return{push:function(E,R,A){if(R){i[E]||(i[E]=[],r[E]=0,l[E]=0);var h=A&&A.droppedVideoFrames?A.droppedVideoFrames:0,w=A&&A.totalVideoFrames?A.totalVideoFrames:0,F=h-r[E];r[E]=h;var j=w-l[E];l[E]=w;var B=i[E];isNaN(R)||(B[R]?(B[R].droppedVideoFrames+=F,B[R].totalVideoFrames+=j):B[R]={droppedVideoFrames:F,totalVideoFrames:j})}},getFrameHistory:function(E){return i[E]},clearForStream:function(E){try{delete i[E],delete r[E],delete l[E]}catch{}},reset:function(){i={},r={},l={}}}}Ga.__dashjs_factory_name="DroppedFramesHistory";var ys=_.Z.getClassFactory(Ga);function qa(i){var r,l,E,R,A,h=this.context,w=(i=i||{}).settings,F=(0,p.Z)(h).getInstance();function j(ne,ue,fe,G){var ie=Math.pow(.5,fe/G.fast);ne.fastEstimate=(1-ie)*ue+ie*ne.fastEstimate;var Y=Math.pow(.5,fe/G.slow);ne.slowEstimate=(1-Y)*ue+Y*ne.slowEstimate,ne.totalWeight+=fe}function B(ne,ue,fe){return w.get().streaming.abr.movingAverageMethod!==t.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(G,ie){var Y=G?A.throughputHalfLife:A.latencyHalfLife,ce=G?E[ie]:R[ie];if(!ce||ce.totalWeight<=0)return NaN;var g=ce.fastEstimate/(1-Math.pow(.5,ce.totalWeight/Y.fast)),P=ce.slowEstimate/(1-Math.pow(.5,ce.totalWeight/Y.slow));return G?Math.min(g,P):Math.max(g,P)}(ne,ue):function(G,ie,Y){var ce=function(P,C,D){var b,te;if(P?(b=r[C],te=D?3:4):(b=l[C],te=4),b){if(te>=b.length)te=b.length;else if(P)for(var z=1;z<te;++z){var ae=b[b.length-z]/b[b.length-z-1];if((ae>=1.3||ae<=.7692307692307692)&&(te+=1)===b.length)break}}else te=0;return te}(G,ie,Y),g=(G?r:l)[ie];return ce!==0&&g&&g.length!==0?(g=g.slice(-ce)).reduce(function(P,C){return P+C})/g.length:NaN}(ne,ue,fe)}function N(ne,ue){return B(!0,ne,ue)}function U(ne){r[ne]=r[ne]||[],l[ne]=l[ne]||[],E[ne]=E[ne]||{fastEstimate:0,slowEstimate:0,totalWeight:0},R[ne]=R[ne]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function Z(){r={},l={},E={},R={}}var le={push:function(ne,ue,fe){if(ue.trace&&ue.trace.length){var G,ie=ue.tresponse.getTime()-ue.trequest.getTime()||1,Y=ue._tfinish.getTime()-ue.tresponse.getTime()||1,ce=ue.trace.reduce(function(D,b){return D+b.b[0]},0),g=0;if((G=ue._fileLoaderType&&ue._fileLoaderType===t.Z.FILE_LOADER_TYPES.FETCH?ue.trace.reduce(function(D,b){return D+b.d},0):fe?Y:ie+Y)!==0&&(g=Math.round(8*ce/G)),ue.cmsd){var P=ue.cmsd.dynamic&&ue.cmsd.dynamic.etp?ue.cmsd.dynamic.etp:null;if(P){var C=w.get().streaming.cmsd.abr.etpWeightRatio;C>0&&C<=1&&(g=g*(1-C)+P*C)}}if(U(ne),function(D,b,te){return D===t.Z.VIDEO?te<w.get().streaming.cacheLoadThresholds[t.Z.VIDEO]:D===t.Z.AUDIO?te<w.get().streaming.cacheLoadThresholds[t.Z.AUDIO]:void 0}(ne,0,Y)){if(r[ne].length>0&&!r[ne].hasCachedEntries)return;r[ne].hasCachedEntries=!0}else r[ne]&&r[ne].hasCachedEntries&&function(D){delete r[D],delete l[D],delete E[D],delete R[D],U(D)}(ne);r[ne].push(g),F.trigger(n.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:g,mediaType:ne,httpRequest:ue}),r[ne].length>20&&r[ne].shift(),l[ne].push(ie),l[ne].length>20&&l[ne].shift(),j(E[ne],g,.001*Y,A.throughputHalfLife),j(R[ne],ie,1,A.latencyHalfLife)}},getAverageThroughput:N,getSafeAverageThroughput:function(ne,ue){var fe=N(ne,ue);return isNaN(fe)||(fe*=w.get().streaming.abr.bandwidthSafetyFactor),fe},getAverageLatency:function(ne){return B(!1,ne)},reset:Z};return A={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},Z(),le}qa.__dashjs_factory_name="ThroughputHistory";var Es=_.Z.getClassFactory(qa);function Wi(){var i,r,l,E,R,A,h,w,F,j,B,N,U,Z,le,ne,ue,fe,G,ie,Y,ce,g,P,C,D,b,te=this.context,z=(0,m.Z)(te).getInstance(),ae=(0,p.Z)(te).getInstance();function Q(){R={},A={},w={},h={},ie={},g={},P={},C={},j===void 0&&(j=!1),Y&&Y.reset(),G=void 0,Y=void 0,ce=void 0,clearTimeout(F),F=null}function L(ve){var Fe=ve.request.mediaType,ot=ve.streamId;if(Fe&&ot&&h[ot]&&b.get().streaming.abr.autoSwitchBitrate[Fe]){var qe=h[ot][Fe];if(qe){var ht=Ua(te).create({abrController:i,streamProcessor:qe,currentRequest:ve.request,useBufferOccupancyABR:g[Fe],useL2AABR:P[Fe],useLoLPABR:C[Fe],videoModel:Z}),gt=l.shouldAbandonFragment(ht,ot);gt.quality>pi.Z.NO_CHANGE&&qe.getFragmentModel().getRequests({state:K.FRAGMENT_MODEL_LOADING,index:ve.request.index})[0]&&(w[ot][Fe].state=y.Z.ABANDON_LOAD,ie[ot][Fe].reset(),ie[ot][Fe].push({oldValue:Ce(Fe,ot),newValue:gt.quality,confidence:1,reason:gt.reason}),Re(Fe,E.getActiveStreamInfo(),gt.quality,gt.reason),clearTimeout(F),F=setTimeout(function(){w[ot][Fe].state=y.Z.ALLOW_LOAD,F=null},b.get().streaming.abandonLoadTimeout))}}}function J(ve){ve.mediaType===t.Z.VIDEO&&(G!==void 0&&Y.push(ve.streamId,G,Z.getPlaybackQuality()),G=ve.newQuality)}function pe(ve){var Fe,ot;ve.metric!==y.Z.HTTP_REQUEST||!ve.value||ve.value.type!==Le.w.MEDIA_SEGMENT_TYPE||ve.mediaType!==t.Z.AUDIO&&ve.mediaType!==t.Z.VIDEO||ce.push(ve.mediaType,ve.value,b.get().streaming.abr.useDeadTimeLatency),ve.metric!==y.Z.BUFFER_LEVEL||ve.mediaType!==t.Z.AUDIO&&ve.mediaType!==t.Z.VIDEO||(Fe=ve.mediaType,ot=.001*ve.value.level,b.get().streaming.abr.ABRStrategy===t.Z.ABR_STRATEGY_DYNAMIC&&function(qe,ht){try{var gt=le.getStableBufferTime(),st=gt,qt=.5*gt,Bt=g[qe],sn=ht>(Bt?qt:st);g[qe]=sn,sn!==Bt&&(sn?r.info("["+qe+"] switching from throughput to buffer occupancy ABR rule (buffer: "+ht.toFixed(3)+")."):r.info("["+qe+"] switching from buffer occupancy to throughput ABR rule (buffer: "+ht.toFixed(3)+")."))}catch(un){r.error(un)}}(Fe,ot))}function Ne(ve,Fe){try{var ot;return R[Fe]=R[Fe]||{},R[Fe].hasOwnProperty(ve)||(R[Fe][ve]=0),ot=function(qe,ht){var gt=R[ht][qe],st=gt;if(!h[ht]||!h[ht][qe])return st;var qt=Se(qe,ht);qt!==void 0&&(st=Math.max(gt,qt));var Bt=function(sn,un){try{var Ge=le.getAbrBitrateParameter("maxBitrate",sn);return Ge>-1?We(h[un][sn].getMediaInfo(),Ge,un):void 0}catch{return}}(qe,ht);return Bt!==void 0&&(st=Math.min(st,Bt)),st}(ve,Fe),ot=function(qe,ht,gt){var st=R[gt][ht],qt=b.get().streaming.abr.maxRepresentationRatio[ht];return isNaN(qt)||qt>=1||qt<0?qe:Math.min(qe,Math.round(st*qt))}(ot,ve,Fe),ot=function(qe,ht,gt){if(ht!==t.Z.VIDEO||!b.get().streaming.abr.limitBitrateByPortal||!h[gt]||!h[gt][ht])return qe;j||Ct();var st=h[gt][ht].getStreamInfo(),qt=U.getAdaptationForType(st.index,ht,st).Representation_asArray,Bt=qe;if(B>0&&N>0){for(;Bt>0&&qt[Bt]&&B<qt[Bt].width&&B-qt[Bt-1].width<qt[Bt].width-B;)Bt-=1;for(;Bt<qt.length-1&&qt[Bt].width===qt[Bt+1].width;)Bt+=1}return Bt}(ot,ve,Fe),b.get().streaming.cmsd.enabled&&b.get().streaming.cmsd.abr.applyMb&&(ot=function(qe,ht,gt){if(ht!=="video")return qe;var st=ue.getMaxBitrate(ht);if(st<0)return qe;var qt=nt(gt,"audio",Ce("audio",gt));st-=qt?qt.bitrate/1e3:0;var Bt=We(h[gt][ht].getMediaInfo(),st,gt);return r.debug("Stream ID: "+gt+" ["+ht+"] Apply max bit rate from CMSD: "+st),Math.min(qe,Bt)}(ot,ve,Fe)),ot}catch{return}}function Se(ve,Fe){try{return function(ot,qe){try{var ht=le.getAbrBitrateParameter("minBitrate",ot);if(ht>-1){var gt=h[qe][ot].getMediaInfo(),st=Qe(gt),qt=We(gt,ht,qe);return st[qt]&&qt<st.length-1&&st[qt].bitrate<1e3*ht&&qt++,qt}return}catch{return}}(ve,Fe)}catch{return}}function Ce(ve){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return Fe||(Fe=E.getActiveStreamInfo().id),ve&&h[Fe]&&h[Fe][ve]&&Fe?(A[Fe]=A[Fe]||{},A[Fe].hasOwnProperty(ve)||(A[Fe][ve]=0),A[Fe][ve]):0}catch{return 0}}function Re(ve,Fe,ot){var qe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(Fe&&Fe.id&&ve){var ht=Fe.id,gt=Ce(ve,ht);(0,W.SE)(ot);var st=Ne(ve,ht);ot!==gt&&ot>=0&&ot<=st&&$e(ve,gt,ot,st,qe,ht)}}function $e(ve,Fe,ot,qe,ht,gt){if(ve&&h[gt]&&h[gt][ve]){var st=h[gt][ve].getStreamInfo(),qt=st&&st.manifestInfo&&st.manifestInfo.isDynamic,Bt=D.getCurrentBufferLevel(ve);r.info("Stream ID: "+gt+" ["+ve+"] switch from "+Fe+" to "+ot+"/"+qe+" (buffer: "+Bt+") "+(ht?JSON.stringify(ht):".")),A[gt]=A[gt]||{},A[gt][ve]=ot;var sn=nt(gt,ve,ot);ae.trigger(u.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:Fe,newQuality:ot,reason:ht,streamInfo:st,bitrateInfo:sn,maxIdx:qe,mediaType:ve},{streamId:st.id,mediaType:ve});var un=ce.getAverageThroughput(ve,qt);isNaN(un)||fe.setSavedBitrateSettings(ve,un)}}function nt(ve,Fe,ot){if(Fe&&h&&h[ve]&&h[ve][Fe]){var qe=Qe(h[ve][Fe].getMediaInfo());return qe[ot]?qe[ot]:null}return null}function We(ve,Fe,ot){var qe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,ht=ve&&ve.type?h[ot][ve.type].getRepresentationInfo():null;if(b.get().streaming.abr.useDeadTimeLatency&&qe&&ht&&ht.fragmentDuration){qe/=1e3;var gt=ht.fragmentDuration;if(qe>gt)return 0;var st=qe/gt;Fe*=1-st}for(var qt=Qe(ve),Bt=qt.length-1;Bt>=0;Bt--){var sn=qt[Bt];if(1e3*Fe>=sn.bitrate)return Bt}return 0}function Qe(ve){var Fe=[];if(!ve||!ve.bitrateList)return Fe;for(var ot,qe=ve.bitrateList,ht=ve.type,gt=0,st=qe.length;gt<st;gt++)(ot=new ei).mediaType=ht,ot.qualityIndex=gt,ot.bitrate=qe[gt].bandwidth,ot.width=qe[gt].width,ot.height=qe[gt].height,ot.scanType=qe[gt].scanType,Fe.push(ot);return Fe}function Ct(){if(Z){var ve=b.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;B=Z.getClientWidth()*ve,N=Z.getClientHeight()*ve}}return i={initialize:function(){Y=ys(te).create(),ce=Es(te).create({settings:b}),(l=(0,ms.Z)(te).create({dashMetrics:D,customParametersModel:ne,mediaPlayerModel:le,settings:b})).initialize(),ae.on(n.Z.QUALITY_CHANGE_RENDERED,J,i),ae.on(n.Z.METRIC_ADDED,pe,i),ae.on(u.Z.LOADING_PROGRESS,L,i)},isPlayingAtTopQuality:function(ve){var Fe=ve?ve.id:null,ot=Ce(t.Z.AUDIO,Fe),qe=Ce(t.Z.VIDEO,Fe);return ot===Ne(t.Z.AUDIO,Fe)&&qe===Ne(t.Z.VIDEO,Fe)},updateTopQualityIndex:function(ve){var Fe=ve.type,ot=ve.streamInfo.id,qe=ve.representationCount-1;return R[ot]=R[ot]||{},R[ot][Fe]=qe,qe},clearDataForStream:function(ve){Y&&Y.clearForStream(ve),h[ve]&&delete h[ve],ie[ve]&&delete ie[ve],w[ve]&&delete w[ve]},getThroughputHistory:function(){return ce},getBitrateList:Qe,getQualityForBitrate:We,getTopBitrateInfoFor:function(ve){var Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Fe||(Fe=E.getActiveStreamInfo().id),ve&&h&&h[Fe]&&h[Fe][ve]){var ot=Ne(ve,Fe),qe=Qe(h[Fe][ve].getMediaInfo());return qe[ot]?qe[ot]:null}return null},getMinAllowedIndexFor:Se,getMaxAllowedIndexFor:Ne,getInitialBitrateFor:function(ve,Fe){if(function(){if(!fe||!fe.hasOwnProperty("getSavedBitrateSettings"))throw new Error(t.Z.MISSING_CONFIG_ERROR)}(),ve===t.Z.TEXT)return NaN;var ot=fe.getSavedBitrateSettings(ve),qe=le.getAbrBitrateParameter("initialBitrate",ve),ht=b.get().streaming.abr.initialRepresentationRatio[ve];if(qe===-1)if(ht>-1){var gt=h[Fe][ve].getStreamInfo(),st=U.getAdaptationForType(gt.index,ve,gt).Representation_asArray;qe=Array.isArray(st)?st[Math.max(Math.round(st.length*ht)-1,0)].bandwidth/1e3:0}else qe=isNaN(ot)?ve===t.Z.VIDEO?1e3:100:ot;return qe},getQualityFor:Ce,getAbandonmentStateFor:function(ve,Fe){return w[ve]&&w[ve][Fe]?w[ve][Fe].state:null},setPlaybackQuality:Re,checkPlaybackQuality:function(ve,Fe){try{if(!(ve&&h&&h[Fe]&&h[Fe][ve]))return!1;if(Y){var ot=Z.getPlaybackQuality();ot&&Y.push(Fe,G,ot)}if(!b.get().streaming.abr.autoSwitchBitrate[ve])return!1;var qe=Ce(ve,Fe),ht=Ua(te).create({abrController:i,switchHistory:ie[Fe][ve],droppedFramesHistory:Y,streamProcessor:h[Fe][ve],currentValue:qe,useBufferOccupancyABR:g[ve],useL2AABR:P[ve],useLoLPABR:C[ve],videoModel:Z}),gt=Se(ve,Fe),st=Ne(ve,Fe),qt=l.getMaxQuality(ht),Bt=qt.quality;return gt!==void 0&&(Bt>pi.Z.NO_CHANGE?Bt:qe)<gt&&(Bt=gt),Bt>st&&(Bt=st),ie[Fe][ve].push({oldValue:qe,newValue:Bt}),Bt>pi.Z.NO_CHANGE&&Bt!==qe&&(w[Fe][ve].state===y.Z.ALLOW_LOAD||Bt<qe)&&($e(ve,qe,Bt,st,qt.reason,Fe),!0)}catch{return!1}},setElementSize:Ct,setWindowResizeEventCalled:function(ve){j=ve},registerStreamType:function(ve,Fe){var ot=Fe.getStreamInfo().id;h[ot]||(h[ot]={}),ie[ot]||(ie[ot]={}),w[ot]||(w[ot]={}),ie[ot][ve]=ps(te).create(),h[ot][ve]=Fe,w[ot][ve]={},w[ot][ve].state=y.Z.ALLOW_LOAD,function(qe){var ht=b.get().streaming.abr.ABRStrategy;ht===t.Z.ABR_STRATEGY_L2A?(g[qe]=!1,C[qe]=!1,P[qe]=!0):ht===t.Z.ABR_STRATEGY_LoLP?(g[qe]=!1,C[qe]=!0,P[qe]=!1):ht===t.Z.ABR_STRATEGY_BOLA?(g[qe]=!0,C[qe]=!1,P[qe]=!1):ht===t.Z.ABR_STRATEGY_THROUGHPUT?(g[qe]=!1,C[qe]=!1,P[qe]=!1):ht===t.Z.ABR_STRATEGY_DYNAMIC&&(g[qe]=!(!g||!g[qe])&&g[qe],C[qe]=!1,P[qe]=!1)}(ve),ve===t.Z.VIDEO&&Ct()},unRegisterStreamType:function(ve,Fe){try{h[ve]&&h[ve][Fe]&&delete h[ve][Fe],ie[ve]&&ie[ve][Fe]&&delete ie[ve][Fe],w[ve]&&w[ve][Fe]&&delete w[ve][Fe]}catch{}},setConfig:function(ve){ve&&(ve.streamController&&(E=ve.streamController),ve.domStorage&&(fe=ve.domStorage),ve.mediaPlayerModel&&(le=ve.mediaPlayerModel),ve.customParametersModel&&(ne=ve.customParametersModel),ve.cmsdModel&&(ue=ve.cmsdModel),ve.dashMetrics&&(D=ve.dashMetrics),ve.adapter&&(U=ve.adapter),ve.videoModel&&(Z=ve.videoModel),ve.settings&&(b=ve.settings))},reset:function(){Q(),ae.off(u.Z.LOADING_PROGRESS,L,i),ae.off(n.Z.QUALITY_CHANGE_RENDERED,J,i),ae.off(n.Z.METRIC_ADDED,pe,i),l&&l.reset()}},r=z.getLogger(i),Q(),i}Wi.__dashjs_factory_name="AbrController";var Xi=_.Z.getSingletonFactory(Wi);Xi.QUALITY_DEFAULT=0,_.Z.updateSingletonFactory(Wi.__dashjs_factory_name,Xi);var vs=Xi,_s=new Map([[t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Ya(){var i,r,l,E,R,A,h,w,F=this.context,j=(0,p.Z)(F).getInstance(),B=[];function N(){l&&(l.playbackRate=1,l.removeEventListener("canplay",N))}function U(){return B.length>0}function Z(){if(l&&U()&&l.playbackRate===0){var Y=document.createEvent("Event");Y.initEvent("waiting",!0,!1),l.dispatchEvent(Y)}}function le(Y,ce){l&&l.addEventListener(Y,ce)}function ne(Y,ce){l&&l.removeEventListener(Y,ce)}function ue(){return l?l.readyState:NaN}function fe(){return l?l.buffered:null}function G(Y,ce,g,P,C){if(l){for(var D=0;D<l.textTracks.length;D++)if(l.textTracks[D].kind===Y&&(!ce||l.textTracks[D].label==ce)&&l.textTracks[D].language===g&&l.textTracks[D].isTTML===P&&l.textTracks[D].isEmbedded===C)return l.textTracks[D]}return null}function ie(Y,ce){return Y===t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||ue()>=Y?(ce(),null):function(g,P){var C=function D(){ne(g,D),P(g)};return le(g,C),{func:C,event:g}}(_s.get(Y),ce)}return i={addEventListener:le,addTextTrack:function(Y,ce,g,P,C){if(!l)return null;var D=G(Y,ce,g,P,C);return D||((D=l.addTextTrack(Y,ce,g)).isEmbedded=C,D.isTTML=P),D},appendChild:function(Y){l&&(l.appendChild(Y),Y.isTTML!==void 0&&(l.textTracks[l.textTracks.length-1].isTTML=Y.isTTML,l.textTracks[l.textTracks.length-1].isEmbedded=Y.isEmbedded))},getBufferRange:fe,getClientHeight:function(){return l?l.clientHeight:NaN},getClientWidth:function(){return l?l.clientWidth:NaN},getElement:function(){return l},getEnded:function(){return l?l.ended:null},getPlaybackQuality:function(){if(!l)return null;var Y="webkitDroppedFrameCount"in l&&"webkitDecodedFrameCount"in l,ce=null;return"getVideoPlaybackQuality"in l?ce=l.getVideoPlaybackQuality():Y&&(ce={droppedVideoFrames:l.webkitDroppedFrameCount,totalVideoFrames:l.webkitDroppedFrameCount+l.webkitDecodedFrameCount,creationTime:new Date}),ce},getPlaybackRate:function(){return l?l.playbackRate:null},getPlayedRanges:function(){return l?l.played:null},getReadyState:ue,getSource:function(){return l?l.src:null},getTTMLRenderingDiv:function(){return A},getTextTrack:G,getTextTracks:function(){return l?l.textTracks:[]},getTime:function(){return l?isNaN(E)?l.currentTime:E:null},getVideoHeight:function(){return l?l.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(l){var Y=l.parentNode.host||l.parentNode;return Y?l.getBoundingClientRect().left-Y.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(l){var Y=l.parentNode.host||l.parentNode;return Y?l.getBoundingClientRect().top-Y.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return l?l.videoWidth:NaN},getVttRenderingDiv:function(){return h},initialize:function(){j.on(u.Z.PLAYBACK_PLAYING,Z,this)},isPaused:function(){return l?l.paused:null},isSeeking:function(){return l?l.seeking||!isNaN(E):null},isStalled:U,pause:function(){l&&(l.pause(),l.autoplay=!1)},play:function(){if(l){l.autoplay=!0;var Y=l.play();Y&&Y.catch&&typeof Promise<"u"&&Y.catch(function(ce){ce.name==="NotAllowedError"&&j.trigger(u.Z.PLAYBACK_NOT_ALLOWED),r.warn("Caught pending play exception - continuing (".concat(ce,")"))})}},removeChild:function(Y){l&&l.removeChild(Y)},removeEventListener:ne,reset:function(){clearTimeout(w),j.off(u.Z.PLAYBACK_PLAYING,Z,this)},setCurrentTime:function(Y,ce){l&&(R&&R.func&&R.event&&ne(R.event,R.func),E=Y,R=ie(t.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(l)if(l.currentTime!==E)try{E=ce?function(g){var P=fe(),C=g,D=9999999999;if(P)for(var b=0;b<P.length;b++){var te=P.start(b),z=P.end(b),ae=Math.abs(te-g),Q=Math.abs(z-g);if(g>=te&&g<=z)return g;ae<D&&(D=ae,C=te),Q<D&&(D=Q,C=z)}return C}(E):E,isNaN(E)||(l.currentTime=E),E=NaN}catch(g){l.readyState===0&&g.code===g.INVALID_STATE_ERR&&(w=setTimeout(function(){l.currentTime=E,E=NaN},400))}else E=NaN}))},setElement:function(Y){if(!(Y==null||Y&&/^(VIDEO|AUDIO)$/i.test(Y.nodeName)))throw"element is not video or audio DOM type!";(l=Y)&&(l.preload="auto")},setPlaybackRate:function(Y){var ce=arguments.length>1&&arguments[1]!==void 0&&arguments[1];l&&(!ce&&l.readyState<=2&&Y>0?l.addEventListener("canplay",N):l.playbackRate=Y)},setSource:function(Y){l&&(Y?l.src=Y:(l.removeAttribute("src"),l.load()))},setStallState:function(Y,ce){(function(g,P){P?function(C){C!==null&&l&&!l.seeking&&B.indexOf(C)===-1&&B.push(C)}(g):function(C){var D=B.indexOf(C);C!==null&&D!==-1&&B.splice(D,1)}(g)})(Y,ce)},setTTMLRenderingDiv:function(Y){(A=Y).style.position="absolute",A.style.display="flex",A.style.overflow="hidden",A.style.pointerEvents="none",A.style.top=0,A.style.left=0},setVttRenderingDiv:function(Y){h=Y},waitForReadyState:ie,setDisableRemotePlayback:function(Y){l&&(l.disableRemotePlayback=Y)}},r=(0,m.Z)(F).getInstance().getLogger(i),E=NaN,i}Ya.__dashjs_factory_name="VideoModel";var Ts=_.Z.getSingletonFactory(Ya),Ss=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],ja="dashjs_?_bitrate",Ha="dashjs_?_settings",Zr="localStorage",Va="lastBitrate",Ka="lastMediaSettings";function za(i){i=i||{};var r,l,E,R=this.context,A=i.settings;function h(B){if(E!==void 0)return E;var N;E=!1;try{typeof window<"u"&&(N=window[B])}catch(U){return l.warn("DOMStorage access denied: "+U.message),E}if(!N||B!==Zr)return E;try{N.setItem("1","1"),N.removeItem("1"),E=!0}catch(U){l.warn("DOMStorage is supported, but cannot be used: "+U.message)}return E}function w(){var B=6e5;return Math.round(new Date().getTime()/B)*B}function F(B,N){return h(B)&&A.get().streaming[N+"CachingInfo"].enabled}function j(){if(!A)throw new Error(t.Z.MISSING_CONFIG_ERROR)}return r={getSavedBitrateSettings:function(B){if(j(),!A.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var N=NaN;if(F(Zr,Va)){var U=ja.replace(/\?/,B);try{var Z=JSON.parse(localStorage.getItem(U))||{},le=new Date().getTime()-parseInt(Z.timestamp,10)>=A.get().streaming.lastBitrateCachingInfo.ttl||!1,ne=parseFloat(Z.bitrate);isNaN(ne)||le?le&&localStorage.removeItem(U):(N=ne,l.debug("Last saved bitrate for "+B+" was "+ne))}catch{return null}}return N},setSavedBitrateSettings:function(B,N){if(F(Zr,Va)&&N){var U=ja.replace(/\?/,B);try{localStorage.setItem(U,JSON.stringify({bitrate:N.toFixed(3),timestamp:w()}))}catch(Z){l.error(Z.message)}}},getSavedMediaSettings:function(B){if(j(),!A.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var N=null;if(F(Zr,Ka)){var U=Ha.replace(/\?/,B);try{var Z=JSON.parse(localStorage.getItem(U))||{},le=new Date().getTime()-parseInt(Z.timestamp,10)>=A.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;N=Z.settings,le&&(localStorage.removeItem(U),N=null)}catch{return null}}return N},setSavedMediaSettings:function(B,N){if(F(Zr,Ka)){var U=Ha.replace(/\?/,B);try{localStorage.setItem(U,JSON.stringify({settings:N,timestamp:w()}))}catch(Z){l.error(Z.message)}}}},l=(0,m.Z)(R).getInstance().getLogger(r),h(Zr)&&Ss.forEach(function(B){var N=localStorage.getItem(B.oldKey);if(N){localStorage.removeItem(B.oldKey);try{localStorage.setItem(B.newKey,N)}catch(U){l.error(U.message)}}}),r}za.__dashjs_factory_name="DOMStorage";var bs=_.Z.getSingletonFactory(za),As=M(2032),Wa=M(2011);function Xa(){var i,r,l,E,R,A,h,w,F,j,B,N,U,Z=this.context;function le(G,ie,Y,ce){var g=null,P=G?U.resolve(G.path):null,C=ce||{init:!0,url:P?P.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:ie};r.debug("Start searching for initialization.");var D=fe(C);w.load({request:D,success:function(b){if(C.bytesLoaded=C.range.end,!(g=E.findInitRange(b)))return C.range.end=C.bytesLoaded+C.bytesToLoad,le(G,ie,Y,C);G.range=g,Y(G)},error:function(){Y(G)}}),r.debug("Perform init search: "+C.url)}function ne(G,ie,Y,ce,g,P){if(Y&&(Y.start===void 0||Y.end===void 0)){var C=Y?Y.toString().split("-"):null;Y=C?{start:parseFloat(C[0]),end:parseFloat(C[1])}:null}g=g||ue;var D=null,b=null,te=!!Y,z=G?U.resolve(G.path):null,ae={init:!1,url:z?z.url:void 0,range:te?Y:{start:0,end:1500},searching:!te,bytesLoaded:P?P.bytesLoaded:0,bytesToLoad:1500,mediaType:ie},Q=fe(ae);w.load({request:Q,success:function(L){var J=ae.bytesToLoad,pe=L.byteLength;if(ae.bytesLoaded=ae.range.end-ae.range.start,D=E.parse(L),(b=D.getBox("sidx"))&&b.isComplete){var Ne,Se,Ce=b.references;if(Ce!=null&&Ce.length>0&&(Ne=Ce[0].reference_type===1),Ne){var Re,$e,nt,We;r.debug("Initiate multiple SIDX load."),ae.range.end=ae.range.start+b.size;var Qe=[],Ct=0,ve=(b.offset||ae.range.start)+b.size,Fe=function(qe){qe?(Qe=Qe.concat(qe),++Ct>=$e&&(Qe.sort(function(ht,gt){return ht.startTime-gt.startTime<0?-1:0}),g(Qe,G,ce))):g(null,G,ce)};for(Re=0,$e=Ce.length;Re<$e;Re++)nt=ve,We=ve+Ce[Re].referenced_size-1,ve+=Ce[Re].referenced_size,ne(G,ie,{start:nt,end:We},ce,Fe,ae)}else r.debug("Parsing segments from SIDX. representation "+ie+" - id: "+G.id+" for range : "+ae.range.start+" - "+ae.range.end),Se=function(qe,ht){for(var gt,st,qt,Bt,sn=qe.references,un=sn.length,Ge=qe.timescale,ut=qe.earliest_presentation_time,tt=ht.range.start+qe.offset+qe.first_offset+qe.size,vt=[],wt=0;wt<un;wt++)qt=sn[wt].subsegment_duration,Bt=sn[wt].referenced_size,(gt=new Wa.Z).duration=qt,gt.startTime=ut,gt.timescale=Ge,st=tt+Bt-1,gt.mediaRange=tt+"-"+st,vt.push(gt),ut+=qt,tt+=Bt;return vt}(b,ae),g(Se,G,ce)}else{if(b)ae.range.start=b.offset||ae.range.start,ae.range.end=ae.range.start+(b.size||J);else{if(pe<ae.bytesLoaded)return void g(null,G,ce);var ot=D.getLastBox();ot&&ot.size?(ae.range.start=ot.offset+ot.size,ae.range.end=ae.range.start+J):ae.range.end+=J}ne(G,ie,ae.range,ce,null,ae)}},error:function(){g(null,G,ce)}}),r.debug("Perform SIDX load for type ".concat(ie," : ").concat(ae.url," with range ").concat(ae.range.start," - ").concat(ae.range.end))}function ue(G,ie,Y){Y({segments:G,representation:ie,error:G?void 0:new re.Z(F.SEGMENT_BASE_LOADER_ERROR_CODE,F.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function fe(G){if(G.url){var ie=new I.Z;return ie.setInfo(G),ie}}return i={setConfig:function(G){G.baseURLController&&(U=G.baseURLController),G.dashMetrics&&(A=G.dashMetrics),G.mediaPlayerModel&&(h=G.mediaPlayerModel),G.errHandler&&(l=G.errHandler),G.boxParser&&(E=G.boxParser),G.debug&&(r=G.debug.getLogger(i)),G.requestModifier&&(R=G.requestModifier),G.errors&&(F=G.errors),G.urlUtils&&(N=G.urlUtils),G.constants&&(j=G.constants),G.dashConstants&&(B=G.dashConstants)},initialize:function(){w=Wn(Z).create({errHandler:l,dashMetrics:A,mediaPlayerModel:h,requestModifier:R,boxParser:E,errors:F,urlUtils:N,constants:j,dashConstants:B})},loadInitialization:function(G,ie){return new Promise(function(Y){le(G,ie,Y)})},loadSegments:function(G,ie,Y){return new Promise(function(ce){ne(G,ie,Y,ce)})},reset:function(){w&&(w.abort(),w=null)}}}Xa.__dashjs_factory_name="SegmentBaseLoader";var Is=_.Z.getSingletonFactory(Xa);function Qa(i){var r;i=i||{};var l=new DataView(i.data),E=0;function R(h,w){var F=!0,j=0;if(w===void 0&&(w=!1),h.tag>16777215?(l.getUint32(E)!==h.tag&&(F=!1),j=4):h.tag>65535?(256*l.getUint16(E)+l.getUint8(E+2)!==h.tag&&(F=!1),j=3):h.tag>255?(l.getUint16(E)!==h.tag&&(F=!1),j=2):(l.getUint8(E)!==h.tag&&(F=!1),j=1),!F&&h.required&&!w)throw new Error("required tag not found");return F&&(E+=j),F}function A(h){var w=1,F=128,j=-1,B=0,N=l.getUint8(E),U=0;for(U=0;U<8;U+=1){if((N&F)===F){B=h===void 0?N&~F:N,j=U;break}F>>=1}for(U=0;U<j;U+=1,w+=1)B=B<<8|255&l.getUint8(E+w);return E+=w,B}return r={getPos:function(){return E},setPos:function(h){E=h},consumeTag:R,consumeTagAndSize:function(h,w){var F=R(h,w);return F&&A(),F},parseTag:function(h){var w;return R(h),w=A(),r[h.parse](w)},skipOverElement:function(h,w){var F,j=R(h,w);return j&&(F=A(),E+=F),j},getMatroskaCodedNum:A,getMatroskaFloat:function(h){var w;switch(h){case 4:w=l.getFloat32(E),E+=4;break;case 8:w=l.getFloat64(E),E+=8}return w},getMatroskaUint:function(h){if(h>4)return function(j){for(var B=Math.floor(Number.MAX_SAFE_INTEGER/256),N=0,U=0;U<j;U+=1){if(N>B)throw new Error("Value exceeds safe integer limit");N*=256;var Z=l.getUint8(E+U);if(N>Number.MAX_SAFE_INTEGER-Z)throw new Error("Value exceeds safe integer limit");N+=Z}return E+=j,N}(h);for(var w=0,F=0;F<h;F+=1)w<<=8,w|=255&l.getUint8(E+F);return E+=h,w>>>0},moreData:function(){return E<l.byteLength}}}Qa.__dashjs_factory_name="EBMLParser";var Ja=_.Z.getClassFactory(Qa);function $a(){var i,r,l,E,R,A,h,w,F,j,B=this.context;function N(U){var Z=new I.Z;return Z.setInfo(U),Z}return i={setConfig:function(U){if(!(U.baseURLController&&U.dashMetrics&&U.mediaPlayerModel&&U.errHandler))throw new Error(t.Z.MISSING_CONFIG_ERROR);j=U.baseURLController,A=U.dashMetrics,h=U.mediaPlayerModel,E=U.errHandler,F=U.errors,r=U.debug.getLogger(i),R=U.requestModifier},initialize:function(){w=Wn(B).create({errHandler:E,dashMetrics:A,mediaPlayerModel:h,requestModifier:R,errors:F})},loadInitialization:function(U,Z){return new Promise(function(le){var ne=null,ue=U?j.resolve(U.path):null,fe=U?U.range.split("-"):null,G={range:{start:fe?parseFloat(fe[0]):null,end:fe?parseFloat(fe[1]):null},request:ne,url:ue?ue.url:void 0,init:!0,mediaType:Z};r.info("Start loading initialization."),ne=N(G),w.load({request:ne,success:function(){le(U)},error:function(){le(U)}}),r.debug("Perform init load: "+G.url)})},loadSegments:function(U,Z,le){return new Promise(function(ne){var ue=null,fe=U?j.resolve(U.path):null,G=fe?fe.url:void 0;ue=N({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:ue,url:G,init:!1,mediaType:Z}),r.debug("Parsing ebml header"),w.load({request:ue,success:function(ie){(function(Y,ce,g,P){if(Y&&Y.byteLength!==0){var C,D,b,te,z=Ja(B).create({data:Y}),ae=g?g.split("-"):null,Q=null,L={url:ce,range:{start:ae?parseFloat(ae[0]):null,end:ae?parseFloat(ae[1]):null},request:Q};for(r.debug("Parse EBML header: "+L.url),z.skipOverElement(l.EBML),z.consumeTag(l.Segment),b=z.getMatroskaCodedNum(),b+=z.getPos(),te=z.getPos();z.moreData()&&!z.consumeTagAndSize(l.Segment.Info,!0);)if(!(z.skipOverElement(l.Segment.SeekHead,!0)||z.skipOverElement(l.Segment.Tracks,!0)||z.skipOverElement(l.Segment.Cues,!0)||z.skipOverElement(l.Void,!0)))throw new Error("no valid top level element found");for(;C===void 0;){var J=z.getMatroskaCodedNum(!0),pe=z.getMatroskaCodedNum();J===l.Segment.Info.Duration.tag?C=z[l.Segment.Info.Duration.parse](pe):z.setPos(z.getPos()+pe)}Q=N(L),w.load({request:Q,success:function(Ne){D=function(Se,Ce,Re,$e){var nt,We,Qe,Ct,ve,Fe,ot,qe;for(Qe=[],ve=0,Fe=(We=function(ht){var gt,st,qt=[],Bt=Ja(B).create({data:ht});for(Bt.consumeTagAndSize(l.Segment.Cues);Bt.moreData()&&Bt.consumeTagAndSize(l.Segment.Cues.CuePoint,!0);){for((gt={}).CueTime=Bt.parseTag(l.Segment.Cues.CuePoint.CueTime),gt.CueTracks=[];Bt.moreData()&&Bt.consumeTag(l.Segment.Cues.CuePoint.CueTrackPositions,!0);){var sn=Bt.getMatroskaCodedNum(),un=Bt.getPos();if((st={}).Track=Bt.parseTag(l.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),st.Track===0)throw new Error("Cue track cannot be 0");st.ClusterPosition=Bt.parseTag(l.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),gt.CueTracks.push(st),Bt.setPos(un+sn)}if(gt.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");qt.push(gt)}if(qt.length===0)throw new Error("mandatory cuepoint not found");return qt}(Se)).length;ve<Fe;ve+=1)Ct=new Wa.Z,nt=ve<We.length-1?We[ve+1].CueTime-We[ve].CueTime:$e-We[ve].CueTime,Ct.duration=nt,Ct.startTime=We[ve].CueTime,Ct.timescale=1e3,ot=We[ve].CueTracks[0].ClusterPosition+Ce,qe=ve<We.length-1?We[ve+1].CueTracks[0].ClusterPosition+Ce-1:Re-1,Ct.mediaRange=ot+"-"+qe,Qe.push(Ct);return r.debug("Parsed cues: "+Qe.length+" cues."),Qe}(Ne,te,b,C),P(D)},error:function(){r.error("Download Error: Cues "+L.url),P(null)}}),r.debug("Perform cues load: "+L.url+" bytes="+L.range.start+"-"+L.range.end)}else P(null)})(ie,G,le,function(Y){ne({segments:Y,representation:U,error:Y?void 0:new re.Z(F.SEGMENT_BASE_LOADER_ERROR_CODE,F.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){ne({representation:U,error:new re.Z(F.SEGMENT_BASE_LOADER_ERROR_CODE,F.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){w&&(w.abort(),w=null)}},l={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},i}$a.__dashjs_factory_name="WebmSegmentBaseLoader";var Rs=_.Z.getSingletonFactory($a);function eo(i){i=i||{};var r,l,E,R=this.context,A=i.eventBus,h=i.events,w=i.dashMetrics,F=i.mediaPlayerModel,j=i.errHandler,B=i.baseURLController,N=i.debug,U=i.boxParser,Z=i.requestModifier,le=i.errors;function ne(ue){return(ue?ue.split("/")[1]:"").toLowerCase()==="webm"}return r={initialize:function(){l.initialize(),E.initialize()},getSegmentBaseInitSegment:function(ue){return ne(ue.representation.mimeType)?E.loadInitialization(ue.representation,ue.mediaType):l.loadInitialization(ue.representation,ue.mediaType)},getSegmentList:function(ue){return ne(ue.mimeType)?E.loadSegments(ue.representation,ue.mediaType,ue.representation?ue.representation.indexRange:null):l.loadSegments(ue.representation,ue.mediaType,ue.representation?ue.representation.indexRange:null)},reset:function(){l.reset(),E.reset()}},l=Is(R).getInstance(),E=Rs(R).getInstance(),l.setConfig({baseURLController:B,dashMetrics:w,mediaPlayerModel:F,errHandler:j,eventBus:A,events:h,errors:le,debug:N,boxParser:U,requestModifier:Z}),E.setConfig({baseURLController:B,dashMetrics:w,mediaPlayerModel:F,errHandler:j,eventBus:A,events:h,errors:le,debug:N,requestModifier:Z}),r}eo.__dashjs_factory_name="SegmentBaseController";var ws=_.Z.getSingletonFactory(eo),to=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Qi=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},no=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},Ns=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function Cs(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var Ds=function(){function i(E){var R=this;(function(A,h){if(!(A instanceof h))throw new TypeError("Cannot call a class as a function")})(this,i),this.valid=E[0]=="/",this.path=E.split("/").filter(function(A){return A.length!==0}).map(function(A){var h={name:A},w=A.indexOf("[");if(w!=-1){h.name=A.substring(0,w);var F=A.substring(w+1,A.length-1);R.valid=R.valid&&F.indexOf("[")==-1;var j=F.indexOf("=");j!=-1?(h.attribute={name:F.substring(1,j),value:F.substring(j+1)},["'",'"'].indexOf(h.attribute.value[0])!=-1&&(h.attribute.value=h.attribute.value.substring(1,h.attribute.value.length-1))):h.position=parseInt(F,10)-1}return h})}var r,l;return r=i,(l=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(E,R){for(var A=null,h=E,w=1,F="MPD";w<this.path.length&&h!==null;){A=h;var j=this.path[w];if(F=j.name,w!==this.path.length-1||!F.startsWith("@")&&F!=="text()"){var B=A[F+"_asArray"]||[];B.length===0&&A[F]&&B.push(A[F]),j.position?h=B[j.position]||null:j.attribute?function(){var N=j.attribute;h=B.filter(function(U){return U[N.name]==N.value})[0]||null}():h=B[0]||null}w++}return h===null?null:F.startsWith("@")?{name:F.substring(1),leaf:h,target:h}:F==="text()"?{name:"__text",leaf:h,target:h}:{name:F,leaf:h,target:R?A:h}}}])&&Cs(r.prototype,l),i}();function Os(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var Ms=function(){function i(E,R,A){(function(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")})(this,i),this.action=E,this.xpath=R,this.value=A,this.position=null}var r,l;return r=i,(l=[{key:"getMpdTarget",value:function(E){var R=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(E,R)}}])&&Os(r.prototype,l),i}();function ro(){var i,r,l=this.context;return i={getIsPatch:function(E){return E&&E.hasOwnProperty(e.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(E){return E&&E.hasOwnProperty(e.Z.PUBLISH_TIME)?new Date(E[e.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(E){return E&&E.hasOwnProperty(e.Z.ORIGINAL_PUBLISH_TIME)?new Date(E[e.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(E){return E&&E[e.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(E){return E?(E.__children||[]).map(function(R){var A=Object.keys(R)[0];if(A!=="add"&&A!=="remove"&&A!=="replace")return r.warn("Ignoring node of invalid action: ".concat(A)),null;var h=R[A],w=h.sel;if(A==="add"&&h.type){if(!h.type.startsWith("@"))return r.warn("Ignoring add action for prefixed namespace declaration: ".concat(h.type,"=").concat(h.__text)),null;w="".concat(w,"/").concat(h.type)}var F=new Ds(w);if(!F.isValid())return r.warn("Ignoring action with invalid selector: ".concat(A," - ").concat(w)),null;var j=null;F.findsAttribute()||F.findsTextReplace()?j=h.__text||"":A!=="remove"&&(j=h.__children.reduce(function(N,U){var Z=Object.keys(U)[0];return Z!=="#text"&&(N[Z]=N[Z]||[],N[Z].push(U[Z])),N},{}));var B=new Ms(A,F,j);return A==="add"&&(B.position=h.pos),B}).filter(function(R){return!!R}):[]}},r=(0,m.Z)(l).getInstance().getLogger(i),i}ro.__dashjs_factory_name="PatchManifestModel";var Ps=_.Z.getSingletonFactory(ro);function io(){var i,r,l,E,R,A,h,w=this.context;function F(C,D,b){var te,z=r.getAdaptationsForType(E[0].mpd.manifest,C,D);if(!z||z.length===0)return null;if(z.length>1&&b){var ae=N(b,D);if(R[b.id]&&R[b.id][D]){for(var Q=0,L=z.length;Q<L;Q++)if(j(R[b.id][D],ae[Q]))return z[Q]}for(var J=0,pe=z.length;J<pe;J++)if(te=z[J],r.getRolesForAdaptation(te).filter(function(Ne){return Ne.value===e.Z.MAIN})[0])return z[J]}return z[0]}function j(C,D){if(!C||!D)return!1;var b=C.id===D.id,te=C.codec===D.codec,z=C.viewpoint===D.viewpoint,ae=JSON.stringify(C.viewpointsWithSchemeIdUri)===JSON.stringify(D.viewpointsWithSchemeIdUri),Q=C.lang===D.lang,L=C.roles.toString()===D.roles.toString(),J=JSON.stringify(C.rolesWithSchemeIdUri)===JSON.stringify(D.rolesWithSchemeIdUri),pe=C.accessibility.toString()===D.accessibility.toString(),Ne=JSON.stringify(C.accessibilitiesWithSchemeIdUri)===JSON.stringify(D.accessibilitiesWithSchemeIdUri),Se=C.audioChannelConfiguration.toString()===D.audioChannelConfiguration.toString(),Ce=JSON.stringify(C.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(D.audioChannelConfigurationsWithSchemeIdUri);return b&&te&&z&&ae&&Q&&L&&J&&pe&&Ne&&Se&&Ce}function B(C,D,b,te,z,ae){var Q,L,J,pe,Ne,Se,Ce=[];if(!te||te.length===0)return[];var Re=r.getAdaptationsForPeriod(D);for(pe=0,Se=te.length;pe<Se;pe++)if(Q=te[pe],L=G(Re[J=r.getIndexForAdaptation(Q,C,b.index)]),ae){var $e=L.accessibility.length;for(Ne=0;Ne<$e;Ne++)if(L){var nt=L.accessibility[Ne];if(nt.indexOf("cea-608:")===0){var We=nt.substring(8).split(";");if(We[0].substring(0,2)==="CC")for(Ne=0;Ne<We.length;Ne++)L||(L=G.call(this,Re[J])),ie(L,We[Ne].substring(0,3),We[Ne].substring(4)),Ce.push(L),L=null;else for(Ne=0;Ne<We.length;Ne++)L||(L=G.call(this,Re[J])),ie(L,"CC"+(Ne+1),We[Ne]),Ce.push(L),L=null}else nt.indexOf("cea-608")===0&&(ie(L,A.CC1,"eng"),Ce.push(L),L=null)}}else z===A.IMAGE?(L.type=A.IMAGE,Ce.push(L),L=null):L&&Ce.push(L);return Ce}function N(C,D,b){var te=E,z=b,ae=[];if(z)ce(),te=U(z);else{if(!(E.length>0))return ae;z=E[0].mpd.manifest}var Q=fe(C,te),L=r.getAdaptationsForType(z,C?C.index:null,D);return ae=B(z,Q,C,L,D),D===A.TEXT&&(L=r.getAdaptationsForType(z,C?C.index:null,A.VIDEO),ae=ae.concat(B(z,Q,C,L,D,!0))),ae}function U(C){var D=Z(C);return r.getRegularPeriods(D)}function Z(C){var D=ne(C);return r.getMpd(D)}function le(){E=[],R={}}function ne(C){return C||(E.length>0?E[0].mpd.manifest:null)}function ue(C){try{var D=fe(C.streamInfo,E),b=r.getAdaptationsForPeriod(D);return C&&C.streamInfo&&C.streamInfo.id!==void 0&&b?b[C.index]:null}catch{return null}}function fe(C,D){for(var b=D.length,te=0;te<b;te++){var z=D[te];if(C&&C.id===z.id)return z}return null}function G(C){if(!C)return null;var D,b,te,z,ae,Q=new Qi,L=C.period.mpd.manifest.Period_asArray[C.period.index].AdaptationSet_asArray[C.index];if(Q.id=C.id,Q.index=C.index,Q.type=C.type,Q.streamInfo=Y(C.period),Q.representationCount=r.getRepresentationCount(L),Q.labels=r.getLabelsForAdaptation(L),Q.lang=r.getLanguageForAdaptation(L),Q.segmentAlignment=r.getSegmentAlignment(L),Q.subSegmentAlignment=r.getSubSegmentAlignment(L),D=r.getViewpointForAdaptation(L),Q.viewpoint=D.length?D[0].value:void 0,Q.viewpointsWithSchemeIdUri=D,ae=r.getAccessibilityForAdaptation(L),Q.accessibility=ae.map(function(Ce){var Re=Ce.value,$e=Re;return Ce.schemeIdUri&&Ce.schemeIdUri.search("cea-608")>=0&&h!==void 0&&($e=Re?"cea-608:"+Re:"cea-608",Q.embeddedCaptions=!0),$e}),Q.accessibilitiesWithSchemeIdUri=ae,b=r.getAudioChannelConfigurationForAdaptation(L),Q.audioChannelConfiguration=b.map(function(Ce){return Ce.value}),Q.audioChannelConfigurationsWithSchemeIdUri=b,Q.audioChannelConfiguration.length===0&&Array.isArray(L.Representation_asArray)&&L.Representation_asArray.length>0&&(te=r.getAudioChannelConfigurationForRepresentation(L.Representation_asArray[0]),Q.audioChannelConfiguration=te.map(function(Ce){return Ce.value}),Q.audioChannelConfigurationsWithSchemeIdUri=te),z=r.getRolesForAdaptation(L),Q.roles=z.map(function(Ce){return Ce.value}),Q.rolesWithSchemeIdUri=z,Q.codec=r.getCodec(L),Q.mimeType=r.getMimeType(L),Q.contentProtection=r.getContentProtectionData(L),Q.bitrateList=r.getBitrateListForAdaptation(L),Q.selectionPriority=r.getSelectionPriority(L),Q.contentProtection){var J=Q.contentProtection.map(function(Ce){return r.getKID(Ce)}).filter(function(Ce){return Ce!==null});if(J.length){var pe=J[0];Q.contentProtection.forEach(function(Ce){Ce.keyId=pe})}}if(Q.isText=r.getIsText(L),Q.supplementalProperties=r.getSupplementalPropertiesForAdaptation(L),(!Q.supplementalProperties||Object.keys(Q.supplementalProperties).length===0)&&Array.isArray(L.Representation_asArray)&&L.Representation_asArray.length>0){var Ne=L.Representation_asArray.map(function(Ce){return r.getSupplementalPropertiesForRepresentation(Ce)});Ne.every(function(Ce){return JSON.stringify(Ce)===JSON.stringify(Ne[0])})&&(Q.supplementalProperties=Ne[0])}if(Q.supplementalPropertiesAsArray=r.getSupplementalPropertiesAsArrayForAdaptation(L),(!Q.supplementalPropertiesAsArray||Q.supplementalPropertiesAsArray.length===0)&&Array.isArray(L.Representation_asArray)&&L.Representation_asArray.length>0){var Se=L.Representation_asArray.map(function(Ce){return r.getSupplementalPropertiesAsArrayForRepresentation(Ce)});Se.every(function(Ce){return JSON.stringify(Ce)===JSON.stringify(Se[0])})&&(Q.supplementalPropertiesAsArray=Se[0])}return Q.essentialProperties=r.getEssentialPropertiesForAdaptation(L),Q.essentialPropertiesAsArray=r.getEssentialPropertiesAsArrayForAdaptation(L),Q.isFragmented=r.getIsFragmented(L),Q.isEmbedded=!1,Q}function ie(C,D,b){C.id=D,C.index=100+parseInt(D.substring(2,3)),C.type=A.TEXT,C.codec="cea-608-in-SEI",C.isEmbedded=!0,C.isFragmented=!1;var te=oi()(b);C.lang=te||b,C.roles=["caption"],C.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function Y(C){var D,b,te=new no;return te.id=C.id,te.index=C.index,te.start=C.start,te.duration=C.duration,te.manifestInfo=(D=C.mpd,(b=new Ns).dvrWindowSize=D.timeShiftBufferDepth,b.loadedTime=D.manifest.loadedTime,b.availableFrom=D.availabilityStartTime,b.minBufferTime=D.manifest.minBufferTime,b.maxFragmentDuration=D.maxSegmentDuration,b.duration=r.getDuration(D.manifest),b.isDynamic=r.getIsDynamic(D.manifest),b.serviceDescriptions=r.getServiceDescriptions(D.manifest),b.protocol=D.manifest.protocol,b),te.isLast=C.mpd.manifest.Period_asArray.length===1||Math.abs(te.start+te.duration-te.manifestInfo.duration)<1,te}function ce(){if(!A)throw new Error("setConfig function has to be called previously")}function g(C){return E.length>0?E[0].mpd.manifest.Period_asArray[C]:null}function P(C,D,b){var te,z,ae,Q,L;if(C){for(te=C.AdaptationSet_asArray,Q=0;Q<te.length;Q+=1)for(ae=te[Q].Representation_asArray,L=0;L<ae.length;L+=1)if(D===(z=ae[L]).id)return b?L:z}return null}return i={getBandwidthForRepresentation:function(C,D){var b;return(b=P(g(D),C))?b.bandwidth:null},getIndexForRepresentation:function(C,D){return function(b,te){var z=P(b,te,!0);return z!==null?z:-1}(g(D),C)},getMaxIndexForBufferType:function(C,D){return function(b,te){var z,ae,Q,L;if(!b||!te)return-1;for(ae=b.AdaptationSet_asArray,L=0;L<ae.length;L+=1)if(Q=(z=ae[L]).Representation_asArray,r.getIsTypeOf(z,te))return Q.length;return-1}(g(D),C)},convertRepresentationToRepresentationInfo:function(C){if(C){var D=new to,b=C.adaptation.period.mpd.manifest.Period_asArray[C.adaptation.period.index].AdaptationSet_asArray[C.adaptation.index],te=r.getRepresentationFor(C.index,b);return D.id=C.id,D.quality=C.index,D.bandwidth=r.getBandwidth(te),D.fragmentDuration=C.segmentDuration||(C.segments&&C.segments.length>0?C.segments[0].duration:NaN),D.MSETimeOffset=C.MSETimeOffset,D.mediaInfo=G(C.adaptation),D}return null},getStreamsInfo:function(C,D){var b=[],te=E;if(C&&(ce(),te=U(C)),te.length>0){(!D||D>te.length)&&(D=te.length);for(var z=0;z<D;z++)b.push(Y(te[z]))}return b},getMediaInfoForType:function(C,D){if(E.length===0||!C)return null;var b=fe(C,E);if(!b)return null;var te=r.getAdaptationsForPeriod(b),z=F(C.index,D,C);return z?G(te[r.getIndexForAdaptation(z,E[0].mpd.manifest,C.index)]):null},getAllMediaInfoForType:N,getAdaptationForType:F,getRealAdaptation:function(C,D){var b,te,z=fe(C,E);return b=D?D.id:null,E.length>0&&z&&(te=b?r.getAdaptationForId(b,E[0].mpd.manifest,z.index):r.getAdaptationForIndex(D?D.index:null,E[0].mpd.manifest,z.index)),te},getProducerReferenceTimes:function(C,D){var b,te,z=fe(C,E);return b=D?D.id:null,E.length>0&&z&&(te=b?r.getAdaptationForId(b,E[0].mpd.manifest,z.index):r.getAdaptationForIndex(D?D.index:null,E[0].mpd.manifest,z.index)),te?r.getProducerReferenceTimesForAdaptation(te):[]},getRealPeriodByIndex:function(C){return r.getRealPeriodForIndex(C,E[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(C){try{return r.getEssentialPropertiesForRepresentation(C)}catch{return[]}},getVoRepresentations:function(C){var D=ue(C);return r.getRepresentationsForAdaptation(D)},getEventsFor:function(C,D,b){var te=[];if(E.length>0){var z=E[0].mpd.manifest;if(C instanceof no){var ae=fe(C,E);te=r.getEventsForPeriod(ae)}else if(C instanceof Qi){var Q=fe(b,E);te=r.getEventStreamForAdaptationSet(z,ue(C),Q)}else if(C instanceof to){var L=fe(b,E);te=r.getEventStreamForRepresentation(z,D,L)}}return te},getEvent:function(C,D,b,te){try{if(!C||!D||isNaN(b)||!te)return null;var z=C.scheme_id_uri,ae=C.value;if(!D[z+"/"+ae])return null;var Q,L=new Kn,J=C.timescale||1,pe=te.adaptation.period.start,Ne=D[z+"/"+ae],Se=isNaN(te.presentationTimeOffset)?isNaN(Ne.presentationTimeOffset)?0:Ne.presentationTimeOffset:te.presentationTimeOffset,Ce=C.presentation_time_delta/J;Q=C.version===0?pe+b-Se+Ce:pe-Se+Ce;var Re=C.event_duration/J,$e=C.id,nt=C.message_data;return L.eventStream=Ne,L.eventStream.value=ae,L.eventStream.timescale=J,L.duration=Re,L.id=$e,L.calculatedPresentationTime=Q,L.messageData=nt,L.presentationTimeDelta=Ce,L}catch{return null}},getMpd:Z,setConfig:function(C){C&&(C.constants&&(A=C.constants),C.cea608parser&&(h=C.cea608parser),C.errHandler&&r.setConfig({errHandler:C.errHandler}),C.BASE64&&r.setConfig({BASE64:C.BASE64}))},updatePeriods:function(C){if(!C)return null;ce(),E=U(C)},getIsTextTrack:function(C){return r.getIsText(C)},getUTCTimingSources:function(){var C=ne();return r.getUTCTimingSources(C)},getSuggestedPresentationDelay:function(){var C=E.length>0?E[0].mpd:null;return r.getSuggestedPresentationDelay(C)},getAvailabilityStartTime:function(C){var D=Z(C);return r.getAvailabilityStartTime(D)},getIsTypeOf:function(C,D){return r.getIsTypeOf(C,D)},getIsDynamic:function(C){var D=ne(C);return r.getIsDynamic(D)},getDuration:function(C){var D=ne(C);return r.getDuration(D)},getRegularPeriods:U,getContentSteering:function(C){return r.getContentSteering(C)},getLocation:function(C){return r.getLocation(C)},getPatchLocation:function(C){var D=r.getPatchLocation(C),b=r.getPublishTime(C);return D&&D.length!==0&&b?D.filter(function(te){return isNaN(te.ttl)||b.getTime()+te.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(C){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return r.getManifestUpdatePeriod(C,D)},getPublishTime:function(C){return r.getPublishTime(C)},getIsDVB:function(C){return r.hasProfile(C,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(C){return l.getIsPatch(C)},getBaseURLsFromElement:function(C){return r.getBaseURLsFromElement(C)},getRepresentationSortFunction:function(){return r.getRepresentationSortFunction()},getCodec:function(C,D,b){return r.getCodec(C,D,b)},getPeriodById:function(C){if(!C||E.length===0)return null;var D=E.filter(function(b){return b.id===C});return D&&D.length>0?D[0]:null},setCurrentMediaInfo:function(C,D,b){R[C]=R[C]||{},R[C][D]=R[C][D]||{},R[C][D]=b},isPatchValid:function(C,D){var b=r.getId(C),te=l.getMpdId(D),z=r.getPublishTime(C),ae=l.getPublishTime(D),Q=l.getOriginalPublishTime(D);return!!(b&&te&&b==te&&z&&Q&&z.getTime()==Q.getTime()&&ae&&z.getTime()<ae.getTime())},applyPatchToManifest:function(C,D){l.getPatchOperations(D).forEach(function(b){var te=b.getMpdTarget(C);if(te!==null){var z=te.name,ae=te.target,Q=te.leaf;if(b.xpath.findsAttribute()||z==="__text")switch(b.action){case"add":case"replace":ae[z]=b.value;break;case"remove":delete ae[z]}else{var L=(ae[z+"_asArray"]||[]).indexOf(Q),J=b.position==="prepend"||b.position==="before";if((b.action==="remove"||b.action==="replace")&&(delete ae[z],L!=-1)){var pe=ae[z+"_asArray"];pe.splice(L,1),pe.length>1?ae[z]=pe:pe.length==1?ae[z]=pe[0]:delete ae[z+"_asArray"]}b.action!=="add"&&b.action!=="replace"||Object.keys(b.value).forEach(function(Ne){var Se=b.value[Ne],Ce=ae[Ne+"_asArray"]||[];if(Ce.length===0&&ae[Ne]&&Ce.push(ae[Ne]),Ce.length===0)Ce=Se;else{var Re=Ce.length;Re=Ne==z&&L!=-1?L+(J?0:1)+(b.action=="replace"?-1:0):J?0:Ce.length,Ce.splice.apply(Ce,[Re,0].concat(Se))}ae[Ne+"_asArray"]=Ce,ae[Ne]=Ce.length==1?Ce[0]:Ce})}}})},areMediaInfosEqual:j,reset:le},r=$t(w).getInstance(),l=Ps(w).getInstance(),le(),i}io.__dashjs_factory_name="DashAdapter";var Ls=_.Z.getSingletonFactory(io);function Fs(i,r){for(var l=0;l<r.length;l++){var E=r[l];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(i,E.key,E)}}var xs=function(){function i(){(function(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")})(this,i)}var r,l;return r=i,l=[{key:"round10",value:function(E,R){return function(A,h,w){return w===void 0||+w==0?Math[A](h):(w=+w,(h=+h)===null||isNaN(h)||typeof w!="number"||w%1!=0?NaN:(h=h.toString().split("e"),+((h=(h=Math[A](+(h[0]+"e"+(h[1]?+h[1]-w:-w)))).toString().split("e"))[0]+"e"+(h[1]?+h[1]+w:w))))}("round",E,R)}}],l&&Fs(r,l),i}(),ks=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Zs=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.t=null,this.mt=null,this.to=null,this.lto=null},Us=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.t=null,this.level=null},Bs=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.target=null,this.state=y.Z.BUFFER_EMPTY},Gs=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.time=null,this.range=null,this.manifestInfo=null},qs=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.time=null,this.droppedFrames=null};function Ji(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}var Ys=function i(){Ji(this,i),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},js=function i(){Ji(this,i),this.id=null,this.index=null,this.start=null,this.duration=null},Hs=function i(){Ji(this,i),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},Vs=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},Ks=function i(){(function(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.loadingRequests=[],this.executedRequests=[]};function ao(i){var r,l,E=(i=i||{}).settings,R=this.context,A=(0,p.Z)(R).getInstance();function h(){A.trigger(u.Z.METRICS_CHANGED)}function w(Z){A.trigger(u.Z.METRIC_CHANGED,{mediaType:Z}),h()}function F(Z,le,ne){A.trigger(u.Z.METRIC_UPDATED,{mediaType:Z,metric:le,value:ne}),w(Z)}function j(Z,le,ne){A.trigger(u.Z.METRIC_ADDED,{mediaType:Z,metric:le,value:ne}),w(Z)}function B(Z,le){var ne=null;return Z&&(l.hasOwnProperty(Z)?ne=l[Z]:le||(ne=new ks,l[Z]=ne)),ne}function N(Z,le,ne){var ue=B(Z);ue!==null&&(ue[le].push(ne),ue[le].length>E.get().streaming.metrics.maxListDepth&&ue[le].shift())}function U(Z,le,ne){N(Z,le,ne),j(Z,le,ne)}return r={clearCurrentMetricsForType:function(Z){delete l[Z],w(Z)},clearAllCurrentMetrics:function(){l={},h()},getMetricsFor:B,addHttpRequest:function Z(le,ne,ue,fe,G,ie,Y,ce,g,P,C,D,b,te,z,ae,Q){var L=new Le.w;ie!=null&&ie!==fe&&(Z(le,null,ue,fe,G,null,null,ce,g,null,null,null,b,null,null,ae,Q),L.actualurl=ie),L.tcpid=ne,L.type=ue,L.url=fe,L.range=ce,L.trequest=g,L.tresponse=P,L.responsecode=D,L.cmsd=Q,L._tfinish=C,L._stream=le,L._mediaduration=b,L._quality=G,L._responseHeaders=te,L._serviceLocation=Y,L._fileLoaderType=ae,z?z.forEach(function(J){(function(pe,Ne,Se,Ce){var Re=new Le.O;Re.s=Ne,Re.d=Se,Re.b=Ce,pe.trace.push(Re),pe.interval||(pe.interval=0),pe.interval+=Se})(L,J.s,J.d,J.b)}):(delete L.interval,delete L.trace),U(le,y.Z.HTTP_REQUEST,L)},addRepresentationSwitch:function(Z,le,ne,ue,fe){var G=new Zs;G.t=le,G.mt=ne,G.to=ue,fe?G.lto=fe:delete G.lto,U(Z,y.Z.TRACK_SWITCH,G)},addBufferLevel:function(Z,le,ne){var ue=new Us;ue.t=le,ue.level=ne,U(Z,y.Z.BUFFER_LEVEL,ue)},addBufferState:function(Z,le,ne){var ue=new Bs;ue.target=ne,ue.state=le,U(Z,y.Z.BUFFER_STATE,ue)},addDVRInfo:function(Z,le,ne,ue){var fe=new Gs;fe.time=le,fe.range=ue,fe.manifestInfo=ne,U(Z,y.Z.DVR_INFO,fe)},addDroppedFrames:function(Z,le){var ne=new qs,ue=B(Z).DroppedFrames;le&&(ne.time=le.creationTime,ne.droppedFrames=le.droppedVideoFrames,ue.length>0&&ue[ue.length-1]==ne||U(Z,y.Z.DROPPED_FRAMES,ne))},addSchedulingInfo:function(Z,le,ne,ue,fe,G,ie,Y,ce){var g=new Vs;g.mediaType=Z,g.t=le,g.type=ne,g.startTime=ue,g.availabilityStartTime=fe,g.duration=G,g.quality=ie,g.range=Y,g.state=ce,U(Z,y.Z.SCHEDULING_INFO,g)},addRequestsQueue:function(Z,le,ne){var ue=new Ks;ue.loadingRequests=le,ue.executedRequests=ne,B(Z).RequestsQueue=ue,j(Z,y.Z.REQUESTS_QUEUE,ue)},addManifestUpdate:function(Z,le,ne,ue,fe,G,ie,Y,ce,g){var P=new Ys;P.mediaType=Z,P.type=le,P.requestTime=ne,P.fetchTime=ue,P.availabilityStartTime=fe,P.presentationStartTime=G,P.clientTimeOffset=ie,P.currentTime=Y,P.buffered=ce,P.latency=g,N(t.Z.STREAM,y.Z.MANIFEST_UPDATE,P),j(Z,y.Z.MANIFEST_UPDATE,P)},updateManifestUpdateInfo:function(Z,le){if(Z){for(var ne in le)Z[ne]=le[ne];F(Z.mediaType,y.Z.MANIFEST_UPDATE,Z)}},addManifestUpdateStreamInfo:function(Z,le,ne,ue,fe){if(Z){var G=new js;G.id=le,G.index=ne,G.start=ue,G.duration=fe,Z.streamInfo.push(G),F(Z.mediaType,y.Z.MANIFEST_UPDATE_STREAM_INFO,Z)}},addManifestUpdateRepresentationInfo:function(Z,le,ne,ue,fe,G,ie,Y){if(Z&&Z.representationInfo){var ce=new Hs;ce.id=le,ce.index=ne,ce.streamIndex=ue,ce.mediaType=fe,ce.startNumber=ie,ce.fragmentInfoType=Y,ce.presentationTimeOffset=G,Z.representationInfo.push(ce),F(Z.mediaType,y.Z.MANIFEST_UPDATE_TRACK_INFO,Z)}},addPlayList:function(Z){Z.trace&&Array.isArray(Z.trace)?Z.trace.forEach(function(le){le.hasOwnProperty("subreplevel")&&!le.subreplevel&&delete le.subreplevel}):delete Z.trace,U(t.Z.STREAM,y.Z.PLAY_LIST,Z)},addDVBErrors:function(Z){U(t.Z.STREAM,y.Z.DVB_ERRORS,Z)}},l={},r}ao.__dashjs_factory_name="MetricsModel";var zs=_.Z.getSingletonFactory(ao);function oo(i){i=i||{};var r,l,E,R,A=this.context,h=i.metricsModel;function w(B){var N=h.getMetricsFor(B,!0);if(!N)return null;var U,Z=N.HttpList,le=null;if(!Z||Z.length<=0)return null;for(U=Z.length-1;U>=0;){if(Z[U].responsecode){le=Z[U];break}U--}return le}function F(B){var N=h.getMetricsFor(B,!0);return N&&N.HttpList?N.HttpList:[]}function j(B,N){if(!B)return null;var U=B[N];return U&&U.length!==0?U[U.length-1]:null}return r={getCurrentRepresentationSwitch:function(B){return j(h.getMetricsFor(B,!0),y.Z.TRACK_SWITCH)},getCurrentBufferState:function(B){return j(h.getMetricsFor(B,!0),y.Z.BUFFER_STATE)},getCurrentBufferLevel:function(B){var N=j(h.getMetricsFor(B,!0),y.Z.BUFFER_LEVEL);return N?xs.round10(N.level/1e3,-3):0},getCurrentHttpRequest:w,getHttpRequests:F,getCurrentDroppedFrames:function(){return j(h.getMetricsFor(t.Z.VIDEO,!0),y.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(B){return j(h.getMetricsFor(B,!0),y.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(B){return j(B?h.getMetricsFor(B,!0):h.getMetricsFor(t.Z.VIDEO,!0)||h.getMetricsFor(t.Z.AUDIO,!0),y.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return j(h.getMetricsFor(t.Z.STREAM),y.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(B,N){if(!N)return null;var U={},Z=w(B);Z&&(U=pt.Z.parseHttpHeaders(Z._responseHeaders));var le=U[N.toLowerCase()];return le===void 0?null:le},getLatestMPDRequestHeaderValueByID:function(B){if(!B)return null;var N,U,Z,le={};for(Z=(N=F(t.Z.STREAM)).length-1;Z>=0;Z--)if((U=N[Z]).type===Le.w.MPD_TYPE){le=pt.Z.parseHttpHeaders(U._responseHeaders);break}var ne=le[B.toLowerCase()];return ne===void 0?null:ne},addRepresentationSwitch:function(B,N,U,Z,le){h.addRepresentationSwitch(B,N,U,Z,le)},addDVRInfo:function(B,N,U,Z){h.addDVRInfo(B,N,U,Z)},updateManifestUpdateInfo:function(B){var N=this.getCurrentManifestUpdate();h.updateManifestUpdateInfo(N,B)},addManifestUpdateStreamInfo:function(B){if(B){var N=this.getCurrentManifestUpdate();h.addManifestUpdateStreamInfo(N,B.id,B.index,B.start,B.duration)}},addManifestUpdateRepresentationInfo:function(B,N){if(B){var U=this.getCurrentManifestUpdate();h.addManifestUpdateRepresentationInfo(U,B.id,B.index,B.streamIndex,N,B.presentationTimeOffset,B.startNumber,B.fragmentInfoType)}},addManifestUpdate:function(B){h.addManifestUpdate(t.Z.STREAM,B.type,B.requestStartDate,B.requestEndDate)},addHttpRequest:function(B,N,U,Z,le,ne){h.addHttpRequest(B.mediaType,null,B.type,B.url,B.quality,N,B.serviceLocation||null,B.range||null,B.requestStartDate,B.firstByteDate,B.requestEndDate,U,B.duration,Z,le,B.fileLoaderType,ne)},addSchedulingInfo:function(B,N){h.addSchedulingInfo(B.mediaType,new Date,B.type,B.startTime,B.availabilityStartTime,B.duration,B.quality,B.range,N)},addRequestsQueue:function(B,N,U){h.addRequestsQueue(B,N,U)},addBufferLevel:function(B,N,U){h.addBufferLevel(B,N,U)},addBufferState:function(B,N,U){h.addBufferState(B,N,U)},addDroppedFrames:function(B){h.addDroppedFrames(t.Z.VIDEO,B)},addPlayList:function(){R&&(h.addPlayList(R),R=null)},addDVBErrors:function(B){h.addDVBErrors(B)},createPlaylistMetrics:function(B,N){(R=new De).start=new Date,R.mstart=B,R.starttype=N},createPlaylistTraceMetrics:function(B,N,U){l===!0&&(l=!1,(E=new Ae).representationid=B,E.start=new Date,E.mstart=N,E.playbackspeed=U!==null?U.toString():null)},updatePlayListTraceMetrics:function(B){if(E)for(var N in E)E[N]=B[N]},pushPlayListTraceMetrics:function(B,N){if(l===!1&&R&&E&&E.start){var U=E.start,Z=B.getTime()-U.getTime();E.duration=Z,E.stopreason=N,R.trace.push(E),l=!0}},clearAllCurrentMetrics:function(){h.clearAllCurrentMetrics()}},h=h||zs(A).getInstance({settings:i.settings}),l=!0,E=null,R=null,r}oo.__dashjs_factory_name="DashMetrics";var Ws=_.Z.getSingletonFactory(oo);function so(){var i,r,l,E,R=this.context,A=(0,p.Z)(R).getInstance(),h=(0,Ie.Z)(R).getInstance();function w(fe){E=fe}function F(fe,G,ie,Y){var ce,g=G.adaptation.period.mpd,P=g.availabilityStartTime;if(Y)ce=ie&&g.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(P.getTime()+1e3*(fe+g.timeShiftBufferDepth)):g.availabilityEndTime;else if(ie){var C=G.availabilityTimeOffset;ce=new Date(P.getTime()+1e3*(fe-C))}else ce=P;return ce}function j(fe,G){return(fe.getTime()-G.mpd.availabilityStartTime.getTime()+1e3*E)/1e3}function B(fe,G){return fe+(G.adaptation.period.start-G.presentationTimeOffset)}function N(fe){var G={start:NaN,end:NaN},ie=fe[0].getAdapter().getRegularPeriods()[0],Y=j(new Date,ie);if(!fe||fe.length===0)return{range:G,now:Y};fe.forEach(function(g){var P=g.getAdapter(),C=P.getMediaInfoForType(g.getStreamInfo(),t.Z.VIDEO)||P.getMediaInfoForType(g.getStreamInfo(),t.Z.AUDIO),D=P.getVoRepresentations(C)[0],b={start:NaN,end:NaN};if(D)if(D.segmentInfoType===e.Z.SEGMENT_TIMELINE)b=function(z){var ae,Q,L,J,pe=z.adaptation.period.mpd.manifest.Period_asArray[z.adaptation.period.index].AdaptationSet_asArray[z.adaptation.index],Ne=r.getRepresentationFor(z.index,pe),Se=Ne.SegmentTemplate||Ne.SegmentList,Ce=Se.SegmentTimeline,Re=Se.timescale,$e=Ce.S_asArray,nt={start:0,end:0},We=$e[0].t,Qe=!isNaN(We),Ct=Qe?We:0,ve=0;for(Qe&&(nt.start=B(Ct/Re,z)),L=0,J=$e.length;L<J;L++)Q=0,(ae=$e[L]).hasOwnProperty("r")&&(Q=ae.r),ve+=ae.d*(1+Q);return nt.end=B((Ct+ve)/Re,z),nt}(D);else{var te=D.adaptation.period;b.start=te.start,b.end=Math.max(Y,te.start+te.duration)}!isNaN(b.start)&&(isNaN(G.start)||G.start>b.start)&&(G.start=b.start),!isNaN(b.end)&&(isNaN(G.end)||G.end<b.end)&&(G.end=b.end)}),G.end=Math.min(Y,G.end);var ce=Z(fe,G.end,!0);return G.end=isNaN(ce)?G.end:ce,G.start=ie&&ie.mpd&&ie.mpd.timeShiftBufferDepth&&!isNaN(ie.mpd.timeShiftBufferDepth)&&!isNaN(G.end)?Math.max(G.end-ie.mpd.timeShiftBufferDepth,G.start):G.start,G.start=Z(fe,G.start),{range:G,now:Y}}function U(fe,G){l=fe-G.end}function Z(fe,G){var ie=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var Y=0,ce=!1,g=NaN;!ce&&Y<fe.length;){var P=fe[Y].getStreamInfo();P.start<=G&&(!isFinite(P.duration)||P.start+P.duration>=G)?(g=G,ce=!0):!ie&&P.start>G&&(isNaN(g)||P.start<g)?g=P.start:ie&&P.start+P.duration<G&&(isNaN(g)||P.start+P.duration>g)&&(g=P.start+P.duration),Y+=1}return g}catch{return G}}function le(fe){fe.offset===void 0||isNaN(fe.offset)||w(fe.offset/1e3)}function ne(){E=0,l=0}function ue(){A.off(u.Z.UPDATE_TIME_SYNC_OFFSET,le,this),ne()}return i={initialize:function(){ne(),A.on(u.Z.UPDATE_TIME_SYNC_OFFSET,le,this)},getClientTimeOffset:function(){return E},setClientTimeOffset:w,getClientReferenceTime:function(){return Date.now()-1e3*l+1e3*E},calcAvailabilityStartTimeFromPresentationTime:function(fe,G,ie){return F(fe,G,ie)},calcAvailabilityEndTimeFromPresentationTime:function(fe,G,ie){return F(fe,G,ie,!0)},calcPresentationTimeFromWallTime:j,calcPresentationTimeFromMediaTime:B,calcPeriodRelativeTimeFromMpdRelativeTime:function(fe,G){return G-fe.adaptation.period.start},calcMediaTimeFromPresentationTime:function(fe,G){return fe-G.adaptation.period.start+G.presentationTimeOffset},calcWallTimeForSegment:function(fe,G){var ie,Y,ce;return G&&(ie=fe.representation.adaptation.period.mpd.suggestedPresentationDelay,Y=fe.presentationStartTime+ie,ce=new Date(fe.availabilityStartTime.getTime()+1e3*Y)),ce},calcTimeShiftBufferWindow:function(fe,G){if(!G)return function(Y){var ce={start:NaN,end:NaN},g=0,P=NaN;return Y.forEach(function(C){var D=C.getStreamInfo();g+=D.duration,(isNaN(P)||D.start<P)&&(P=D.start)}),ce.start=P,ce.end=P+g,ce}(fe);if(h.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var ie=N(fe);return U(ie.now,ie.range),ie.range}return function(Y){var ce={start:NaN,end:NaN};if(!Y||Y.length===0)return ce;var g=Y[0].getAdapter().getRegularPeriods()[0],P=j(new Date,g),C=g.mpd.timeShiftBufferDepth,D=isNaN(C)?0:P-C;if(ce.start=Z(Y,D),ce.end=!isNaN(ce.start)&&P<ce.start?P:Z(Y,P,!0),!isNaN(C)&&ce.end<P-C&&(ce.end=NaN),h.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var b=N(Y);if(b.range.end<ce.start)return A.trigger(n.Z.CONFORMANCE_VIOLATION,{level:Fr.LEVELS.WARNING,event:Fr.EVENTS.INVALID_DVR_WINDOW}),U(b.now,b.range),b.range}return ce}(fe)},reset:ue},r=$t(R).getInstance(),ue(),i}so.__dashjs_factory_name="TimelineConverter";var Xs=_.Z.getSingletonFactory(so),$i=M(4593),yi=M(6934);function ea(i){return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ea(i)}function ta(i,r){return ta=Object.setPrototypeOf||function(l,E){return l.__proto__=E,l},ta(i,r)}function Qs(i,r){return!r||ea(r)!=="object"&&typeof r!="function"?function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(i):r}function Ei(i){return Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ei(i)}var Js=function(i){(function(A,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(h&&h.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),h&&ta(A,h)})(R,i);var r,l,E=(r=R,l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var A,h=Ei(r);if(l){var w=Ei(this).constructor;A=Reflect.construct(h,arguments,w)}else A=h.apply(this,arguments);return Qs(this,A)});function R(){var A;return function(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")}(this,R),(A=E.call(this)).captionData=null,A.label=null,A.defaultTrack=!1,A.kind=null,A.isFragmented=!1,A.isEmbedded=!1,A.isTTML=null,A}return R}(Qi),$s=M(2295);function uo(){var i=0;function r(w){for(var F="",j=0;j<w.length;++j)F+=w[j].uchar;return F.length-F.replace(/^\s+/,"").length}function l(w){return"left: "+3.125*w.x+"%; top: "+6.66*w.y1+"%; width: "+(100-3.125*w.x)+"%; height: "+6.66*Math.max(w.y2-1-w.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function E(w){return w==="red"?"rgb(255, 0, 0)":w==="green"?"rgb(0, 255, 0)":w==="blue"?"rgb(0, 0, 255)":w==="cyan"?"rgb(0, 255, 255)":w==="magenta"?"rgb(255, 0, 255)":w==="yellow"?"rgb(255, 255, 0)":w==="white"?"rgb(255, 255, 255)":w==="black"?"rgb(0, 0, 0)":w}function R(w,F){var j=w.videoHeight/15;return F?"font-size: "+j+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(F.foreground?E(F.foreground):"rgb(255, 255, 255)")+"; font-style: "+(F.italics?"italic":"normal")+"; text-decoration: "+(F.underline?"underline":"none")+"; white-space: pre; background-color: "+(F.background?E(F.background):"transparent")+";":"font-size: "+j+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function A(w){return w.replace(/^\s+/g,"")}function h(w){return w.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(w,F,j,B){var N,U,Z=null,le=!1,ne=-1,ue={start:F,end:j,spans:[]},fe="style_cea608_white_black",G={},ie={},Y=[];for(N=0;N<15;++N){var ce=B.rows[N],g="",P=null;if(ce.isEmpty()===!1){var C=r(ce.chars);Z===null&&(Z={x:C,y1:N,y2:N+1,p:[]}),C!==ne&&le&&(Z.p.push(ue),ue={start:F,end:j,spans:[]},Z.y2=N,Z.name="region_"+Z.x+"_"+Z.y1+"_"+Z.y2,G.hasOwnProperty(Z.name)===!1?(Y.push(Z),G[Z.name]=Z):G[Z.name].p.contat(Z.p),Z={x:C,y1:N,y2:N+1,p:[]});for(var D=0;D<ce.chars.length;++D){var b=ce.chars[D],te=b.penState;if(P===null||!te.equals(P)){g.trim().length>0&&(ue.spans.push({name:fe,line:g,row:N}),g="");var z="style_cea608_"+te.foreground+"_"+te.background;te.underline&&(z+="_underline"),te.italics&&(z+="_italics"),ie.hasOwnProperty(z)||(ie[z]=JSON.parse(JSON.stringify(te))),P=te,fe=z}g+=b.uchar}g.trim().length>0&&ue.spans.push({name:fe,line:g,row:N}),le=!0,ne=C}else le=!1,ne=-1,Z&&(Z.p.push(ue),ue={start:F,end:j,spans:[]},Z.y2=N,Z.name="region_"+Z.x+"_"+Z.y1+"_"+Z.y2,G.hasOwnProperty(Z.name)===!1?(Y.push(Z),G[Z.name]=Z):G[Z.name].p.contat(Z.p),Z=null)}Z&&(Z.p.push(ue),Z.y2=N+1,Z.name="region_"+Z.x+"_"+Z.y1+"_"+Z.y2,G.hasOwnProperty(Z.name)===!1?(Y.push(Z),G[Z.name]=Z):G[Z.name].p.contat(Z.p),Z=null);var ae=[];for(N=0;N<Y.length;++N){var Q=Y[N],L="sub_cea608_"+i++,J=document.createElement("div");J.id=L;var pe=l(Q);J.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+pe;var Ne=document.createElement("div");Ne.className="paragraph bodyStyle",Ne.style.cssText=R(w);var Se=document.createElement("div");Se.className="cueUniWrapper",Se.style.cssText="unicode-bidi: normal; direction: ltr;";for(var Ce=0;Ce<Q.p.length;++Ce){var Re=Q.p[Ce],$e=0;for(U=0;U<Re.spans.length;++U){var nt=Re.spans[U];if(nt.line.length>0){if(U!==0&&$e!=nt.row){var We=document.createElement("br");We.className="lineBreak",Se.appendChild(We)}var Qe=!1;$e===nt.row&&(Qe=!0),$e=nt.row;var Ct=ie[nt.name],ve=document.createElement("span");ve.className="spanPadding "+nt.name+" customSpanColor",ve.style.cssText=R(w,Ct),U!==0&&Qe?U===Re.spans.length-1?ve.textContent=h(nt.line):ve.textContent=nt.line:Re.spans.length>1&&U<Re.spans.length-1&&nt.row===Re.spans[U+1].row?ve.textContent=A(nt.line):ve.textContent=nt.line.trim(),Se.appendChild(ve)}}}Ne.appendChild(Se),J.appendChild(Ne);var Fe={bodyStyle:["%",90]};for(var ot in ie)ie.hasOwnProperty(ot)&&(Fe[ot]=["%",90]);ae.push({type:"html",start:F,end:j,cueHTMLElement:J,cueID:L,cellResolution:[32,15],isFromCEA608:!0,fontSize:Fe,lineHeight:{},linePadding:{}})}return ae}}}uo.__dashjs_factory_name="EmbeddedTextHtmlRender";var eu=_.Z.getSingletonFactory(uo);function lo(i){var r,l,E,R,A,h,w,F,j,B,N,U,Z,le,ne,ue,fe,G=i.errHandler,ie=i.manifestModel,Y=i.mediaController,ce=i.videoModel,g=i.textTracks,P=i.vttParser,C=i.vttCustomRenderingParser,D=i.ttmlParser,b=i.streamInfo,te=i.settings,z=this.context,ae=(0,p.Z)(z).getInstance(),Q=!1;function L(){h=null,F=NaN,j=[],B=null,w=!1,A=[],R=null}function J(We){var Qe=new Js;for(var Ct in We)Qe[Ct]=We[Ct];Qe.labels=We.labels,Qe.defaultTrack=function(ve){var Fe=!1;return U.length>1&&ve.isEmbedded?Fe=ve.id&&ve.id===t.Z.CC1:U.length===1?ve.id&&typeof ve.id=="string"&&ve.id.substring(0,2)==="CC"&&(Fe=!0):U.length===0&&(Fe=ve.index===A[0].index),Fe}(We),Qe.isFragmented=We.isFragmented,Qe.isEmbedded=!!We.isEmbedded,Qe.isTTML=function(ve){return ve.codec&&ve.codec.search(t.Z.STPP)>=0||ve.mimeType&&ve.mimeType.search(t.Z.TTML)>=0}(We),Qe.kind=function(ve,Fe){var ot=ve.roles&&ve.roles.length>0?Fe[ve.roles[0]]:Fe.caption;return ot=ot===Fe.caption||ot===Fe.subtitle?ot:Fe.caption}(We,{subtitle:"subtitles",caption:"captions"}),g.addTextTrack(Qe)}function pe(We){var Qe=We.chunk;Qe.mediaInfo.embeddedCaptions&&Se(Qe.bytes,Qe)}function Ne(We){N=We}function Se(We,Qe){var Ct=Qe.mediaInfo,ve=Ct.type,Fe=Ct.mimeType,ot=Ct.codec||Fe;ot?Ct.codec.indexOf("application/mp4")!==-1?function(qe,ht,gt){var st;if(ht.segmentType==="InitializationSegment")w=!0,F=E.getMediaTimescaleFromMoov(qe);else{if(!w)return;(st=E.getSamplesInfo(qe).sampleList).length>0&&(B=st[0].cts-ht.start*F),gt.search(t.Z.STPP)>=0?function(qt,Bt,sn){var un,Ge;for(R=R!==null?R:$e(sn),un=0;un<Bt.length;un++){var ut=Bt[un],tt=ut.cts,vt=Re(),wt=vt+tt/F,jt=wt+ut.duration/F;r.buffered.add(wt,jt);var Yt=new DataView(qt,ut.offset,ut.subSizes[0]),Vt=yi.Utils.dataViewToString(Yt,t.Z.UTF8),Qt=[],ft=ut.offset+ut.subSizes[0];for(Ge=1;Ge<ut.subSizes.length;Ge++){var Dt=new Uint8Array(qt,ft,ut.subSizes[Ge]),xt=String.fromCharCode.apply(null,Dt);Qt.push(xt),ft+=ut.subSizes[Ge]}try{var Mt=ie.getValue().ttmlTimeIsRelative?tt/F:0,Kt=R.parse(Vt,Mt,tt/F,(tt+ut.duration)/F,Qt);g.addCaptions(N,vt,Kt)}catch(he){h.removeExecutedRequestsBeforeTime(),this.remove(),l.error("TTML parser error: "+he.message)}}}(qe,st,gt):function(qt,Bt){var sn,un,Ge,ut=[];for(sn=0;sn<Bt.length;sn++){var tt=Bt[sn];tt.cts-=B;var vt=Re()+tt.cts/F,wt=vt+tt.duration/F;r.buffered.add(vt,wt);var jt=qt.slice(tt.offset,tt.offset+tt.size),Yt=yi.parseBuffer(jt);for(un=0;un<Yt.boxes.length;un++){var Vt=Yt.boxes[un];if(l.debug("VTT box1: "+Vt.type),Vt.type!=="vtte"&&Vt.type==="vttc"){l.debug("VTT vttc boxes.length = "+Vt.boxes.length);var Qt={styles:{}};for(Ge=0;Ge<Vt.boxes.length;Ge++){var ft=Vt.boxes[Ge];if(l.debug("VTT box2: "+ft.type),ft.type==="payl")Qt.start=tt.cts/F,Qt.end=(tt.cts+tt.duration)/F,Qt.data=ft.cue_text;else if(ft.type==="sttg"&&ft.settings&&ft.settings!=="")try{var Dt=ft.settings.split(" ");Qt.styles=P.getCaptionStyles(Dt)}catch{}}Qt&&Qt.data&&(ut.push(Qt),l.debug("VTT  ".concat(Qt.start," - ").concat(Qt.end," :  ").concat(Qt.data)))}}}ut.length>0&&g.addCaptions(N,0,ut)}(qe,st)}}(We,Qe,ot):ve===t.Z.VIDEO?function(qe,ht){var gt,st;if(ht.segmentType===Le.w.INIT_SEGMENT_TYPE)Z===0&&(Z=E.getMediaTimescaleFromMoov(qe));else if(ht.segmentType===Le.w.MEDIA_SEGMENT_TYPE){if(Z===0)return void l.warn("CEA-608: No timescale for embeddedTextTrack yet");var qt=(st=E.getSamplesInfo(qe)).lastSequenceNumber,Bt=Math.trunc(ht.start),sn=Math.trunc(ht.end);if(ue[0]||ue[1]||function(){for(var vt,wt=0;wt<U.length;wt++){if((vt=g.getTrackIdxForId(U[wt].id))===-1)return void l.warn("CEA-608: data before track is ready.");var jt=Ce(vt);ue[wt]=new(T()).Cea608Parser(wt+1,{newCue:jt},null)}}(),Z){if(function(vt,wt,jt,Yt,Vt){return vt!==null&&wt!==null&&Yt!==null&&Vt!==null&&(wt===vt?Yt!==Vt:wt!==vt+jt)}(le,qt,st.numSequences,ne,Bt))for(gt=0;gt<ue.length;gt++)ue[gt]&&ue[gt].reset();for(var un=function(vt,wt){if(wt.length===0)return null;for(var jt={splits:[],fields:[[],[]]},Yt=new DataView(vt),Vt=0;Vt<wt.length;Vt++)for(var Qt=wt[Vt],ft=T().findCea608Nalus(Yt,Qt.offset,Qt.size),Dt=null,xt=0,Mt=0;Mt<ft.length;Mt++)for(var Kt=T().extractCea608DataFromRange(Yt,ft[Mt]),he=0;he<2;he++)if(Kt[he].length>0){Qt.cts!==Dt?xt=0:xt+=1;var ke=Re();jt.fields[he].push([Qt.cts+ke*Z,Kt[he],xt]),Dt=Qt.cts}return jt.fields.forEach(function(lt){lt.sort(function(me,ye){return me[0]===ye[0]?me[2]-ye[2]:me[0]-ye[0]})}),jt}(qe,st.sampleList),Ge=0;Ge<ue.length;Ge++){var ut=un.fields[Ge],tt=ue[Ge];if(tt)for(gt=0;gt<ut.length;gt++)tt.addData(ut[gt][0]/Z,ut[gt][1])}le=qt,ne=sn}}}(We,Qe):function(qe,ht,gt){var st,qt,Bt=new DataView(qe,0,qe.byteLength);qt=yi.Utils.dataViewToString(Bt,t.Z.UTF8);try{st=$e(gt).parse(qt,0),g.addCaptions(g.getCurrentTrackIdx(),0,st),r.buffered&&r.buffered.add(ht.start,ht.end)}catch(sn){G.error(new re.Z(X.TIMED_TEXT_ERROR_ID_PARSE_CODE,X.TIMED_TEXT_ERROR_MESSAGE_PARSE+sn.message,qt))}}(We,Qe,ot):l.error("No text type defined")}function Ce(We){return function(Qe,Ct,ve){var Fe;(Fe=ce.getTTMLRenderingDiv()?fe.createHTMLCaptionsFromScreen(ce.getElement(),Qe,Ct,ve):[{start:Qe,end:Ct,data:ve.getDisplayText(),styles:{}}])&&g.addCaptions(We,0,Fe)}}function Re(){return isNaN(r.timestampOffset)?0:r.timestampOffset}function $e(We){var Qe;return We.search(t.Z.VTT)>=0?Qe=te.get().streaming.text.webvtt.customRenderingEnabled&&C?C:P:(We.search(t.Z.TTML)>=0||We.search(t.Z.STPP)>=0)&&(Qe=D),Qe}function nt(We){U.forEach(function(Qe){var Ct=g.getTrackIdxForId(Qe.id);Ct>=0&&g.deleteCuesFromTrackIdx(Ct,We.from,We.to)})}return r={initialize:function(){Q||(U=[],N=null,Z=0,ue=[],le=null,ne=null,Q=!0,fe=eu(z).getInstance(),ae.on(u.Z.VIDEO_CHUNK_RECEIVED,pe,r),ae.on(u.Z.BUFFER_CLEARED,nt,r))},addMediaInfos:function(We,Qe,Ct){if(A=A.concat(Qe),We===t.Z.TEXT&&Qe[0].isFragmented&&!Qe[0].isEmbedded){h=Ct,r.buffered=(0,$s.Z)(z).create(),j=Y.getTracksFor(t.Z.TEXT,b.id).filter(function(qe){return qe.isFragmented});for(var ve=Y.getCurrentTrackFor(t.Z.TEXT,b.id),Fe=0;Fe<j.length;Fe++)if(j[Fe]===ve){Ne(Fe);break}}for(var ot=0;ot<Qe.length;ot++)J(Qe[ot])},resetMediaInfos:function(){A=[]},getStreamId:function(){return b.id},append:Se,abort:function(){},addEmbeddedTrack:function(We){if(Q&&We)if(We.id===t.Z.CC1||We.id===t.Z.CC3){for(var Qe=0;Qe<U.length;Qe++)if(U[Qe].id===We.id)return;U.push(We)}else l.warn("Embedded track "+We.id+" not supported!")},resetEmbedded:function(){ae.off(u.Z.VIDEO_CHUNK_RECEIVED,pe,r),ae.off(u.Z.BUFFER_CLEARED,nt,r),g&&g.deleteAllTextTracks(),Q=!1,U=[],ue=[null,null],le=null,ne=null},getConfig:function(){return{fragmentModel:h,fragmentedTracks:j,videoModel:ce}},setCurrentFragmentedTrackIdx:Ne,remove:function(We,Qe){We===void 0&&We===Qe&&(We=r.buffered.start(0),Qe=r.buffered.end(r.buffered.length-1)),r.buffered.remove(We,Qe),g.deleteCuesFromTrackIdx(N,We,Qe)},reset:function(){L(),A=[],E=null}},l=(0,m.Z)(z).getInstance().getLogger(r),E=(0,Yr.Z)(z).getInstance(),L(),r}lo.__dashjs_factory_name="TextSourceBuffer";var tu=_.Z.getClassFactory(lo),na=M(4403);function co(i,r){(r==null||r>i.length)&&(r=i.length);for(var l=0,E=new Array(r);l<r;l++)E[l]=i[l];return E}var nu=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function fo(i){var r,l,E,R,A,h,w,F,j,B,N,U,Z,le,ne,ue,fe,G,ie,Y,ce=this.context,g=(0,p.Z)(ce).getInstance(),P=i.videoModel,C=i.streamInfo,D=i.settings;function b(Ge,ut,tt,vt,wt,jt){var Yt=0,Vt=0;Ge/ut>tt/vt?Yt=(Vt=ut)/vt*tt:Vt=(Yt=Ge)/tt*vt;var Qt,ft,Dt=0,xt=0;return Yt/Vt>wt?(xt=Vt,Dt=Vt*wt):(Dt=Yt,xt=Yt/wt),Qt=(Ge-Dt)/2,ft=(ut-xt)/2,jt?{x:Qt+.1*Dt,y:ft+.1*xt,w:.8*Dt,h:.8*xt}:{x:Qt,y:ft,w:Dt,h:xt}}function te(Ge,ut){var tt=P.getClientWidth(),vt=P.getClientHeight(),wt=P.getVideoWidth(),jt=P.getVideoHeight(),Yt=P.getVideoRelativeOffsetTop(),Vt=P.getVideoRelativeOffsetLeft();if(wt!==0&&jt!==0){var Qt=wt/jt,ft=!1;Ge.isFromCEA608&&(Qt=1.1666666666666667,ft=!0);var Dt=b.call(this,tt,vt,wt,jt,Qt,ft),xt=Dt.w,Mt=Dt.h,Kt=Dt.x,he=Dt.y;if(xt!=j||Mt!=B||Kt!=w||he!=F||ut){if(w=Kt+Vt,F=he+Yt,j=xt,B=Mt,N){var ke=N.style;ke&&(ke.left=w+"px",ke.top=F+"px",ke.width=j+"px",ke.height=B+"px",ke.zIndex=le&&document[le]||ne?fe:null,g.trigger(n.Z.CAPTION_CONTAINER_RESIZE))}var lt=Ge.activeCues;if(lt)for(var me=lt.length,ye=0;ye<me;++ye){var Ye=lt[ye];Ye.scaleCue(Ye)}}}}function z(Ge){var ut,tt,vt,wt,jt,Yt=j,Vt=B;if(Ge.cellResolution){var Qt=[Yt/Ge.cellResolution[0],Vt/Ge.cellResolution[1]];if(Ge.linePadding){for(ut in Ge.linePadding)if(Ge.linePadding.hasOwnProperty(ut)){tt=(Ge.linePadding[ut]*Qt[0]).toString();for(var ft=document.getElementsByClassName("spanPadding"),Dt=0;Dt<ft.length;Dt++)ft[Dt].style.cssText=ft[Dt].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+tt),ft[Dt].style.cssText=ft[Dt].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+tt)}}if(Ge.fontSize){for(ut in Ge.fontSize)if(Ge.fontSize.hasOwnProperty(ut)){Ge.fontSize[ut][0]==="%"?vt=Ge.fontSize[ut][1]/100:Ge.fontSize[ut][0]==="c"&&(vt=Ge.fontSize[ut][1]),tt=(vt*Qt[1]).toString(),jt=ut!=="defaultFontSize"?document.getElementsByClassName(ut):document.getElementsByClassName("paragraph");for(var xt=0;xt<jt.length;xt++)jt[xt].style.cssText=jt[xt].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+tt)}if(Ge.lineHeight){for(ut in Ge.lineHeight)if(Ge.lineHeight.hasOwnProperty(ut)){Ge.lineHeight[ut][0]==="%"?wt=Ge.lineHeight[ut][1]/100:Ge.fontSize[ut][0]==="c"&&(wt=Ge.lineHeight[ut][1]),tt=(wt*Qt[1]).toString(),jt=document.getElementsByClassName(ut);for(var Mt=0;Mt<jt.length;Mt++)jt[Mt].style.cssText=jt[Mt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+tt)}}}}if(Ge.isd){var Kt=document.getElementById(Ge.cueID);Kt&&N.removeChild(Kt),Q(Ge)}}function ae(Ge,ut){var tt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,vt=/^#(.*)$/;if(tt.test(ut)){var wt=tt.exec(ut),jt=parseInt(wt[4],10)-1;return"data:image/png;base64,"+btoa(Ge.images[jt])}if(vt.test(ut)){var Yt=vt.exec(ut)[1];return"data:image/png;base64,"+Ge.embeddedImages[Yt]}return ut}function Q(Ge){if(N){un.call(this);var ut=document.createElement("div");N.appendChild(ut),ue=(0,na.renderHTML)(Ge.isd,ut,function(tt){return ae(Ge,tt)},N.clientHeight,N.clientWidth,D.get().streaming.text.imsc.displayForcedOnlyMode,function(tt){l.info("renderCaption :",tt)},ue,D.get().streaming.text.imsc.enableRollUp),ut.id=Ge.cueID,g.trigger(n.Z.CAPTION_RENDERED,{captionDiv:ut,currentTrackIdx:h})}}function L(Ge,ut){return!!ut&&ut.endTime>=Ge.startTime}function J(Ge,ut){return!!D.get().streaming.text.extendSegmentedCues&&!!function(tt,vt,wt){for(var jt=0;jt<wt.length;jt++){var Yt=wt[jt];if(JSON.stringify(tt[Yt])!==JSON.stringify(vt[Yt]))return!1}return!0}(ut,Ge,nu)&&(ut.endTime=Math.max(ut.endTime,Ge.endTime),!0)}function pe(Ge,ut){ut&&ut.forEach(function(tt){tt.kind&&tt.kind==="image"&&(tt.src=ae(Ge,tt.src)),pe(Ge,tt.contents)})}function Ne(Ge,ut,tt){var vt=Fe(Ge),wt=D.get().streaming.text.dispatchForManualRendering;if(vt&&Array.isArray(tt)&&tt.length!==0)for(var jt=0;jt<tt.length;jt++){var Yt=null,Vt=tt[jt];vt.cellResolution=Vt.cellResolution,vt.isFromCEA608=Vt.isFromCEA608,isNaN(Vt.start)||isNaN(Vt.end)||(wt?Yt=Se(Vt,ut):We(Vt)&&N?Yt=$e(Vt,ut,vt):Vt.data&&(Yt=nt(Vt,ut,vt)));try{if(Yt){if(!ht(vt,Yt))if(D.get().streaming.text.webvtt.customRenderingEnabled)vt.manualCueList||(vt.manualCueList=[]),vt.manualCueList.push(Yt);else{var Qt=void 0;vt.cues&&vt.cues.length!==0&&(Qt=vt.cues[vt.cues.length-1]),L(Yt,Qt)?J(Yt,Qt)||(Qt.isd&&(Qt.onexit=function(){}),vt.mode!==t.Z.TEXT_DISABLED&&vt.addCue(Yt)):vt.mode!==t.Z.TEXT_DISABLED&&vt.addCue(Yt)}var ft=D.get().streaming.buffer.bufferToKeep;st(vt,0,P.getTime()-ft)}else l.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Dt){throw qt(vt),vt.addCue(Yt),Dt}}}function Se(Ge,ut){var tt=Qe(Ge,ut);return tt.onenter=function(){We(Ge)&&Y&&Y.cueID!==tt.cueID&&Re(Y),delete tt.type,Y=tt,Ce(tt)},tt.onexit=function(){Re(tt),Y=null},tt}function Ce(Ge){g.trigger(n.Z.CUE_ENTER,Ge)}function Re(Ge){g.trigger(n.Z.CUE_EXIT,{cueID:Ge.cueID})}function $e(Ge,ut,tt){var vt=this,wt=Qe(Ge,ut);return N.style.left=w+"px",N.style.top=F+"px",N.style.width=j+"px",N.style.height=B+"px",wt.onenter=function(){var jt=this;tt.mode===t.Z.TEXT_SHOWING&&(this.isd?(ie?requestAnimationFrame(function(){return Q(jt)}):Q(this),l.debug("Cue enter id:"+this.cueID)):(N.appendChild(this.cueHTMLElement),z.call(vt,this),g.trigger(n.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:h})))},wt.onexit=function(){if(N)for(var jt=N.childNodes,Yt=0;Yt<jt.length;++Yt)jt[Yt].id===this.cueID&&(l.debug("Cue exit id:"+jt[Yt].id),N.removeChild(jt[Yt]),--Yt)},wt}function nt(Ge,ut,tt){var vt=Qe(Ge,ut);if(vt.isActive=!1,Ge.styles)try{Ge.styles.align!==void 0&&"align"in vt&&(vt.align=Ge.styles.align),Ge.styles.line!==void 0&&"line"in vt&&(vt.line=Ge.styles.line),Ge.styles.snapToLines!==void 0&&"snapToLines"in vt&&(vt.snapToLines=Ge.styles.snapToLines),Ge.styles.position!==void 0&&"position"in vt&&(vt.position=Ge.styles.position),Ge.styles.size!==void 0&&"size"in vt&&(vt.size=Ge.styles.size)}catch(wt){l.error(wt)}return vt.onenter=function(){tt.mode===t.Z.TEXT_SHOWING&&g.trigger(n.Z.CAPTION_RENDERED,{currentTrackIdx:h})},vt}function We(Ge){return Ge.type==="html"}function Qe(Ge,ut){return We(Ge)?function(tt,vt){var wt=new E(tt.start+vt,tt.end+vt,"");return wt.cueHTMLElement=tt.cueHTMLElement,wt.isd=tt.isd,wt.images=tt.images,wt.embeddedImages=tt.embeddedImages,wt.cueID=tt.cueID,wt.scaleCue=z.bind(self),wt.cellResolution=tt.cellResolution,wt.lineHeight=tt.lineHeight,wt.linePadding=tt.linePadding,wt.fontSize=tt.fontSize,wt.isd&&pe(wt,wt.isd.contents),wt}(Ge,ut):function(tt,vt){var wt=new E(tt.start-vt,tt.end-vt,tt.data);return wt.cueID="".concat(wt.startTime,"_").concat(wt.endTime),wt}(Ge,ut)}function Ct(Ge){if(U)for(var ut=U.childNodes,tt=0;tt<ut.length;++tt)ut[tt].id===Ge.cueID&&(U.removeChild(ut[tt]),--tt)}function ve(){var Ge,ut=[],tt=function(wt,jt){var Yt;if(typeof Symbol>"u"||wt[Symbol.iterator]==null){if(Array.isArray(wt)||(Yt=function(Mt,Kt){if(Mt){if(typeof Mt=="string")return co(Mt,Kt);var he=Object.prototype.toString.call(Mt).slice(8,-1);return he==="Object"&&Mt.constructor&&(he=Mt.constructor.name),he==="Map"||he==="Set"?Array.from(Mt):he==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(he)?co(Mt,Kt):void 0}}(wt))||jt){Yt&&(wt=Yt);var Vt=0,Qt=function(){};return{s:Qt,n:function(){return Vt>=wt.length?{done:!0}:{done:!1,value:wt[Vt++]}},e:function(Mt){throw Mt},f:Qt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ft,Dt=!0,xt=!1;return{s:function(){Yt=wt[Symbol.iterator]()},n:function(){var Mt=Yt.next();return Dt=Mt.done,Mt},e:function(Mt){xt=!0,ft=Mt},f:function(){try{Dt||Yt.return==null||Yt.return()}finally{if(xt)throw ft}}}}(P.getTextTracks());try{for(tt.s();!(Ge=tt.n()).done;){var vt=Ge.value;vt.manualMode===t.Z.TEXT_SHOWING&&ut.push(vt)}}catch(wt){tt.e(wt)}finally{tt.f()}return ut}function Fe(Ge){return Ge>=0&&R[Ge]?P.getTextTrack(R[Ge].kind,R[Ge].id,R[Ge].lang,R[Ge].isTTML,R[Ge].isEmbedded):null}function ot(Ge){var ut=this;if(Ge!==h){var tt=Fe(h=Ge);qe.call(this,tt),Z&&(clearInterval(Z),Z=null),tt&&tt.renderingType==="html"&&(te.call(this,tt,!0),window.ResizeObserver?(G=new window.ResizeObserver(function(){te.call(ut,tt,!0)})).observe(P.getElement()):Z=setInterval(te.bind(this,tt),500))}}function qe(Ge){un.call(this),Ge&&Ge.renderingType==="html"?Bt.call(this):sn.call(this)}function ht(Ge,ut){if(!Ge.cues)return!1;for(var tt=0;tt<Ge.cues.length;tt++)if(Ge.cues[tt].startTime===ut.startTime&&Ge.cues[tt].endTime===ut.endTime)return!0;return!1}function gt(Ge,ut,tt){var vt=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!Ge&&(isNaN(ut)||(vt?Ge.startTime:Ge.endTime)>=ut)&&(isNaN(tt)||(vt?Ge.endTime:Ge.startTime)<=tt)}function st(Ge,ut,tt){var vt,wt;if(!(tt<ut)&&Ge&&(Ge.cues||Ge.manualCueList)){var jt=Ge.cues&&Ge.cues.length>0?"native":"custom",Yt=jt==="native"?Ge.cues:Ge.manualCueList;if(!Yt||Yt.length===0)return;for(var Vt=Yt.length-1;Vt>=0;Vt--)!gt(Yt[Vt],ut,tt,!0)||(vt=Yt[Vt],wt=P.getTime(),vt.startTime>=wt&&vt.endTime<=wt)||(jt==="native"?Ge.removeCue(Yt[Vt]):(Ct(Yt[Vt]),delete Ge.manualCueList[Vt]))}}function qt(Ge,ut,tt){var vt=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(Ge&&(Ge.cues||Ge.manualCueList)){var wt=Ge.cues&&Ge.cues.length>0?"native":"custom",jt=wt==="native"?Ge.cues:Ge.manualCueList;if(!jt||jt.length===0)return;for(var Yt=jt.length-1,Vt=Yt;Vt>=0;Vt--)gt(jt[Vt],ut,tt,vt)&&(wt==="native"?(jt[Vt].onexit&&jt[Vt].onexit(),Ge.removeCue(jt[Vt])):(Ct(jt[Vt]),delete Ge.manualCueList[Vt]))}}function Bt(){var Ge=document.getElementById("native-cue-style");if(!Ge){(Ge=document.createElement("style")).id="native-cue-style",document.head.appendChild(Ge);var ut=Ge.sheet,tt=P.getElement();try{tt&&(tt.id?ut.insertRule("#"+tt.id+"::cue {background: transparent}",0):tt.classList.length!==0?ut.insertRule("."+tt.className+"::cue {background: transparent}",0):ut.insertRule("video::cue {background: transparent}",0))}catch(vt){l.info(""+vt.message)}}}function sn(){var Ge=document.getElementById("native-cue-style");Ge&&document.head.removeChild(Ge)}function un(){if(N)for(;N.firstChild;)N.removeChild(N.firstChild)}return r={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(E=window.VTTCue||window.TextTrackCue,R=[],A=[],h=-1,w=0,F=0,j=0,B=0,N=null,U=null,Z=null,ne=!1,fe=2147483647,ue=null,ie="requestAnimationFrame"in window,document.fullscreenElement!==void 0?le="fullscreenElement":document.webkitIsFullScreen!==void 0?le="webkitIsFullScreen":document.msFullscreenElement?le="msFullscreenElement":document.mozFullScreen&&(le="mozFullScreen"))},getStreamId:function(){return C.id},addTextTrack:function(Ge){R.push(Ge)},addCaptions:Ne,createTracks:function(){var Ge=D.get().streaming.text.dispatchForManualRendering;R.sort(function(Kt,he){return Kt.index-he.index}),N=P.getTTMLRenderingDiv(),U=P.getVttRenderingDiv();for(var ut,tt,vt,wt,jt,Yt,Vt=-1,Qt=0;Qt<R.length;Qt++){var ft=(tt=(ut=R[Qt]).kind,vt=ut.id!==void 0?ut.id:ut.lang,wt=ut.lang,jt=ut.isTTML,Yt=ut.isEmbedded,P.addTextTrack(tt,vt,wt,jt,Yt));A.push(ft),R[Qt].defaultTrack&&(ft.default=!0,Vt=Qt);var Dt=Fe(Qt);Dt&&(Dt.mode=t.Z.TEXT_SHOWING,N&&(R[Qt].isTTML||R[Qt].isEmbedded)?Dt.renderingType="html":Dt.renderingType="default"),Ne(Qt,0,R[Qt].captionData),g.trigger(n.Z.TEXT_TRACK_ADDED)}if(ot.call(this,Vt),Vt>=0){g.on(n.Z.PLAYBACK_METADATA_LOADED,function Kt(){var he=Fe(Vt);he&&he.renderingType==="html"&&te.call(this,he,!0),g.off(n.Z.PLAYBACK_METADATA_LOADED,Kt,this)},this);for(var xt=0;xt<R.length;xt++){var Mt=Fe(xt);Mt&&(Mt.mode=xt!==Vt||Ge?t.Z.TEXT_HIDDEN:t.Z.TEXT_SHOWING,Mt.manualMode=xt===Vt?t.Z.TEXT_SHOWING:t.Z.TEXT_HIDDEN)}}g.trigger(u.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:h,tracks:R,streamId:C.id})},getCurrentTrackIdx:function(){return h},setCurrentTrackIdx:ot,getTrackIdxForId:function(Ge){for(var ut=-1,tt=0;tt<R.length;tt++)if(R[tt].id===Ge){ut=tt;break}return ut},getCurrentTrackInfo:function(){return R[h]},setModeForTrackIdx:function(Ge,ut){var tt=Fe(Ge);tt&&tt.mode!==ut&&(tt.mode=ut),tt&&tt.manualMode!==ut&&(tt.manualMode=ut)},deleteCuesFromTrackIdx:function(Ge,ut,tt){var vt=Fe(Ge);vt&&qt(vt,ut,tt)},deleteAllTextTracks:function(){for(var Ge=A?A.length:0,ut=0;ut<Ge;ut++){var tt=Fe(ut);tt&&qt.call(this,tt,C.start,C.start+C.duration,!1)}A=[],R=[],Z&&(clearInterval(Z),Z=null),G&&P&&(G.unobserve(P.getElement()),G=null),h=-1,un.call(this)},manualCueProcessing:function(Ge){var ut=ve();if(ut&&ut.length>0){var tt=ut[0].manualCueList;tt&&tt.length>0&&tt.forEach(function(vt){vt.startTime<=Ge&&vt.endTime>=Ge&&!vt.isActive?(vt.isActive=!0,D.get().streaming.text.dispatchForManualRendering?Ce(vt):WebVTT.processCues(window,[vt],U,vt.cueID)):vt.isActive&&(vt.startTime>Ge||vt.endTime<Ge)&&(vt.isActive=!1,D.get().streaming.text.dispatchForManualRendering?Re(vt):Ct(vt))})}},disableManualTracks:function(){var Ge=ve();if(Ge&&Ge.length>0){var ut=Ge[0].manualCueList;ut&&ut.length>0&&ut.forEach(function(tt){if(tt.isActive){if(tt.isActive=!1,D.get().streaming.text.dispatchForManualRendering)Re(tt);else if(U)for(var vt=U.childNodes,wt=0;wt<vt.length;++wt)vt[wt].id===tt.cueID&&(U.removeChild(vt[wt]),--wt)}})}}},l=(0,m.Z)(ce).getInstance().getLogger(r),r}fo.__dashjs_factory_name="TextTracks";var ru=_.Z.getClassFactory(fo);function go(){var i,r,l,E,R,A,h=this.context;function w(N){var U=N.split(":"),Z=U.length-1;return N=60*parseInt(U[Z-1],10)+parseFloat(U[Z]),Z===2&&(N+=3600*parseInt(U[0],10)),N}function F(N){var U=N.split(E),Z=U[1].split(A);return Z.shift(),U[1]=Z[0],Z.shift(),{cuePoints:U,styles:j(Z)}}function j(N){var U={};return N.forEach(function(Z){if(Z.split(/:/).length>1){var le=Z.split(/:/)[1],ne=!1;le&&le.search(/%/)!=-1&&(ne=!0,le=parseInt(le.replace(/%/,""),10)),(Z.match(/align/)||Z.match(/A/))&&(U.align=le),(Z.match(/line/)||Z.match(/L/))&&(U.line=le==="auto"?le:parseInt(le,10),ne&&(U.snapToLines=!1)),(Z.match(/position/)||Z.match(/P/))&&(U.position=le),(Z.match(/size/)||Z.match(/S/))&&(U.size=le)}}),U}function B(N,U){for(var Z,le=U,ne="",ue="";N[le]!==""&&le<N.length;)le++;if((Z=le-U)>1)for(var fe=0;fe<Z;fe++){if((ue=N[U+fe]).match(E)){ne="";break}ne+=ue,fe!==Z-1&&(ne+=`
`)}else(ue=N[U]).match(E)||(ne=ue);return ne}return i={parse:function(N){var U,Z,le=[];if(!N)return le;U=(N=N.split(l)).length,Z=-1;for(var ne=0;ne<U;ne++){var ue=N[ne];if(ue.length>0&&ue!=="WEBVTT"&&ue.match(E)){var fe=F(ue),G=fe.cuePoints,ie=fe.styles,Y=B(N,ne+1),ce=w(G[0].replace(R,"")),g=w(G[1].replace(R,""));!isNaN(ce)&&!isNaN(g)&&ce>=Z&&g>ce?Y!==""?(Z=ce,le.push({start:ce,end:g,data:Y,styles:ie})):r.error("Skipping cue due to empty/malformed cue text"):r.error("Skipping cue due to incorrect cue timing")}}return le},getCaptionStyles:j},r=(0,m.Z)(h).getInstance().getLogger(i),l=/(?:\r\n|\r|\n)/gm,E=/-->/,R=/(^[\s]+|[\s]+$)/g,A=/\s\b/g,i}go.__dashjs_factory_name="VTTParser";var iu=_.Z.getSingletonFactory(go);function ho(){var i,r;return i={parse:function(l){var E=[];return r.oncue=function(R){R.start=R.startTime,R.end=R.endTime,R.data=R.text,R.styles={align:R.align,line:R.line,position:R.position,size:R.size},E.push(R)},r.parse(l),E}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(r=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}(),i}ho.__dashjs_factory_name="VttCustomRenderingParser";var au=_.Z.getSingletonFactory(ho);function mo(){var i,r,l=this.context,E=(0,p.Z)(l).getInstance(),R=0;return i={parse:function(A,h,w,F,j){var B,N,U,Z="",le=[],ne={},ue={},fe="",G="",ie={onOpenTag:function(C,D,b){if(b[" imagetype"]&&!b[" imageType"]&&(E.trigger(n.Z.CONFORMANCE_VIOLATION,{level:Fr.LEVELS.ERROR,event:Fr.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),b[" imageType"]=b[" imagetype"]),D==="image"&&(C==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||C==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!b[" imageType"]||b[" imageType"].value!=="PNG")return void r.warn("smpte-tt imageType != PNG. Discarded");fe=b["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){fe&&(ue[fe]=G.trim()),G="",fe=""},onText:function(C){fe&&(G+=C)}};if(!A)throw Z="no ttml data to parse",new Error(Z);ne.data=A,E.trigger(u.Z.TTML_TO_PARSE,ne);var Y=(0,na.fromXML)(ne.data,function(C){Z=C},ie);E.trigger(u.Z.TTML_PARSED,{ttmlString:ne.data,ttmlDoc:Y});var ce,g=Y.getMediaTimeEvents();for(U=0;U<g.length;U++){var P=(0,na.generateISD)(Y,g[U],function(C){Z=C});P.contents.some(function(C){return C.contents.length})&&(B=g[U]+h)<(N=g[U+1]+h)&&le.push({start:B,end:N,type:"html",cueID:(ce="cue_TTML_"+R,R++,ce),isd:P,images:j,embeddedImages:ue})}if(Z!=="")throw r.error(Z),new Error(Z);return le}},r=(0,m.Z)(l).getInstance().getLogger(i),i}mo.__dashjs_factory_name="TTMLParser";var ou=_.Z.getSingletonFactory(mo);function po(i,r){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(i);r&&(E=E.filter(function(R){return Object.getOwnPropertyDescriptor(i,R).enumerable})),l.push.apply(l,E)}return l}function yo(i){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?po(Object(l),!0).forEach(function(E){su(i,E,l[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):po(Object(l)).forEach(function(E){Object.defineProperty(i,E,Object.getOwnPropertyDescriptor(l,E))})}return i}function su(i,r,l){return r in i?Object.defineProperty(i,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[r]=l,i}function Eo(i,r){(r==null||r>i.length)&&(r=i.length);for(var l=0,E=new Array(r);l<r;l++)E[l]=i[l];return E}function vo(i){var r,l,E,R=this.context,A=(0,p.Z)(R).getInstance(),h=(0,ze.Z)(R).getInstance(),w=i.adapter,F=i.baseURLController;function j(U,Z){var le,ne,ue=!1;if(F.resolve()){var fe=w.getVoRepresentations(U);fe&&fe.length>0&&(le=F.resolve(fe[0].path).url)}var G=U.essentialPropertiesAsArray.filter(function(Y){return Y.schemeIdUri&&Y.schemeIdUri===t.Z.FONT_DOWNLOAD_DVB_SCHEME}),ie=U.supplementalPropertiesAsArray.filter(function(Y){return Y.schemeIdUri&&Y.schemeIdUri===t.Z.FONT_DOWNLOAD_DVB_SCHEME});G.length>0?(ue=!0,ne=G):ne=ie,ne.forEach(function(Y){if(function(C){return!(!(C.value&&C.value==="1"&&C.dvbUrl&&C.dvbUrl.length>0&&C.dvbFontFamily&&C.dvbFontFamily.length>0&&C.dvbMimeType)||C.dvbMimeType!==t.Z.OFF_MIMETYPE&&C.dvbMimeType!==t.Z.WOFF_MIMETYPE)}(Y)){var ce=(g=Y.dvbUrl,P=le,h.isPathAbsolute(g)?g:h.isRelative(g)?P?h.resolve(g,P):h.resolve(g):g);E.push({fontFamily:Y.dvbFontFamily,url:ce,mimeType:Y.dvbMimeType,trackId:U.id,streamId:Z,isEssential:ue,status:"unloaded",fontFace:new FontFace(Y.dvbFontFamily,"url(".concat(ce,")"),{display:"swap"})})}var g,P})}function B(U,Z){var le=E[U];E[U]=yo(yo({},le),{},{status:Z})}function N(){E=[]}return r={addFontsFromTracks:function(U,Z){if(U&&Array.isArray(U)&&Z)for(var le=0;le<U.length;le++)j(U[le],Z)},downloadFonts:function(){for(var U=function(le){var ne=E[le];document.fonts.add(ne.fontFace),A.trigger(n.Z.DVB_FONT_DOWNLOAD_ADDED,ne),ne.fontFace.load().then(function(){B(le,"loaded"),A.trigger(n.Z.DVB_FONT_DOWNLOAD_COMPLETE,ne)},function(ue){B(le,"error"),l.debug("Font download error: ",ue),A.trigger(n.Z.DVB_FONT_DOWNLOAD_FAILED,ne)})},Z=0;Z<E.length;Z++)U(Z)},getFonts:function(){return E},getFontsForTrackId:function(U){return E.filter(function(Z){return Z.trackId&&Z.trackId===U})},reset:function(){(function(){var U,Z=function(ue,fe){var G;if(typeof Symbol>"u"||ue[Symbol.iterator]==null){if(Array.isArray(ue)||(G=function(C,D){if(C){if(typeof C=="string")return Eo(C,D);var b=Object.prototype.toString.call(C).slice(8,-1);return b==="Object"&&C.constructor&&(b=C.constructor.name),b==="Map"||b==="Set"?Array.from(C):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?Eo(C,D):void 0}}(ue))||fe){G&&(ue=G);var ie=0,Y=function(){};return{s:Y,n:function(){return ie>=ue.length?{done:!0}:{done:!1,value:ue[ie++]}},e:function(C){throw C},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ce,g=!0,P=!1;return{s:function(){G=ue[Symbol.iterator]()},n:function(){var C=G.next();return g=C.done,C},e:function(C){P=!0,ce=C},f:function(){try{g||G.return==null||G.return()}finally{if(P)throw ce}}}}(E);try{for(Z.s();!(U=Z.n()).done;){var le=U.value,ne=document.fonts.delete(le.fontFace);l.debug("Removal of fontFamily: ".concat(le.fontFamily," was ").concat(ne?"successful":"unsuccessful"))}}catch(ue){Z.e(ue)}finally{Z.f()}})(),N()}},l=(0,m.Z)(R).getInstance().getLogger(r),N(),r}vo.__dashjs_factory_name="DVBFonts";var uu=_.Z.getClassFactory(vo);function _o(i){var r,l,E,R,A,h,w,F,j,B,N,U,Z,le,ne=this.context,ue=i.adapter,fe=i.errHandler,G=i.manifestModel,ie=i.mediaController,Y=i.baseURLController,ce=i.videoModel,g=i.settings;function P(J){if(le.error("Could not download ".concat(J.isEssential?"an essential":"a"," font - fontFamily: ").concat(J.fontFamily,", url: ").concat(J.url)),J.isEssential){var pe=R[J.streamId].getTrackIdxForId(J.trackId);R[J.streamId].setModeForTrackIdx(pe,t.Z.TEXT_DISABLED)}}function C(J){if(le.debug("Successfully downloaded ".concat(J.isEssential?"an essential":"a"," font - fontFamily: ").concat(J.fontFamily,", url: ").concat(J.url)),J.isEssential){var pe=R[J.streamId].getTrackIdxForId(J.trackId);pe===R[J.streamId].getCurrentTrackIdx()?R[J.streamId].setModeForTrackIdx(pe,t.Z.TEXT_SHOWING):R[J.streamId].setModeForTrackIdx(pe,t.Z.TEXT_HIDDEN)}}function D(J){var pe=J.tracks,Ne=J.index,Se=J.streamId;if(g.get().streaming.text.defaultEnabled===!1&&!z()||U)ae(Se,-1);else{var Ce=ie.getCurrentTrackFor(t.Z.TEXT,Se);if(Ce){var Re={lang:Ce.lang,role:Ce.roles[0],index:Ce.index,codec:Ce.codec,accessibility:Ce.accessibility[0]};pe.some(function($e,nt){if(ie.matchSettings(Re,$e))return ae(Se,nt),Ne=nt,!0})}j=!1}l[Se].lastEnabledIndex=Ne,F.trigger(n.Z.TEXT_TRACKS_ADDED,{enabled:z(),index:Ne,tracks:pe,streamId:Se}),N=!0,Z.addFontsFromTracks(pe,Se),Z.getFonts().forEach(function($e){if($e.isEssential){var nt=R[$e.streamId].getTrackIdxForId($e.trackId);R[$e.streamId].setModeForTrackIdx(nt,t.Z.TEXT_DISABLED)}}),Z.downloadFonts()}function b(J){try{var pe=J.streamId;if(!R[pe]||isNaN(J.time))return;R[pe].manualCueProcessing(J.time)}catch{}}function te(J){try{var pe=J.streamId;if(!R[pe])return;R[pe].disableManualTracks()}catch{}}function z(){var J=!0;return j&&!B&&(J=!1),J}function ae(J,pe){(j=pe===-1)&&ie&&ie.saveTextSettingsDisabled();var Ne=Q(J);if(Ne!==pe&&R[J]){R[J].disableManualTracks();var Se=R[J].getCurrentTrackInfo(),Ce=Se?ce.getTextTrack(Se.kind,Se.id,Se.lang,Se.isTTML,Se.isEmbedded):null;Ce&&Ce.mode!==t.Z.TEXT_DISABLED&&R[J].setModeForTrackIdx(Ne,t.Z.TEXT_HIDDEN),R[J].setCurrentTrackIdx(pe),Se=R[J].getCurrentTrackInfo();var Re=g.get().streaming.text.dispatchForManualRendering;Se&&!Re&&Se.mode!==t.Z.TEXT_DISABLED&&R[J].setModeForTrackIdx(pe,t.Z.TEXT_SHOWING),Se&&Se.isFragmented&&!Se.isEmbedded?function($e,nt,We){if(E[$e])for(var Qe=E[$e].getConfig().fragmentedTracks,Ct=0;Ct<Qe.length;Ct++){var ve=Qe[Ct];if(nt.lang===ve.lang&&(ve.id?nt.id===ve.id:nt.index===ve.index)){var Fe=ie.getCurrentTrackFor(t.Z.TEXT,$e);(ve.id?Fe.id!==ve.id:Fe.index!==ve.index)?(R[$e].deleteCuesFromTrackIdx(We),E[$e].setCurrentFragmentedTrackIdx(Ct)):We===-1&&F.trigger(u.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:$e,mediaType:t.Z.TEXT})}}}(J,Se,Ne):Se&&!Se.isFragmented&&function($e,nt){F.trigger(u.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:nt},{streamId:$e,mediaType:t.Z.TEXT})}(J,Se),ie.setTrack(Se)}}function Q(J){return R[J].getCurrentTrackIdx()}function L(){E={},R={},l={},j=!0,N=!1,U=!1}return r={deactivateStream:function(J){if(J){var pe=J.id;E[pe]&&E[pe].resetMediaInfos(),R[pe]&&R[pe].deleteAllTextTracks()}},initialize:function(){Z=uu(ne).create({adapter:ue,baseURLController:Y}),F.on(u.Z.TEXT_TRACKS_QUEUE_INITIALIZED,D,r),F.on(u.Z.DVB_FONT_DOWNLOAD_FAILED,P,r),F.on(u.Z.DVB_FONT_DOWNLOAD_COMPLETE,C,r),g.get().streaming.text.webvtt.customRenderingEnabled&&(F.on(u.Z.PLAYBACK_TIME_UPDATED,b,r),F.on(u.Z.PLAYBACK_SEEKING,te,r))},initializeForStream:function(J){var pe=J.id,Ne=ru(ne).create({videoModel:ce,settings:g,streamInfo:J});Ne.initialize(),R[pe]=Ne;var Se=tu(ne).create({errHandler:fe,adapter:ue,dvbFonts:Z,manifestModel:G,mediaController:ie,videoModel:ce,textTracks:Ne,vttParser:A,vttCustomRenderingParser:h,ttmlParser:w,streamInfo:J,settings:g});Se.initialize(),E[pe]=Se,l[pe]={},l[pe].lastEnabledIndex=-1},createTracks:function(J){var pe=J.id;R[pe]&&R[pe].createTracks()},getTextSourceBuffer:function(J){var pe=J.id;if(E&&E[pe])return E[pe]},getAllTracksAreDisabled:function(){return j},addEmbeddedTrack:function(J,pe){var Ne=J.id;E[Ne]&&E[Ne].addEmbeddedTrack(pe)},enableText:function(J,pe){return(0,W.PS)(pe,"boolean"),z()!==pe&&(pe&&ae(J,l[J].lastEnabledIndex),pe||(l[J].lastEnabledIndex=Q(J),N?ae(J,-1):U=!0)),!0},isTextEnabled:z,setTextTrack:ae,getCurrentTrackIdx:Q,enableForcedTextStreaming:function(J){return(0,W.PS)(J,"boolean"),B=J,!0},addMediaInfosToBuffer:function(J,pe,Ne){var Se=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,Ce=J.id;E[Ce]&&E[Ce].addMediaInfos(pe,Ne,Se)},reset:function(){Z.reset(),L(),F.off(u.Z.TEXT_TRACKS_QUEUE_INITIALIZED,D,r),F.off(u.Z.DVB_FONT_DOWNLOAD_FAILED,P,r),F.off(u.Z.DVB_FONT_DOWNLOAD_COMPLETE,C,r),g.get().streaming.text.webvtt.customRenderingEnabled&&(F.off(u.Z.PLAYBACK_TIME_UPDATED,b,r),F.off(u.Z.PLAYBACK_SEEKING,te,r)),Object.keys(E).forEach(function(J){E[J].resetEmbedded(),E[J].reset()})}},B=!1,N=!1,U=!1,A=iu(ne).getInstance(),h=au(ne).getInstance(),w=ou(ne).getInstance(),F=(0,p.Z)(ne).getInstance(),le=(0,m.Z)(ne).getInstance().getLogger(r),L(),r}_o.__dashjs_factory_name="TextController";var lu=_.Z.getClassFactory(_o);function ra(){var i,r,l,E,R,A,h,w,F,j,B,N,U,Z,le,ne,ue,fe,G,ie,Y,ce,g,P,C,D,b,te,z,ae,Q,L,J,pe,Ne,Se,Ce,Re,$e,nt="You must first call initialize() and set a source before calling this method",We="You must first call initialize() and set a valid source and view before calling this method",Qe="You must first call attachView() to set the video element before calling this method",Ct="You must first call attachSource() with a valid source before calling this method",ve="MediaPlayer not initialized!",Fe=this.context,ot=(0,p.Z)(Fe).getInstance(),qe=(0,Ie.Z)(Fe).getInstance(),ht=(0,m.Z)(Fe).getInstance({settings:qe});function gt(){Qt(null),Yt(null),E=null,Z&&(Z.reset(),Z=null),le&&(le.reset(),le=null),ie&&ie.reset(),qe.reset(),ue&&(ue.reset(),ue=null)}function st(){return!!l&&!!Se.getElement()}function qt(){return(0,As.e)()}function Bt(){if(!h)throw We;return te.isPaused()}function sn(){if(!h)throw We;return te.getIsDynamic()}function un(me){var ye=C&&C.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,Ye=L.getCurrentDVRInfo(ye);if(!Ye)return 0;var St=te.getOriginalLiveDelay(),Gt=Ye.range.start+me;return Gt>Ye.range.end-St&&(Gt=Ye.range.end-St),Gt}function Ge(me){if(!h)throw We;var ye=jt().currentTime;if(me!==void 0)ye=C.getTimeRelativeToStreamId(ye,me);else if(te.getIsDynamic()){var Ye=C&&C.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,St=L.getCurrentDVRInfo(Ye);ye=St===null||ye===0?0:Math.max(0,ye-St.range.start)}return ye}function ut(){if(!h)throw We;var me=jt().duration;if(te.getIsDynamic()){var ye=C&&C.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,Ye=L.getCurrentDVRInfo(ye);me=Ye?Ye.range.end-Ye.range.start:0}return me}function tt(me){(0,W.PS)(me,"boolean"),w=me}function vt(){ie.restoreDefaultUTCTimingSources()}function wt(){return L}function jt(){if(!Se.getElement())throw Qe;return Se.getElement()}function Yt(me){if(!R)throw ve;Se.setElement(me),me&&(Kt(),function(){if(!le){var ye=dashjs.MetricsReporting;if(typeof ye=="function"){var Ye=ye(Fe).create();le=Ye.createMetricsReporting({debug:ht,eventBus:ot,mediaElement:jt(),adapter:fe,dashMetrics:L,mediaPlayerModel:G,events:u.Z,constants:t.Z,metricsConstants:y.Z})}}}(),function(){if(!ne){var ye=dashjs.MssHandler;typeof ye=="function"&&(X.extend(ye.errors),ne=ye(Fe).create({eventBus:ot,mediaPlayerModel:G,dashMetrics:L,manifestModel:J,playbackController:te,streamController:C,protectionController:Z,baseURLController:ce,errHandler:Y,events:u.Z,constants:t.Z,debug:ht,initSegmentType:Le.w.INIT_SEGMENT_TYPE,BASE64:$i,ISOBoxer:yi,settings:qe}))}}(),C&&C.switchToVideoElement(F)),h&&Dt(),lt(F)}function Vt(me){if(!A)throw nt;var ye=C.getActiveStreamInfo();return ye?U.getTracksFor(me,ye.id):[]}function Qt(me){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!R)throw ve;typeof me=="string"&&Ce.initialize(me),ye==null&&(ye=NaN),isNaN(ye)||(ye=Math.max(0,ye)),F=ye,l=me,(A||h)&&Dt(),st()&&lt(F)}function ft(){if(!A)throw nt;var me=C.getActiveStreamInfo();return me?C.getStreamById(me.id):null}function Dt(){h=!1,A=!1,fe.reset(),C.reset(),b.reset(),Q.reset(),te.reset(),z.reset(),ae.reset(),j.reset(),U.reset(),$e.reset(),Z&&(qe.get().streaming.protection.keepProtectionMediaKeys?Z.stop():(Z.reset(),Z=null,Kt())),D.reset(),pe.reset(),Ne.reset()}function xt(){var me=Mt();C||(C=ua(Fe).getInstance()),D||(D=lu(Fe).create({errHandler:Y,manifestModel:J,adapter:fe,mediaController:U,baseURLController:ce,videoModel:Se,settings:qe})),P.setConfig({capabilities:g,customParametersModel:ie,adapter:fe,settings:qe,manifestModel:J,errHandler:Y}),C.setConfig({capabilities:g,capabilitiesFilter:P,manifestLoader:me,manifestModel:J,mediaPlayerModel:G,customParametersModel:ie,protectionController:Z,textController:D,adapter:fe,dashMetrics:L,errHandler:Y,timelineConverter:N,videoModel:Se,playbackController:te,serviceDescriptionController:z,contentSteeringController:ae,abrController:j,mediaController:U,settings:qe,baseURLController:ce,uriFragmentModel:Ce,segmentBaseController:$e}),b.setConfig({settings:qe,playbackController:te,streamController:C,videoModel:Se,timelineConverter:N,adapter:fe}),te.setConfig({streamController:C,serviceDescriptionController:z,dashMetrics:L,adapter:fe,videoModel:Se,timelineConverter:N,settings:qe}),Q.setConfig({streamController:C,playbackController:te,mediaPlayerModel:G,videoModel:Se,settings:qe}),j.setConfig({streamController:C,domStorage:Re,mediaPlayerModel:G,customParametersModel:ie,cmsdModel:Ne,dashMetrics:L,adapter:fe,videoModel:Se,settings:qe}),pe.setConfig({abrController:j,dashMetrics:L,playbackController:te}),Ne.setConfig({}),j.initialize(),C.initialize(w,E),D.initialize(),b.initialize(),Q.initialize(),pe.initialize(),Ne.initialize(),ae.initialize(),$e.initialize()}function Mt(){return us(Fe).create({debug:ht,errHandler:Y,dashMetrics:L,mediaPlayerModel:G,requestModifier:(0,be.Z)(Fe).getInstance(),mssHandler:ne,settings:qe})}function Kt(){if(Z)return Z;var me=dashjs.Protection;if(typeof me=="function"){var ye=me(Fe).create();return u.Z.extend(me.events),n.Z.extend(me.events,{publicOnly:!0}),X.extend(me.errors),g||(g=(0,Pa.Z)(Fe).getInstance()),Z=ye.createProtectionSystem({debug:ht,errHandler:Y,videoModel:Se,customParametersModel:ie,capabilities:g,eventBus:ot,events:u.Z,BASE64:$i,constants:t.Z,cmcdModel:pe,settings:qe})}return null}function he(){if(!R)throw ve;if(ue)return ue;var me=dashjs.OfflineController;if(typeof me=="function"){u.Z.extend(me.events),n.Z.extend(me.events,{publicOnly:!0}),X.extend(me.errors);var ye=Mt(),Ye=ia(Fe).create();return Ye.setConfig({manifestModel:J,adapter:fe,manifestLoader:ye,errHandler:Y,contentSteeringController:ae}),ue=me(Fe).create({debug:ht,manifestUpdater:Ye,baseURLController:ce,manifestLoader:ye,manifestModel:J,mediaPlayerModel:G,abrController:j,playbackController:te,adapter:fe,errHandler:Y,dashMetrics:L,timelineConverter:N,segmentBaseController:$e,schemeLoaderFactory:B,eventBus:ot,events:u.Z,errors:X,constants:t.Z,settings:qe,dashConstants:e.Z,urlUtils:(0,ze.Z)(Fe).getInstance()})}return null}function ke(me){var ye=C&&C.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,Ye=L.getCurrentDVRInfo(ye);return Ye?me+(Ye.manifestInfo.availableFrom.getTime()/1e3+Ye.range.start):0}function lt(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;ue&&ue.resetRecords(),!A&&l&&(A=!0,r.info("Streaming Initialized"),xt(),typeof l=="string"?C.load(l,me):C.loadWithManifest(l,me)),!h&&st()&&(h=!0,r.info("Playback Initialized"))}return i={initialize:function(me,ye,Ye){var St=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;g||(g=(0,Pa.Z)(Fe).getInstance()).setConfig({settings:qe}),Y||(Y=ls(Fe).getInstance()),g.supportsMediaSource()?(R||(R=!0,N=Xs(Fe).getInstance(),j||(j=vs(Fe).getInstance()).setConfig({settings:qe}),B||(B=Zn(Fe).getInstance()),te||(te=d(Fe).getInstance()),U||(U=Oo(Fe).getInstance()),C||(C=ua(Fe).getInstance()),b||(b=Ro(Fe).getInstance()),Q||(Q=wo(Fe).getInstance()),z||(z=Co(Fe).getInstance()),ae||(ae=ar(Fe).getInstance()),P||(P=cs(Fe).getInstance()),fe=Ls(Fe).getInstance(),J=gs(Fe).getInstance(),pe=on(Fe).getInstance(),Ne=Nt(Fe).getInstance(),L=Ws(Fe).getInstance({settings:qe}),Re=bs(Fe).getInstance({settings:qe}),fe.setConfig({constants:t.Z,cea608parser:T(),errHandler:Y,BASE64:$i}),ce||(ce=ko(Fe).create()),ce.setConfig({adapter:fe,contentSteeringController:ae}),z.setConfig({adapter:fe}),$e||($e=ws(Fe).getInstance({dashMetrics:L,mediaPlayerModel:G,errHandler:Y,baseURLController:ce,events:u.Z,eventBus:ot,debug:ht,boxParser:(0,Yr.Z)(Fe).getInstance(),requestModifier:(0,be.Z)(Fe).getInstance(),errors:X})),U.setConfig({domStorage:Re,settings:qe,customParametersModel:ie}),G.setConfig({playbackController:te,serviceDescriptionController:z}),ae.setConfig({adapter:fe,errHandler:Y,dashMetrics:L,mediaPlayerModel:G,manifestModel:J,serviceDescriptionController:z,eventBus:ot,requestModifier:(0,be.Z)(Fe).getInstance()}),vt(),tt(Ye===void 0||Ye),he()),me&&Yt(me),ye&&Qt(ye,St),r.info("[dash.js "+qt()+"] MediaPlayer has been initialized")):Y.error(new re.Z(X.CAPABILITY_MEDIASOURCE_ERROR_CODE,X.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(me){me&&(me.capabilities&&(g=me.capabilities),me.capabilitiesFilter&&(P=me.capabilitiesFilter),me.streamController&&(C=me.streamController),me.textController&&(D=me.textController),me.gapController&&(b=me.gapController),me.playbackController&&(te=me.playbackController),me.serviceDescriptionController&&(z=me.serviceDescriptionController),me.contentSteeringController&&(ae=me.contentSteeringController),me.catchupController&&(Q=me.catchupController),me.mediaPlayerModel&&(G=me.mediaPlayerModel),me.customParametersModel&&(ie=me.customParametersModel),me.abrController&&(j=me.abrController),me.schemeLoaderFactory&&(B=me.schemeLoaderFactory),me.mediaController&&(U=me.mediaController),me.settings&&(qe=me.settings))},on:function(me,ye,Ye,St){ot.on(me,ye,Ye,St)},off:function(me,ye,Ye){ot.off(me,ye,Ye)},extend:function(me,ye,Ye){_.Z.extend(me,ye,Ye,Fe)},attachView:Yt,attachSource:Qt,refreshManifest:function(me){if(!R)throw ve;if(!st())return me(null,Ct);var ye=this;typeof me=="function"&&ot.on(u.Z.INTERNAL_MANIFEST_LOADED,function Ye(St){ot.off(u.Z.INTERNAL_MANIFEST_LOADED,Ye,ye),St.error?me(null,St.error):me(St.manifest)},ye),C.refreshManifest()},isReady:st,preload:function(){if(!Se.getElement()&&!A){if(!l)throw Ct;lt(F)}},play:function(){if(!h)throw We;(!w||Bt()&&h)&&te.play(!0)},isPaused:Bt,pause:function(){if(!h)throw We;te.pause()},isSeeking:function(){if(!h)throw We;return te.isSeeking()},isDynamic:sn,getLowLatencyModeEnabled:function(){if(!h)throw We;return te.getLowLatencyModeEnabled()},seek:function(me){if(!h)throw We;if((0,W.PS)(me,"number"),isNaN(me))throw t.Z.BAD_ARGUMENT_ERROR;me<0&&(me=0);var ye=te.getIsDynamic()?un(me):me,Ye=jt();!te.getIsDynamic()&&Ye.duration&&(ye=Math.min(Ye.duration,ye)),te.seek(ye,!1,!1,!0)},seekToOriginalLive:function(){h&&sn()&&te.seekToOriginalLive()},setPlaybackRate:function(me){jt().playbackRate=me},getPlaybackRate:function(){return jt().playbackRate},setMute:function(me){(0,W.PS)(me,"boolean"),jt().muted=me},isMuted:function(){return jt().muted},setVolume:function(me){if(typeof me!="number"||isNaN(me)||me<0||me>1)throw t.Z.BAD_ARGUMENT_ERROR;jt().volume=me},getVolume:function(){return jt().volume},time:Ge,duration:ut,timeAsUTC:function(){if(!h)throw We;return Ge()<0?NaN:ke(Ge())},durationAsUTC:function(){if(!h)throw We;return ke(ut())},getActiveStream:ft,getDVRWindowSize:function(){var me=C&&C.hasVideoTrack()?t.Z.VIDEO:t.Z.AUDIO,ye=L.getCurrentDVRInfo(me);return ye?ye.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:un,getAvailableBaseUrls:function(){var me=J.getValue();return me?ce.getBaseUrls(me):[]},getAvailableLocations:function(){var me=J.getValue();if(!me)return[];var ye=fe.getLocation(me),Ye=ae.getSynthesizedLocationElements(ye);return ye.concat(Ye)},getTargetLiveDelay:function(){if(!h)throw We;return te.getOriginalLiveDelay()},convertToTimeCode:function(me){me=Math.max(me,0);var ye=Math.floor(me/3600),Ye=Math.floor(me%3600/60),St=Math.floor(me%3600%60);return(ye===0?"":ye<10?"0"+ye.toString()+":":ye.toString()+":")+(Ye<10?"0"+Ye.toString():Ye.toString())+":"+(St<10?"0"+St.toString():St.toString())},formatUTC:function(me,ye,Ye){var St=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Gt=new Date(1e3*me),gn=Gt.toLocaleDateString(ye),On=Gt.toLocaleTimeString(ye,{hour12:Ye});return St?On+" "+gn:On},getVersion:qt,getDebug:function(){return ht},getBufferLength:function(me){var ye=[t.Z.VIDEO,t.Z.AUDIO,t.Z.TEXT];if(me)return ye.indexOf(me)!==-1?wt().getCurrentBufferLevel(me)||NaN:(r.warn("getBufferLength requested for invalid type"),NaN);var Ye=ye.map(function(St){return Vt(St).length>0?wt().getCurrentBufferLevel(St):Number.MAX_VALUE}).reduce(function(St,Gt){return Math.min(St,Gt)});return Ye===Number.MAX_VALUE?NaN:Ye},getTTMLRenderingDiv:function(){return Se?Se.getTTMLRenderingDiv():null},getVideoElement:jt,getSource:function(){if(!l)throw Ct;return l},updateSource:function(me){l=me,C.load(l)},getCurrentLiveLatency:function(){if(!R)throw ve;return h?te.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(me){if(!A)throw nt;return j.getTopBitrateInfoFor(me)},setAutoPlay:tt,getAutoPlay:function(){return w},getDashMetrics:wt,getQualityFor:function(me){if(!A)throw nt;if(me===t.Z.IMAGE){var ye=ft();if(!ye)return-1;var Ye=ye.getThumbnailController();return Ye?Ye.getCurrentTrackIndex():-1}return j.getQualityFor(me)},setQualityFor:function(me,ye){var Ye=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!A)throw nt;if(me===t.Z.IMAGE){var St=ft();if(!St)return;var Gt=St.getThumbnailController();Gt&&Gt.setTrackByIndex(ye)}j.setPlaybackQuality(me,C.getActiveStreamInfo(),ye,{forceReplace:Ye})},updatePortalSize:function(){j.setElementSize(),j.setWindowResizeEventCalled(!0)},enableText:function(me){var ye=C.getActiveStreamInfo();return!(!ye||!D)&&D.enableText(ye.id,me)},enableForcedTextStreaming:function(me){return!(!C.getActiveStreamInfo()||!D)&&D.enableForcedTextStreaming(me)},isTextEnabled:function(){var me=C.getActiveStreamInfo();return!(!me||!D)&&D.isTextEnabled(me)},setTextTrack:function(me){if(!h)throw We;var ye=C.getActiveStreamInfo();ye&&D&&D.setTextTrack(ye.id,me)},getBitrateInfoListFor:function(me){if(!A)throw nt;var ye=ft();return ye?ye.getBitrateListFor(me):[]},getStreamsFromManifest:function(me){if(!A)throw nt;return fe.getStreamsInfo(me)},getTracksFor:Vt,getTracksForTypeFromManifest:function(me,ye,Ye){if(!A)throw nt;return(Ye=Ye||fe.getStreamsInfo(ye,1)[0])?fe.getAllMediaInfoForType(Ye,me,ye):[]},getCurrentTrackFor:function(me){if(!A)throw nt;var ye=C.getActiveStreamInfo();return U.getCurrentTrackFor(me,ye.id)},setInitialMediaSettingsFor:function(me,ye){if(!R)throw ve;U.setInitialSettings(me,ye)},getInitialMediaSettingsFor:function(me){if(!R)throw ve;return U.getInitialSettings(me)},setCurrentTrack:function(me){var ye=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!A)throw nt;U.setTrack(me,ye)},addABRCustomRule:function(me,ye,Ye){ie.addAbrCustomRule(me,ye,Ye)},removeABRCustomRule:function(me){ie.removeAbrCustomRule(me)},removeAllABRCustomRule:function(){ie.removeAllAbrCustomRule()},getABRCustomRules:function(){return ie.getAbrCustomRules()},getAverageThroughput:function(me){var ye=j.getThroughputHistory(),Ye=te.getIsDynamic();return ye?ye.getAverageThroughput(me,Ye):0},retrieveManifest:function(me,ye){var Ye=Mt(),St=this;ot.on(u.Z.INTERNAL_MANIFEST_LOADED,function Gt(gn){gn.error?ye(null,gn.error):ye(gn.manifest),ot.off(u.Z.INTERNAL_MANIFEST_LOADED,Gt,St),Ye.reset()},St),Ce.initialize(me),Ye.load(me)},addUTCTimingSource:function(me,ye){ie.addUTCTimingSource(me,ye)},removeUTCTimingSource:function(me,ye){ie.removeUTCTimingSource(me,ye)},clearDefaultUTCTimingSources:function(){ie.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:vt,setXHRWithCredentialsForType:function(me,ye){ie.setXHRWithCredentialsForType(me,ye)},getXHRWithCredentialsForType:function(me){return ie.getXHRWithCredentialsForType(me)},getProtectionController:function(){return Kt()},attachProtectionController:function(me){Z=me},setProtectionData:function(me){E=me,C&&C.setProtectionData(E)},registerLicenseRequestFilter:function(me){ie.registerLicenseRequestFilter(me)},registerLicenseResponseFilter:function(me){ie.registerLicenseResponseFilter(me)},unregisterLicenseRequestFilter:function(me){ie.unregisterLicenseRequestFilter(me)},unregisterLicenseResponseFilter:function(me){ie.unregisterLicenseResponseFilter(me)},registerCustomCapabilitiesFilter:function(me){ie.registerCustomCapabilitiesFilter(me)},unregisterCustomCapabilitiesFilter:function(me){ie.unregisterCustomCapabilitiesFilter(me)},setCustomInitialTrackSelectionFunction:function(me){ie.setCustomInitialTrackSelectionFunction(me)},resetCustomInitialTrackSelectionFunction:function(){ie.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(me){if(!Se.getElement())throw Qe;Se.setTTMLRenderingDiv(me)},attachVttRenderingDiv:function(me){if(!Se.getElement())throw Qe;Se.setVttRenderingDiv(me)},getCurrentTextTrackIndex:function(){var me=C.getActiveStreamInfo();if(me&&D)return D.getCurrentTrackIdx(me.id)},provideThumbnail:function(me,ye){if(typeof ye=="function")if(me<0)ye(null);else{var Ye=te.getIsDynamic()?un(me):me,St=C.getStreamForTime(Ye);if(St!==null){var Gt=St.getThumbnailController();if(Gt)return Gt.provide(Ye,ye);ye(null)}else ye(null)}},getDashAdapter:function(){return fe},getOfflineController:function(){return he()},triggerSteeringRequest:function(){if(ae)return ae.loadSteeringData()},getCurrentSteeringResponseData:function(){if(ae)return ae.getCurrentSteeringResponseData()},getSettings:function(){return qe.get()},updateSettings:function(me){qe.update(me)},resetSettings:function(){qe.reset()},reset:gt,destroy:function(){gt(),_.Z.deleteSingletonInstances(Fe)}},r=ht.getLogger(i),R=!1,h=!1,A=!1,w=!0,F=NaN,Z=null,ue=null,E=null,fe=null,$e=null,u.Z.extend(n.Z),G=hs(Fe).getInstance(),ie=(0,Ln.Z)(Fe).getInstance(),Se=Ts(Fe).getInstance(),Ce=ds(Fe).getInstance(),i}ra.__dashjs_factory_name="MediaPlayer";var vi=_.Z.getClassFactory(ra);vi.events=n.Z,vi.errors=X,_.Z.updateClassFactory(ra.__dashjs_factory_name,vi);var cu=vi},8825:function(it,we,M){function oe(p){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},oe(p)}function T(p,u){return T=Object.setPrototypeOf||function(_,m){return _.__proto__=m,_},T(p,u)}function t(p,u){return!u||oe(u)!=="object"&&typeof u!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(p):u}function e(p){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},e(p)}var y=new(function(p){(function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&T(c,d)})(n,p);var u,_,m=(u=n,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var c,d=e(u);if(_){var I=e(this).constructor;c=Reflect.construct(d,arguments,I)}else c=d.apply(this,arguments);return t(this,c)});function n(){var c;return function(d,I){if(!(d instanceof I))throw new TypeError("Cannot call a class as a function")}(this,n),(c=m.call(this)).AST_IN_FUTURE="astInFuture",c.BASE_URLS_UPDATED="baseUrlsUpdated",c.BUFFER_EMPTY="bufferStalled",c.BUFFER_LOADED="bufferLoaded",c.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",c.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",c.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",c.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",c.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",c.DYNAMIC_TO_STATIC="dynamicToStatic",c.ERROR="error",c.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",c.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",c.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",c.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",c.LOG="log",c.MANIFEST_LOADING_STARTED="manifestLoadingStarted",c.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",c.MANIFEST_LOADED="manifestLoaded",c.METRICS_CHANGED="metricsChanged",c.METRIC_CHANGED="metricChanged",c.METRIC_ADDED="metricAdded",c.METRIC_UPDATED="metricUpdated",c.PERIOD_SWITCH_STARTED="periodSwitchStarted",c.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",c.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",c.QUALITY_CHANGE_RENDERED="qualityChangeRendered",c.TRACK_CHANGE_RENDERED="trackChangeRendered",c.STREAM_INITIALIZING="streamInitializing",c.STREAM_UPDATED="streamUpdated",c.STREAM_ACTIVATED="streamActivated",c.STREAM_DEACTIVATED="streamDeactivated",c.STREAM_INITIALIZED="streamInitialized",c.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",c.TEXT_TRACKS_ADDED="allTextTracksAdded",c.TEXT_TRACK_ADDED="textTrackAdded",c.CUE_ENTER="cueEnter",c.CUE_EXIT="cueExit",c.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",c.TTML_PARSED="ttmlParsed",c.TTML_TO_PARSE="ttmlToParse",c.CAPTION_RENDERED="captionRendered",c.CAPTION_CONTAINER_RESIZE="captionContainerResize",c.CAN_PLAY="canPlay",c.CAN_PLAY_THROUGH="canPlayThrough",c.PLAYBACK_ENDED="playbackEnded",c.PLAYBACK_ERROR="playbackError",c.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",c.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",c.PLAYBACK_LOADED_DATA="playbackLoadedData",c.PLAYBACK_PAUSED="playbackPaused",c.PLAYBACK_PLAYING="playbackPlaying",c.PLAYBACK_PROGRESS="playbackProgress",c.PLAYBACK_RATE_CHANGED="playbackRateChanged",c.PLAYBACK_SEEKED="playbackSeeked",c.PLAYBACK_SEEKING="playbackSeeking",c.PLAYBACK_STALLED="playbackStalled",c.PLAYBACK_STARTED="playbackStarted",c.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",c.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",c.PLAYBACK_WAITING="playbackWaiting",c.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",c.EVENT_MODE_ON_START="eventModeOnStart",c.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",c.CONFORMANCE_VIOLATION="conformanceViolation",c.REPRESENTATION_SWITCH="representationSwitch",c.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",c.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",c.INBAND_PRFT="inbandPrft",c.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",c.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",c}return n}(M(8342).Z));we.Z=y},3393:function(it,we){function M(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var oe=new(function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T),this.init()}var t,e;return t=T,(e=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&M(t.prototype,e),T}());we.Z=oe},3860:function(it,we){function M(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var oe=new(function(){function T(){(function(y,p){if(!(y instanceof p))throw new TypeError("Cannot call a class as a function")})(this,T),this.init()}var t,e;return t=T,(e=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&M(t.prototype,e),T}());we.Z=oe},8080:function(it,we,M){M.d(we,{default:function(){return v}});var oe=function S(){(function(W,V){if(!(W instanceof V))throw new TypeError("Cannot call a class as a function")})(this,S),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};oe.SSL_CONNECTION_FAILED_PREFIX="SSL",oe.DNS_RESOLUTION_FAILED="C00",oe.HOST_UNREACHABLE="C01",oe.CONNECTION_REFUSED="C02",oe.CONNECTION_ERROR="C03",oe.CORRUPT_MEDIA_ISOBMFF="M00",oe.CORRUPT_MEDIA_OTHER="M01",oe.BASE_URL_CHANGED="F00",oe.BECAME_REPORTER="S00";var T=oe,t=M(1180);function e(S){var W,V,be=(S=S||{}).eventBus,ze=S.dashMetrics,Me=S.metricsConstants,De=S.events;function Ae(It){var Ft=new T;if(V){for(var Pt in It)It.hasOwnProperty(Pt)&&(Ft[Pt]=It[Pt]);Ft.mpdurl||(Ft.mpdurl=V.originalUrl||V.url),Ft.terror||(Ft.terror=new Date),ze.addDVBErrors(Ft)}}function xe(It){It.error||(V=It.manifest)}function Xe(It){Ae({errorcode:T.BASE_URL_CHANGED,servicelocation:It.entry})}function mt(){Ae({errorcode:T.BECAME_REPORTER})}function rt(It){var Ft;It.metric===Me.HTTP_REQUEST&&((Ft=It.value).responsecode===0||Ft.responsecode==null||Ft.responsecode>=400||Ft.responsecode<100||Ft.responsecode>=600)&&Ae({errorcode:Ft.responsecode||T.CONNECTION_ERROR,url:Ft.url,terror:Ft.tresponse,servicelocation:Ft._serviceLocation})}function Zt(It){var Ft;switch(It.error?It.error.code:0){case MediaError.MEDIA_ERR_NETWORK:Ft=T.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:Ft=T.CORRUPT_MEDIA_OTHER;break;default:return}Ae({errorcode:Ft})}return W={initialize:function(){be.on(De.MANIFEST_UPDATED,xe,W),be.on(De.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Xe,W),be.on(De.METRIC_ADDED,rt,W),be.on(De.METRIC_UPDATED,rt,W),be.on(De.PLAYBACK_ERROR,Zt,W),be.on(t.Z.BECAME_REPORTING_PLAYER,mt,W)},reset:function(){be.off(De.MANIFEST_UPDATED,xe,W),be.off(De.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Xe,W),be.off(De.METRIC_ADDED,rt,W),be.off(De.METRIC_UPDATED,rt,W),be.off(De.PLAYBACK_ERROR,Zt,W),be.off(t.Z.BECAME_REPORTING_PLAYER,mt,W)}}}e.__dashjs_factory_name="DVBErrorsTranslator";var y=dashjs.FactoryMaker.getSingletonFactory(e),p=M(2295);function u(S){S=S||{};var W,V,be=!1,ze=this.context,Me=S.mediaElement;return W={initialize:function(De){De&&De.length&&(De.forEach(function(Ae){var xe=Ae.starttime,Xe=xe+Ae.duration;V.add(xe,Xe)}),be=!!De[0]._useWallClockTime)},reset:function(){V.clear()},isEnabled:function(){var De,Ae=V.length;if(!Ae)return!0;De=be?new Date().getTime()/1e3:Me.currentTime;for(var xe=0;xe<Ae;xe+=1){var Xe=V.start(xe),mt=V.end(xe);if(Xe<=De&&De<mt)return!0}return!1}},V=(0,p.Z)(ze).create(),W}u.__dashjs_factory_name="RangeController";var _=dashjs.FactoryMaker.getClassFactory(u);function m(){return{serialise:function S(W){var V,be,ze=[],Me=[];for(V in W)if(W.hasOwnProperty(V)&&V.indexOf("_")!==0){if((be=W[V])==null&&(be=""),Array.isArray(be)){if(!be.length)continue;Me=[],be.forEach(function(De){var Ae=Object.prototype.toString.call(De).slice(8,-1)!=="Object";Me.push(Ae?De:S(De))}),be=Me.map(encodeURIComponent).join(",")}else typeof be=="string"?be=encodeURIComponent(be):be instanceof Date?be=be.toISOString():typeof be=="number"&&(be=Math.round(be));ze.push(V+"="+be)}return ze.join("&")}}}m.__dashjs_factory_name="MetricSerialiser";var n=dashjs.FactoryMaker.getSingletonFactory(m);function c(){var S,W,V,be=window.crypto||window.msCrypto,ze=Uint32Array,Me=Math.pow(2,8*ze.BYTES_PER_ELEMENT)-1;function De(){be&&(S||(S=new ze(10)),be.getRandomValues(S),W=0)}return V={random:function(Ae,xe){var Xe;return Ae||(Ae=0),xe||(xe=1),be?(W===S.length&&De(),Xe=S[W]/Me,W+=1):Xe=Math.random(),Xe*(xe-Ae)+Ae}},De(),V}c.__dashjs_factory_name="RNG";var d=dashjs.FactoryMaker.getSingletonFactory(c),I=M(5717);function k(S){var W;S=S||{};var V,be,ze,Me,De,Ae,xe,Xe=this.context,mt=[],rt=S.metricsConstants;function Zt(){Me=!1,De=!1,Ae=null,xe=null}return W={report:function(It,Ft){Array.isArray(Ft)||(Ft=[Ft]),De&&xe.isEnabled()&&Ft.forEach(function(Pt){var tn=V.serialise(Pt);It!==rt.DVB_ERRORS&&(tn="metricname=".concat(It,"&").concat(tn)),function(fn,Sn,_n){var An=new XMLHttpRequest;An.withCredentials=be.getXHRWithCredentialsForType(rt.HTTP_REQUEST_DVB_REPORTING_TYPE);var Gn=function(){var yn=mt.indexOf(An);yn!==-1&&(mt.splice(yn,1),!(An.status>=200&&An.status<300)&&_n&&_n())};mt.push(An);try{An.open("GET",fn),An.onloadend=Gn,An.onerror=Gn,An.send()}catch{An.onerror()}}(tn="".concat(Ae,"?").concat(tn),0,function(){De=!1})})},initialize:function(It,Ft){var Pt;if(xe=Ft,!(Ae=It.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");Me||((Pt=It.dvbProbability)&&(Pt===1e3||Pt/1e3>=ze.random())&&(De=!0),Me=!0)},reset:function(){Zt()}},V=n(Xe).getInstance(),ze=d(Xe).getInstance(),be=(0,I.Z)(Xe).getInstance(),Zt(),W}k.__dashjs_factory_name="DVBReporting";var q=dashjs.FactoryMaker.getClassFactory(k);function x(S){S=S||{};var W,V={"urn:dvb:dash:reporting:2014":q},be=this.context,ze=S.debug?S.debug.getLogger(W):{},Me=S.metricsConstants,De=S.mediaPlayerModel||{};return{create:function(Ae,xe){var Xe;try{(Xe=V[Ae.schemeIdUri](be).create({metricsConstants:Me,mediaPlayerModel:De})).initialize(Ae,xe)}catch(mt){Xe=null,ze.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(Ae.schemeIdUri," (").concat(mt.message,")"))}return Xe},register:function(Ae,xe){V[Ae]=xe},unregister:function(Ae){delete V[Ae]}}}x.__dashjs_factory_name="ReportingFactory";var $=dashjs.FactoryMaker.getSingletonFactory(x);function O(S){var W=[],V=$(this.context).getInstance(S);return{initialize:function(be,ze){be.some(function(Me){var De=V.create(Me,ze);if(De)return W.push(De),!0})},reset:function(){W.forEach(function(be){return be.reset()}),W=[]},report:function(be,ze){W.forEach(function(Me){return Me.report(be,ze)})}}}O.__dashjs_factory_name="ReportingController";var K=dashjs.FactoryMaker.getClassFactory(O);function re(){return{reconstructFullMetricName:function(S,W,V){var be=S;return W&&(be+="("+W,V&&V.length&&(be+=","+V),be+=")"),be},validateN:function(S){if(!S)throw new Error("missing n");if(isNaN(S))throw new Error("n is NaN");if(S<0)throw new Error("n must be positive");return S}}}re.__dashjs_factory_name="HandlerHelpers";var H=dashjs.FactoryMaker.getSingletonFactory(re);function ee(S){var W,V,be,ze,Me;S=S||{};var De=this.context,Ae=H(De).getInstance(),xe=[],Xe=S.metricsConstants;function mt(){var rt=function(){try{return Object.keys(xe).map(function(Zt){return xe[Zt]}).reduce(function(Zt,It){return Zt.level<It.level?Zt:It})}catch{return}}();rt&&Me!==rt.t&&(Me=rt.t,W.report(be,rt))}return{initialize:function(rt,Zt,It){Zt&&(V=Ae.validateN(It),W=Zt,be=Ae.reconstructFullMetricName(rt,It),ze=setInterval(mt,V))},reset:function(){clearInterval(ze),ze=null,V=0,W=null,Me=null},handleNewMetric:function(rt,Zt,It){rt===Xe.BUFFER_LEVEL&&(xe[It]=Zt)}}}ee.__dashjs_factory_name="BufferLevelHandler";var se=dashjs.FactoryMaker.getClassFactory(ee),Te=dashjs.FactoryMaker.getClassFactory(function(S){var W,V=(S=S||{}).eventBus,be=S.metricsConstants;function ze(){V.off(t.Z.METRICS_INITIALISATION_COMPLETE,ze,this),V.trigger(t.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(Me,De){De&&(W=De,V.on(t.Z.METRICS_INITIALISATION_COMPLETE,ze,this))},reset:function(){W=null},handleNewMetric:function(Me,De){Me===be.DVB_ERRORS&&W&&W.report(Me,De)}}});function X(S){var W,V,be,ze,Me;S=S||{};var De=[],Ae=H(this.context).getInstance(),xe=S.metricsConstants;function Xe(){var mt=De;mt.length&&W&&W.report(ze,mt),De=[]}return{initialize:function(mt,rt,Zt,It){rt&&(V=Ae.validateN(Zt),W=rt,It&&It.length&&(be=It),ze=Ae.reconstructFullMetricName(mt,Zt,It),Me=setInterval(Xe,V))},reset:function(){clearInterval(Me),Me=null,V=null,be=null,De=[],W=null},handleNewMetric:function(mt,rt){mt===xe.HTTP_REQUEST&&(be&&be!==rt.type||De.push(rt))}}}X.__dashjs_factory_name="HttpListHandler";var Ie=dashjs.FactoryMaker.getClassFactory(X);function Le(){var S,W;return{initialize:function(V,be){S=V,W=be},reset:function(){W=null,S=void 0},handleNewMetric:function(V,be){V===S&&W&&W.report(S,be)}}}Le.__dashjs_factory_name="GenericMetricHandler";var je=dashjs.FactoryMaker.getClassFactory(Le);function Ee(S){var W,V=(S=S||{}).debug?S.debug.getLogger(W):{},be=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,ze=this.context,Me={BufferLevel:se,DVBErrors:Te,HttpList:Ie,PlayList:je,RepSwitchList:je,TcpList:je};return{create:function(De,Ae){var xe,Xe=De.match(be);if(Xe){try{(xe=Me[Xe[1]](ze).create({eventBus:S.eventBus,metricsConstants:S.metricsConstants})).initialize(Xe[1],Ae,Xe[3],Xe[5])}catch(mt){xe=null,V.error("MetricsHandlerFactory: Could not create handler for type ".concat(Xe[1]," with args ").concat(Xe[3],", ").concat(Xe[5]," (").concat(mt.message,")"))}return xe}},register:function(De,Ae){Me[De]=Ae},unregister:function(De){delete Me[De]}}}Ee.__dashjs_factory_name="MetricsHandlerFactory";var Pe=dashjs.FactoryMaker.getSingletonFactory(Ee);function Ve(S){S=S||{};var W,V=[],be=this.context,ze=S.eventBus,Me=S.events,De=Pe(be).getInstance({debug:S.debug,eventBus:S.eventBus,metricsConstants:S.metricsConstants});function Ae(xe){V.forEach(function(Xe){Xe.handleNewMetric(xe.metric,xe.value,xe.mediaType)})}return W={initialize:function(xe,Xe){xe.split(",").forEach(function(mt,rt,Zt){var It;if(mt.indexOf("(")!==-1&&mt.indexOf(")")===-1){var Ft=Zt[rt+1];Ft&&Ft.indexOf("(")===-1&&Ft.indexOf(")")!==-1&&(mt+=","+Ft,delete Zt[rt+1])}(It=De.create(mt,Xe))&&V.push(It)}),ze.on(Me.METRIC_ADDED,Ae,W),ze.on(Me.METRIC_UPDATED,Ae,W)},reset:function(){ze.off(Me.METRIC_ADDED,Ae,W),ze.off(Me.METRIC_UPDATED,Ae,W),V.forEach(function(xe){return xe.reset()}),V=[]}}}Ve.__dashjs_factory_name="MetricsHandlersController";var et=dashjs.FactoryMaker.getClassFactory(Ve);function _e(S){var W,V,be;S=S||{};var ze=this.context;function Me(){W&&W.reset(),V&&V.reset(),be&&be.reset()}return{initialize:function(De){try{(be=_(ze).create({mediaElement:S.mediaElement})).initialize(De.Range),(V=K(ze).create({debug:S.debug,metricsConstants:S.metricsConstants,mediaPlayerModel:S.mediaPlayerModel})).initialize(De.Reporting,be),(W=et(ze).create({debug:S.debug,eventBus:S.eventBus,metricsConstants:S.metricsConstants,events:S.events})).initialize(De.metrics,V)}catch(Ae){throw Me(),Ae}},reset:Me}}_e.__dashjs_factory_name="MetricsController";var Oe=dashjs.FactoryMaker.getClassFactory(_e),_t=function S(){(function(W,V){if(!(W instanceof V))throw new TypeError("Cannot call a class as a function")})(this,S),this.metrics="",this.Range=[],this.Reporting=[]},dt=function S(){(function(W,V){if(!(W instanceof V))throw new TypeError("Cannot call a class as a function")})(this,S),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},Ze=function S(){(function(W,V){if(!(W instanceof V))throw new TypeError("Cannot call a class as a function")})(this,S),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function Je(S){var W=(S=S||{}).adapter,V=S.constants;return{getMetrics:function(be){var ze=[];return be&&be.Metrics_asArray&&be.Metrics_asArray.forEach(function(Me){var De=new _t,Ae=W.getIsDynamic(be);Me.hasOwnProperty("metrics")&&(De.metrics=Me.metrics,Me.Range_asArray&&Me.Range_asArray.forEach(function(xe){var Xe=new dt;Xe.starttime=function(mt,rt,Zt){var It,Ft,Pt=0;return rt?Pt=W.getAvailabilityStartTime(mt)/1e3:(It=W.getRegularPeriods(mt)).length&&(Pt=It[0].start),Ft=Pt,Zt&&Zt.hasOwnProperty(V.START_TIME)&&(Ft+=Zt.starttime),Ft}(be,Ae,xe),xe.hasOwnProperty("duration")?Xe.duration=xe.duration:Xe.duration=W.getDuration(be),Xe._useWallClockTime=Ae,De.Range.push(Xe)}),Me.Reporting_asArray&&(Me.Reporting_asArray.forEach(function(xe){var Xe=new Ze;xe.hasOwnProperty(V.SCHEME_ID_URI)&&(Xe.schemeIdUri=xe.schemeIdUri,xe.hasOwnProperty("value")&&(Xe.value=xe.value),xe.hasOwnProperty(V.DVB_REPORTING_URL)&&(Xe.dvbReportingUrl=xe[V.DVB_REPORTING_URL]),xe.hasOwnProperty(V.DVB_PROBABILITY)&&(Xe.dvbProbability=xe[V.DVB_PROBABILITY]),De.Reporting.push(Xe))}),ze.push(De)))}),ze}}}Je.__dashjs_factory_name="ManifestParsing";var de=dashjs.FactoryMaker.getSingletonFactory(Je);function ge(S){var W;S=S||{};var V={},be=this.context,ze=S.eventBus,Me=S.events;function De(xe){if(!xe.error){var Xe=Object.keys(V);de(be).getInstance({adapter:S.adapter,constants:S.constants}).getMetrics(xe.manifest).forEach(function(mt){var rt=JSON.stringify(mt);if(V.hasOwnProperty(rt))Xe.splice(rt,1);else try{var Zt=Oe(be).create(S);Zt.initialize(mt),V[rt]=Zt}catch{}}),Xe.forEach(function(mt){V[mt].reset(),delete V[mt]}),ze.trigger(t.Z.METRICS_INITIALISATION_COMPLETE)}}function Ae(){Object.keys(V).forEach(function(xe){V[xe].reset()}),V={}}return W={reset:function(){ze.off(Me.MANIFEST_UPDATED,De,W),ze.off(Me.STREAM_TEARDOWN_COMPLETE,Ae,W)}},ze.on(Me.MANIFEST_UPDATED,De,W),ze.on(Me.STREAM_TEARDOWN_COMPLETE,Ae,W),W}ge.__dashjs_factory_name="MetricsCollectionController";var Be=dashjs.FactoryMaker.getClassFactory(ge);function f(){var S=this.context;return{createMetricsReporting:function(W){return y(S).getInstance({eventBus:W.eventBus,dashMetrics:W.dashMetrics,metricsConstants:W.metricsConstants,events:W.events}).initialize(),Be(S).create(W)},getReportingFactory:function(){return $(S).getInstance()},getMetricsHandlerFactory:function(){return Pe(S).getInstance()}}}f.__dashjs_factory_name="MetricsReporting";var o=dashjs.FactoryMaker.getClassFactory(f);o.events=t.Z,dashjs.FactoryMaker.updateClassFactory(f.__dashjs_factory_name,o);var v=o},1180:function(it,we,M){function oe(p){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},oe(p)}function T(p,u){return T=Object.setPrototypeOf||function(_,m){return _.__proto__=m,_},T(p,u)}function t(p,u){return!u||oe(u)!=="object"&&typeof u!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(p):u}function e(p){return e=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},e(p)}var y=new(function(p){(function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),d&&T(c,d)})(n,p);var u,_,m=(u=n,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var c,d=e(u);if(_){var I=e(this).constructor;c=Reflect.construct(d,arguments,I)}else c=d.apply(this,arguments);return t(this,c)});function n(){var c;return function(d,I){if(!(d instanceof I))throw new TypeError("Cannot call a class as a function")}(this,n),(c=m.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",c.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",c.CMCD_DATA_GENERATED="cmcdDataGenerated",c}return n}(M(8342).Z));we.Z=y},5717:function(it,we,M){var oe=M(2610),T=M(5448),t=M(1264),e=M(3106),y=M(1767),p=M(3393);function u(){var _,m,n,c,d,I,k,q,x=this.context,$=(0,t.Z)(x).getInstance();function O(){c=[],d=[],I=[],q=[],k=null,m=[]}function K(se,Te){var X=-1;se.some(function(Ie,Le){if(Ie===Te)return X=Le,!0}),X<0||se.splice(X,1)}function re(se){var Te;for(Te=0;Te<q.length;Te++)if(q[Te].rulename===se)return Te;return-1}function H(se,Te){ee(se,Te);var X=new oe.Z;X.schemeIdUri=se,X.value=Te,m.push(X)}function ee(se,Te){(0,e.PS)(se,"string"),(0,e.PS)(Te,"string"),m.forEach(function(X,Ie){X.schemeIdUri===se&&X.value===Te&&m.splice(Ie,1)})}return _={getCustomInitialTrackSelectionFunction:function(){return k},setCustomInitialTrackSelectionFunction:function(se){k=se},resetCustomInitialTrackSelectionFunction:function(){k=null},getLicenseResponseFilters:function(){return d},getLicenseRequestFilters:function(){return c},getCustomCapabilitiesFilters:function(){return I},registerCustomCapabilitiesFilter:function(se){I.push(se)},registerLicenseResponseFilter:function(se){d.push(se)},registerLicenseRequestFilter:function(se){c.push(se)},unregisterCustomCapabilitiesFilter:function(se){K(I,se)},unregisterLicenseResponseFilter:function(se){K(d,se)},unregisterLicenseRequestFilter:function(se){K(c,se)},addAbrCustomRule:function(se,Te,X){if(typeof se!="string"||se!==y.Z.ABANDON_FRAGMENT_RULES&&se!==y.Z.QUALITY_SWITCH_RULES||typeof Te!="string")throw p.Z.BAD_ARGUMENT_ERROR;var Ie=re(Te);Ie===-1?q.push({type:se,rulename:Te,rule:X}):(q[Ie].type=se,q[Ie].rule=X)},removeAllAbrCustomRule:function(){q=[]},removeAbrCustomRule:function(se){if(se){var Te=re(se);Te!==-1&&q.splice(Te,1)}else q=[]},getAbrCustomRules:function(){return q},addUTCTimingSource:H,removeUTCTimingSource:ee,getUTCTimingSources:function(){return m},clearDefaultUTCTimingSources:function(){m=[]},restoreDefaultUTCTimingSources:function(){var se=$.get().streaming.utcSynchronization.defaultTimingSource;H(se.scheme,se.value)},setXHRWithCredentialsForType:function se(Te,X){Te?n[Te]=!!X:Object.keys(n).forEach(function(Ie){se(Ie,X)})},getXHRWithCredentialsForType:function(se){var Te=n[se];return Te===void 0?n.default:Te},setConfig:function(){},reset:function(){O()}},n={default:!1},O(),_}u.__dashjs_factory_name="CustomParametersModel",we.Z=T.Z.getSingletonFactory(u)},9032:function(it,we,M){var oe=M(5448),T=M(7473);function t(y){var p=(y=y||{}).requestModifier;function u(_){var m=new Date,n=_.request,c=new XMLHttpRequest;if(c.open(_.method,_.url,!0),n.responseType&&(c.responseType=n.responseType),n.range&&c.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=m),p&&p.modifyRequestHeader&&(c=p.modifyRequestHeader(c,{url:_.url})),_.headers)for(var d in _.headers){var I=_.headers[d];I&&c.setRequestHeader(d,I)}c.withCredentials=_.withCredentials,c.onload=_.onload,c.onloadend=_.onend,c.onerror=_.onerror,c.onprogress=_.progress,c.onabort=_.onabort,c.ontimeout=_.ontimeout,c.timeout=_.timeout,c.send(),_.response=c}return{load:function(_){p&&p.modifyRequest?(0,T.k)(_,p).then(function(){return u(_)}):u(_)},abort:function(_){var m=_.response;m.onloadend=m.onerror=m.onprogress=void 0,m.abort()}}}t.__dashjs_factory_name="XHRLoader";var e=oe.Z.getClassFactory(t);we.Z=e},1737:function(it,we,M){function oe(bt,Et){for(var Tt=0;Tt<Et.length;Tt++){var Ue=Et[Tt];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(bt,Ue.key,Ue)}}M.d(we,{default:function(){return Nr}});var T={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},t=function(){function bt(){(function(Ue,ct){if(!(Ue instanceof ct))throw new TypeError("Cannot call a class as a function")})(this,bt)}var Et,Tt;return Et=bt,Tt=[{key:"findCencContentProtection",value:function(Ue){for(var ct=null,He=0;He<Ue.length;++He){var at=Ue[He];at.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||at.value.toLowerCase()!=="cenc"&&at.value.toLowerCase()!=="cbcs"||(ct=at)}return ct}},{key:"getPSSHData",value:function(Ue){var ct=8,He=new DataView(Ue),at=He.getUint8(ct);return ct+=20,at>0&&(ct+=4+16*He.getUint32(ct)),ct+=4,Ue.slice(ct)}},{key:"getPSSHForKeySystem",value:function(Ue,ct){var He=bt.parsePSSHList(ct);return Ue&&He.hasOwnProperty(Ue.uuid.toLowerCase())?He[Ue.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(Ue,ct){return"pssh"in Ue?(Ue.pssh.__text=Ue.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),ct.decodeArray(Ue.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(Ue){if(Ue==null)return[];for(var ct=new DataView(Ue.buffer||Ue),He={},at=0;;){var Ot,Lt,Wt=void 0,Xt=at;if(at>=ct.buffer.byteLength)break;if(Ot=at+ct.getUint32(at),at+=4,ct.getUint32(at)===1886614376)if(at+=4,(Lt=ct.getUint8(at))===0||Lt===1){at++,at+=3,Wt="";var Ut=void 0,yt=void 0;for(Ut=0;Ut<4;Ut++)Wt+=(yt=ct.getUint8(at+Ut).toString(16)).length===1?"0"+yt:yt;for(at+=4,Wt+="-",Ut=0;Ut<2;Ut++)Wt+=(yt=ct.getUint8(at+Ut).toString(16)).length===1?"0"+yt:yt;for(at+=2,Wt+="-",Ut=0;Ut<2;Ut++)Wt+=(yt=ct.getUint8(at+Ut).toString(16)).length===1?"0"+yt:yt;for(at+=2,Wt+="-",Ut=0;Ut<2;Ut++)Wt+=(yt=ct.getUint8(at+Ut).toString(16)).length===1?"0"+yt:yt;for(at+=2,Wt+="-",Ut=0;Ut<6;Ut++)Wt+=(yt=ct.getUint8(at+Ut).toString(16)).length===1?"0"+yt:yt;at+=6,at+=4,He[Wt=Wt.toLowerCase()]=ct.buffer.slice(Xt,Ot),at=Ot}else at=Ot;else at=Ot}return He}},{key:"getLicenseServerUrlFromMediaInfo",value:function(Ue,ct){try{if(!Ue||Ue.length===0)return null;for(var He=0,at=null;He<Ue.length&&!at;){var Ot=Ue[He];if(Ot&&Ot.contentProtection&&Ot.contentProtection.length>0){var Lt=Ot.contentProtection.filter(function(rn){return rn.schemeIdUri&&rn.schemeIdUri===ct});if(Lt&&Lt.length>0)for(var Wt=0;Wt<Lt.length&&!at;){for(var Xt=Lt[Wt],Ut=0;Ut<T.attributes.length&&!at;){for(var yt=0,zt=T.attributes[Ut];yt<T.prefixes.length&&!at;){var Ht=T.prefixes[yt];Xt[zt]&&Xt[zt].__prefix&&Xt[zt].__prefix===Ht&&Xt[zt].__text&&(at=Xt[zt].__text),yt+=1}Ut+=1}Wt+=1}}He+=1}return at}catch{return null}}}],Tt&&oe(Et,Tt),bt}(),e=function bt(Et,Tt){(function(Ue,ct){if(!(Ue instanceof ct))throw new TypeError("Cannot call a class as a function")})(this,bt),this.contentType=Et,this.robustness=Tt},y=function bt(Et,Tt,Ue,ct,He){(function(at,Ot){if(!(at instanceof Ot))throw new TypeError("Cannot call a class as a function")})(this,bt),this.initDataTypes=["cenc"],Et&&Et.length&&(this.audioCapabilities=Et),Tt&&Tt.length&&(this.videoCapabilities=Tt),this.distinctiveIdentifier=Ue,this.persistentState=ct,this.sessionTypes=He};function p(bt){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et},p(bt)}function u(bt,Et){return u=Object.setPrototypeOf||function(Tt,Ue){return Tt.__proto__=Ue,Tt},u(bt,Et)}function _(bt,Et){return!Et||p(Et)!=="object"&&typeof Et!="function"?function(Tt){if(Tt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Tt}(bt):Et}function m(bt){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(Et){return Et.__proto__||Object.getPrototypeOf(Et)},m(bt)}var n=new(function(bt){(function(He,at){if(typeof at!="function"&&at!==null)throw new TypeError("Super expression must either be null or a function");He.prototype=Object.create(at&&at.prototype,{constructor:{value:He,writable:!0,configurable:!0}}),at&&u(He,at)})(ct,bt);var Et,Tt,Ue=(Et=ct,Tt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var He,at=m(Et);if(Tt){var Ot=m(this).constructor;He=Reflect.construct(at,arguments,Ot)}else He=at.apply(this,arguments);return _(this,He)});function ct(){var He;return function(at,Ot){if(!(at instanceof Ot))throw new TypeError("Cannot call a class as a function")}(this,ct),(He=Ue.call(this)).MEDIA_KEYERR_CODE=100,He.MEDIA_KEYERR_UNKNOWN_CODE=101,He.MEDIA_KEYERR_CLIENT_CODE=102,He.MEDIA_KEYERR_SERVICE_CODE=103,He.MEDIA_KEYERR_OUTPUT_CODE=104,He.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,He.MEDIA_KEYERR_DOMAIN_CODE=106,He.MEDIA_KEY_MESSAGE_ERROR_CODE=107,He.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,He.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,He.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,He.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,He.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,He.KEY_SESSION_CREATED_ERROR_CODE=113,He.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,He.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",He.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",He.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",He.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",He.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",He.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",He.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",He.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",He.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",He.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",He.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",He.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",He.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",He.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",He}return ct}(M(2230).Z)),c=M(5459),d=function bt(Et,Tt,Ue,ct,He,at,Ot,Lt){(function(Wt,Xt){if(!(Wt instanceof Xt))throw new TypeError("Cannot call a class as a function")})(this,bt),this.url=Et,this.method=Tt,this.responseType=Ue,this.headers=ct,this.withCredentials=He,this.messageType=at,this.sessionId=Ot,this.data=Lt},I=function bt(Et,Tt,Ue){(function(ct,He){if(!(ct instanceof He))throw new TypeError("Cannot call a class as a function")})(this,bt),this.url=Et,this.headers=Tt,this.data=Ue},k=M(7855),q=M(703),x=M(3393),$=M(5448);function O(bt){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et},O(bt)}function K(bt){var Et,Tt,Ue,ct,He,at,Ot,Lt,Wt,Xt,Ut,yt=(bt=bt||{}).protectionKeyController,zt=bt.protectionModel,Ht=bt.eventBus,rn=bt.events,dn=bt.debug,vn=bt.BASE64,$t=bt.constants,pt=[],At=bt.cmcdModel,kt=bt.settings,nn=bt.customParametersModel;function on(){if(!(Ht&&Ht.hasOwnProperty("on")&&yt&&yt.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function pn(Nt,en){Lt||Wt?Lt&&En():function(cn,Ln){if(!Wt){Wt=!0;var Tn,Bn=[];cn=cn.sort(function(Zn,Cn){return(He&&He[Zn.ks.systemString]&&He[Zn.ks.systemString].priority>=0?He[Zn.ks.systemString].priority:cn.length)-(He&&He[Cn.ks.systemString]&&He[Cn.ks.systemString].priority>=0?He[Cn.ks.systemString].priority:cn.length)});for(var In=0;In<cn.length;In++){var er=mr(cn[In]);Bn.push({ks:cn[In].ks,configs:[er],protData:cn[In].protData})}zt.requestKeySystemAccess(Bn).then(function(Zn){var Cn=(Tn=Zn.data).mksa&&Tn.mksa.selectedSystemString?Tn.mksa.selectedSystemString:Tn.keySystem.systemString;return Tt.info("DRM: KeySystem Access Granted for system string ("+Cn+")!  Selecting key system..."),zt.selectKeySystem(Tn)}).then(function(Zn){if(Lt=Zn,Wt=!1,zt){Ht.trigger(rn.KEY_SYSTEM_SELECTED,{data:Tn});var Cn=Un(Lt);Cn&&Cn.serverCertificate&&Cn.serverCertificate.length>0&&zt.setServerCertificate(vn.decodeArray(Cn.serverCertificate).buffer),En()}}).catch(function(Zn){Lt=null,Wt=!1,Ln||Ht.trigger(rn.KEY_SYSTEM_SELECTED,{data:null,error:new c.Z(n.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,n.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Zn.error)})})}}(Nt,en)}function En(){for(var Nt,en=0;en<Ue.length;en++)for(Nt=0;Nt<Ue[en].length;Nt++)if(Lt===Ue[en][Nt].ks){qn(Ue[en][Nt]);break}Ue=[]}function qn(Nt){if(yt.isClearKey(Lt)&&Nt.protData&&Nt.protData.hasOwnProperty("clearkeys")&&Object.keys(Nt.protData.clearkeys).length!==0){var en={kids:Object.keys(Nt.protData.clearkeys)};Nt.initData=new TextEncoder().encode(JSON.stringify(en))}Nt.sessionId?Yn(Nt):Nt.initData!==null&&Nn(Nt)}function Yn(Nt){on(),zt.loadKeySession(Nt)}function Nn(Nt){var en=t.getPSSHForKeySystem(Lt,Nt?Nt.initData:null);if(en){if(function(cn){if(!cn)return!1;try{for(var Ln=zt.getSessions(),Tn=0;Tn<Ln.length;Tn++)if(Ln[Tn].getKeyId()===cn)return!0;return!1}catch{return!1}}(Nt.keyId)||Pn(en))return;try{Nt.initData=en,zt.createKeySession(Nt)}catch(cn){Ht.trigger(rn.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+cn.message)})}}else Nt&&Nt.initData?zt.createKeySession(Nt):Ht.trigger(rn.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Lt?Lt.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Un(Nt){if(Nt){var en=Nt.systemString;if(He)return en in He?He[en]:null}return null}function Pn(Nt){if(!Nt)return!1;try{for(var en=zt.getAllInitData(),cn=0;cn<en.length;cn++)if(yt.initDataEquals(Nt,en[cn]))return Tt.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function jn(Nt){on(),Nt?(zt.setMediaElement(Nt),Ht.on(rn.NEED_KEY,Dr,Et)):Nt===null&&(zt.setMediaElement(Nt),Ht.off(rn.NEED_KEY,Dr,Et))}function mr(Nt){var en=Nt.protData,cn=[],Ln=[],Tn=en&&en.audioRobustness&&en.audioRobustness.length>0?en.audioRobustness:Ot,Bn=en&&en.videoRobustness&&en.videoRobustness.length>0?en.videoRobustness:Ot,In=Nt.sessionType,er=en&&en.distinctiveIdentifier?en.distinctiveIdentifier:"optional",Zn=en&&en.persistentState?en.persistentState:In==="temporary"?"optional":"required";return ct.forEach(function(Cn){Cn.type===$t.AUDIO?cn.push(new e(Cn.codec,Tn)):Cn.type===$t.VIDEO&&Ln.push(new e(Cn.codec,Bn))}),new y(cn,Ln,er,Zn,[In])}function rr(Nt){Nt.error?Ht.trigger(rn.KEY_STATUSES_CHANGED,{data:null,error:Nt.error}):Tt.debug("DRM: key status = "+Nt.status)}function sr(Nt){Tt.debug("DRM: onKeyMessage");var en=Nt.data;Ht.trigger(rn.KEY_MESSAGE,{data:en});var cn=en.messageType?en.messageType:"license-request",Ln=en.message,Tn=en.sessionToken,Bn=Un(Lt),In=yt.getLicenseServerModelInstance(Lt,Bn,cn),er={sessionToken:Tn,messageType:cn};if(Ln&&Ln.byteLength!==0){if(!In)return Tt.debug("DRM: License server request not required for this message (type = "+Nt.data.messageType+").  Session ID = "+Tn.getSessionId()),void zn(er);if(yt.isClearKey(Lt)){var Zn=yt.processClearKeyLicenseRequest(Lt,Bn,Ln);if(Zn&&Zn.keyPairs&&Zn.keyPairs.length>0)return Tt.debug("DRM: ClearKey license request handled by application!"),zn(er),void zt.updateKeySession(Tn,Zn)}(function(Cn,Wn,Xn){var ur=Cn.sessionToken,ir=Cn.messageType?Cn.messageType:"license-request",lr={sessionToken:ur,messageType:ir},pr=Lt?Lt.systemString:null,qr=function(Rn,_r,Lr,Tr,ri){var ar=null,ii=Tr.message;if(Rn&&Rn.serverURL){var yr=Rn.serverURL;typeof yr=="string"&&yr!==""?ar=yr:O(yr)==="object"&&yr.hasOwnProperty(_r)&&(ar=yr[_r])}else if(Rn&&Rn.laURL&&Rn.laURL!=="")ar=Rn.laURL;else if(!(ar=t.getLicenseServerUrlFromMediaInfo(ct,Lt.schemeIdURI))&&!yt.isClearKey(Lt)){var ai=t.getPSSHData(Lr.initData);(ar=Lt.getLicenseServerURLFromInitData(ai))||(ar=Tr.laURL)}return ar=ri.getServerURLFromMessage(ar,ii,_r)}(Xn,ir,ur,Cn,Wn);if(qr){var Or={},Mr=!1;Xn&&Wr(Or,Xn.httpRequestHeaders);var Jr=Cn.message;Wr(Or,Lt.getRequestHeadersFromMessage(Jr)),Object.keys(Or).forEach(function(Rn){Rn.toLowerCase()==="authorization"&&(Mr=!0)}),Xn&&typeof Xn.withCredentials=="boolean"&&(Mr=Xn.withCredentials);var $r=function(Rn){if(zt)if(Rn.status>=200&&Rn.status<=299){var _r=q.Z.parseHttpHeaders(Rn.getAllResponseHeaders?Rn.getAllResponseHeaders():null),Lr=new I(Rn.responseURL,_r,Rn.response);Qr(nn.getLicenseResponseFilters(),Lr).then(function(){var Tr=Wn.getLicenseMessage(Lr.data,pr,ir);Tr!==null?(zn(lr),zt.updateKeySession(ur,Tr)):Xr(Rn,lr,pr,ir,Wn)})}else Xr(Rn,lr,pr,ir,Wn)},Ai=function(Rn){zn(lr,new c.Z(n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+pr+' update, XHR aborted. status is "'+Rn.statusText+'" ('+Rn.status+"), readyState is "+Rn.readyState))},Ii=function(Rn){zn(lr,new c.Z(n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+pr+' update, XHR error. status is "'+Rn.statusText+'" ('+Rn.status+"), readyState is "+Rn.readyState))},ei=Lt.getLicenseRequestFromMessage(Jr),ti=Wn.getHTTPMethod(ir),Ri=Wn.getResponseType(pr,ir),Yr=Xn&&!isNaN(Xn.httpTimeout)?Xn.httpTimeout:8e3,ni=ur.getSessionId()||null,Pr=new d(qr,ti,Ri,Or,Mr,ir,ni,ei),wi=isNaN(kt.get().streaming.retryAttempts[k.w.LICENSE])?3:kt.get().streaming.retryAttempts[k.w.LICENSE];Qr(nn.getLicenseRequestFilters(),Pr).then(function(){zr(Pr,wi,Yr,$r,Ai,Ii)})}else zn(lr,new c.Z(n.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,n.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(en,In,Bn)}else zn(er,new c.Z(n.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,n.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function zn(Nt,en){Ht.trigger(rn.LICENSE_REQUEST_COMPLETE,{data:Nt,error:en})}function zr(Nt,en,cn,Ln,Tn,Bn){var In=new XMLHttpRequest;if(kt.get().streaming.cmcd&&kt.get().streaming.cmcd.enabled&&kt.get().streaming.cmcd.mode===x.Z.CMCD_MODE_QUERY){var er=At.getQueryParameter({url:Nt.url,type:k.w.LICENSE});er&&(Nt.url=q.Z.addAditionalQueryParameterToUrl(Nt.url,[er]))}for(var Zn in In.open(Nt.method,Nt.url,!0),In.responseType=Nt.responseType,In.withCredentials=Nt.withCredentials,cn>0&&(In.timeout=cn),Nt.headers)In.setRequestHeader(Zn,Nt.headers[Zn]);if(kt.get().streaming.cmcd&&kt.get().streaming.cmcd.enabled&&kt.get().streaming.cmcd.mode===x.Z.CMCD_MODE_HEADER){var Cn=At.getHeaderParameters({url:Nt.url,type:k.w.LICENSE});if(Cn)for(var Wn in Cn){var Xn=Cn[Wn];Xn&&In.setRequestHeader(Wn,Xn)}}var ur=function(){en--;var ir=isNaN(kt.get().streaming.retryIntervals[k.w.LICENSE])?1e3:kt.get().streaming.retryIntervals[k.w.LICENSE];Ut=setTimeout(function(){zr(Nt,en,cn,Ln,Tn,Bn)},ir)};In.onload=function(){Xt=null,this.status>=200&&this.status<=299||en<=0?Ln(this):(Tt.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+en),ur())},In.ontimeout=In.onerror=function(){Xt=null,en<=0?Bn(this):(Tt.warn("License request network request failed . Retrying it... Pending retries: "+en),ur())},In.onabort=function(){Tn(this)},Ht.trigger(rn.LICENSE_REQUEST_SENDING,{url:Nt.url,headers:Nt.headers,payload:Nt.data,sessionId:Nt.sessionId}),Xt=In,In.send(Nt.data)}function Cr(){Xt&&(Xt.onloadend=Xt.onerror=Xt.onprogress=void 0,Xt.abort(),Xt=null),Ut&&(clearTimeout(Ut),Ut=null)}function Wr(Nt,en){if(en)for(var cn in en)Nt[cn]=en[cn]}function Xr(Nt,en,cn,Ln,Tn){var Bn="NONE",In=null;Nt.response&&(Bn=Tn.getErrorResponse(Nt.response,cn,Ln),In={serverResponse:Nt.response||null,responseCode:Nt.status||null,responseText:Nt.statusText||null}),zn(en,new c.Z(n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,n.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+cn+' update, XHR complete. status is "'+Nt.statusText+'" ('+Nt.status+"), readyState is "+Nt.readyState+".  Response is "+Bn,In))}function Qr(Nt,en){return Nt?Nt.reduce(function(cn,Ln){return cn.then(function(){return Ln(en)})},Promise.resolve()):Promise.resolve()}function Dr(Nt,en){if(!kt.get().streaming.protection.ignoreEmeEncryptedEvent){if(Tt.debug("DRM: onNeedKey"),Nt.key.initDataType!=="cenc")return void Tt.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+Nt.key.initDataType);if(ct.length===0&&(Tt.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(en=en===void 0?1:en+1)<5))return void pt.push(setTimeout(function(){Dr(Nt,en)},500));var cn=Nt.key.initData;if(ArrayBuffer.isView(cn)&&(cn=cn.buffer),Lt){var Ln=t.getPSSHForKeySystem(Lt,cn);if(Ln&&Pn(Ln))return}Tt.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(cn)));var Tn=yt.getSupportedKeySystemsFromSegmentPssh(cn,He,at);if(Tn.length===0)return void Tt.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Bn){Ue.push(Bn),pn(Bn,!1)})(Tn)}}return Et={initializeForMedia:function(Nt){if(!Nt)throw new Error("mediaInfo can not be null or undefined");on(),ct.push(Nt)},clearMediaInfoArray:function(){ct=[]},handleKeySystemFromManifest:function(){if(ct&&ct.length!==0){var Nt=[];ct.forEach(function(en){var cn=yt.getSupportedKeySystemsFromContentProtection(en.contentProtection,He,at);cn.length>0&&(Nt.length===0&&(Nt=cn),Ue.push(cn))}),Nt&&Nt.length>0&&pn(Nt,!0)}},createKeySession:Nn,loadKeySession:Yn,removeKeySession:function(Nt){on(),zt.removeKeySession(Nt)},closeKeySession:function(Nt){on(),zt.closeKeySession(Nt)},setServerCertificate:function(Nt){on(),zt.setServerCertificate(Nt)},setMediaElement:jn,setSessionType:function(Nt){at=Nt},setRobustnessLevel:function(Nt){Ot=Nt},setProtectionData:function(Nt){He=Nt,yt.setProtectionData(Nt)},getSupportedKeySystemsFromContentProtection:function(Nt){return on(),yt.getSupportedKeySystemsFromContentProtection(Nt,He,at)},getKeySystems:function(){return yt?yt.getKeySystems():[]},setKeySystems:function(Nt){yt&&yt.setKeySystems(Nt)},stop:function(){Cr(),zt&&zt.stop()},reset:function(){Ht.off(rn.INTERNAL_KEY_MESSAGE,sr,Et),Ht.off(rn.INTERNAL_KEY_STATUS_CHANGED,rr,Et),on(),Cr(),jn(null),Lt=null,Wt=!1,zt&&(zt.reset(),zt=null),pt.forEach(function(Nt){return clearTimeout(Nt)}),pt=[],ct=[],Ue=[]}},Tt=dn.getLogger(Et),Ue=[],ct=[],at="temporary",Ot="",Xt=null,Ut=null,Ht.on(rn.INTERNAL_KEY_MESSAGE,sr,Et),Ht.on(rn.INTERNAL_KEY_STATUS_CHANGED,rr,Et),Et}K.__dashjs_factory_name="ProtectionController";var re=$.Z.getClassFactory(K),H=function bt(Et,Tt){(function(Ue,ct){if(!(Ue instanceof ct))throw new TypeError("Cannot call a class as a function")})(this,bt),this.keyID=Et,this.key=Tt};function ee(bt,Et){for(var Tt=0;Tt<Et.length;Tt++){var Ue=Et[Tt];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(bt,Ue.key,Ue)}}var se=function(){function bt(Ue,ct){if(function(He,at){if(!(He instanceof at))throw new TypeError("Cannot call a class as a function")}(this,bt),ct&&ct!=="persistent"&&ct!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=Ue,this.type=ct}var Et,Tt;return Et=bt,(Tt=[{key:"toJWK",value:function(){var Ue,ct=this.keyPairs.length,He={keys:[]};for(Ue=0;Ue<ct;Ue++){var at={kty:"oct",alg:"A128KW",kid:this.keyPairs[Ue].keyID,k:this.keyPairs[Ue].key};He.keys.push(at)}this.type&&(He.type=this.type);var Ot=JSON.stringify(He),Lt=Ot.length,Wt=new ArrayBuffer(Lt),Xt=new Uint8Array(Wt);for(Ue=0;Ue<Lt;Ue++)Xt[Ue]=Ot.charCodeAt(Ue);return Wt}}])&&ee(Et.prototype,Tt),bt}();function Te(bt,Et){for(var Tt=0;Tt<Et.length;Tt++){var Ue=Et[Tt];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(bt,Ue.key,Ue)}}var X=new(function(){function bt(){(function(Ue,ct){if(!(Ue instanceof ct))throw new TypeError("Cannot call a class as a function")})(this,bt),this.init()}var Et,Tt;return Et=bt,(Tt=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Te(Et.prototype,Tt),bt}()),Ie="e2719d58-a985-b3c9-781a-b030af78d30e",Le=X.CLEARKEY_KEYSTEM_STRING,je="urn:uuid:"+Ie;function Ee(bt){var Et=(bt=bt||{}).BASE64;return{uuid:Ie,schemeIdURI:je,systemString:Le,getInitData:function(Tt,Ue){try{var ct=t.parseInitDataFromContentProtection(Tt,Et);if(!ct&&Ue){var He={kids:[function(at){try{var Ot=at.replace(/-/g,"");return(Ot=btoa(Ot.match(/\w{2}/g).map(function(Lt){return String.fromCharCode(parseInt(Lt,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}(Ue["cenc:default_KID"])]};ct=new TextEncoder().encode(JSON.stringify(He))}return ct}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(Tt){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Tt))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(Tt,Ue){var ct=null;if(Tt){for(var He=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Ue))),at=[],Ot=0;Ot<He.kids.length;Ot++){var Lt=He.kids[Ot],Wt=Tt.clearkeys&&Tt.clearkeys.hasOwnProperty(Lt)?Tt.clearkeys[Lt]:null;if(!Wt)throw new Error("DRM: ClearKey keyID ("+Lt+") is not known!");at.push(new H(Lt,Wt))}ct=new se(at)}return ct}}}Ee.__dashjs_factory_name="KeySystemClearKey";var Pe=dashjs.FactoryMaker.getSingletonFactory(Ee),Ve="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",et=X.CLEARKEY_KEYSTEM_STRING,_e="urn:uuid:"+Ve;function Oe(bt){var Et,Tt=bt.BASE64,Ue=bt.debug.getLogger(Et);return{uuid:Ve,schemeIdURI:_e,systemString:et,getInitData:function(ct){return t.parseInitDataFromContentProtection(ct,Tt)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(ct){return new Uint8Array(ct)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(ct,He){var at=null;if(ct){for(var Ot=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(He))),Lt=[],Wt=0;Wt<Ot.kids.length;Wt++){var Xt=Ot.kids[Wt],Ut=ct.clearkeys&&ct.clearkeys.hasOwnProperty(Xt)?ct.clearkeys[Xt]:null;if(!Ut)throw new Error("DRM: ClearKey keyID ("+Xt+") is not known!");Lt.push(new H(Xt,Ut))}at=new se(Lt),Ue.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return at}}}Oe.__dashjs_factory_name="KeySystemW3CClearKey";var _t=dashjs.FactoryMaker.getSingletonFactory(Oe),dt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Ze=X.WIDEVINE_KEYSTEM_STRING,Je="urn:uuid:"+dt;function de(bt){var Et=(bt=bt||{}).BASE64;return{uuid:dt,schemeIdURI:Je,systemString:Ze,getInitData:function(Tt){return t.parseInitDataFromContentProtection(Tt,Et)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(Tt){return new Uint8Array(Tt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}de.__dashjs_factory_name="KeySystemWidevine";var ge=dashjs.FactoryMaker.getSingletonFactory(de),Be="9a04f079-9840-4286-ab92-e65be0885f95",f=X.PLAYREADY_KEYSTEM_STRING,o="urn:uuid:"+Be;function v(bt){var Et="utf-16",Tt=(bt=bt||{}).BASE64,Ue=bt.settings;function ct(){if(!Tt||!Tt.hasOwnProperty("decodeArray")||!Tt.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:Be,schemeIdURI:o,systemString:f,getInitData:function(He){var at,Ot,Lt,Wt,Xt,Ut=new Uint8Array([112,115,115,104,0,0,0,0]),yt=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),zt=0,Ht=null;if(ct(),!He)return null;if("pssh"in He)return t.parseInitDataFromContentProtection(He,Tt);if("pro"in He)Ht=Tt.decodeArray(He.pro.__text);else{if(!("prheader"in He))return null;Ht=Tt.decodeArray(He.prheader.__text)}return at=Ht.length,Ot=4+Ut.length+yt.length+4+at,Lt=new ArrayBuffer(Ot),Wt=new Uint8Array(Lt),(Xt=new DataView(Lt)).setUint32(zt,Ot),zt+=4,Wt.set(Ut,zt),zt+=Ut.length,Wt.set(yt,zt),zt+=yt.length,Xt.setUint32(zt,at),zt+=4,Wt.set(Ht,zt),zt+=at,Wt.buffer},getRequestHeadersFromMessage:function(He){var at,Ot,Lt={},Wt=new DOMParser;if(Ue&&Ue.get().streaming.protection.detectPlayreadyMessageFormat&&Et==="utf-16"&&He&&He.byteLength%2==1)return Lt["Content-Type"]="text/xml; charset=utf-8",Lt;var Xt=Et==="utf-16"?new Uint16Array(He):new Uint8Array(He);at=String.fromCharCode.apply(null,Xt);for(var Ut=(Ot=Wt.parseFromString(at,"application/xml")).getElementsByTagName("name"),yt=Ot.getElementsByTagName("value"),zt=0;zt<Ut.length;zt++)Lt[Ut[zt].childNodes[0].nodeValue]=yt[zt].childNodes[0].nodeValue;return Lt.hasOwnProperty("Content")&&(Lt["Content-Type"]=Lt.Content,delete Lt.Content),Lt.hasOwnProperty("Content-Type")||(Lt["Content-Type"]="text/xml; charset=utf-8"),Lt},getLicenseRequestFromMessage:function(He){var at=null,Ot=new DOMParser;if(Ue&&Ue.get().streaming.protection.detectPlayreadyMessageFormat&&Et==="utf-16"&&He&&He.byteLength%2==1)return He;var Lt=Et==="utf-16"?new Uint16Array(He):new Uint8Array(He);ct();var Wt=String.fromCharCode.apply(null,Lt),Xt=Ot.parseFromString(Wt,"application/xml");if(!Xt.getElementsByTagName("PlayReadyKeyMessage")[0])return He;var Ut=Xt.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Ut&&(at=Tt.decode(Ut)),at},getLicenseServerURLFromInitData:function(He){if(He)for(var at=new DataView(He),Ot=at.getUint16(4,!0),Lt=6,Wt=new DOMParser,Xt=0;Xt<Ot;Xt++){var Ut=at.getUint16(Lt,!0);Lt+=2;var yt=at.getUint16(Lt,!0);if(Lt+=2,Ut===1){var zt=He.slice(Lt,Lt+yt),Ht=String.fromCharCode.apply(null,new Uint16Array(zt)),rn=Wt.parseFromString(Ht,"application/xml");if(rn.getElementsByTagName("LA_URL")[0]){var dn=rn.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(dn)return dn}if(rn.getElementsByTagName("LUI_URL")[0]){var vn=rn.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(vn)return vn}}else Lt+=yt}return null},getCDMData:function(He){var at,Ot,Lt,Wt;if(ct(),!He)return null;for(at=[],Wt=0;Wt<He.length;++Wt)at.push(He.charCodeAt(Wt)),at.push(0);for(at=String.fromCharCode.apply(null,at),at=Tt.encode(at),Ot='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",at),Lt=[],Wt=0;Wt<Ot.length;++Wt)Lt.push(Ot.charCodeAt(Wt)),Lt.push(0);return new Uint8Array(Lt).buffer},setPlayReadyMessageFormat:function(He){if(He!=="utf-8"&&He!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');Et=He}}}v.__dashjs_factory_name="KeySystemPlayReady";var S=dashjs.FactoryMaker.getSingletonFactory(v);function W(bt){var Et=(bt=bt||{}).BASE64,Tt={};return Tt[X.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(Ue){return Et.decodeArray(Ue.license)},getErrorResponse:function(Ue){return Ue}},Tt[X.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(Ue){return Ue},getErrorResponse:function(Ue){return String.fromCharCode.apply(null,new Uint8Array(Ue))}},{getServerURLFromMessage:function(Ue){return Ue},getHTTPMethod:function(){return"POST"},getResponseType:function(Ue){return Tt[Ue].responseType},getLicenseMessage:function(Ue,ct){return function(){if(!Et||!Et.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),Tt[ct].getLicenseMessage(Ue)},getErrorResponse:function(Ue,ct){return Tt[ct].getErrorResponse(Ue)}}}W.__dashjs_factory_name="DRMToday";var V=dashjs.FactoryMaker.getSingletonFactory(W);function be(){var bt="http://schemas.xmlsoap.org/soap/envelope/";function Et(ct){var He=String.fromCharCode.apply(null,new Uint8Array(ct));return decodeURIComponent(escape(He))}function Tt(ct){if(window.DOMParser){var He=Et(ct),at=new window.DOMParser().parseFromString(He,"text/xml"),Ot=at?at.getElementsByTagNameNS(bt,"Envelope")[0]:null,Lt=Ot?Ot.getElementsByTagNameNS(bt,"Body")[0]:null;if(Lt&&Lt.getElementsByTagNameNS(bt,"Fault")[0])return null}return ct}function Ue(ct){var He="",at="",Ot="",Lt=-1,Wt=-1;if(window.DOMParser){var Xt=Et(ct),Ut=new window.DOMParser().parseFromString(Xt,"text/xml"),yt=Ut?Ut.getElementsByTagNameNS(bt,"Envelope")[0]:null,zt=yt?yt.getElementsByTagNameNS(bt,"Body")[0]:null,Ht=zt?zt.getElementsByTagNameNS(bt,"Fault")[0]:null,rn=Ht?Ht.getElementsByTagName("detail")[0]:null,dn=rn?rn.getElementsByTagName("Exception")[0]:null,vn=null;if(Ht===null)return Xt;He=(vn=Ht.getElementsByTagName("faultstring")[0].firstChild)?vn.nodeValue:null,dn!==null&&(at=(vn=dn.getElementsByTagName("StatusCode")[0])?vn.firstChild.nodeValue:null,Lt=(Ot=(vn=dn.getElementsByTagName("Message")[0])?vn.firstChild.nodeValue:null)?Ot.lastIndexOf("[")+1:-1,Wt=Ot?Ot.indexOf("]"):-1,Ot=Ot?Ot.substring(Lt,Wt):"")}var $t="code: ".concat(at,", name: ").concat(He);return Ot&&($t+=", message: ".concat(Ot)),$t}return{getServerURLFromMessage:function(ct){return ct},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(ct){return Tt.call(this,ct)},getErrorResponse:function(ct){return Ue.call(this,ct)}}}be.__dashjs_factory_name="PlayReady";var ze=$.Z.getSingletonFactory(be);function Me(){return{getServerURLFromMessage:function(bt){return bt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(bt){return bt},getErrorResponse:function(bt){return String.fromCharCode.apply(null,new Uint8Array(bt))}}}Me.__dashjs_factory_name="Widevine";var De=dashjs.FactoryMaker.getSingletonFactory(Me);function Ae(){return{getServerURLFromMessage:function(bt){return bt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(bt){if(!bt.hasOwnProperty("keys"))return null;for(var Et=[],Tt=0;Tt<bt.keys.length;Tt++){var Ue=bt.keys[Tt],ct=Ue.kid.replace(/=/g,""),He=Ue.k.replace(/=/g,"");Et.push(new H(ct,He))}return new se(Et)},getErrorResponse:function(bt){return String.fromCharCode.apply(null,new Uint8Array(bt))}}}Ae.__dashjs_factory_name="ClearKey";var xe=dashjs.FactoryMaker.getSingletonFactory(Ae);function Xe(){var bt,Et,Tt,Ue,ct,He,at,Ot,Lt=this.context;function Wt(yt,zt){return zt&&yt in zt?zt[yt]:null}function Xt(yt,zt){return yt&&yt.sessionId?yt.sessionId:zt&&zt.sessionId?zt.sessionId:null}function Ut(yt,zt){return yt&&yt.sessionType?yt.sessionType:zt}return bt={initialize:function(){var yt;Ue=[],yt=S(Lt).getInstance({BASE64:ct,settings:He}),Ue.push(yt),yt=ge(Lt).getInstance({BASE64:ct}),Ue.push(yt),yt=Pe(Lt).getInstance({BASE64:ct}),Ue.push(yt),at=yt,yt=_t(Lt).getInstance({BASE64:ct,debug:Et}),Ue.push(yt),Ot=yt},setProtectionData:function(yt){for(var zt,Ht,rn=0;rn<Ue.length;rn++){var dn=Ue[rn];dn.hasOwnProperty("init")&&dn.init((zt=dn.systemString,Ht=void 0,Ht=null,yt&&(Ht=zt in yt?yt[zt]:null),Ht))}},isClearKey:function(yt){return yt===at||yt===Ot},initDataEquals:function(yt,zt){if(yt.byteLength===zt.byteLength){for(var Ht=new Uint8Array(yt),rn=new Uint8Array(zt),dn=0;dn<Ht.length;dn++)if(Ht[dn]!==rn[dn])return!1;return!0}return!1},getKeySystems:function(){return Ue},setKeySystems:function(yt){Ue=yt},getKeySystemBySystemString:function(yt){for(var zt=0;zt<Ue.length;zt++)if(Ue[zt].systemString===yt)return Ue[zt];return null},getSupportedKeySystemsFromContentProtection:function(yt,zt,Ht){var rn,dn,vn,$t,pt=[];if(yt){var At=t.findCencContentProtection(yt);for(vn=0;vn<Ue.length;++vn){var kt=Wt((dn=Ue[vn]).systemString,zt);for($t=0;$t<yt.length;++$t)if((rn=yt[$t]).schemeIdUri.toLowerCase()===dn.schemeIdURI){var nn=dn.getInitData(rn,At);pt.push({ks:Ue[vn],keyId:rn.keyId,initData:nn,protData:kt,cdmData:dn.getCDMData(kt?kt.cdmData:null),sessionId:Xt(kt,rn),sessionType:Ut(kt,Ht)})}}}return pt},getSupportedKeySystemsFromSegmentPssh:function(yt,zt,Ht){for(var rn,dn=[],vn=t.parsePSSHList(yt),$t=0;$t<Ue.length;++$t){var pt=Wt((rn=Ue[$t]).systemString,zt);rn.uuid in vn&&dn.push({ks:rn,initData:vn[rn.uuid],protData:pt,cdmData:rn.getCDMData(pt?pt.cdmData:null),sessionId:Xt(pt),sessionType:Ut(pt,Ht)})}return dn},getLicenseServerModelInstance:function(yt,zt,Ht){if(Ht==="license-release"||Ht==="individualization-request")return null;var rn=null;return zt&&zt.hasOwnProperty("drmtoday")?rn=V(Lt).getInstance({BASE64:ct}):yt.systemString===X.WIDEVINE_KEYSTEM_STRING?rn=De(Lt).getInstance():yt.systemString===X.PLAYREADY_KEYSTEM_STRING?rn=ze(Lt).getInstance():yt.systemString===X.CLEARKEY_KEYSTEM_STRING&&(rn=xe(Lt).getInstance()),rn},processClearKeyLicenseRequest:function(yt,zt,Ht){try{return yt.getClearKeysFromProtectionData(zt,Ht)}catch{return Tt.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(yt){yt&&(yt.debug&&(Et=yt.debug,Tt=Et.getLogger(bt)),yt.BASE64&&(ct=yt.BASE64),yt.settings&&(He=yt.settings))}},bt}Xe.__dashjs_factory_name="ProtectionKeyController";var mt=dashjs.FactoryMaker.getSingletonFactory(Xe);function rt(bt){return rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Et){return typeof Et}:function(Et){return Et&&typeof Symbol=="function"&&Et.constructor===Symbol&&Et!==Symbol.prototype?"symbol":typeof Et},rt(bt)}function Zt(bt,Et){return Zt=Object.setPrototypeOf||function(Tt,Ue){return Tt.__proto__=Ue,Tt},Zt(bt,Et)}function It(bt,Et){return!Et||rt(Et)!=="object"&&typeof Et!="function"?function(Tt){if(Tt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Tt}(bt):Et}function Ft(bt){return Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(Et){return Et.__proto__||Object.getPrototypeOf(Et)},Ft(bt)}var Pt=new(function(bt){(function(He,at){if(typeof at!="function"&&at!==null)throw new TypeError("Super expression must either be null or a function");He.prototype=Object.create(at&&at.prototype,{constructor:{value:He,writable:!0,configurable:!0}}),at&&Zt(He,at)})(ct,bt);var Et,Tt,Ue=(Et=ct,Tt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var He,at=Ft(Et);if(Tt){var Ot=Ft(this).constructor;He=Reflect.construct(at,arguments,Ot)}else He=at.apply(this,arguments);return It(this,He)});function ct(){var He;return function(at,Ot){if(!(at instanceof Ot))throw new TypeError("Cannot call a class as a function")}(this,ct),(He=Ue.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",He.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",He.KEY_ADDED="public_keyAdded",He.KEY_ERROR="public_keyError",He.KEY_MESSAGE="public_keyMessage",He.KEY_SESSION_CLOSED="public_keySessionClosed",He.KEY_SESSION_CREATED="public_keySessionCreated",He.KEY_SESSION_REMOVED="public_keySessionRemoved",He.KEY_STATUSES_CHANGED="public_keyStatusesChanged",He.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",He.KEY_SYSTEM_SELECTED="public_keySystemSelected",He.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",He.LICENSE_REQUEST_SENDING="public_licenseRequestSending",He.NEED_KEY="needkey",He.PROTECTION_CREATED="public_protectioncreated",He.PROTECTION_DESTROYED="public_protectiondestroyed",He.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",He.TEARDOWN_COMPLETE="protectionTeardownComplete",He.VIDEO_ELEMENT_SELECTED="videoElementSelected",He.KEY_SESSION_UPDATED="public_keySessionUpdated",He}return ct}(M(8342).Z)),tn=function bt(Et,Tt){(function(Ue,ct){if(!(Ue instanceof ct))throw new TypeError("Cannot call a class as a function")})(this,bt),this.initData=Et,this.initDataType=Tt},fn=function bt(Et,Tt,Ue,ct){(function(He,at){if(!(He instanceof at))throw new TypeError("Cannot call a class as a function")})(this,bt),this.sessionToken=Et,this.message=Tt,this.defaultURL=Ue,this.messageType=ct||"license-request"},Sn=function bt(Et,Tt){(function(Ue,ct){if(!(Ue instanceof ct))throw new TypeError("Cannot call a class as a function")})(this,bt),this.keySystem=Et,this.ksConfiguration=Tt},_n={};function An(bt){bt=bt||{};var Et,Tt,Ue,ct,He,at,Ot,Lt,Wt=this.context,Xt=bt.eventBus,Ut=bt.events,yt=bt.debug;function zt(pt,At,kt,nn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var on="Insecure origins are not allowed";return Xt.trigger(Ut.KEY_SYSTEM_ACCESS_COMPLETE,{error:on}),void nn({error:on})}var pn=pt[At].protData&&pt[At].protData.systemStringPriority?pt[At].protData.systemStringPriority:null,En=pt[At].configs,qn=pt[At].ks,Yn=qn.systemString;(function(Nn,Un){return new Promise(function(Pn,jn){Ht(Nn,Un,0,Pn,jn)})})(pn||(_n[Yn]?_n[Yn]:[Yn]),En).then(function(Nn){var Un=typeof Nn.getConfiguration=="function"?Nn.getConfiguration():null,Pn=new Sn(qn,Un);Pn.mksa=Nn,Xt.trigger(Ut.KEY_SYSTEM_ACCESS_COMPLETE,{data:Pn}),kt({data:Pn})}).catch(function(Nn){if(At+1<pt.length)zt(pt,At+1,kt,nn);else{var Un="Key system access denied! ";Xt.trigger(Ut.KEY_SYSTEM_ACCESS_COMPLETE,{error:Un+Nn.message}),nn({error:Un+Nn.message})}})}function Ht(pt,At,kt,nn,on){var pn=pt[kt];Tt.debug("Requesting key system access for system string ".concat(pn)),navigator.requestMediaKeySystemAccess(pn,At).then(function(En){En.selectedSystemString=pn,nn(En)}).catch(function(En){kt+1<pt.length?Ht(pt,At,kt+1,nn,on):on(En)})}function rn(pt){if(!pt||!pt.session)return Promise.resolve;var At=pt.session;return At.removeEventListener("keystatuseschange",pt),At.removeEventListener("message",pt),At.close()}function dn(pt){for(var At=0;At<at.length;At++)if(at[At]===pt){at.splice(At,1);break}}function vn(pt){var At,kt;return pt&&pt.length>0&&(pt[0]&&(typeof pt[0]=="string"?At=pt[0]:kt=pt[0]),pt[1]&&(typeof pt[1]=="string"?At=pt[1]:kt=pt[1])),{status:At,keyId:kt}}function $t(pt,At){var kt={session:pt,keyId:At.keyId,initData:At.initData,sessionId:At.sessionId,sessionType:At.sessionType,handleEvent:function(nn){switch(nn.type){case"keystatuseschange":Xt.trigger(Ut.KEY_STATUSES_CHANGED,{data:this}),nn.target.keyStatuses.forEach(function(){var pn=vn(arguments);pn.status==="expired"?Xt.trigger(Ut.INTERNAL_KEY_STATUS_CHANGED,{error:new c.Z(n.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,n.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):Xt.trigger(Ut.INTERNAL_KEY_STATUS_CHANGED,pn)});break;case"message":var on=ArrayBuffer.isView(nn.message)?nn.message.buffer:nn.message;Xt.trigger(Ut.INTERNAL_KEY_MESSAGE,{data:new fn(this,on,void 0,nn.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return pt.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return pt.expiration},getKeyStatuses:function(){return pt.keyStatuses},getUsable:function(){var nn=!1;return pt.keyStatuses.forEach(function(){var on=vn(arguments);on.status==="usable"&&(nn=!0)}),nn}};return pt.addEventListener("keystatuseschange",kt),pt.addEventListener("message",kt),pt.closed.then(function(){dn(kt),Tt.debug("DRM: Session closed.  SessionID = "+kt.getSessionId()),Xt.trigger(Ut.KEY_SESSION_CLOSED,{data:kt.getSessionId()})}),at.push(kt),kt}return Et={getAllInitData:function(){for(var pt=[],At=0;At<at.length;At++)at[At].initData&&pt.push(at[At].initData);return pt},getSessions:function(){return at},requestKeySystemAccess:function(pt){return new Promise(function(At,kt){zt(pt,0,At,kt)})},selectKeySystem:function(pt){return new Promise(function(At,kt){pt.mksa.createMediaKeys().then(function(nn){return Ue=pt.keySystem,He=nn,ct?ct.setMediaKeys(He):Promise.resolve()}).then(function(){At(Ue)}).catch(function(){kt({error:"Error selecting keys system ("+pt.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(pt){ct!==pt&&(ct&&(ct.removeEventListener("encrypted",Ot),ct.setMediaKeys&&ct.setMediaKeys(null)),(ct=pt)&&(ct.addEventListener("encrypted",Ot),ct.setMediaKeys&&He&&ct.setMediaKeys(He)))},setServerCertificate:function(pt){if(!Ue||!He)throw new Error("Can not set server certificate until you have selected a key system");He.setServerCertificate(pt).then(function(){Tt.info("DRM: License server certificate successfully updated."),Xt.trigger(Ut.SERVER_CERTIFICATE_UPDATED)}).catch(function(At){Xt.trigger(Ut.SERVER_CERTIFICATE_UPDATED,{error:new c.Z(n.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,n.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+At.name)})})},createKeySession:function(pt){if(!Ue||!He)throw new Error("Can not create sessions until you have selected a key system");var At=He.createSession(pt.sessionType),kt=$t(At,pt),nn=Ue.systemString===X.CLEARKEY_KEYSTEM_STRING&&(pt.initData||pt.protData&&pt.protData.clearkeys)?X.INITIALIZATION_DATA_TYPE_KEYIDS:X.INITIALIZATION_DATA_TYPE_CENC;At.generateRequest(nn,pt.initData).then(function(){Tt.debug("DRM: Session created.  SessionID = "+kt.getSessionId()),Xt.trigger(Ut.KEY_SESSION_CREATED,{data:kt})}).catch(function(on){dn(kt),Xt.trigger(Ut.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+on.name)})})},updateKeySession:function(pt,At){var kt=pt.session;Lt.isClearKey(Ue)&&(At=At.toJWK()),kt.update(At).then(function(){Xt.trigger(Ut.KEY_SESSION_UPDATED)}).catch(function(nn){Xt.trigger(Ut.KEY_ERROR,{error:new c.Z(n.MEDIA_KEYERR_CODE,"Error sending update() message! "+nn.name,pt)})})},loadKeySession:function(pt){if(!Ue||!He)throw new Error("Can not load sessions until you have selected a key system");for(var At=pt.sessionId,kt=0;kt<at.length;kt++)if(At===at[kt].sessionId)return void Tt.warn("DRM: Ignoring session ID because we have already seen it!");var nn=He.createSession(pt.sessionType),on=$t(nn,pt);nn.load(At).then(function(pn){pn?(Tt.debug("DRM: Session loaded.  SessionID = "+on.getSessionId()),Xt.trigger(Ut.KEY_SESSION_CREATED,{data:on})):(dn(on),Xt.trigger(Ut.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+At+")")}))}).catch(function(pn){dn(on),Xt.trigger(Ut.KEY_SESSION_CREATED,{data:null,error:new c.Z(n.KEY_SESSION_CREATED_ERROR_CODE,n.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+At+")! "+pn.name)})})},removeKeySession:function(pt){pt.session.remove().then(function(){Tt.debug("DRM: Session removed.  SessionID = "+pt.getSessionId()),Xt.trigger(Ut.KEY_SESSION_REMOVED,{data:pt.getSessionId()})},function(At){Xt.trigger(Ut.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+pt.getSessionId()+"). "+At.name})})},closeKeySession:function(pt){rn(pt).catch(function(At){dn(pt),Xt.trigger(Ut.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+pt.getSessionId()+") "+At.name})})},stop:function(){for(var pt,At=0;At<at.length;At++)(pt=at[At]).getUsable()||(rn(pt),dn(pt))},reset:function(){var pt,At=at.length;At!==0?function(){for(var kt=function(on){dn(on),at.length===0&&(ct?(ct.removeEventListener("encrypted",Ot),ct.setMediaKeys(null).then(function(){Xt.trigger(Ut.TEARDOWN_COMPLETE)})):Xt.trigger(Ut.TEARDOWN_COMPLETE))},nn=0;nn<At;nn++)(function(on){rn(pt),kt(on)})(pt=at[nn])}():Xt.trigger(Ut.TEARDOWN_COMPLETE)}},Tt=yt.getLogger(Et),Ue=null,ct=null,He=null,at=[],Lt=mt(Wt).getInstance(),Ot={handleEvent:function(pt){if(pt.type==="encrypted"&&pt.initData){var At=ArrayBuffer.isView(pt.initData)?pt.initData.buffer:pt.initData;Xt.trigger(Ut.NEED_KEY,{key:new tn(At,pt.initDataType)})}}},Et}_n[X.PLAYREADY_KEYSTEM_STRING]=[X.PLAYREADY_KEYSTEM_STRING,X.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],_n[X.WIDEVINE_KEYSTEM_STRING]=[X.WIDEVINE_KEYSTEM_STRING],_n[X.CLEARKEY_KEYSTEM_STRING]=[X.CLEARKEY_KEYSTEM_STRING],An.__dashjs_factory_name="ProtectionModel_21Jan2015";var Gn=dashjs.FactoryMaker.getClassFactory(An);function yn(bt){bt=bt||{};var Et,Tt,Ue,ct,He,at,Ot,Lt,Wt,Xt=this.context,Ut=bt.eventBus,yt=bt.events,zt=bt.debug,Ht=bt.api;function rn(){try{for(var $t=0;$t<Ot.length;$t++)dn(Ot[$t]);Ue&&Ue.removeEventListener(Ht.needkey,Lt),Ut.trigger(yt.TEARDOWN_COMPLETE)}catch(pt){Ut.trigger(yt.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+pt.message})}}function dn($t){var pt=$t.session;pt.removeEventListener(Ht.error,$t),pt.removeEventListener(Ht.message,$t),pt.removeEventListener(Ht.ready,$t),pt.removeEventListener(Ht.close,$t);for(var At=0;At<Ot.length;At++)if(Ot[At]===$t){Ot.splice(At,1);break}pt[Ht.release]()}function vn(){var $t=null,pt=function(){Ue.removeEventListener("loadedmetadata",$t),Ue[Ht.setMediaKeys](He),Ut.trigger(yt.VIDEO_ELEMENT_SELECTED)};Ue.readyState>=1?pt():($t=pt.bind(this),Ue.addEventListener("loadedmetadata",$t))}return Et={getAllInitData:function(){for(var $t=[],pt=0;pt<Ot.length;pt++)$t.push(Ot[pt].initData);return $t},getSessions:function(){return Ot},requestKeySystemAccess:function($t){return new Promise(function(pt,At){for(var kt=!1,nn=0;nn<$t.length;nn++)for(var on=$t[nn].ks.systemString,pn=$t[nn].configs,En=null,qn=null,Yn=0;Yn<pn.length;Yn++){var Nn=pn[Yn].audioCapabilities,Un=pn[Yn].videoCapabilities;if(Nn&&Nn.length!==0){En=[];for(var Pn=0;Pn<Nn.length;Pn++)window[Ht.MediaKeys].isTypeSupported(on,Nn[Pn].contentType)&&En.push(Nn[Pn])}if(Un&&Un.length!==0){qn=[];for(var jn=0;jn<Un.length;jn++)window[Ht.MediaKeys].isTypeSupported(on,Un[jn].contentType)&&qn.push(Un[jn])}if(!(!En&&!qn||En&&En.length===0||qn&&qn.length===0)){kt=!0;var mr=new y(En,qn),rr=Wt.getKeySystemBySystemString(on),sr=new Sn(rr,mr);Ut.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{data:sr}),pt({data:sr});break}}if(!kt){var zn="Key system access denied! -- No valid audio/video content configurations detected!";Ut.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{error:zn}),At({error:zn})}})},selectKeySystem:function($t){return new Promise(function(pt,At){try{He=$t.mediaKeys=new window[Ht.MediaKeys]($t.keySystem.systemString),ct=$t.keySystem,at=$t,Ue&&vn(),pt(ct)}catch{At({error:"Error selecting keys system ("+ct.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function($t){Ue!==$t&&(Ue&&Ue.removeEventListener(Ht.needkey,Lt),(Ue=$t)&&(Ue.addEventListener(Ht.needkey,Lt),He&&vn()))},createKeySession:function($t){if(!ct||!He||!at)throw new Error("Can not create sessions until you have selected a key system");var pt=null;if(at.ksConfiguration.videoCapabilities&&at.ksConfiguration.videoCapabilities.length>0&&(pt=at.ksConfiguration.videoCapabilities[0]),pt===null&&at.ksConfiguration.audioCapabilities&&at.ksConfiguration.audioCapabilities.length>0&&(pt=at.ksConfiguration.audioCapabilities[0]),pt===null)throw new Error("Can not create sessions for unknown content types.");var At=pt.contentType,kt=He.createSession(At,new Uint8Array($t.initData),$t.cdmData?new Uint8Array($t.cdmData):null),nn=function(on,pn){return{session:on,keyId:pn.keyId,initData:pn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(En){switch(En.type){case Ht.error:Ut.trigger(yt.KEY_ERROR,{error:new c.Z(n.MEDIA_KEYERR_CODE,"KeyError",this)});break;case Ht.message:var qn=ArrayBuffer.isView(En.message)?En.message.buffer:En.message;Ut.trigger(yt.INTERNAL_KEY_MESSAGE,{data:new fn(this,qn,En.destinationURL)});break;case Ht.ready:Tt.debug("DRM: Key added."),Ut.trigger(yt.KEY_ADDED);break;case Ht.close:Tt.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Ut.trigger(yt.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(kt,$t);kt.addEventListener(Ht.error,nn),kt.addEventListener(Ht.message,nn),kt.addEventListener(Ht.ready,nn),kt.addEventListener(Ht.close,nn),Ot.push(nn),Tt.debug("DRM: Session created.  SessionID = "+nn.getSessionId()),Ut.trigger(yt.KEY_SESSION_CREATED,{data:nn})},updateKeySession:function($t,pt){var At=$t.session;Wt.isClearKey(ct)?At.update(new Uint8Array(pt.toJWK())):At.update(new Uint8Array(pt)),Ut.trigger(yt.KEY_SESSION_UPDATED)},closeKeySession:dn,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:rn,reset:rn},Tt=zt.getLogger(Et),Ue=null,ct=null,He=null,at=null,Ot=[],Wt=mt(Xt).getInstance(),Lt={handleEvent:function($t){if($t.type===Ht.needkey&&$t.initData){var pt=ArrayBuffer.isView($t.initData)?$t.initData.buffer:$t.initData;Ut.trigger(yt.NEED_KEY,{key:new tn(pt,"cenc")})}}},Et}yn.__dashjs_factory_name="ProtectionModel_3Feb2014";var Qn=dashjs.FactoryMaker.getClassFactory(yn);function kn(bt){bt=bt||{};var Et,Tt,Ue,ct,He,at,Ot,Lt,Wt,Xt=this.context,Ut=bt.eventBus,yt=bt.events,zt=bt.debug,Ht=bt.api,rn=bt.errHandler;function dn(){Ue&&pt();for(var At=0;At<Ot.length;At++)vn(Ot[At]);Ut.trigger(yt.TEARDOWN_COMPLETE)}function vn(At){try{Ue[Ht.cancelKeyRequest](ct.systemString,At.sessionId)}catch(kt){Ut.trigger(yt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+At.sessionId+") "+kt.message})}}function $t(At,kt){if(kt&&At){for(var nn=At.length,on=0;on<nn;on++)if(At[on].sessionId==kt)return At[on];return null}return null}function pt(){Ue.removeEventListener(Ht.keyerror,Wt),Ue.removeEventListener(Ht.needkey,Wt),Ue.removeEventListener(Ht.keymessage,Wt),Ue.removeEventListener(Ht.keyadded,Wt)}return Et={getAllInitData:function(){for(var At=[],kt=0;kt<at.length;kt++)At.push(at[kt].initData);for(var nn=0;nn<Ot.length;nn++)At.push(Ot[nn].initData);return At},getSessions:function(){return Ot.concat(at)},requestKeySystemAccess:function(At){return new Promise(function(kt,nn){var on=Ue;on||(on=document.createElement("video"));for(var pn=!1,En=0;En<At.length;En++)for(var qn=At[En].ks.systemString,Yn=At[En].configs,Nn=null,Un=0;Un<Yn.length;Un++){var Pn=Yn[Un].videoCapabilities;if(Pn&&Pn.length!==0){Nn=[];for(var jn=0;jn<Pn.length;jn++)on.canPlayType(Pn[jn].contentType,qn)!==""&&Nn.push(Pn[jn])}if(Nn&&(!Nn||Nn.length!==0)){pn=!0;var mr=new y(null,Nn),rr=He.getKeySystemBySystemString(qn),sr=new Sn(rr,mr);Ut.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{data:sr}),kt({data:sr});break}}if(!pn){var zn="Key system access denied! -- No valid audio/video content configurations detected!";Ut.trigger(yt.KEY_SYSTEM_ACCESS_COMPLETE,{error:zn}),nn({error:zn})}})},selectKeySystem:function(At){return ct=At.keySystem,Promise.resolve(ct)},setMediaElement:function(At){if(Ue!==At){if(Ue){pt();for(var kt=0;kt<Ot.length;kt++)vn(Ot[kt]);Ot=[]}(Ue=At)&&(Ue.addEventListener(Ht.keyerror,Wt),Ue.addEventListener(Ht.needkey,Wt),Ue.addEventListener(Ht.keymessage,Wt),Ue.addEventListener(Ht.keyadded,Wt),Ut.trigger(yt.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(At){if(!ct)throw new Error("Can not create sessions until you have selected a key system");if(Lt||Ot.length===0){var kt={sessionId:null,keyId:At.keyId,initData:At.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return at.push(kt),Ue[Ht.generateKeyRequest](ct.systemString,new Uint8Array(At.initData)),kt}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(At,kt){var nn=At.sessionId;if(He.isClearKey(ct))for(var on=0;on<kt.keyPairs.length;on++)Ue[Ht.addKey](ct.systemString,kt.keyPairs[on].key,kt.keyPairs[on].keyID,nn);else Ue[Ht.addKey](ct.systemString,new Uint8Array(kt),new Uint8Array(At.initData),nn);Ut.trigger(yt.KEY_SESSION_UPDATED)},closeKeySession:vn,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:dn,reset:dn},Tt=zt.getLogger(Et),Ue=null,ct=null,at=[],Ot=[],He=mt(Xt).getInstance(),Wt={handleEvent:function(At){var kt=null;switch(At.type){case Ht.needkey:var nn=ArrayBuffer.isView(At.initData)?At.initData.buffer:At.initData;Ut.trigger(yt.NEED_KEY,{key:new tn(nn,"cenc")});break;case Ht.keyerror:if((kt=$t(Ot,At.sessionId))||(kt=$t(at,At.sessionId)),kt){var on=n.MEDIA_KEYERR_CODE,pn="";switch(At.errorCode.code){case 1:on=n.MEDIA_KEYERR_UNKNOWN_CODE,pn+="MEDIA_KEYERR_UNKNOWN - "+n.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:on=n.MEDIA_KEYERR_CLIENT_CODE,pn+="MEDIA_KEYERR_CLIENT - "+n.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:on=n.MEDIA_KEYERR_SERVICE_CODE,pn+="MEDIA_KEYERR_SERVICE - "+n.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:on=n.MEDIA_KEYERR_OUTPUT_CODE,pn+="MEDIA_KEYERR_OUTPUT - "+n.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:on=n.MEDIA_KEYERR_HARDWARECHANGE_CODE,pn+="MEDIA_KEYERR_HARDWARECHANGE - "+n.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:on=n.MEDIA_KEYERR_DOMAIN_CODE,pn+="MEDIA_KEYERR_DOMAIN - "+n.MEDIA_KEYERR_DOMAIN_MESSAGE}pn+="  System Code = "+At.systemCode,Ut.trigger(yt.KEY_ERROR,{error:new c.Z(on,pn,kt)})}else Tt.error("No session token found for key error");break;case Ht.keyadded:(kt=$t(Ot,At.sessionId))||(kt=$t(at,At.sessionId)),kt?(Tt.debug("DRM: Key added."),Ut.trigger(yt.KEY_ADDED,{data:kt})):Tt.debug("No session token found for key added");break;case Ht.keymessage:if((Lt=At.sessionId!==null&&At.sessionId!==void 0)?!(kt=$t(Ot,At.sessionId))&&at.length>0&&(kt=at.shift(),Ot.push(kt),kt.sessionId=At.sessionId,Ut.trigger(yt.KEY_SESSION_CREATED,{data:kt})):at.length>0&&(kt=at.shift(),Ot.push(kt),at.length!==0&&rn.error(new c.Z(n.MEDIA_KEY_MESSAGE_ERROR_CODE,n.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),kt){var En=ArrayBuffer.isView(At.message)?At.message.buffer:At.message;kt.keyMessage=En,Ut.trigger(yt.INTERNAL_KEY_MESSAGE,{data:new fn(kt,En,At.defaultURL)})}else Tt.warn("No session token found for key message")}}},Et}kn.__dashjs_factory_name="ProtectionModel_01b";var Vn=dashjs.FactoryMaker.getClassFactory(kn),$n=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],Kn=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function tr(){var bt,Et=this.context;function Tt(Ue,ct){for(var He=0;He<ct.length;He++){var at=ct[He];if(typeof Ue[at[Object.keys(at)[0]]]=="function")return at}return null}return bt={createProtectionSystem:function(Ue){var ct=null,He=mt(Et).getInstance();He.setConfig({debug:Ue.debug,BASE64:Ue.BASE64,settings:Ue.settings}),He.initialize();var at=function(Ot){var Lt=Ot.debug,Wt=Lt.getLogger(bt),Xt=Ot.eventBus,Ut=Ot.errHandler,yt=Ot.videoModel?Ot.videoModel.getElement():null;return yt&&yt.onencrypted===void 0||yt&&yt.mediaKeys===void 0?Tt(yt,Kn)?(Wt.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Qn(Et).create({debug:Lt,eventBus:Xt,events:Ot.events,api:Tt(yt,Kn)})):Tt(yt,$n)?(Wt.info("EME detected on this user agent! (ProtectionModel_01b)"),Vn(Et).create({debug:Lt,eventBus:Xt,errHandler:Ut,events:Ot.events,api:Tt(yt,$n)})):(Wt.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Wt.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Gn(Et).create({debug:Lt,eventBus:Xt,events:Ot.events}))}(Ue);return!ct&&at&&(ct=re(Et).create({protectionModel:at,protectionKeyController:He,eventBus:Ue.eventBus,debug:Ue.debug,events:Ue.events,BASE64:Ue.BASE64,constants:Ue.constants,cmcdModel:Ue.cmcdModel,customParametersModel:Ue.customParametersModel,settings:Ue.settings}),Ue.capabilities.setEncryptedMediaSupported(!0)),ct}}}tr.__dashjs_factory_name="Protection";var nr=dashjs.FactoryMaker.getClassFactory(tr);nr.events=Pt,nr.errors=n,dashjs.FactoryMaker.updateClassFactory(tr.__dashjs_factory_name,nr);var Nr=nr},2068:function(it,we,M){var oe=M(5448),T={DEFAULT:.5,STRONG:1,WEAK:0};function t(y,p,u){var _,m;return _=y===void 0?-1:y,m=function(n){var c=T.DEFAULT;return n!==T.DEFAULT&&n!==T.STRONG&&n!==T.WEAK||(c=n),c}(u),{quality:_,reason:p===void 0?null:p,priority:m}}t.__dashjs_factory_name="SwitchRequest";var e=oe.Z.getClassFactory(t);e.NO_CHANGE=-1,e.PRIORITY=T,oe.Z.updateClassFactory(t.__dashjs_factory_name,e),we.Z=e},1767:function(it,we,M){var oe=M(5628),T=M(6535),t=M(7423),e=M(895),y=M(6070),p=M(3112),u=M(1914),_=M(5435),m=M(5448),n=M(2068),c=M(3393),d="qualitySwitchRules",I="abandonFragmentRules";function k(x){x=x||{};var $,O,K=this.context,re=x.mediaPlayerModel,H=x.customParametersModel,ee=x.dashMetrics,se=x.settings;function Te(Ie){return Ie.filter(function(Le){return Le.quality>n.Z.NO_CHANGE})}function X(Ie){var Le,je,Ee,Pe,Ve,et={},_e=null;if(Ie.length!==0){for(et[n.Z.PRIORITY.STRONG]={quality:n.Z.NO_CHANGE,reason:null},et[n.Z.PRIORITY.WEAK]={quality:n.Z.NO_CHANGE,reason:null},et[n.Z.PRIORITY.DEFAULT]={quality:n.Z.NO_CHANGE,reason:null},Le=0,je=Ie.length;Le<je;Le+=1)(Ee=Ie[Le]).quality!==n.Z.NO_CHANGE&&(et[Ee.priority].quality===n.Z.NO_CHANGE||et[Ee.priority].quality>Ee.quality)&&(et[Ee.priority].quality=Ee.quality,et[Ee.priority].reason=Ee.reason||null);return et[n.Z.PRIORITY.WEAK].quality!==n.Z.NO_CHANGE&&(_e=et[n.Z.PRIORITY.WEAK]),et[n.Z.PRIORITY.DEFAULT].quality!==n.Z.NO_CHANGE&&(_e=et[n.Z.PRIORITY.DEFAULT]),et[n.Z.PRIORITY.STRONG].quality!==n.Z.NO_CHANGE&&(_e=et[n.Z.PRIORITY.STRONG]),_e&&(Pe=_e.quality,Ve=_e.reason),(0,n.Z)(K).create(Pe,Ve)}}return{initialize:function(){$=[],O=[],se.get().streaming.abr.useDefaultABRRules&&(se.get().streaming.abr.ABRStrategy===c.Z.ABR_STRATEGY_L2A?$.push((0,u.Z)(K).create({dashMetrics:ee,settings:se})):se.get().streaming.abr.ABRStrategy===c.Z.ABR_STRATEGY_LoLP?$.push((0,_.Z)(K).create({dashMetrics:ee})):($.push((0,p.Z)(K).create({dashMetrics:ee,mediaPlayerModel:re,settings:se})),$.push((0,oe.Z)(K).create({dashMetrics:ee})),se.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&$.push((0,T.Z)(K).create({dashMetrics:ee,settings:se})),se.get().streaming.abr.additionalAbrRules.switchHistoryRule&&$.push((0,y.Z)(K).create()),se.get().streaming.abr.additionalAbrRules.droppedFramesRule&&$.push((0,e.Z)(K).create()),se.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&O.push((0,t.Z)(K).create({dashMetrics:ee,mediaPlayerModel:re,settings:se})))),H.getAbrCustomRules().forEach(function(Ie){Ie.type===d&&$.push(Ie.rule(K).create()),Ie.type===I&&O.push(Ie.rule(K).create())})},reset:function(){[$,O].forEach(function(Ie){Ie&&Ie.length&&Ie.forEach(function(Le){return Le.reset&&Le.reset()})}),$=[],O=[]},getMaxQuality:function(Ie){return X(Te($.map(function(Le){return Le.getMaxIndex(Ie)})))||(0,n.Z)(K).create()},getMinSwitchRequest:X,shouldAbandonFragment:function(Ie,Le){var je=X(Te(O.map(function(Ee){return Ee.shouldAbandon(Ie,Le)})));return je&&(je.reason.forceAbandon=!0),je||(0,n.Z)(K).create()},getQualitySwitchRules:function(){return $}}}k.__dashjs_factory_name="ABRRulesCollection";var q=m.Z.getClassFactory(k);q.QUALITY_SWITCH_RULES=d,q.ABANDON_FRAGMENT_RULES=I,m.Z.updateSingletonFactory(k.__dashjs_factory_name,q),we.Z=q},7423:function(it,we,M){var oe=M(2068),T=M(5448),t=M(6398);function e(y){y=y||{};var p,u,_,m,n,c=this.context,d=y.mediaPlayerModel,I=y.dashMetrics,k=y.settings;function q(){_={},m={},n=[]}return p={shouldAbandon:function(x){var $=(0,oe.Z)(c).create(oe.Z.NO_CHANGE,{name:e.__dashjs_factory_name});if(!(x&&x.hasOwnProperty("getMediaInfo")&&x.hasOwnProperty("getMediaType")&&x.hasOwnProperty("getCurrentRequest")&&x.hasOwnProperty("getRepresentationInfo")&&x.hasOwnProperty("getAbrController")))return $;var O,K,re=x.getMediaInfo(),H=x.getMediaType(),ee=x.getStreamInfo(),se=ee?ee.id:null,Te=x.getCurrentRequest();if(!isNaN(Te.index)){O=H,K=Te.index,_[O]=_[O]||{},_[O][K]=_[O][K]||{};var X=d.getStableBufferTime();if(I.getCurrentBufferLevel(H)>X)return $;var Ie=_[H][Te.index];if(Ie===null||Te.firstByteDate===null||m.hasOwnProperty(Ie.id))return $;if(Ie.firstByteTime===void 0&&(n[H]=[],Ie.firstByteTime=Te.firstByteDate.getTime(),Ie.segmentDuration=Te.duration,Ie.bytesTotal=Te.bytesTotal,Ie.id=Te.index),Ie.bytesLoaded=Te.bytesLoaded,Ie.elapsedTime=new Date().getTime()-Ie.firstByteTime,Ie.bytesLoaded>0&&Ie.elapsedTime>0&&function(Oe,_t){n[Oe]=n[Oe]||[],n[Oe].push(_t)}(H,Math.round(8*Ie.bytesLoaded/Ie.elapsedTime)),n[H].length>=k.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&Ie.elapsedTime>k.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&Ie.bytesLoaded<Ie.bytesTotal){var Le=n[H].reduce(function(Oe,_t){return Oe+_t},0);if(Ie.measuredBandwidthInKbps=Math.round(Le/n[H].length),Ie.estimatedTimeOfDownload=+(8*Ie.bytesTotal/Ie.measuredBandwidthInKbps/1e3).toFixed(2),Ie.estimatedTimeOfDownload<Ie.segmentDuration*k.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||x.getRepresentationInfo().quality===0)return $;if(!m.hasOwnProperty(Ie.id)){var je=x.getAbrController(),Ee=Ie.bytesTotal-Ie.bytesLoaded,Pe=je.getBitrateList(re),Ve=je.getQualityForBitrate(re,Ie.measuredBandwidthInKbps*k.get().streaming.abr.bandwidthSafetyFactor,se),et=je.getMinAllowedIndexFor(H,se),_e=et!==void 0?Math.max(et,Ve):Ve;Ee>Ie.bytesTotal*Pe[_e].bitrate/Pe[je.getQualityFor(H,se)].bitrate&&($.quality=_e,$.reason.throughput=Ie.measuredBandwidthInKbps,$.reason.fragmentID=Ie.id,$.reason.rule=this.getClassName(),m[Ie.id]=Ie,u.debug("["+H+"] frag id",Ie.id," is asking to abandon and switch to quality to ",_e," measured bandwidth was",Ie.measuredBandwidthInKbps),delete _[H][Ie.id])}}else Ie.bytesLoaded===Ie.bytesTotal&&delete _[H][Ie.id]}return $},reset:q},u=(0,t.Z)(c).getInstance().getLogger(p),q(),p}e.__dashjs_factory_name="AbandonRequestsRule",we.Z=T.Z.getClassFactory(e)},3112:function(it,we,M){var oe=M(3860),T=M(2068),t=M(5448),e=M(7855),y=M(5595),p=M(8512),u=M(6398),_=M(8825),m=M(3393),n=10;function c(d){d=d||{};var I,k,q,x=this.context,$=d.dashMetrics,O=d.mediaPlayerModel,K=(0,y.Z)(x).getInstance();function re(_e,Oe,_t){var dt=_t.reduce(function(de,ge,Be){return ge>_t[de]?Be:de},0);if(dt===0)return null;var Ze=Math.max(_e,n+2*Oe.length),Je=(_t[dt]-1)/(Ze/n-1);return{gp:Je,Vp:n/Je}}function H(_e){_e.placeholderBuffer=0,_e.mostAdvancedSegmentStart=NaN,_e.lastSegmentWasReplacement=!1,_e.lastSegmentStart=NaN,_e.lastSegmentDurationS=NaN,_e.lastSegmentRequestTimeMs=NaN,_e.lastSegmentFinishTimeMs=NaN}function ee(_e,Oe){var _t=O.getStableBufferTime();if(_e.stableBufferTime!==_t){var dt=re(_t,_e.bitrates,_e.utilities);if(dt.Vp!==_e.Vp||dt.gp!==_e.gp){var Ze=$.getCurrentBufferLevel(Oe),Je=Ze+_e.placeholderBuffer;Je-=n,Je*=dt.Vp/_e.Vp,Je+=n,_e.stableBufferTime=_t,_e.Vp=dt.Vp,_e.gp=dt.gp,_e.placeholderBuffer=Math.max(0,Je-Ze)}}}function se(_e,Oe){return _e.Vp*(_e.utilities[Oe]+_e.gp)}function Te(_e,Oe){for(var _t=_e.bitrates[Oe],dt=_e.utilities[Oe],Ze=0,Je=Oe-1;Je>=0;--Je)if(_e.utilities[Je]<_e.utilities[Oe]){var de=_e.bitrates[Je],ge=_e.utilities[Je],Be=_e.Vp*(_e.gp+(_t*ge-de*dt)/(_t-de));Ze=Math.max(Ze,Be)}return Ze}function X(_e){var Oe=_e.mediaType===m.Z.AUDIO?[m.Z.AUDIO]:q;for(var _t in Oe)q.hasOwnProperty(_t)&&q[_t].state===2&&(q[_t].placeholderBuffer=0)}function Ie(){for(var _e in q)if(q.hasOwnProperty(_e)){var Oe=q[_e];Oe.state!==0&&(Oe.state=1,H(Oe))}}function Le(_e){if(_e&&_e.chunk&&_e.chunk.mediaInfo){var Oe=q[_e.chunk.mediaInfo.type];if(Oe&&Oe.state!==0){var _t=_e.chunk.start;isNaN(Oe.mostAdvancedSegmentStart)||_t>Oe.mostAdvancedSegmentStart?(Oe.mostAdvancedSegmentStart=_t,Oe.lastSegmentWasReplacement=!1):Oe.lastSegmentWasReplacement=!0,Oe.lastSegmentStart=_t,Oe.lastSegmentDurationS=_e.chunk.duration,Oe.lastQuality=_e.chunk.quality,Ee(Oe,_e.chunk.mediaInfo.type)}}}function je(_e){if(_e&&_e.metric===oe.Z.HTTP_REQUEST&&_e.value&&_e.value.type===e.w.MEDIA_SEGMENT_TYPE&&_e.value.trace&&_e.value.trace.length){var Oe=q[_e.mediaType];Oe&&Oe.state!==0&&(Oe.lastSegmentRequestTimeMs=_e.value.trequest.getTime(),Oe.lastSegmentFinishTimeMs=_e.value._tfinish.getTime(),Ee(Oe,_e.mediaType))}}function Ee(_e,Oe){if(!isNaN(_e.lastSegmentStart)&&!isNaN(_e.lastSegmentRequestTimeMs)&&!isNaN(_e.placeholderBuffer)){if(_e.placeholderBuffer*=.99,!isNaN(_e.lastSegmentFinishTimeMs)){var _t=$.getCurrentBufferLevel(Oe)+.001*(_e.lastSegmentFinishTimeMs-_e.lastSegmentRequestTimeMs),dt=se(_e,_e.lastQuality),Ze=Math.max(0,dt-_t);_e.placeholderBuffer=Math.min(Ze,_e.placeholderBuffer)}_e.lastSegmentWasReplacement&&!isNaN(_e.lastSegmentDurationS)&&(_e.placeholderBuffer+=_e.lastSegmentDurationS),_e.lastSegmentStart=NaN,_e.lastSegmentRequestTimeMs=NaN}}function Pe(_e){if(_e){var Oe=q[_e.mediaType];Oe&&Oe.state!==0&&(Oe.abrQuality=_e.newQuality)}}function Ve(_e){if(_e){var Oe=q[_e.mediaType];if(Oe&&Oe.state!==0){var _t,dt=$.getCurrentBufferLevel(_e.mediaType);_t=Oe.abrQuality>0?Te(Oe,Oe.abrQuality):n;var Ze=Math.max(0,_t-dt);Oe.placeholderBuffer=Math.min(Oe.placeholderBuffer,Ze)}}}function et(){q={}}return I={getMaxIndex:function(_e){var Oe=(0,T.Z)(x).create();if(!(_e&&_e.hasOwnProperty("getMediaInfo")&&_e.hasOwnProperty("getMediaType")&&_e.hasOwnProperty("getScheduleController")&&_e.hasOwnProperty("getStreamInfo")&&_e.hasOwnProperty("getAbrController")&&_e.hasOwnProperty("useBufferOccupancyABR")))return Oe;var _t=_e.getMediaInfo(),dt=_e.getMediaType(),Ze=_e.getScheduleController(),Je=_e.getStreamInfo(),de=_e.getAbrController(),ge=de.getThroughputHistory(),Be=Je?Je.id:null,f=Je&&Je.manifestInfo&&Je.manifestInfo.isDynamic,o=_e.useBufferOccupancyABR();if(Oe.reason=Oe.reason||{},!o)return Oe;Ze.setTimeToLoadDelay(0);var v=function(Ae){var xe=Ae.getMediaType(),Xe=q[xe];return Xe?Xe.state!==0&&ee(Xe,xe):(Xe=function(mt){var rt={},Zt=mt.getMediaInfo().bitrateList.map(function(tn){return tn.bandwidth}),It=function(tn){return tn.map(function(fn){return Math.log(fn)})}(Zt);It=It.map(function(tn){return tn-It[0]+1});var Ft=O.getStableBufferTime(),Pt=re(Ft,Zt,It);return Pt?(rt.state=1,rt.bitrates=Zt,rt.utilities=It,rt.stableBufferTime=Ft,rt.Vp=Pt.Vp,rt.gp=Pt.gp,rt.lastQuality=0,H(rt)):rt.state=0,rt}(Ae),q[xe]=Xe),Xe}(_e);if(v.state===0)return Oe;var S,W=$.getCurrentBufferLevel(dt),V=ge.getAverageThroughput(dt,f),be=ge.getSafeAverageThroughput(dt,f),ze=ge.getAverageLatency(dt);if(Oe.reason.state=v.state,Oe.reason.throughput=V,Oe.reason.latency=ze,isNaN(V))return Oe;switch(v.state){case 1:S=de.getQualityForBitrate(_t,be,Be,ze),Oe.quality=S,Oe.reason.throughput=be,v.placeholderBuffer=Math.max(0,Te(v,S)-W),v.lastQuality=S,!isNaN(v.lastSegmentDurationS)&&W>=v.lastSegmentDurationS&&(v.state=2);break;case 2:(function(Ae,xe){var Xe=Date.now();if(isNaN(Ae.lastSegmentFinishTimeMs)){if(!isNaN(Ae.lastCallTimeMs)){var mt=.001*(Xe-Ae.lastCallTimeMs);Ae.placeholderBuffer+=Math.max(0,mt)}}else{var rt=.001*(Xe-Ae.lastSegmentFinishTimeMs);Ae.placeholderBuffer+=Math.max(0,rt)}Ae.lastCallTimeMs=Xe,Ae.lastSegmentStart=NaN,Ae.lastSegmentRequestTimeMs=NaN,Ae.lastSegmentFinishTimeMs=NaN,ee(Ae,xe)})(v,dt),S=function(Ae,xe){for(var Xe=Ae.bitrates.length,mt=NaN,rt=NaN,Zt=0;Zt<Xe;++Zt){var It=(Ae.Vp*(Ae.utilities[Zt]+Ae.gp)-xe)/Ae.bitrates[Zt];(isNaN(rt)||It>=rt)&&(rt=It,mt=Zt)}return mt}(v,W+v.placeholderBuffer);var Me=de.getQualityForBitrate(_t,be,Be,ze);S>v.lastQuality&&S>Me&&(S=Math.max(Me,v.lastQuality));var De=Math.max(0,W+v.placeholderBuffer-se(v,S));De<=v.placeholderBuffer?(v.placeholderBuffer-=De,De=0):(De-=v.placeholderBuffer,v.placeholderBuffer=0,S<de.getMaxAllowedIndexFor(dt,Be)?Ze.setTimeToLoadDelay(1e3*De):De=0),Oe.quality=S,Oe.reason.throughput=V,Oe.reason.latency=ze,Oe.reason.bufferLevel=W,Oe.reason.placeholderBuffer=v.placeholderBuffer,Oe.reason.delay=De,v.lastQuality=S;break;default:k.debug("BOLA ABR rule invoked in bad state."),Oe.quality=de.getQualityForBitrate(_t,be,Be,ze),Oe.reason.state=v.state,Oe.reason.throughput=be,Oe.reason.latency=ze,v.state=1,H(v)}return Oe},reset:function(){et(),K.off(_.Z.BUFFER_EMPTY,X,I),K.off(_.Z.PLAYBACK_SEEKING,Ie,I),K.off(_.Z.METRIC_ADDED,je,I),K.off(_.Z.QUALITY_CHANGE_REQUESTED,Pe,I),K.off(_.Z.FRAGMENT_LOADING_ABANDONED,Ve,I),K.off(p.Z.MEDIA_FRAGMENT_LOADED,Le,I)}},k=(0,u.Z)(x).getInstance().getLogger(I),et(),K.on(_.Z.BUFFER_EMPTY,X,I),K.on(_.Z.PLAYBACK_SEEKING,Ie,I),K.on(_.Z.METRIC_ADDED,je,I),K.on(_.Z.QUALITY_CHANGE_REQUESTED,Pe,I),K.on(_.Z.FRAGMENT_LOADING_ABANDONED,Ve,I),K.on(p.Z.MEDIA_FRAGMENT_LOADED,Le,I),I}c.__dashjs_factory_name="BolaRule",we.Z=t.Z.getClassFactory(c)},895:function(it,we,M){var oe=M(5448),T=M(2068),t=M(6398);function e(){var y,p,u=this.context;return y={getMaxIndex:function(_){var m=(0,T.Z)(u).create();if(!_||!_.hasOwnProperty("getDroppedFramesHistory"))return m;var n=_.getDroppedFramesHistory(),c=_.getStreamInfo().id;if(n){var d=n.getFrameHistory(c);if(!d||d.length===0)return m;for(var I=0,k=0,q=T.Z.NO_CHANGE,x=1;x<d.length;x++)if(d[x]&&(I=d[x].droppedVideoFrames,(k=d[x].totalVideoFrames)>375&&I/k>.15)){q=x-1,p.debug("index: "+q+" Dropped Frames: "+I+" Total Frames: "+k);break}return(0,T.Z)(u).create(q,{droppedFrames:I})}return m}},p=(0,t.Z)(u).getInstance().getLogger(y),y}e.__dashjs_factory_name="DroppedFramesRule",we.Z=oe.Z.getClassFactory(e)},6535:function(it,we,M){var oe=M(5595),T=M(8512),t=M(5448),e=M(6398),y=M(2068),p=M(3393),u=M(3860),_=M(8825);function m(n){n=n||{};var c,d,I,k=this.context,q=(0,oe.Z)(k).getInstance(),x=n.dashMetrics;function $(){(I={})[p.Z.VIDEO]={ignoreCount:2},I[p.Z.AUDIO]={ignoreCount:2}}function O(){$()}function K(re){isNaN(re.startTime)||re.mediaType!==p.Z.AUDIO&&re.mediaType!==p.Z.VIDEO||I[re.mediaType].ignoreCount>0&&I[re.mediaType].ignoreCount--}return c={getMaxIndex:function(re){var H=(0,y.Z)(k).create();if(!re||!re.hasOwnProperty("getMediaType"))return H;(function(){if(!x||!x.hasOwnProperty("getCurrentBufferLevel")||!x.hasOwnProperty("getCurrentBufferState"))throw new Error(p.Z.MISSING_CONFIG_ERROR)})();var ee=re.getMediaType(),se=x.getCurrentBufferState(ee),Te=re.getRepresentationInfo().fragmentDuration,X=re.getStreamInfo(),Ie=X?X.id:null,Le=re.getScheduleController(),je=X&&X.manifestInfo&&X.manifestInfo.isDynamic;if(function(dt,Ze){return!dt&&I[Ze].ignoreCount>0}(Le.getPlaybackController().getLowLatencyModeEnabled(),ee)||!Te)return H;if(se&&se.state===u.Z.BUFFER_EMPTY)d.debug("["+ee+"] Switch to index 0; buffer is empty."),H.quality=0,H.reason="InsufficientBufferRule: Buffer is empty";else{var Ee=re.getMediaInfo(),Pe=re.getAbrController(),Ve=Pe.getThroughputHistory(),et=x.getCurrentBufferLevel(ee),_e=Ve.getAverageThroughput(ee,je),Oe=Ve.getAverageLatency(ee),_t=_e*(et/Te)*.5;H.quality=Pe.getQualityForBitrate(Ee,_t,Ie,Oe),H.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return H},reset:function(){$(),q.off(_.Z.PLAYBACK_SEEKING,O,c),q.off(T.Z.BYTES_APPENDED_END_FRAGMENT,K,c)}},d=(0,e.Z)(k).getInstance().getLogger(c),$(),q.on(_.Z.PLAYBACK_SEEKING,O,c),q.on(T.Z.BYTES_APPENDED_END_FRAGMENT,K,c),c}m.__dashjs_factory_name="InsufficientBufferRule",we.Z=t.Z.getClassFactory(m)},1914:function(it,we,M){var oe=M(3860),T=M(2068),t=M(5448),e=M(7855),y=M(5595),p=M(8512),u=M(6398),_=M(3393);function m(n){n=n||{};var c,d,I,k,q=this.context,x=n.dashMetrics,$=(0,y.Z)(q).getInstance();function O(Ie){Ie.placeholderBuffer=0,Ie.mostAdvancedSegmentStart=NaN,Ie.lastSegmentWasReplacement=!1,Ie.lastSegmentStart=NaN,Ie.lastSegmentDurationS=NaN,Ie.lastSegmentRequestTimeMs=NaN,Ie.lastSegmentFinishTimeMs=NaN,Ie.lastSegmentUrl=""}function K(){for(var Ie in d)if(d.hasOwnProperty(Ie)){var Le=d[Ie];Le.state!==0&&(Le.state=1,O(Le))}}function re(Ie){if(Ie&&Ie.chunk&&Ie.chunk.mediaInfo){var Le=d[Ie.chunk.mediaInfo.type],je=I[Ie.chunk.mediaInfo.type];if(Le&&Le.state!==0){var Ee=Ie.chunk.start;isNaN(Le.mostAdvancedSegmentStart)||Ee>Le.mostAdvancedSegmentStart?(Le.mostAdvancedSegmentStart=Ee,Le.lastSegmentWasReplacement=!1):Le.lastSegmentWasReplacement=!0,Le.lastSegmentStart=Ee,Le.lastSegmentDurationS=Ie.chunk.duration,Le.lastQuality=Ie.chunk.quality,ee(Le,je)}}}function H(Ie){if(Ie&&Ie.metric===oe.Z.HTTP_REQUEST&&Ie.value&&Ie.value.type===e.w.MEDIA_SEGMENT_TYPE&&Ie.value.trace&&Ie.value.trace.length){var Le=d[Ie.mediaType],je=I[Ie.mediaType];Le&&Le.state!==0&&(Le.lastSegmentRequestTimeMs=Ie.value.trequest.getTime(),Le.lastSegmentFinishTimeMs=Ie.value._tfinish.getTime(),ee(Le,je))}}function ee(Ie,Le){isNaN(Ie.lastSegmentStart)||isNaN(Ie.lastSegmentRequestTimeMs)||(Le.segment_request_start_s=.001*Ie.lastSegmentRequestTimeMs,Le.segment_download_finish_s=.001*Ie.lastSegmentFinishTimeMs,Ie.lastSegmentStart=NaN,Ie.lastSegmentRequestTimeMs=NaN)}function se(Ie){if(Ie&&Ie.mediaType){var Le=d[Ie.mediaType];Le&&Le.state!==0&&(Le.abrQuality=Ie.newQuality)}}function Te(Ie,Le){if(Ie.length!==Le.length)return-1;for(var je=0,Ee=0;Ee<Ie.length;Ee++)je+=Ie[Ee]*Le[Ee];return je}function X(){d={},I={}}return c={getMaxIndex:function(Ie){var Le,je=(0,T.Z)(q).create(),Ee=Math.pow(4,.99),Pe=Math.max(Math.pow(4,1),Ee*Math.sqrt(4)),Ve=Ie.getMediaInfo(),et=Ie.getMediaType(),_e=Ve.bitrateList.map(function(Pt){return Pt.bandwidth}),Oe=_e.length,_t=Ie.getScheduleController(),dt=Ie.getStreamInfo(),Ze=Ie.getAbrController(),Je=Ze.getThroughputHistory(),de=dt&&dt.manifestInfo&&dt.manifestInfo.isDynamic,ge=Ie.useL2AABR(),Be=x.getCurrentBufferLevel(et,!0),f=Je.getSafeAverageThroughput(et,de),o=Je.getAverageThroughput(et,de),v=Je.getAverageLatency(et),S=Ie.getVideoModel().getPlaybackRate();if(!(Ie&&Ie.hasOwnProperty("getMediaInfo")&&Ie.hasOwnProperty("getMediaType")&&Ie.hasOwnProperty("getScheduleController")&&Ie.hasOwnProperty("getStreamInfo")&&Ie.hasOwnProperty("getAbrController")&&Ie.hasOwnProperty("useL2AABR"))||(je.reason=je.reason||{},!ge||et===_.Z.AUDIO))return je;_t.setTimeToLoadDelay(0);var W=function(Pt){var tn=Pt.getMediaType(),fn=d[tn];return fn||(fn=function(Sn){var _n={},An=Sn.getMediaInfo(),Gn=An.bitrateList.map(function(yn){return yn.bandwidth/1e3});return _n.state=1,_n.bitrates=Gn,_n.lastQuality=0,function(yn){yn&&yn.type&&(I[yn.type]={},I[yn.type].w=[],I[yn.type].prev_w=[],I[yn.type].Q=0,I[yn.type].segment_request_start_s=0,I[yn.type].segment_download_finish_s=0,I[yn.type].B_target=1.5)}(An),O(_n),_n}(Pt),d[tn]=fn),fn}(Ie);if(W.state===0)return je;var V=I[et];if(!V||(je.reason.state=W.state,je.reason.throughput=o,je.reason.latency=v,isNaN(o)))return je;switch(W.state){case 1:if(Le=Ze.getQualityForBitrate(Ve,f,dt.id,v),je.quality=Le,je.reason.throughput=f,W.lastQuality=Le,!isNaN(W.lastSegmentDurationS)&&Be>=V.B_target){W.state=2,V.Q=Ee;for(var be=0;be<Oe;++be)be===W.lastQuality?V.prev_w[be]=1:V.prev_w[be]=0}break;case 2:var ze=[],Me=x.getCurrentHttpRequest(et).trace.reduce(function(Pt,tn){return Pt+tn.d},0),De=x.getCurrentHttpRequest(et).trace.reduce(function(Pt,tn){return Pt+tn.b[0]},0),Ae=Math.round(8*De/Me),xe=x.getCurrentHttpRequest(et);if(Ae<1&&(Ae=1),xe.url===W.lastSegmentUrl||xe.type===e.w.INIT_SEGMENT_TYPE)Le=W.lastQuality;else{for(var Xe=W.lastSegmentDurationS,mt=1,rt=0;rt<Oe;++rt)_e[rt]=_e[rt]/1e3,S*_e[rt]>Ae&&(mt=-1),V.w[rt]=V.prev_w[rt]+mt*(Xe/(2*Pe))*((V.Q+Ee)*(S*_e[rt]/Ae));V.w=function(Pt){for(var tn=Pt.length,fn=!1,Sn=[],_n=0;_n<tn;++_n)Sn[_n]=Pt[_n];for(var An=Pt.sort(function($n,Kn){return Kn-$n}),Gn=0,yn=0,Qn=[],kn=0;kn<tn-1;++kn)if((yn=((Gn+=An[kn])-1)/(kn+1))>=An[kn+1]){fn=!0;break}fn||(yn=(Gn+An[tn-1]-1)/tn);for(var Vn=0;Vn<tn;++Vn)Qn[Vn]=Math.max(Sn[Vn]-yn,0);return Qn}(V.w);for(var Zt=0;Zt<Oe;++Zt)ze[Zt]=V.w[Zt]-V.prev_w[Zt],V.prev_w[Zt]=V.w[Zt];V.Q=Math.max(0,V.Q-Xe+Xe*S*((Te(_e,V.prev_w)+Te(_e,ze))/Ae));for(var It=[],Ft=0;Ft<Oe;++Ft)It[Ft]=Math.abs(_e[Ft]-Te(V.w,_e));(Le=It.indexOf(Math.min.apply(Math,It)))>W.lastQuality&&_e[W.lastQuality+1]<=Ae&&(Le=W.lastQuality+1),_e[Le]>=Ae&&(V.Q=2*Math.max(Ee,V.Q)),W.lastSegmentUrl=xe.url}je.quality=Le,je.reason.throughput=o,je.reason.latency=v,je.reason.bufferLevel=Be,W.lastQuality=je.quality;break;default:k.debug("L2A ABR rule invoked in bad state."),je.quality=Ze.getQualityForBitrate(Ve,f,dt.id,v),je.reason.state=W.state,je.reason.throughput=f,je.reason.latency=v,W.state=1,O(W)}return je},reset:function(){X(),$.off(p.Z.PLAYBACK_SEEKING,K,c),$.off(p.Z.MEDIA_FRAGMENT_LOADED,re,c),$.off(p.Z.METRIC_ADDED,H,c),$.off(p.Z.QUALITY_CHANGE_REQUESTED,se,c)}},k=(0,u.Z)(q).getInstance().getLogger(c),X(),$.on(p.Z.PLAYBACK_SEEKING,K,c),$.on(p.Z.MEDIA_FRAGMENT_LOADED,re,c),$.on(p.Z.METRIC_ADDED,H,c),$.on(p.Z.QUALITY_CHANGE_REQUESTED,se,c),c}m.__dashjs_factory_name="L2ARule",we.Z=t.Z.getClassFactory(m)},6070:function(it,we,M){var oe=M(5448),T=M(6398),t=M(2068);function e(){var y,p,u=this.context;return y={getMaxIndex:function(_){for(var m=_?_.getSwitchHistory():null,n=m?m.getSwitchRequests():[],c=0,d=0,I=0,k=(0,t.Z)(u).create(),q=0;q<n.length;q++)if(n[q]!==void 0&&(c+=n[q].drops,d+=n[q].noDrops,I+=n[q].dropSize,c+d>=6&&c/d>.075)){k.quality=q>0&&n[q].drops>0?q-1:q,k.reason={index:k.quality,drops:c,noDrops:d,dropSize:I},p.debug("Switch history rule index: "+k.quality+" samples: "+(c+d)+" drops: "+c);break}return k}},p=(0,T.Z)(u).getInstance().getLogger(y),y}e.__dashjs_factory_name="SwitchHistoryRule",we.Z=oe.Z.getClassFactory(e)},5628:function(it,we,M){var oe=M(5448),T=M(2068),t=M(3393),e=M(3860);function y(p){p=p||{};var u=this.context,_=p.dashMetrics;return{getMaxIndex:function(m){var n=(0,T.Z)(u).create();if(!(m&&m.hasOwnProperty("getMediaInfo")&&m.hasOwnProperty("getMediaType")&&m.hasOwnProperty("useBufferOccupancyABR")&&m.hasOwnProperty("getAbrController")&&m.hasOwnProperty("getScheduleController")))return n;(function(){if(!_||!_.hasOwnProperty("getCurrentBufferState"))throw new Error(t.Z.MISSING_CONFIG_ERROR)})();var c=m.getMediaInfo(),d=m.getMediaType(),I=_.getCurrentBufferState(d),k=m.getScheduleController(),q=m.getAbrController(),x=m.getStreamInfo(),$=x?x.id:null,O=x&&x.manifestInfo?x.manifestInfo.isDynamic:null,K=q.getThroughputHistory(),re=K.getSafeAverageThroughput(d,O),H=K.getAverageLatency(d),ee=m.useBufferOccupancyABR();return isNaN(re)||!I||ee||q.getAbandonmentStateFor($,d)!==e.Z.ABANDON_LOAD&&(I.state===e.Z.BUFFER_LOADED||O)&&(n.quality=q.getQualityForBitrate(c,re,$,H),k.setTimeToLoadDelay(0),n.reason={throughput:re,latency:H}),n},reset:function(){}}}y.__dashjs_factory_name="ThroughputRule",we.Z=oe.Z.getClassFactory(y)},4722:function(it,we,M){var oe=M(5448),T=M(6398);function t(){var e,y,p,u,_,m,n,c,d,I=this.context;function k(){p=null,u=1,_=100,m=0,n=null,c=null,d="dynamic_weight_selection"}function q(){var re=0;if(p)for(var H=0;H<p.length;H++){var ee=p[H];ee.state.throughput>re&&(re=ee.state.throughput)}return re}function x(re,H,ee){var se=re.map(function(Te,X){return ee[X]*Math.pow(Te-H[X],2)}).reduce(function(Te,X){return Te+X});return(se<0?-1:1)*Math.sqrt(Math.abs(se))}function $(re,H){return x([re.state.throughput,re.state.latency,re.state.rebuffer,re.state.switch],[H.state.throughput,H.state.latency,H.state.rebuffer,H.state.switch],[1,1,1,1])}function O(re,H,ee){for(var se=0;se<H.length;se++){var Te=H[se],X=$(Te,re);K(Te,ee,Math.exp(-1*Math.pow(X,2)/(2*Math.pow(.1,2))))}}function K(re,H,ee){var se=re.state,Te=[.01,.01,.01,.01];se.throughput=se.throughput+(H[0]-se.throughput)*Te[0]*ee,se.latency=se.latency+(H[1]-se.latency)*Te[1]*ee,se.rebuffer=se.rebuffer+(H[2]-se.rebuffer)*Te[2]*ee,se.switch=se.switch+(H[3]-se.switch)*Te[3]*ee}return e={getNextQuality:function(re,H,ee,se,Te,X,Ie){var Le=ee,je=se,Ee=H,Pe=function(V){if(!p){p=[];var be=V.bitrateList,ze=[];m=be[0].bandwidth,be.forEach(function(xe){ze.push(xe.bandwidth),xe.bandwidth<m&&(m=xe.bandwidth)}),Ae=ze.map(function(xe){return Math.pow(xe,2)}).reduce(function(xe,Xe){return xe+Xe}),u=Math.sqrt(Ae);for(var Me=0;Me<be.length;Me++){var De={qualityIndex:Me,bitrate:be[Me].bandwidth,state:{throughput:be[Me].bandwidth/u,latency:0,rebuffer:0,switch:0}};p.push(De)}c=function(xe){var Xe=[],mt=function(Nr){for(var bt=[],Et=0;Et<Nr;Et++){var Tt=[Math.random()*q(),Math.random(),Math.random(),Math.random()];bt.push(Tt)}return bt}(Math.pow(xe.length,2));Xe.push(mt[0]);for(var rt=[1,1,1,1],Zt=1;Zt<xe.length;Zt++){for(var It=null,Ft=null,Pt=0;Pt<mt.length;Pt++){for(var tn=mt[Pt],fn=null,Sn=0;Sn<Xe.length;Sn++){var _n=x(tn,Xe[Sn],rt);(fn===null||_n<fn)&&(fn=_n)}(Ft===null||fn>Ft)&&(It=tn,Ft=fn)}Xe.push(It)}for(var An=null,Gn=null,yn=0;yn<Xe.length;yn++){for(var Qn=0,kn=0;kn<Xe.length;kn++)yn!==kn&&(Qn+=x(Xe[yn],Xe[kn],rt));(An===null||Qn>An)&&(An=Qn,Gn=yn)}var Vn=[];for(Vn.push(Xe[Gn]),Xe.splice(Gn,1);Xe.length>0;){for(var $n=null,Kn=null,tr=0;tr<Xe.length;tr++){var nr=x(Vn[0],Xe[tr],rt);($n===null||nr<$n)&&($n=nr,Kn=tr)}Vn.push(Xe[Kn]),Xe.splice(Kn,1)}return Vn}(p)}var Ae;return p}(re),Ve=H/u;Ve>1&&(Ve=q()),ee/=_,y.debug("getNextQuality called throughput:".concat(Ve," latency:").concat(ee," bufferSize:").concat(se," currentQualityIndex:").concat(X," playbackRate:").concat(Te));var et=Pe[X],_e=et.bitrate*Ie.getSegmentDuration()/Ee,Oe=Math.max(0,_e-je);if(je-_e<Ie.getMinBuffer())return y.debug("Buffer is low for bitrate= ".concat(et.bitrate," downloadTime=").concat(_e," currentBuffer=").concat(je," rebuffer=").concat(Oe)),function(V,be){var ze=0,Me=V;if(p)for(var De=0;De<p.length;De++){var Ae=p[De];Ae.bitrate<V.bitrate&&Ae.bitrate>ze&&be>Ae.bitrate&&(ze=Ae.bitrate,Me=Ae)}return Me}(et,Ee).qualityIndex;switch(d){case"manual_weight_selection":n=[.4,.4,.4,.4];break;case"random_weight_selection":(function(V){n=function(be,ze){for(var Me=[],De=Math.sqrt(2/be),Ae=0;Ae<4;Ae++)Me.push(Math.random()*De);return n=Me}(V.length)})(Pe);break;default:(function(V,be,ze,Me,De,Ae,xe){n||(n=c[c.length-1]);var Xe=V.findWeightVector(be,ze,Me,De,Ae,xe);Xe!==null&&Xe!==-1&&(n=Xe)})(Ie,Pe,Le,je,Oe,Ee,Te)}for(var _t=null,dt=null,Ze=null,Je=0;Je<Pe.length;Je++){var de=Pe[Je],ge=de.state,Be=[ge.throughput,ge.latency,ge.rebuffer,ge.switch],f=n.slice(),o=Ie.getNextBufferWithBitrate(de.bitrate,je,Ee),v=o<Ie.getMinBuffer();v&&y.debug("Buffer is low for bitrate=".concat(de.bitrate," downloadTime=").concat(_e," currentBuffer=").concat(je," nextBuffer=").concat(o)),(de.bitrate>H-1e4||v)&&de.bitrate!==m&&(f[0]=100);var S=x(Be,[Ve,0,0,0],f);(_t===null||S<_t)&&(_t=S,dt=de.qualityIndex,Ze=de)}var W=Math.abs(et.bitrate-Ze.bitrate)/u;return O(et,Pe,[Ve,ee,Oe,W]),O(Ze,Pe,[Ve,0,0,W]),dt},reset:function(){k()}},y=(0,T.Z)(I).getInstance().getLogger(e),k(),e}t.__dashjs_factory_name="LearningAbrController",we.Z=oe.Z.getClassFactory(t)},5317:function(it,we,M){var oe=M(5448),T=M(2298);function t(){var e,y,p,u,_;function m(){y=null,p=null,u=null,_=null}function n(d,I,k,q){var x=new T.Z;return x.type=d,x.weights.bitrateReward=I||1,x.weights.bitrateSwitchPenalty=1,x.weights.rebufferPenalty=k||1e3,x.weights.latencyPenalty=[],x.weights.latencyPenalty.push({threshold:1.1,penalty:.05*q}),x.weights.latencyPenalty.push({threshold:1e8,penalty:.1*k}),x.weights.playbackSpeedPenalty=q||200,x}function c(d,I,k,q,x){x.bitrateWSum+=x.weights.bitrateReward*d,x.lastBitrate&&(x.bitrateSwitchWSum+=x.weights.bitrateSwitchPenalty*Math.abs(d-x.lastBitrate)),x.lastBitrate=d,x.rebufferWSum+=x.weights.rebufferPenalty*I;for(var $=0;$<x.weights.latencyPenalty.length;$++){var O=x.weights.latencyPenalty[$];if(k<=O.threshold){x.latencyWSum+=O.penalty*k;break}}x.playbackSpeedWSum+=x.weights.playbackSpeedPenalty*Math.abs(1-q),x.totalQoe=x.bitrateWSum-x.bitrateSwitchWSum-x.rebufferWSum-x.latencyWSum-x.playbackSpeedWSum}return e={setupPerSegmentQoe:function(d,I,k){y=n("segment",d,I,k),p=d,u=I,_=k},logSegmentMetrics:function(d,I,k,q){y&&c(d,I,k,q,y)},getPerSegmentQoe:function(){return y},calculateSingleUseQoe:function(d,I,k,q){var x=null;return p&&u&&_&&(x=n("segment",p,u,_)),x?(c(d,I,k,q,x),x.totalQoe):0},reset:function(){m()}},m(),e}t.__dashjs_factory_name="LoLpQoeEvaluator",we.Z=oe.Z.getClassFactory(t)},5435:function(it,we,M){var oe=M(6398),T=M(5448),t=M(4722),e=M(5317),y=M(2068),p=M(3860),u=M(6523),_=M(3393);function m(n){var c,d,I,k,q=(n=n||{}).dashMetrics,x=this.context;return d={getMaxIndex:function($){try{var O=(0,y.Z)(x).create(),K=$.getMediaInfo().type,re=$.getAbrController(),H=$.getStreamInfo(),ee=re.getQualityFor(K,H.id),se=$.getMediaInfo(),Te=q.getCurrentBufferState(K),X=$.getScheduleController(),Ie=q.getCurrentBufferLevel(K,!0),Le=H&&H.manifestInfo?H.manifestInfo.isDynamic:null,je=X.getPlaybackController(),Ee=je.getCurrentLiveLatency();if(!$.useLoLPABR()||K===_.Z.AUDIO)return O;Ee||(Ee=0);var Pe=je.getPlaybackRate(),Ve=re.getThroughputHistory().getSafeAverageThroughput(K,Le);if(c.debug("Throughput ".concat(Math.round(Ve)," kbps")),isNaN(Ve)||!Te||re.getAbandonmentStateFor(H.id,K)===p.Z.ABANDON_LOAD)return O;for(var et=se.bitrateList,_e=$.getRepresentationInfo().fragmentDuration,Oe=et[0].bandwidth/1e3,_t=et[et.length-1].bandwidth/1e3,dt=0;dt<et.length;dt++){var Ze=et[dt].bandwidth/1e3;Ze>_t?_t=Ze:Ze<Oe&&(Oe=Ze)}var Je=et[ee].bandwidth/1e3,de=q.getCurrentHttpRequest(K,!0),ge=(de.tresponse.getTime()-de.trequest.getTime())/1e3,Be=ge>_e?ge-_e:0;k.setupPerSegmentQoe(_e,_t,Oe),k.logSegmentMetrics(Je,Be,Ee,Pe);var f=(0,u.Z)(x).create({targetLatency:1.5,bufferMin:.3,segmentDuration:_e,qoeEvaluator:k});return O.quality=I.getNextQuality(se,1e3*Ve,Ee,Ie,Pe,ee,f),O.reason={throughput:Ve,latency:Ee},O.priority=y.Z.PRIORITY.STRONG,X.setTimeToLoadDelay(0),O.quality!==ee&&c.debug("[TgcLearningRule]["+K+"] requesting switch to index: ",O.quality,"Average throughput",Math.round(Ve),"kbps"),O}catch(o){throw o}},reset:function(){I.reset(),k.reset()}},c=(0,oe.Z)(x).getInstance().getLogger(d),I=(0,t.Z)(x).create(),k=(0,e.Z)(x).create(),d}m.__dashjs_factory_name="LoLPRule",we.Z=T.Z.getClassFactory(m)},6523:function(it,we,M){var oe=M(5448);function T(t){var e,y,p,u,_=t.targetLatency,m=t.bufferMin,n=t.segmentDuration,c=t.qoeEvaluator;function d(){return n}function I(k,q){var x=d();return q>x?k-x:k+x-q}return e={getMinBuffer:function(){return m},getSegmentDuration:d,getNextBufferWithBitrate:function(k,q,x){return I(q,k*n/x)},getNextBuffer:I,findWeightVector:function(k,q,x,$,O,K){var re=null,H=null,ee=null,se=Math.abs(q-p);return k.forEach(function(Te){y.forEach(function(X){X[0];var Ie=X[1],Le=X[2],je=(X[3],Te.bitrate*n/O),Ee=I(x,je),Pe=(Le===0?10:1/Le)*Math.max(1e-5,je-Ee),Ve=(Ie===0?10:1/Ie)*Te.state.latency,et=c.calculateSingleUseQoe(Te.bitrate,Pe,Ve,K);(re===null||et>re)&&function(_e,Oe,_t){return!(_e>_+_t)&&Oe>=m}(q,Ee,se)&&(re=et,H=X,ee=Te.bitrate)})}),H===null&&ee===null&&(H=-1),p=q,H}},y=function k(q,x,$){if($===x)return q;for(var O=q.length,K=0;K<O;K++)for(var re=q.shift(),H=0;H<u.length;H++)q.push(re.concat(u[H]));return k(q,x,$+1)}((u=[.2,.4,.6,.8,1]).map(function(k){return[k]}),4,1),p=0,e}T.__dashjs_factory_name="LoLpWeightSelector",we.Z=oe.Z.getClassFactory(T)},2298:function(it,we){we.Z=function M(){(function(oe,T){if(!(oe instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(it,we,M){M.d(we,{Y:function(){return c}});var oe=M(3393),T=M(1553),t=M(5448),e=M(2128),y=M(2594),p=M(7387),u=M(7417),_=M(9032),m=M(9326),n=M(7802),c=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function d(I){var k,q,x,$,O,K,re,H,ee=this.context,se=I.adapter,Te=I.baseURLController,X=I.streamInfo,Ie=I.timelineConverter,Le=I.debug,je=I.eventBus,Ee=I.events,Pe=I.dashConstants,Ve=(0,y.Z)(ee).getInstance();function et(Oe,_t){var dt=new e.Z;dt.id=Oe.id,dt.bitrate=Oe.bandwidth,dt.width=Oe.width,dt.height=Oe.height,dt.tilesHor=1,dt.tilesVert=1,Oe.essentialProperties&&Oe.essentialProperties.forEach(function(Ze){if(c.indexOf(Ze.schemeIdUri)>=0&&Ze.value){var Je=Ze.value.split("x");Je.length!==2||isNaN(Je[0])||isNaN(Je[1])||(dt.tilesHor=parseInt(Je[0],10),dt.tilesVert=parseInt(Je[1],10))}}),_t?K.updateSegmentData(Oe).then(function(Ze){(function(Je,de,ge){var Be=[],f=function(o,v){var S,W,V,be,ze=[],Me=0;for(S=0,W=o.segments.length;S<W;S++)V=o.segments[S],(be=(0,p.TJ)(Ie,se.getIsDynamic(),v,V.startTime,V.duration,V.timescale,V.media,V.mediaRange,Me))&&(ze.push(be),be=null,Me++);return ze}(ge,de);de.segments=f,Je.segmentDuration=de.segments[0].duration,Je.readThumbnail=function(o,v){var S=null;Be.some(function(W){if(W.start<=o&&W.end>o)return S=W.url,!0}),S?v(S):de.segments.some(function(W){if(W.mediaStartTime<=o&&W.mediaStartTime+W.duration>o){var V=Te.resolve(de.path);return re.load({method:"get",url:V.url,request:{range:W.mediaRange,responseType:"arraybuffer"},onload:function(be){var ze=H.getSamplesInfo(be.target.response),Me=new Blob([be.target.response.slice(ze.sampleList[0].offset,ze.sampleList[0].offset+ze.sampleList[0].size)],{type:"image/jpeg"}),De=window.URL.createObjectURL(Me);Be.push({start:W.mediaStartTime,end:W.mediaStartTime+W.duration,url:De}),v&&v(De)}}),!0}})}})(dt,Oe,Ze)}):(dt.startNumber=Oe.startNumber,dt.segmentDuration=Oe.segmentDuration,dt.timescale=Oe.timescale,dt.templateUrl=function(Ze){var Je=Ve.isRelative(Ze.media)?Ve.resolve(Ze.media,Te.resolve(Ze.path).url):Ze.media;return Je?(0,p.Aj)(Je,Ze.id):""}(Oe)),dt.tilesHor>0&&dt.tilesVert>0&&(dt.widthPerTile=dt.width/dt.tilesHor,dt.heightPerTile=dt.height/dt.tilesVert,q.push(dt))}function _e(){q=[],$=-1,O=null}return k={getTracks:function(){return q},addTracks:function(){if(X&&se&&(O=se.getMediaInfoForType(X,oe.Z.IMAGE))){var Oe=se.getVoRepresentations(O);Oe&&Oe.length>0&&Oe.forEach(function(_t){(_t.segmentInfoType===T.Z.SEGMENT_TEMPLATE&&_t.segmentDuration>0&&_t.media||_t.segmentInfoType===T.Z.SEGMENT_TIMELINE)&&et(_t),_t.segmentInfoType===T.Z.SEGMENT_BASE&&et(_t,!0)}),q.length>0&&q.sort(function(_t,dt){return _t.bitrate-dt.bitrate})}},reset:_e,setTrackByIndex:function(Oe){q&&q.length!==0&&(Oe>=q.length&&(Oe=q.length-1),$=Oe)},getCurrentTrack:function(){return $<0?null:q[$]},getCurrentTrackIndex:function(){return $},getThumbnailRequestForTime:function(Oe){for(var _t,dt=se.getVoRepresentations(O),Ze=0;Ze<dt.length;Ze++)if(q[$].id===dt[Ze].id){_t=dt[Ze];break}return x.getSegmentRequestForTime(O,_t,Oe)}},_e(),re=(0,_.Z)(ee).create({}),H=(0,u.Z)(ee).getInstance(),K=(0,n.Z)(ee).create({events:Ee,eventBus:je,streamInfo:X,timelineConverter:Ie,dashConstants:Pe,dashMetrics:I.dashMetrics,segmentBaseController:I.segmentBaseController,type:oe.Z.IMAGE}),(x=(0,m.Z)(ee).create({streamInfo:X,type:oe.Z.IMAGE,timelineConverter:Ie,segmentsController:K,baseURLController:Te,debug:Le,eventBus:je,events:Ee,dashConstants:Pe,urlUtils:Ve})).initialize(!!se&&se.getIsDynamic()),k}d.__dashjs_factory_name="ThumbnailTracks",we.Z=t.Z.getClassFactory(d)},7417:function(it,we,M){var oe=M(6398),T=M(8260),t=M(5448),e=M(6934),y=M(9597);function p(){var u,_,m=this.context;function n(I){if(!I)return null;I.fileStart===void 0&&(I.fileStart=0);var k=e.parseBuffer(I),q=(0,T.Z)(m).create();return q.setData(k),q}function c(I,k){return I[k+3]>>>0|I[k+2]<<8>>>0|I[k+1]<<16>>>0|I[k]<<24>>>0}function d(I,k){return String.fromCharCode(I[k++])+String.fromCharCode(I[k++])+String.fromCharCode(I[k++])+String.fromCharCode(I[k])}return _={parse:n,findLastTopIsoBoxCompleted:function(I,k,q){if(q===void 0&&(q=0),!k||q+8>=k.byteLength)return new y.Z(0,!1);for(var x,$=k instanceof ArrayBuffer?new Uint8Array(k):k,O=0;q<$.byteLength;){var K=c($,q),re=d($,q+4);if(K===0)break;q+K<=$.byteLength&&(I.indexOf(re)>=0?x=new y.Z(q,!0,K):O=q+K),q+=K}return x||new y.Z(O,!1)},getMediaTimescaleFromMoov:function(I){var k=n(I),q=k?k.getBox("mdhd"):void 0;return q?q.timescale:NaN},getSamplesInfo:function(I){if(!I||I.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var k,q,x,$,O,K,re,H,ee,se,Te,X,Ie,Le,je,Ee,Pe=n(I),Ve=Pe.getBoxes("moof"),et=Pe.getBoxes("mfhd");je=Pe.getBoxes("moof").length,Le=et[et.length-1].sequence_number,q=0,O=[];var _e=-1,Oe=-1;for(se=0;se<Ve.length;se++){var _t=Ve[se],dt=_t.getChildBoxes("traf");for(H=0;H<dt.length;H++){var Ze=dt[H],Je=Ze.getChildBox("tfhd"),de=Ze.getChildBox("tfdt");$=de.baseMediaDecodeTime;var ge=Ze.getChildBoxes("trun"),Be=Ze.getChildBoxes("subs");for(ee=0;ee<ge.length;ee++){var f=ge[ee];for(q=f.sample_count,Ie=(Je.base_data_offset||0)+(f.data_offset||0),re=0;re<q;re++){k=(K=f.samples[re]).sample_duration!==void 0?K.sample_duration:Je.default_sample_duration,x=K.sample_size!==void 0?K.sample_size:Je.default_sample_size;var o={dts:$,cts:$+(K.sample_composition_time_offset!==void 0?K.sample_composition_time_offset:0),duration:k,offset:_t.offset+Ie,size:x,subSizes:[x]};if(Be)for(Te=0;Te<Be.length;Te++){var v=Be[Te];if(_e<v.entry_count-1&&re>Oe&&(_e++,Oe+=v.entries[_e].sample_delta),re==Oe){o.subSizes=[];var S=v.entries[_e];for(X=0;X<S.subsample_count;X++)o.subSizes.push(S.subsamples[X].subsample_size)}}O.push(o),Ie+=x,$+=k}}Ee=$-de.baseMediaDecodeTime}}return{sampleList:O,lastSequenceNumber:Le,totalDuration:Ee,numSequences:je}},findInitRange:function(I){var k=null,q=n(I);if(!q)return k;var x=q.getBox("ftyp"),$=q.getBox("moov");return u.debug("Searching for initialization."),$&&$.isComplete&&(k=(x?x.offset:$.offset)+"-"+($.offset+$.size-1),u.debug("Found the initialization.  Range: "+k)),k},parsePayload:function(I,k,q){if(q===void 0&&(q=0),!k||q+8>=k.byteLength)return new y.Z(0,!1);for(var x,$=k instanceof ArrayBuffer?new Uint8Array(k):k,O=0;q<$.byteLength;){var K=c($,q),re=d($,q+4);if(K===0)break;q+K<=$.byteLength&&(I.indexOf(re)>=0?x=new y.Z(q,!0,K,re):O=q+K),q+=K}return x||new y.Z(O,!1)}},u=(0,oe.Z)(m).getInstance().getLogger(_),_}p.__dashjs_factory_name="BoxParser",we.Z=t.Z.getSingletonFactory(p)},1715:function(it,we,M){M.d(we,{B:function(){return y}});var oe=M(5448),T=M(7803),t=M(3393),e=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function y(){var u="ManagedMediaSource"in window,_="WebKitMediaSource"in window,m="MediaSource"in window;return u||_||m}function p(){var u,_,m;return u={setConfig:function(n){n&&n.settings&&(_=n.settings)},supportsMediaSource:y,supportsEncryptedMedia:function(){return m},supportsCodec:function(n,c){return c!==t.Z.AUDIO&&c!==t.Z.VIDEO?Promise.resolve(!0):function(d,I){return _.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(d.codec&&I===t.Z.AUDIO||I===t.Z.VIDEO&&d.codec&&d.width&&d.height&&d.bitrate&&d.framerate)}(n,c)?function(d,I){return new Promise(function(k){if(d&&d.codec){var q={type:"media-source"};q[I]={},q[I].contentType=d.codec,q[I].width=d.width,q[I].height=d.height,q[I].bitrate=parseInt(d.bitrate),q[I].framerate=parseFloat(d.framerate),navigator.mediaCapabilities.decodingInfo(q).then(function(x){k(x.supported)}).catch(function(){k(!1)})}else k(!1)})}(n,c):function(d){return new Promise(function(I){if(d&&d.codec){var k=d.codec;d.width&&d.height&&(k+=';width="'+d.width+'";height="'+d.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(k)||"MediaSource"in window&&MediaSource.isTypeSupported(k)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(k)?I(!0):I(!1)}else I(!1)})}(n)},setEncryptedMediaSupported:function(n){m=n},supportsEssentialProperty:function(n){try{return T.Y.indexOf(n.schemeIdUri)!==-1||t.Z.FONT_DOWNLOAD_DVB_SCHEME===n.schemeIdUri}catch{return!0}},codecRootCompatibleWithCodec:function(n,c){for(var d,I=n.split(".")[0],k=c.indexOf(I)===0,q=0;q<e.length;q++)if(e[q].codec===I){d=e[q];break}return d?k||d.compatibleCodecs.some(function(x){return c.indexOf(x)===0}):k}},m=!1,u}p.__dashjs_factory_name="Capabilities",we.Z=oe.Z.getSingletonFactory(p)},2295:function(it,we,M){var oe=M(5448),T=M(3106);function t(){return{customTimeRangeArray:[],length:0,add:function(e,y){var p;for(p=0;p<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[p].start;p++);for(this.customTimeRangeArray.splice(p,0,{start:e,end:y}),p=0;p<this.customTimeRangeArray.length-1;p++)this.mergeRanges(p,p+1)&&p--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,y){for(var p=0;p<this.customTimeRangeArray.length;p++)if(e<=this.customTimeRangeArray[p].start&&y>=this.customTimeRangeArray[p].end)this.customTimeRangeArray.splice(p,1),p--;else{if(e>this.customTimeRangeArray[p].start&&y<this.customTimeRangeArray[p].end){this.customTimeRangeArray.splice(p+1,0,{start:y,end:this.customTimeRangeArray[p].end}),this.customTimeRangeArray[p].end=e;break}e>this.customTimeRangeArray[p].start&&e<this.customTimeRangeArray[p].end?this.customTimeRangeArray[p].end=e:y>this.customTimeRangeArray[p].start&&y<this.customTimeRangeArray[p].end&&(this.customTimeRangeArray[p].start=y)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,y){var p=this.customTimeRangeArray[e],u=this.customTimeRangeArray[y];return p.start<=u.start&&u.start<=p.end&&p.end<=u.end?(p.end=u.end,this.customTimeRangeArray.splice(y,1),!0):u.start<=p.start&&p.start<=u.end&&u.end<=p.end?(p.start=u.start,this.customTimeRangeArray.splice(y,1),!0):u.start<=p.start&&p.start<=u.end&&p.end<=u.end?(this.customTimeRangeArray.splice(e,1),!0):p.start<=u.start&&u.start<=p.end&&u.end<=p.end&&(this.customTimeRangeArray.splice(y,1),!0)},start:function(e){return(0,T.SE)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,T.SE)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}t.__dashjs_factory_name="CustomTimeRanges",we.Z=oe.Z.getClassFactory(t)},5:function(it,we,M){var oe=M(5448);function T(){var t,e=/^[a-z][a-z0-9+\-_.]*:/i,y=/^https?:\/\//i,p=/^https:\/\//i,u=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,_=function(x,$){try{return new window.URL(x,$).toString()}catch{return x}},m=function(x,$){var O=n;if(!$||!I(x))return x;k(x)&&(O=c),q(x)&&(O=d);var K=O($),re=K.charAt(K.length-1)!=="/"&&x.charAt(0)!=="/"?"/":"";return[K,x].join(re)};function n(x){var $=x.indexOf("/"),O=x.lastIndexOf("/");return $!==-1?O===$+1?x:(x.indexOf("?")!==-1&&(x=x.substring(0,x.indexOf("?"))),x.substring(0,O+1)):""}function c(x){var $=x.match(u);return $?$[1]:""}function d(x){var $=x.match(e);return $?$[0]:""}function I(x){return!e.test(x)}function k(x){return I(x)&&x.charAt(0)==="/"}function q(x){return x.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),t=_}catch{}finally{t=t||m}}(),{parseBaseUrl:n,parseOrigin:c,parseScheme:d,isRelative:I,isPathAbsolute:k,isSchemeRelative:q,isHTTPURL:function(x){return y.test(x)},isHTTPS:function(x){return p.test(x)},removeHostname:function(x){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(x)[2].substring(1)},resolve:function(x,$){return t(x,$)}}}T.__dashjs_factory_name="DefaultURLUtils",we.Z=oe.Z.getSingletonFactory(T)},8260:function(it,we,M){var oe=M(2839),T=M(5448);function t(){var e;function y(u){var _=[];if(!u||!e||typeof e.fetchAll!="function")return _;for(var m,n=e.fetchAll(u),c=0,d=n.length;c<d;c++)(m=p(n[c]))&&_.push(m);return _}function p(u){if(!u)return null;var _=new oe.Z(u);return u.hasOwnProperty("_incomplete")&&(_.isComplete=!u._incomplete),_}return{getBox:function(u){return u&&e&&e.boxes&&e.boxes.length!==0&&typeof e.fetch=="function"?p(e.fetch(u)):null},getBoxes:y,setData:function(u){e=u},getLastBox:function(){if(!e||!e.boxes||!e.boxes.length)return null;var u=y(e.boxes[e.boxes.length-1].type);return u.length>0?u[u.length-1]:null}}}t.__dashjs_factory_name="IsoFile",we.Z=T.Z.getClassFactory(t)},7473:function(it,we,M){M.d(we,{k:function(){return T}});var oe=M(5448);function T(e,y){var p={url:e.url,method:e.method,headers:Object.assign({},e.headers),credentials:e.withCredentials?"include":void 0,range:e.request.range};return Promise.resolve(y.modifyRequest(p)).then(function(){return Object.assign(e,p,{withCredentials:p.credentials==="include"})})}function t(){return{modifyRequest:null,modifyRequestURL:function(e){return e},modifyRequestHeader:function(e,y){return y.url,e}}}t.__dashjs_factory_name="RequestModifier",we.Z=oe.Z.getSingletonFactory(t)},3106:function(it,we,M){M.d(we,{PS:function(){return t},SE:function(){return e}});var oe=M(3393);function T(y){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},T(y)}function t(y,p){if(T(y)!==p)throw oe.Z.BAD_ARGUMENT_ERROR}function e(y){if(y===null||isNaN(y)||y%1!=0)throw oe.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(it,we,M){var oe=M(5448),T=M(5);function t(){var y,p=[],u=this.context;function _(m,n,c){var d=function(I){var k;for(k=0;k<p.length;k++)if(p[k].regex.test(I))return p[k].utils;return y}(c||n);return d&&typeof d[m]=="function"?d[m](n,c):y[m](n,c)}return y=(0,T.Z)(u).getInstance(),{registerUrlRegex:function(m,n){p.push({regex:m,utils:n})},parseBaseUrl:function(m){return _("parseBaseUrl",m)},parseOrigin:function(m){return _("parseOrigin",m)},parseScheme:function(m){return _("parseScheme",m)},isRelative:function(m){return _("isRelative",m)},isPathAbsolute:function(m){return _("isPathAbsolute",m)},isSchemeRelative:function(m){return _("isSchemeRelative",m)},isHTTPURL:function(m){return _("isHTTPURL",m)},isHTTPS:function(m){return _("isHTTPS",m)},removeHostname:function(m){return _("removeHostname",m)},resolve:function(m,n){return _("resolve",m,n)}}}t.__dashjs_factory_name="URLUtils";var e=oe.Z.getSingletonFactory(t);we.Z=e},5459:function(it,we){we.Z=function M(oe,T,t){(function(e,y){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.code=oe||null,this.message=T||null,this.data=t||null}},3186:function(it,we,M){var oe=M(7855);function T(e,y){for(var p=0;p<y.length;p++){var u=y[p];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}var t=function(){function e(u){(function(_,m){if(!(_ instanceof m))throw new TypeError("Cannot call a class as a function")})(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=u||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var y,p;return y=e,(p=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===oe.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(u){this.type=u&&u.init?oe.w.INIT_SEGMENT_TYPE:oe.w.MEDIA_SEGMENT_TYPE,this.url=u&&u.url?u.url:null,this.range=u&&u.range?u.range.start+"-"+u.range.end:null,this.mediaType=u&&u.mediaType?u.mediaType:null}}])&&T(y.prototype,p),e}();t.ACTION_DOWNLOAD="download",t.ACTION_COMPLETE="complete",we.Z=t},2839:function(it,we){function M(T,t){for(var e=0;e<t.length;e++){var y=t[e];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(T,y.key,y)}}var oe=function(){function T(y){if(function(d,I){if(!(d instanceof I))throw new TypeError("Cannot call a class as a function")}(this,T),this.offset=y._offset,this.type=y.type,this.size=y.size,this.boxes=[],y.boxes)for(var p=0;p<y.boxes.length;p++)this.boxes.push(new T(y.boxes[p]));switch(this.isComplete=!0,y.type){case"sidx":if(this.timescale=y.timescale,this.earliest_presentation_time=y.earliest_presentation_time,this.first_offset=y.first_offset,this.references=y.references,y.references){this.references=[];for(var u=0;u<y.references.length;u++){var _={reference_type:y.references[u].reference_type,referenced_size:y.references[u].referenced_size,subsegment_duration:y.references[u].subsegment_duration};this.references.push(_)}}break;case"emsg":this.id=y.id,this.version=y.version===1?1:0,this.value=y.value,this.timescale=y.timescale,this.scheme_id_uri=y.scheme_id_uri,this.presentation_time_delta=y.version===1?y.presentation_time:y.presentation_time_delta,this.event_duration=y.event_duration,this.message_data=y.message_data;break;case"mdhd":this.timescale=y.timescale;break;case"mfhd":this.sequence_number=y.sequence_number;break;case"subs":this.entry_count=y.entry_count,this.entries=y.entries;break;case"tfhd":this.base_data_offset=y.base_data_offset,this.sample_description_index=y.sample_description_index,this.default_sample_duration=y.default_sample_duration,this.default_sample_size=y.default_sample_size,this.default_sample_flags=y.default_sample_flags,this.flags=y.flags;break;case"tfdt":this.version=y.version,this.baseMediaDecodeTime=y.baseMediaDecodeTime,this.flags=y.flags;break;case"trun":if(this.sample_count=y.sample_count,this.first_sample_flags=y.first_sample_flags,this.data_offset=y.data_offset,this.flags=y.flags,this.samples=y.samples,y.samples){this.samples=[];for(var m=0,n=y.samples.length;m<n;m++){var c={sample_size:y.samples[m].sample_size,sample_duration:y.samples[m].sample_duration,sample_composition_time_offset:y.samples[m].sample_composition_time_offset};this.samples.push(c)}}break;case"prft":this.version=y.version,this.reference_track_ID=y.reference_track_ID,this.ntp_timestamp_sec=y.ntp_timestamp_sec,this.ntp_timestamp_frac=y.ntp_timestamp_frac,this.media_time=y.media_time,this.flags=y.flags}}var t,e;return t=T,(e=[{key:"getChildBox",value:function(y){for(var p=0;p<this.boxes.length;p++)if(this.boxes[p].type===y)return this.boxes[p]}},{key:"getChildBoxes",value:function(y){for(var p=[],u=0;u<this.boxes.length;u++)this.boxes[u].type===y&&p.push(this.boxes[u]);return p}}])&&M(t.prototype,e),T}();we.Z=oe},9597:function(it,we){we.Z=function M(oe,T,t){(function(e,y){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.lastCompletedOffset=oe,this.found=T,this.size=t}},2128:function(it,we){we.Z=function M(){(function(oe,T){if(!(oe instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(it,we,M){function oe(e,y){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")}M.d(we,{O:function(){return t},w:function(){return T}});var T=function e(){oe(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},t=function e(){oe(this,e),this.s=null,this.d=null,this.b=[]};T.GET="GET",T.HEAD="HEAD",T.MPD_TYPE="MPD",T.XLINK_EXPANSION_TYPE="XLinkExpansion",T.INIT_SEGMENT_TYPE="InitializationSegment",T.INDEX_SEGMENT_TYPE="IndexSegment",T.MEDIA_SEGMENT_TYPE="MediaSegment",T.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",T.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",T.DVB_REPORTING_TYPE="DVBReporting",T.LICENSE="license",T.CONTENT_STEERING_TYPE="ContentSteering",T.OTHER_TYPE="other"},3039:function(it,we){function M(T,t){return function(e,y){for(var p,u,_,m=oe(e,"tag"),n=oe(y??"*","range"),c=[],d=-1;++d<n.length;)if(p=n[d].toLowerCase(),t||p!=="*"){for(u=-1,_=[];++u<m.length;)if(T(m[u].toLowerCase(),p)){if(!t)return m[u];c.push(m[u])}else _.push(m[u]);m=_}return t?c:void 0}}function oe(T,t){var e=T&&typeof T=="string"?[T]:T;if(!e||typeof e!="object"||!("length"in e))throw new Error("Invalid "+t+" `"+e+"`, expected non-empty string");return e}we.basicFilter=M(function(T,t){return t==="*"||T===t||T.indexOf(t+"-")>-1},!0),we.extendedFilter=M(function(T,t){var e=T.split("-"),y=t.split("-"),p=0,u=0;if(y[u]!=="*"&&e[p]!==y[u])return!1;for(p++,u++;u<y.length;)if(y[u]!=="*"){if(!e[p])return!1;if(e[p]!==y[u]){if(e[p].length===1)return!1;p++}else p++,u++}else u++;return!0},!0),we.lookup=M(function(T,t){for(var e,y=t;;){if(y==="*"||T===y)return!0;if((e=y.lastIndexOf("-"))<0)return!1;y.charAt(e-2)==="-"&&(e-=2),y=y.slice(0,e)}})},3973:function(it,we,M){it.exports=M(3854)},3854:function(it,we,M){var oe=M(2415),T=M(3039),t=M(7778),e=M(5813),y=M(3165),p=M(9460);it.exports=function(k,q){var x,$=q||{},O=oe.parse(String(k||"").toLowerCase(),$),K=oe.stringify(O),re=-1;if(!K)return K;for(;++re<t.length;)T.extendedFilter(K,t[re].from).length&&(n(O,t[re].from,t[re].to),K=oe.stringify(O));for(re=-1;++re<e.length;)c(O,e[re].from.field,e[re].from.value)&&d(O,e[re].to.field,e[re].to.value);for(K=oe.stringify(Object.assign({},O,m)),re=-1;++re<y.length;)K===y[re]&&(n(O,y[re],y[re].split("-").slice(0,-1).join("-")),K=oe.stringify(Object.assign({},O,m)));if(O.extensions.sort(I),$.warning)for(x in p)u.call(p[x],O[x])&&$.warning("Deprecated "+x+" `"+O[x]+"`, expected one of `"+p[x][O[x]].join("`, `")+"`",null,7);return O.script&&(O.script=O.script.charAt(0).toUpperCase()+O.script.slice(1)),O.region&&(O.region=O.region.toUpperCase()),oe.stringify(O)};var u={}.hasOwnProperty,_=new Intl.Collator,m={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function n(k,q,x){var $,O=oe.parse(q),K=oe.parse(x),re=[];for($ in O)O[$]&&O[$].length&&c(k,$,O[$])&&re.push($);for($ in K)K[$]&&K[$].length&&(re.indexOf($)>-1||!k[$]||!k[$].length)&&d(k,$,K[$])}function c(k,q,x){var $,O,K,re,H=!1;if(x){if(O=$=k[q],$&&typeof $=="object")for(O=[],K=-1;++K<$.length;)re=$[K],x.indexOf(re)<0?O.push(re):H=!0;else $===x&&(O=null,H=!0);k[q]=O}return H}function d(k,q,x){var $,O,K,re=k[q];if(re&&typeof re=="object")for($=[].concat(x),O=-1;++O<$.length;)K=$[O],re.indexOf(K)<0&&re.push(K);else k[q]=x}function I(k,q){return _.compare(k.singleton,q.singleton)}},2415:function(it,we,M){we.parse=M(6903),we.stringify=M(6713)},6903:function(it,we,M){var oe=M(2219),T=M(3516),t=M(395),e=M(858),y=M(8589);it.exports=function u(_,m){var n,c,d,I=m||{},k={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},q=String(_),x=q.toLowerCase(),$=0;if(_==null)throw new Error("Expected string, got `"+_+"`");if(p.call(y,x))return(I.normalize==null||I.normalize)&&y[x]?u(y[x]):(k[e.indexOf(x)===-1?"irregular":"regular"]=q,k);for(;T(x.charCodeAt($))&&$<9;)$++;if($>1&&$<9){if(k.language=q.slice(0,$),$<4)for(c=0;x.charCodeAt($)===45&&T(x.charCodeAt($+1))&&T(x.charCodeAt($+2))&&T(x.charCodeAt($+3))&&!T(x.charCodeAt($+4));){if(c>2)return O($,3,"Too many extended language subtags, expected at most 3 subtags");k.extendedLanguageSubtags.push(q.slice($+1,$+4)),$+=4,c++}for(x.charCodeAt($)===45&&T(x.charCodeAt($+1))&&T(x.charCodeAt($+2))&&T(x.charCodeAt($+3))&&T(x.charCodeAt($+4))&&!T(x.charCodeAt($+5))&&(k.script=q.slice($+1,$+5),$+=5),x.charCodeAt($)===45&&(T(x.charCodeAt($+1))&&T(x.charCodeAt($+2))&&!T(x.charCodeAt($+3))?(k.region=q.slice($+1,$+3),$+=3):t(x.charCodeAt($+1))&&t(x.charCodeAt($+2))&&t(x.charCodeAt($+3))&&!t(x.charCodeAt($+4))&&(k.region=q.slice($+1,$+4),$+=4));x.charCodeAt($)===45;){for(d=n=$+1;oe(x.charCodeAt(d));){if(d-n>7)return O(d,1,"Too long variant, expected at most 8 characters");d++}if(!(d-n>4||d-n>3&&t(x.charCodeAt(n))))break;k.variants.push(q.slice(n,d)),$=d}for(;x.charCodeAt($)===45&&x.charCodeAt($+1)!==120&&oe(x.charCodeAt($+1))&&x.charCodeAt($+2)===45&&oe(x.charCodeAt($+3));){for(d=$+2,c=0;x.charCodeAt(d)===45&&oe(x.charCodeAt(d+1))&&oe(x.charCodeAt(d+2));)for(d=(n=d+1)+2,c++;oe(x.charCodeAt(d));){if(d-n>7)return O(d,2,"Too long extension, expected at most 8 characters");d++}if(!c)return O(d,4,"Empty extension, extensions must have at least 2 characters of content");k.extensions.push({singleton:q.charAt($+1),extensions:q.slice($+3,d).split("-")}),$=d}}else $=0;if($===0&&x.charCodeAt($)===120||x.charCodeAt($)===45&&x.charCodeAt($+1)===120)for(d=$=$?$+2:1;x.charCodeAt(d)===45&&oe(x.charCodeAt(d+1));){for(d=n=$+1;oe(x.charCodeAt(d));){if(d-n>7)return O(d,5,"Too long private-use area, expected at most 8 characters");d++}k.privateuse.push(q.slice($+1,d)),$=d}return $!==q.length?O($,6,"Found superfluous content after tag"):k;function O(K,re,H){return I.warning&&I.warning(H,re,K),I.forgiving?k:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var p={}.hasOwnProperty},6713:function(it){it.exports=function(we){var M,oe,T,t=we||{},e=[];if(t.irregular||t.regular)return t.irregular||t.regular;if(t.language)for(e=e.concat(t.language,t.extendedLanguageSubtags||[],t.script||[],t.region||[],t.variants||[]),M=t.extensions||[],oe=-1;++oe<M.length;)(T=M[oe]).singleton&&T.extensions&&T.extensions.length&&(e=e.concat(T.singleton,T.extensions));return t.privateuse&&t.privateuse.length&&(e=e.concat("x",t.privateuse)),e.join("-")}},1549:function(it,we,M){var oe=M(6693),T=M(2165),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;we.Buffer=p,we.SlowBuffer=function(f){return+f!=f&&(f=0),p.alloc(+f)},we.INSPECT_MAX_BYTES=50;var e=2147483647;function y(f){if(f>e)throw new RangeError('The value "'+f+'" is invalid for option "size"');var o=new Uint8Array(f);return Object.setPrototypeOf(o,p.prototype),o}function p(f,o,v){if(typeof f=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(f)}return u(f,o,v)}function u(f,o,v){if(typeof f=="string")return function(V,be){if(typeof be=="string"&&be!==""||(be="utf8"),!p.isEncoding(be))throw new TypeError("Unknown encoding: "+be);var ze=0|I(V,be),Me=y(ze),De=Me.write(V,be);return De!==ze&&(Me=Me.slice(0,De)),Me}(f,o);if(ArrayBuffer.isView(f))return function(V){if(de(V,Uint8Array)){var be=new Uint8Array(V);return c(be.buffer,be.byteOffset,be.byteLength)}return n(V)}(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(de(f,ArrayBuffer)||f&&de(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(de(f,SharedArrayBuffer)||f&&de(f.buffer,SharedArrayBuffer)))return c(f,o,v);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var S=f.valueOf&&f.valueOf();if(S!=null&&S!==f)return p.from(S,o,v);var W=function(V){if(p.isBuffer(V)){var be=0|d(V.length),ze=y(be);return ze.length===0||V.copy(ze,0,0,be),ze}return V.length!==void 0?typeof V.length!="number"||ge(V.length)?y(0):n(V):V.type==="Buffer"&&Array.isArray(V.data)?n(V.data):void 0}(f);if(W)return W;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return p.from(f[Symbol.toPrimitive]("string"),o,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}function _(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function m(f){return _(f),y(f<0?0:0|d(f))}function n(f){for(var o=f.length<0?0:0|d(f.length),v=y(o),S=0;S<o;S+=1)v[S]=255&f[S];return v}function c(f,o,v){if(o<0||f.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<o+(v||0))throw new RangeError('"length" is outside of buffer bounds');var S;return S=o===void 0&&v===void 0?new Uint8Array(f):v===void 0?new Uint8Array(f,o):new Uint8Array(f,o,v),Object.setPrototypeOf(S,p.prototype),S}function d(f){if(f>=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e.toString(16)+" bytes");return 0|f}function I(f,o){if(p.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||de(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var v=f.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&v===0)return 0;for(var W=!1;;)switch(o){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return dt(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*v;case"hex":return v>>>1;case"base64":return Ze(f).length;default:if(W)return S?-1:dt(f).length;o=(""+o).toLowerCase(),W=!0}}function k(f,o,v){var S=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0)<=(o>>>=0))return"";for(f||(f="utf8");;)switch(f){case"hex":return je(this,o,v);case"utf8":case"utf-8":return Te(this,o,v);case"ascii":return Ie(this,o,v);case"latin1":case"binary":return Le(this,o,v);case"base64":return se(this,o,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,o,v);default:if(S)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),S=!0}}function q(f,o,v){var S=f[o];f[o]=f[v],f[v]=S}function x(f,o,v,S,W){if(f.length===0)return-1;if(typeof v=="string"?(S=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),ge(v=+v)&&(v=W?0:f.length-1),v<0&&(v=f.length+v),v>=f.length){if(W)return-1;v=f.length-1}else if(v<0){if(!W)return-1;v=0}if(typeof o=="string"&&(o=p.from(o,S)),p.isBuffer(o))return o.length===0?-1:$(f,o,v,S,W);if(typeof o=="number")return o&=255,typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(f,o,v):Uint8Array.prototype.lastIndexOf.call(f,o,v):$(f,[o],v,S,W);throw new TypeError("val must be string, number or Buffer")}function $(f,o,v,S,W){var V,be=1,ze=f.length,Me=o.length;if(S!==void 0&&((S=String(S).toLowerCase())==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(f.length<2||o.length<2)return-1;be=2,ze/=2,Me/=2,v/=2}function De(mt,rt){return be===1?mt[rt]:mt.readUInt16BE(rt*be)}if(W){var Ae=-1;for(V=v;V<ze;V++)if(De(f,V)===De(o,Ae===-1?0:V-Ae)){if(Ae===-1&&(Ae=V),V-Ae+1===Me)return Ae*be}else Ae!==-1&&(V-=V-Ae),Ae=-1}else for(v+Me>ze&&(v=ze-Me),V=v;V>=0;V--){for(var xe=!0,Xe=0;Xe<Me;Xe++)if(De(f,V+Xe)!==De(o,Xe)){xe=!1;break}if(xe)return V}return-1}function O(f,o,v,S){v=Number(v)||0;var W=f.length-v;S?(S=Number(S))>W&&(S=W):S=W;var V=o.length;S>V/2&&(S=V/2);for(var be=0;be<S;++be){var ze=parseInt(o.substr(2*be,2),16);if(ge(ze))return be;f[v+be]=ze}return be}function K(f,o,v,S){return Je(dt(o,f.length-v),f,v,S)}function re(f,o,v,S){return Je(function(W){for(var V=[],be=0;be<W.length;++be)V.push(255&W.charCodeAt(be));return V}(o),f,v,S)}function H(f,o,v,S){return Je(Ze(o),f,v,S)}function ee(f,o,v,S){return Je(function(W,V){for(var be,ze,Me,De=[],Ae=0;Ae<W.length&&!((V-=2)<0);++Ae)ze=(be=W.charCodeAt(Ae))>>8,Me=be%256,De.push(Me),De.push(ze);return De}(o,f.length-v),f,v,S)}function se(f,o,v){return o===0&&v===f.length?oe.fromByteArray(f):oe.fromByteArray(f.slice(o,v))}function Te(f,o,v){v=Math.min(f.length,v);for(var S=[],W=o;W<v;){var V,be,ze,Me,De=f[W],Ae=null,xe=De>239?4:De>223?3:De>191?2:1;if(W+xe<=v)switch(xe){case 1:De<128&&(Ae=De);break;case 2:(192&(V=f[W+1]))==128&&(Me=(31&De)<<6|63&V)>127&&(Ae=Me);break;case 3:V=f[W+1],be=f[W+2],(192&V)==128&&(192&be)==128&&(Me=(15&De)<<12|(63&V)<<6|63&be)>2047&&(Me<55296||Me>57343)&&(Ae=Me);break;case 4:V=f[W+1],be=f[W+2],ze=f[W+3],(192&V)==128&&(192&be)==128&&(192&ze)==128&&(Me=(15&De)<<18|(63&V)<<12|(63&be)<<6|63&ze)>65535&&Me<1114112&&(Ae=Me)}Ae===null?(Ae=65533,xe=1):Ae>65535&&(Ae-=65536,S.push(Ae>>>10&1023|55296),Ae=56320|1023&Ae),S.push(Ae),W+=xe}return function(Xe){var mt=Xe.length;if(mt<=X)return String.fromCharCode.apply(String,Xe);for(var rt="",Zt=0;Zt<mt;)rt+=String.fromCharCode.apply(String,Xe.slice(Zt,Zt+=X));return rt}(S)}we.kMaxLength=e,p.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(f,o),f.foo()===42}catch{return!1}}(),p.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(f,o,v){return u(f,o,v)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(f,o,v){return function(S,W,V){return _(S),S<=0?y(S):W!==void 0?typeof V=="string"?y(S).fill(W,V):y(S).fill(W):y(S)}(f,o,v)},p.allocUnsafe=function(f){return m(f)},p.allocUnsafeSlow=function(f){return m(f)},p.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==p.prototype},p.compare=function(f,o){if(de(f,Uint8Array)&&(f=p.from(f,f.offset,f.byteLength)),de(o,Uint8Array)&&(o=p.from(o,o.offset,o.byteLength)),!p.isBuffer(f)||!p.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===o)return 0;for(var v=f.length,S=o.length,W=0,V=Math.min(v,S);W<V;++W)if(f[W]!==o[W]){v=f[W],S=o[W];break}return v<S?-1:S<v?1:0},p.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(f,o){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return p.alloc(0);var v;if(o===void 0)for(o=0,v=0;v<f.length;++v)o+=f[v].length;var S=p.allocUnsafe(o),W=0;for(v=0;v<f.length;++v){var V=f[v];if(de(V,Uint8Array))W+V.length>S.length?p.from(V).copy(S,W):Uint8Array.prototype.set.call(S,V,W);else{if(!p.isBuffer(V))throw new TypeError('"list" argument must be an Array of Buffers');V.copy(S,W)}W+=V.length}return S},p.byteLength=I,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var f=this.length;if(f%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<f;o+=2)q(this,o,o+1);return this},p.prototype.swap32=function(){var f=this.length;if(f%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<f;o+=4)q(this,o,o+3),q(this,o+1,o+2);return this},p.prototype.swap64=function(){var f=this.length;if(f%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<f;o+=8)q(this,o,o+7),q(this,o+1,o+6),q(this,o+2,o+5),q(this,o+3,o+4);return this},p.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?Te(this,0,f):k.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(f){if(!p.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f||p.compare(this,f)===0},p.prototype.inspect=function(){var f="",o=we.INSPECT_MAX_BYTES;return f=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(f+=" ... "),"<Buffer "+f+">"},t&&(p.prototype[t]=p.prototype.inspect),p.prototype.compare=function(f,o,v,S,W){if(de(f,Uint8Array)&&(f=p.from(f,f.offset,f.byteLength)),!p.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(o===void 0&&(o=0),v===void 0&&(v=f?f.length:0),S===void 0&&(S=0),W===void 0&&(W=this.length),o<0||v>f.length||S<0||W>this.length)throw new RangeError("out of range index");if(S>=W&&o>=v)return 0;if(S>=W)return-1;if(o>=v)return 1;if(this===f)return 0;for(var V=(W>>>=0)-(S>>>=0),be=(v>>>=0)-(o>>>=0),ze=Math.min(V,be),Me=this.slice(S,W),De=f.slice(o,v),Ae=0;Ae<ze;++Ae)if(Me[Ae]!==De[Ae]){V=Me[Ae],be=De[Ae];break}return V<be?-1:be<V?1:0},p.prototype.includes=function(f,o,v){return this.indexOf(f,o,v)!==-1},p.prototype.indexOf=function(f,o,v){return x(this,f,o,v,!0)},p.prototype.lastIndexOf=function(f,o,v){return x(this,f,o,v,!1)},p.prototype.write=function(f,o,v,S){if(o===void 0)S="utf8",v=this.length,o=0;else if(v===void 0&&typeof o=="string")S=o,v=this.length,o=0;else{if(!isFinite(o))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");o>>>=0,isFinite(v)?(v>>>=0,S===void 0&&(S="utf8")):(S=v,v=void 0)}var W=this.length-o;if((v===void 0||v>W)&&(v=W),f.length>0&&(v<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");S||(S="utf8");for(var V=!1;;)switch(S){case"hex":return O(this,f,o,v);case"utf8":case"utf-8":return K(this,f,o,v);case"ascii":case"latin1":case"binary":return re(this,f,o,v);case"base64":return H(this,f,o,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,f,o,v);default:if(V)throw new TypeError("Unknown encoding: "+S);S=(""+S).toLowerCase(),V=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;function Ie(f,o,v){var S="";v=Math.min(f.length,v);for(var W=o;W<v;++W)S+=String.fromCharCode(127&f[W]);return S}function Le(f,o,v){var S="";v=Math.min(f.length,v);for(var W=o;W<v;++W)S+=String.fromCharCode(f[W]);return S}function je(f,o,v){var S=f.length;(!o||o<0)&&(o=0),(!v||v<0||v>S)&&(v=S);for(var W="",V=o;V<v;++V)W+=Be[f[V]];return W}function Ee(f,o,v){for(var S=f.slice(o,v),W="",V=0;V<S.length-1;V+=2)W+=String.fromCharCode(S[V]+256*S[V+1]);return W}function Pe(f,o,v){if(f%1!=0||f<0)throw new RangeError("offset is not uint");if(f+o>v)throw new RangeError("Trying to access beyond buffer length")}function Ve(f,o,v,S,W,V){if(!p.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>W||o<V)throw new RangeError('"value" argument is out of bounds');if(v+S>f.length)throw new RangeError("Index out of range")}function et(f,o,v,S,W,V){if(v+S>f.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function _e(f,o,v,S,W){return o=+o,v>>>=0,W||et(f,0,v,4),T.write(f,o,v,S,23,4),v+4}function Oe(f,o,v,S,W){return o=+o,v>>>=0,W||et(f,0,v,8),T.write(f,o,v,S,52,8),v+8}p.prototype.slice=function(f,o){var v=this.length;(f=~~f)<0?(f+=v)<0&&(f=0):f>v&&(f=v),(o=o===void 0?v:~~o)<0?(o+=v)<0&&(o=0):o>v&&(o=v),o<f&&(o=f);var S=this.subarray(f,o);return Object.setPrototypeOf(S,p.prototype),S},p.prototype.readUintLE=p.prototype.readUIntLE=function(f,o,v){f>>>=0,o>>>=0,v||Pe(f,o,this.length);for(var S=this[f],W=1,V=0;++V<o&&(W*=256);)S+=this[f+V]*W;return S},p.prototype.readUintBE=p.prototype.readUIntBE=function(f,o,v){f>>>=0,o>>>=0,v||Pe(f,o,this.length);for(var S=this[f+--o],W=1;o>0&&(W*=256);)S+=this[f+--o]*W;return S},p.prototype.readUint8=p.prototype.readUInt8=function(f,o){return f>>>=0,o||Pe(f,1,this.length),this[f]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(f,o){return f>>>=0,o||Pe(f,2,this.length),this[f]|this[f+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(f,o){return f>>>=0,o||Pe(f,2,this.length),this[f]<<8|this[f+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(f,o){return f>>>=0,o||Pe(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(f,o){return f>>>=0,o||Pe(f,4,this.length),16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])},p.prototype.readIntLE=function(f,o,v){f>>>=0,o>>>=0,v||Pe(f,o,this.length);for(var S=this[f],W=1,V=0;++V<o&&(W*=256);)S+=this[f+V]*W;return S>=(W*=128)&&(S-=Math.pow(2,8*o)),S},p.prototype.readIntBE=function(f,o,v){f>>>=0,o>>>=0,v||Pe(f,o,this.length);for(var S=o,W=1,V=this[f+--S];S>0&&(W*=256);)V+=this[f+--S]*W;return V>=(W*=128)&&(V-=Math.pow(2,8*o)),V},p.prototype.readInt8=function(f,o){return f>>>=0,o||Pe(f,1,this.length),128&this[f]?-1*(255-this[f]+1):this[f]},p.prototype.readInt16LE=function(f,o){f>>>=0,o||Pe(f,2,this.length);var v=this[f]|this[f+1]<<8;return 32768&v?4294901760|v:v},p.prototype.readInt16BE=function(f,o){f>>>=0,o||Pe(f,2,this.length);var v=this[f+1]|this[f]<<8;return 32768&v?4294901760|v:v},p.prototype.readInt32LE=function(f,o){return f>>>=0,o||Pe(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},p.prototype.readInt32BE=function(f,o){return f>>>=0,o||Pe(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},p.prototype.readFloatLE=function(f,o){return f>>>=0,o||Pe(f,4,this.length),T.read(this,f,!0,23,4)},p.prototype.readFloatBE=function(f,o){return f>>>=0,o||Pe(f,4,this.length),T.read(this,f,!1,23,4)},p.prototype.readDoubleLE=function(f,o){return f>>>=0,o||Pe(f,8,this.length),T.read(this,f,!0,52,8)},p.prototype.readDoubleBE=function(f,o){return f>>>=0,o||Pe(f,8,this.length),T.read(this,f,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(f,o,v,S){f=+f,o>>>=0,v>>>=0,S||Ve(this,f,o,v,Math.pow(2,8*v)-1,0);var W=1,V=0;for(this[o]=255&f;++V<v&&(W*=256);)this[o+V]=f/W&255;return o+v},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(f,o,v,S){f=+f,o>>>=0,v>>>=0,S||Ve(this,f,o,v,Math.pow(2,8*v)-1,0);var W=v-1,V=1;for(this[o+W]=255&f;--W>=0&&(V*=256);)this[o+W]=f/V&255;return o+v},p.prototype.writeUint8=p.prototype.writeUInt8=function(f,o,v){return f=+f,o>>>=0,v||Ve(this,f,o,1,255,0),this[o]=255&f,o+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(f,o,v){return f=+f,o>>>=0,v||Ve(this,f,o,2,65535,0),this[o]=255&f,this[o+1]=f>>>8,o+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(f,o,v){return f=+f,o>>>=0,v||Ve(this,f,o,2,65535,0),this[o]=f>>>8,this[o+1]=255&f,o+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(f,o,v){return f=+f,o>>>=0,v||Ve(this,f,o,4,4294967295,0),this[o+3]=f>>>24,this[o+2]=f>>>16,this[o+1]=f>>>8,this[o]=255&f,o+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(f,o,v){return f=+f,o>>>=0,v||Ve(this,f,o,4,4294967295,0),this[o]=f>>>24,this[o+1]=f>>>16,this[o+2]=f>>>8,this[o+3]=255&f,o+4},p.prototype.writeIntLE=function(f,o,v,S){if(f=+f,o>>>=0,!S){var W=Math.pow(2,8*v-1);Ve(this,f,o,v,W-1,-W)}var V=0,be=1,ze=0;for(this[o]=255&f;++V<v&&(be*=256);)f<0&&ze===0&&this[o+V-1]!==0&&(ze=1),this[o+V]=(f/be>>0)-ze&255;return o+v},p.prototype.writeIntBE=function(f,o,v,S){if(f=+f,o>>>=0,!S){var W=Math.pow(2,8*v-1);Ve(this,f,o,v,W-1,-W)}var V=v-1,be=1,ze=0;for(this[o+V]=255&f;--V>=0&&(be*=256);)f<0&&ze===0&&this[o+V+1]!==0&&(ze=1),this[o+V]=(f/be>>0)-ze&255;return o+v},p.prototype.writeInt8=function(f,o,v){return f=+f,o>>>=0,v||Ve(this,f,o,1,127,-128),f<0&&(f=255+f+1),this[o]=255&f,o+1},p.prototype.writeInt16LE=function(f,o,v){return f=+f,o>>>=0,v||Ve(this,f,o,2,32767,-32768),this[o]=255&f,this[o+1]=f>>>8,o+2},p.prototype.writeInt16BE=function(f,o,v){return f=+f,o>>>=0,v||Ve(this,f,o,2,32767,-32768),this[o]=f>>>8,this[o+1]=255&f,o+2},p.prototype.writeInt32LE=function(f,o,v){return f=+f,o>>>=0,v||Ve(this,f,o,4,2147483647,-2147483648),this[o]=255&f,this[o+1]=f>>>8,this[o+2]=f>>>16,this[o+3]=f>>>24,o+4},p.prototype.writeInt32BE=function(f,o,v){return f=+f,o>>>=0,v||Ve(this,f,o,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[o]=f>>>24,this[o+1]=f>>>16,this[o+2]=f>>>8,this[o+3]=255&f,o+4},p.prototype.writeFloatLE=function(f,o,v){return _e(this,f,o,!0,v)},p.prototype.writeFloatBE=function(f,o,v){return _e(this,f,o,!1,v)},p.prototype.writeDoubleLE=function(f,o,v){return Oe(this,f,o,!0,v)},p.prototype.writeDoubleBE=function(f,o,v){return Oe(this,f,o,!1,v)},p.prototype.copy=function(f,o,v,S){if(!p.isBuffer(f))throw new TypeError("argument should be a Buffer");if(v||(v=0),S||S===0||(S=this.length),o>=f.length&&(o=f.length),o||(o=0),S>0&&S<v&&(S=v),S===v||f.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("sourceEnd out of bounds");S>this.length&&(S=this.length),f.length-o<S-v&&(S=f.length-o+v);var W=S-v;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,v,S):Uint8Array.prototype.set.call(f,this.subarray(v,S),o),W},p.prototype.fill=function(f,o,v,S){if(typeof f=="string"){if(typeof o=="string"?(S=o,o=0,v=this.length):typeof v=="string"&&(S=v,v=this.length),S!==void 0&&typeof S!="string")throw new TypeError("encoding must be a string");if(typeof S=="string"&&!p.isEncoding(S))throw new TypeError("Unknown encoding: "+S);if(f.length===1){var W=f.charCodeAt(0);(S==="utf8"&&W<128||S==="latin1")&&(f=W)}}else typeof f=="number"?f&=255:typeof f=="boolean"&&(f=Number(f));if(o<0||this.length<o||this.length<v)throw new RangeError("Out of range index");if(v<=o)return this;var V;if(o>>>=0,v=v===void 0?this.length:v>>>0,f||(f=0),typeof f=="number")for(V=o;V<v;++V)this[V]=f;else{var be=p.isBuffer(f)?f:p.from(f,S),ze=be.length;if(ze===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(V=0;V<v-o;++V)this[V+o]=be[V%ze]}return this};var _t=/[^+/0-9A-Za-z-_]/g;function dt(f,o){var v;o=o||1/0;for(var S=f.length,W=null,V=[],be=0;be<S;++be){if((v=f.charCodeAt(be))>55295&&v<57344){if(!W){if(v>56319){(o-=3)>-1&&V.push(239,191,189);continue}if(be+1===S){(o-=3)>-1&&V.push(239,191,189);continue}W=v;continue}if(v<56320){(o-=3)>-1&&V.push(239,191,189),W=v;continue}v=65536+(W-55296<<10|v-56320)}else W&&(o-=3)>-1&&V.push(239,191,189);if(W=null,v<128){if((o-=1)<0)break;V.push(v)}else if(v<2048){if((o-=2)<0)break;V.push(v>>6|192,63&v|128)}else if(v<65536){if((o-=3)<0)break;V.push(v>>12|224,v>>6&63|128,63&v|128)}else{if(!(v<1114112))throw new Error("Invalid code point");if((o-=4)<0)break;V.push(v>>18|240,v>>12&63|128,v>>6&63|128,63&v|128)}}return V}function Ze(f){return oe.toByteArray(function(o){if((o=(o=o.split("=")[0]).trim().replace(_t,"")).length<2)return"";for(;o.length%4!=0;)o+="=";return o}(f))}function Je(f,o,v,S){for(var W=0;W<S&&!(W+v>=o.length||W>=f.length);++W)o[W+v]=f[W];return W}function de(f,o){return f instanceof o||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===o.name}function ge(f){return f!=f}var Be=function(){for(var f="0123456789abcdef",o=new Array(256),v=0;v<16;++v)for(var S=16*v,W=0;W<16;++W)o[S+W]=f[v]+f[W];return o}()},6693:function(it,we){we.byteLength=function(_){var m=p(_),n=m[0],c=m[1];return 3*(n+c)/4-c},we.toByteArray=function(_){var m,n,c=p(_),d=c[0],I=c[1],k=new T(function($,O,K){return 3*(O+K)/4-K}(0,d,I)),q=0,x=I>0?d-4:d;for(n=0;n<x;n+=4)m=oe[_.charCodeAt(n)]<<18|oe[_.charCodeAt(n+1)]<<12|oe[_.charCodeAt(n+2)]<<6|oe[_.charCodeAt(n+3)],k[q++]=m>>16&255,k[q++]=m>>8&255,k[q++]=255&m;return I===2&&(m=oe[_.charCodeAt(n)]<<2|oe[_.charCodeAt(n+1)]>>4,k[q++]=255&m),I===1&&(m=oe[_.charCodeAt(n)]<<10|oe[_.charCodeAt(n+1)]<<4|oe[_.charCodeAt(n+2)]>>2,k[q++]=m>>8&255,k[q++]=255&m),k},we.fromByteArray=function(_){for(var m,n=_.length,c=n%3,d=[],I=16383,k=0,q=n-c;k<q;k+=I)d.push(u(_,k,k+I>q?q:k+I));return c===1?(m=_[n-1],d.push(M[m>>2]+M[m<<4&63]+"==")):c===2&&(m=(_[n-2]<<8)+_[n-1],d.push(M[m>>10]+M[m>>4&63]+M[m<<2&63]+"=")),d.join("")};for(var M=[],oe=[],T=typeof Uint8Array<"u"?Uint8Array:Array,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,y=t.length;e<y;++e)M[e]=t[e],oe[t.charCodeAt(e)]=e;function p(_){var m=_.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=_.indexOf("=");return n===-1&&(n=m),[n,n===m?0:4-n%4]}function u(_,m,n){for(var c,d,I=[],k=m;k<n;k+=3)c=(_[k]<<16&16711680)+(_[k+1]<<8&65280)+(255&_[k+2]),I.push(M[(d=c)>>18&63]+M[d>>12&63]+M[d>>6&63]+M[63&d]);return I.join("")}oe[45]=62,oe[95]=63},2165:function(it,we){we.read=function(M,oe,T,t,e){var y,p,u=8*e-t-1,_=(1<<u)-1,m=_>>1,n=-7,c=T?e-1:0,d=T?-1:1,I=M[oe+c];for(c+=d,y=I&(1<<-n)-1,I>>=-n,n+=u;n>0;y=256*y+M[oe+c],c+=d,n-=8);for(p=y&(1<<-n)-1,y>>=-n,n+=t;n>0;p=256*p+M[oe+c],c+=d,n-=8);if(y===0)y=1-m;else{if(y===_)return p?NaN:1/0*(I?-1:1);p+=Math.pow(2,t),y-=m}return(I?-1:1)*p*Math.pow(2,y-t)},we.write=function(M,oe,T,t,e,y){var p,u,_,m=8*y-e-1,n=(1<<m)-1,c=n>>1,d=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=t?0:y-1,k=t?1:-1,q=oe<0||oe===0&&1/oe<0?1:0;for(oe=Math.abs(oe),isNaN(oe)||oe===1/0?(u=isNaN(oe)?1:0,p=n):(p=Math.floor(Math.log(oe)/Math.LN2),oe*(_=Math.pow(2,-p))<1&&(p--,_*=2),(oe+=p+c>=1?d/_:d*Math.pow(2,1-c))*_>=2&&(p++,_/=2),p+c>=n?(u=0,p=n):p+c>=1?(u=(oe*_-1)*Math.pow(2,e),p+=c):(u=oe*Math.pow(2,c-1)*Math.pow(2,e),p=0));e>=8;M[T+I]=255&u,I+=k,u/=256,e-=8);for(p=p<<e|u,m+=e;m>0;M[T+I]=255&p,I+=k,p/=256,m-=8);M[T+I-k]|=128*q}},6934:function(it,we){var M={parseBuffer:function(t){return new oe(t).parse()},addBoxProcessor:function(t,e){typeof t=="string"&&typeof e=="function"&&(T.prototype._boxProcessors[t]=e)},createFile:function(){return new oe},createBox:function(t,e,y){var p=T.create(t);return e&&e.append(p,y),p},createFullBox:function(t,e,y){var p=M.createBox(t,e,y);return p.version=0,p.flags=0,p},Utils:{}};M.Utils.dataViewToString=function(t,e){var y=e||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(y).decode(t);var p=[],u=0;if(y==="utf-8")for(;u<t.byteLength;){var _=t.getUint8(u++);_<128||(_<224?(_=(31&_)<<6,_|=63&t.getUint8(u++)):_<240?(_=(15&_)<<12,_|=(63&t.getUint8(u++))<<6,_|=63&t.getUint8(u++)):(_=(7&_)<<18,_|=(63&t.getUint8(u++))<<12,_|=(63&t.getUint8(u++))<<6,_|=63&t.getUint8(u++))),p.push(String.fromCharCode(_))}else for(;u<t.byteLength;)p.push(String.fromCharCode(t.getUint8(u++)));return p.join("")},M.Utils.utf8ToByteArray=function(t){var e,y;if(typeof TextEncoder<"u")e=new TextEncoder().encode(t);else for(e=[],y=0;y<t.length;++y){var p=t.charCodeAt(y);p<128?e.push(p):p<2048?(e.push(192|p>>6),e.push(128|63&p)):p<65536?(e.push(224|p>>12),e.push(128|63&p>>6),e.push(128|63&p)):(e.push(240|p>>18),e.push(128|63&p>>12),e.push(128|63&p>>6),e.push(128|63&p))}return e},M.Utils.appendBox=function(t,e,y){if(e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,y!==-1)if(y!=null){var p,u=-1;if(typeof y=="number")u=y;else{if(typeof y=="string")p=y;else{if(typeof y!="object"||!y.type)return void t.boxes.push(e);p=y.type}for(var _=0;_<t.boxes.length;_++)if(p===t.boxes[_].type){u=_+1;break}}t.boxes.splice(u,0,e)}else t.boxes.push(e)},we.parseBuffer=M.parseBuffer,we.addBoxProcessor=M.addBoxProcessor,we.createFile=M.createFile,we.createBox=M.createBox,we.createFullBox=M.createFullBox,we.Utils=M.Utils,M.Cursor=function(t){this.offset=t===void 0?0:t};var oe=function(t){this._cursor=new M.Cursor,this.boxes=[],t&&(this._raw=new DataView(t))};oe.prototype.fetch=function(t){var e=this.fetchAll(t,!0);return e.length?e[0]:null},oe.prototype.fetchAll=function(t,e){var y=[];return oe._sweep.call(this,t,y,e),y},oe.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var t=T.parse(this);if(t.type===void 0)break;this.boxes.push(t)}return this},oe._sweep=function(t,e,y){for(var p in this.type&&this.type==t&&e.push(this),this.boxes){if(e.length&&y)return;oe._sweep.call(this.boxes[p],t,e,y)}},oe.prototype.write=function(){var t,e=0;for(t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var y=new Uint8Array(e);for(this._rawo=new DataView(y.buffer),this.bytes=y,this._cursor.offset=0,t=0;t<this.boxes.length;t++)this.boxes[t].write();return y.buffer},oe.prototype.append=function(t,e){M.Utils.appendBox(this,t,e)};var T=function(){this._cursor=new M.Cursor};T.parse=function(t){var e=new T;return e._offset=t._cursor.offset,e._root=t._root?t._root:t,e._raw=t._raw,e._parent=t,e._parseBox(),t._cursor.offset=e._raw.byteOffset+e._raw.byteLength,e},T.create=function(t){var e=new T;return e.type=t,e.boxes=[],e},T.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],T.prototype._boxProcessors={},T.prototype._procField=function(t,e,y){this._parsing?this[t]=this._readField(e,y):this._writeField(e,y,this[t])},T.prototype._procFieldArray=function(t,e,y,p){var u;if(this._parsing)for(this[t]=[],u=0;u<e;u++)this[t][u]=this._readField(y,p);else for(u=0;u<this[t].length;u++)this._writeField(y,p,this[t][u])},T.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},T.prototype._procEntries=function(t,e,y){var p;if(this._parsing)for(this[t]=[],p=0;p<e;p++)this[t].push({}),y.call(this,this[t][p]);else for(p=0;p<e;p++)y.call(this,this[t][p])},T.prototype._procSubEntries=function(t,e,y,p){var u;if(this._parsing)for(t[e]=[],u=0;u<y;u++)t[e].push({}),p.call(this,t[e][u]);else for(u=0;u<y;u++)p.call(this,t[e][u])},T.prototype._procEntryField=function(t,e,y,p){this._parsing?t[e]=this._readField(y,p):this._writeField(y,p,t[e])},T.prototype._procSubBoxes=function(t,e){var y;if(this._parsing)for(this[t]=[],y=0;y<e;y++)this[t].push(T.parse(this));else for(y=0;y<e;y++)this._rawo?this[t][y].write():this.size+=this[t][y].getLength()},T.prototype._readField=function(t,e){switch(t){case"uint":return this._readUint(e);case"int":return this._readInt(e);case"template":return this._readTemplate(e);case"string":return e===-1?this._readTerminatedString():this._readString(e);case"data":return this._readData(e);case"utf8":return this._readUTF8String();default:return-1}},T.prototype._readInt=function(t){var e=null,y=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:e=this._raw.getInt8(y);break;case 16:e=this._raw.getInt16(y);break;case 32:e=this._raw.getInt32(y);break;case 64:var p=this._raw.getInt32(y),u=this._raw.getInt32(y+4);e=p*Math.pow(2,32)+u}return this._cursor.offset+=t>>3,e},T.prototype._readUint=function(t){var e,y,p=null,u=this._cursor.offset-this._raw.byteOffset;switch(t){case 8:p=this._raw.getUint8(u);break;case 16:p=this._raw.getUint16(u);break;case 24:p=((e=this._raw.getUint16(u))<<8)+(y=this._raw.getUint8(u+2));break;case 32:p=this._raw.getUint32(u);break;case 64:e=this._raw.getUint32(u),y=this._raw.getUint32(u+4),p=e*Math.pow(2,32)+y}return this._cursor.offset+=t>>3,p},T.prototype._readString=function(t){for(var e="",y=0;y<t;y++){var p=this._readUint(8);e+=String.fromCharCode(p)}return e},T.prototype._readTemplate=function(t){return this._readUint(t/2)+this._readUint(t/2)/Math.pow(2,t/2)},T.prototype._readTerminatedString=function(){for(var t="";this._cursor.offset-this._offset<this._raw.byteLength;){var e=this._readUint(8);if(e===0)break;t+=String.fromCharCode(e)}return t},T.prototype._readData=function(t){var e=t>0?t:this._raw.byteLength-(this._cursor.offset-this._offset);if(e>0){var y=new Uint8Array(this._raw.buffer,this._cursor.offset,e);return this._cursor.offset+=e,y}return null},T.prototype._readUTF8String=function(){var t=this._raw.byteLength-(this._cursor.offset-this._offset),e=null;return t>0&&(e=new DataView(this._raw.buffer,this._cursor.offset,t),this._cursor.offset+=t),e&&M.Utils.dataViewToString(e)},T.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},T.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},T.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(T.parse(this))},T.prototype.append=function(t,e){M.Utils.appendBox(this,t,e)},T.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var t=0;t<this.boxes.length;t++)this.size+=this.boxes[t].getLength();return this._data&&this._writeData(this._data),this.size},T.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var t=0;t<this.boxes.length;t++)this.boxes[t].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},T.prototype._writeInt=function(t,e){if(this._rawo){var y=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setInt8(y,e);break;case 16:this._rawo.setInt16(y,e);break;case 32:this._rawo.setInt32(y,e);break;case 64:var p=Math.floor(e/Math.pow(2,32)),u=e-p*Math.pow(2,32);this._rawo.setUint32(y,p),this._rawo.setUint32(y+4,u)}this._cursor.offset+=t>>3}else this.size+=t>>3},T.prototype._writeUint=function(t,e){if(this._rawo){var y,p,u=this._cursor.offset-this._rawo.byteOffset;switch(t){case 8:this._rawo.setUint8(u,e);break;case 16:this._rawo.setUint16(u,e);break;case 24:y=(16776960&e)>>8,p=255&e,this._rawo.setUint16(u,y),this._rawo.setUint8(u+2,p);break;case 32:this._rawo.setUint32(u,e);break;case 64:p=e-(y=Math.floor(e/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(u,y),this._rawo.setUint32(u+4,p)}this._cursor.offset+=t>>3}else this.size+=t>>3},T.prototype._writeString=function(t,e){for(var y=0;y<t;y++)this._writeUint(8,e.charCodeAt(y))},T.prototype._writeTerminatedString=function(t){if(t.length!==0){for(var e=0;e<t.length;e++)this._writeUint(8,t.charCodeAt(e));this._writeUint(8,0)}},T.prototype._writeTemplate=function(t,e){var y=Math.floor(e),p=(e-y)*Math.pow(2,t/2);this._writeUint(t/2,y),this._writeUint(t/2,p)},T.prototype._writeData=function(t){if(t)if(this._rawo){if(t instanceof Array){for(var e=this._cursor.offset-this._rawo.byteOffset,y=0;y<t.length;y++)this._rawo.setInt8(e+y,t[y]);this._cursor.offset+=t.length}t instanceof Uint8Array&&(this._root.bytes.set(t,this._cursor.offset),this._cursor.offset+=t.length)}else this.size+=t.length},T.prototype._writeUTF8String=function(t){var e=M.Utils.utf8ToByteArray(t);if(this._rawo)for(var y=new DataView(this._rawo.buffer,this._cursor.offset,e.length),p=0;p<e.length;p++)y.setUint8(p,e[p]);else this.size+=e.length},T.prototype._writeField=function(t,e,y){switch(t){case"uint":this._writeUint(e,y);break;case"int":this._writeInt(e,y);break;case"template":this._writeTemplate(e,y);break;case"string":e==-1?this._writeTerminatedString(y):this._writeString(e,y);break;case"data":this._writeData(y);break;case"utf8":this._writeUTF8String(y)}},T.prototype._boxProcessors.avc1=T.prototype._boxProcessors.avc2=T.prototype._boxProcessors.avc3=T.prototype._boxProcessors.avc4=T.prototype._boxProcessors.hvc1=T.prototype._boxProcessors.hev1=T.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},T.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"sample_count","uint",32),this._procEntryField(t,"sample_offset",this.version===1?"int":"uint",32)})},T.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},T.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"segment_duration","uint",this.version===1?64:32),this._procEntryField(t,"media_time","int",this.version===1?64:32),this._procEntryField(t,"media_rate_integer","int",16),this._procEntryField(t,"media_rate_fraction","int",16)})},T.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},T.prototype._boxProcessors.free=T.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},T.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},T.prototype._boxProcessors.ftyp=T.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var t=-1;this._parsing&&(t=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",t,"string",4)},T.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},T.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},T.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},T.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},T.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},T.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},T.prototype._boxProcessors.mp4a=T.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},T.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},T.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},T.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},T.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},T.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},T.prototype._boxProcessors.sdtp=function(){this._procFullBox();var t=-1;this._parsing&&(t=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",t,"uint",8)},T.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(t){this._parsing||(t.reference=(1&t.reference_type)<<31,t.reference|=2147483647&t.referenced_size,t.sap=(1&t.starts_with_SAP)<<31,t.sap|=(3&t.SAP_type)<<28,t.sap|=268435455&t.SAP_delta_time),this._procEntryField(t,"reference","uint",32),this._procEntryField(t,"subsegment_duration","uint",32),this._procEntryField(t,"sap","uint",32),this._parsing&&(t.reference_type=t.reference>>31&1,t.referenced_size=2147483647&t.reference,t.starts_with_SAP=t.sap>>31&1,t.SAP_type=t.sap>>28&7,t.SAP_delta_time=268435455&t.sap)})},T.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},T.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(t){this._procEntryField(t,"ranges_count","uint",32),this._procSubEntries(t,"ranges",t.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},T.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},T.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},T.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"sample_count","uint",32),this._procEntryField(t,"sample_delta","uint",32)})},T.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(t){this._procEntryField(t,"sample_delta","uint",32),this._procEntryField(t,"subsample_count","uint",16),this._procSubEntries(t,"subsamples",t.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",this.version===1?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},T.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},T.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},T.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},T.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(t){this._procEntryField(t,"time","uint",this.version===1?64:32),this._procEntryField(t,"moof_offset","uint",this.version===1?64:32),this._procEntryField(t,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(t,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(t,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},T.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},T.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},T.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(t){256&this.flags&&this._procEntryField(t,"sample_duration","uint",32),512&this.flags&&this._procEntryField(t,"sample_size","uint",32),1024&this.flags&&this._procEntryField(t,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(t,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},T.prototype._boxProcessors["url "]=T.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},T.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},T.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},T.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},T.prototype._boxProcessors.vtte=function(){}},5530:function(it,we,M){it.exports=M(6146).polyfill()},6146:function(it,we,M){it.exports=function(){function oe(Ze){return typeof Ze=="function"}var T=Array.isArray?Array.isArray:function(Ze){return Object.prototype.toString.call(Ze)==="[object Array]"},t=0,e=void 0,y=void 0,p=function(Ze,Je){I[t]=Ze,I[t+1]=Je,(t+=2)===2&&(y?y(k):K())},u=typeof window<"u"?window:void 0,_=u||{},m=_.MutationObserver||_.WebKitMutationObserver,n=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",c=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function d(){var Ze=setTimeout;return function(){return Ze(k,1)}}var I=new Array(1e3);function k(){for(var Ze=0;Ze<t;Ze+=2)(0,I[Ze])(I[Ze+1]),I[Ze]=void 0,I[Ze+1]=void 0;t=0}var q,x,$,O,K=void 0;function re(Ze,Je){var de=this,ge=new this.constructor(se);ge[ee]===void 0&&Oe(ge);var Be=de._state;if(Be){var f=arguments[Be-1];p(function(){return et(Be,ge,f,de._result)})}else Pe(de,ge,Ze,Je);return ge}function H(Ze){if(Ze&&typeof Ze=="object"&&Ze.constructor===this)return Ze;var Je=new this(se);return Ie(Je,Ze),Je}K=n?function(){return process.nextTick(k)}:m?(x=0,$=new m(k),O=document.createTextNode(""),$.observe(O,{characterData:!0}),function(){O.data=x=++x%2}):c?((q=new MessageChannel).port1.onmessage=k,function(){return q.port2.postMessage(0)}):u===void 0?function(){try{var Ze=Function("return this")().require("vertx");return(e=Ze.runOnLoop||Ze.runOnContext)!==void 0?function(){e(k)}:d()}catch{return d()}}():d();var ee=Math.random().toString(36).substring(2);function se(){}var Te=void 0;function X(Ze,Je,de){Je.constructor===Ze.constructor&&de===re&&Je.constructor.resolve===H?function(ge,Be){Be._state===1?je(ge,Be._result):Be._state===2?Ee(ge,Be._result):Pe(Be,void 0,function(f){return Ie(ge,f)},function(f){return Ee(ge,f)})}(Ze,Je):de===void 0?je(Ze,Je):oe(de)?function(ge,Be,f){p(function(o){var v=!1,S=function(W,V,be,ze){try{W.call(V,be,ze)}catch(Me){return Me}}(f,Be,function(W){v||(v=!0,Be!==W?Ie(o,W):je(o,W))},function(W){v||(v=!0,Ee(o,W))},o._label);!v&&S&&(v=!0,Ee(o,S))},ge)}(Ze,Je,de):je(Ze,Je)}function Ie(Ze,Je){if(Ze===Je)Ee(Ze,new TypeError("You cannot resolve a promise with itself"));else if(Be=typeof(ge=Je),ge===null||Be!=="object"&&Be!=="function")je(Ze,Je);else{var de=void 0;try{de=Je.then}catch(f){return void Ee(Ze,f)}X(Ze,Je,de)}var ge,Be}function Le(Ze){Ze._onerror&&Ze._onerror(Ze._result),Ve(Ze)}function je(Ze,Je){Ze._state===Te&&(Ze._result=Je,Ze._state=1,Ze._subscribers.length!==0&&p(Ve,Ze))}function Ee(Ze,Je){Ze._state===Te&&(Ze._state=2,Ze._result=Je,p(Le,Ze))}function Pe(Ze,Je,de,ge){var Be=Ze._subscribers,f=Be.length;Ze._onerror=null,Be[f]=Je,Be[f+1]=de,Be[f+2]=ge,f===0&&Ze._state&&p(Ve,Ze)}function Ve(Ze){var Je=Ze._subscribers,de=Ze._state;if(Je.length!==0){for(var ge=void 0,Be=void 0,f=Ze._result,o=0;o<Je.length;o+=3)ge=Je[o],Be=Je[o+de],ge?et(de,ge,Be,f):Be(f);Ze._subscribers.length=0}}function et(Ze,Je,de,ge){var Be=oe(de),f=void 0,o=void 0,v=!0;if(Be){try{f=de(ge)}catch(S){v=!1,o=S}if(Je===f)return void Ee(Je,new TypeError("A promises callback cannot return that same promise."))}else f=ge;Je._state!==Te||(Be&&v?Ie(Je,f):v===!1?Ee(Je,o):Ze===1?je(Je,f):Ze===2&&Ee(Je,f))}var _e=0;function Oe(Ze){Ze[ee]=_e++,Ze._state=void 0,Ze._result=void 0,Ze._subscribers=[]}var _t=function(){function Ze(Je,de){this._instanceConstructor=Je,this.promise=new Je(se),this.promise[ee]||Oe(this.promise),T(de)?(this.length=de.length,this._remaining=de.length,this._result=new Array(this.length),this.length===0?je(this.promise,this._result):(this.length=this.length||0,this._enumerate(de),this._remaining===0&&je(this.promise,this._result))):Ee(this.promise,new Error("Array Methods must be provided an Array"))}return Ze.prototype._enumerate=function(Je){for(var de=0;this._state===Te&&de<Je.length;de++)this._eachEntry(Je[de],de)},Ze.prototype._eachEntry=function(Je,de){var ge=this._instanceConstructor,Be=ge.resolve;if(Be===H){var f=void 0,o=void 0,v=!1;try{f=Je.then}catch(W){v=!0,o=W}if(f===re&&Je._state!==Te)this._settledAt(Je._state,de,Je._result);else if(typeof f!="function")this._remaining--,this._result[de]=Je;else if(ge===dt){var S=new ge(se);v?Ee(S,o):X(S,Je,f),this._willSettleAt(S,de)}else this._willSettleAt(new ge(function(W){return W(Je)}),de)}else this._willSettleAt(Be(Je),de)},Ze.prototype._settledAt=function(Je,de,ge){var Be=this.promise;Be._state===Te&&(this._remaining--,Je===2?Ee(Be,ge):this._result[de]=ge),this._remaining===0&&je(Be,this._result)},Ze.prototype._willSettleAt=function(Je,de){var ge=this;Pe(Je,void 0,function(Be){return ge._settledAt(1,de,Be)},function(Be){return ge._settledAt(2,de,Be)})},Ze}(),dt=function(){function Ze(Je){this[ee]=_e++,this._result=this._state=void 0,this._subscribers=[],se!==Je&&(typeof Je!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Ze?function(de,ge){try{ge(function(Be){Ie(de,Be)},function(Be){Ee(de,Be)})}catch(Be){Ee(de,Be)}}(this,Je):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Ze.prototype.catch=function(Je){return this.then(null,Je)},Ze.prototype.finally=function(Je){var de=this,ge=de.constructor;return oe(Je)?de.then(function(Be){return ge.resolve(Je()).then(function(){return Be})},function(Be){return ge.resolve(Je()).then(function(){throw Be})}):de.then(Je,Je)},Ze}();return dt.prototype.then=re,dt.all=function(Ze){return new _t(this,Ze).promise},dt.race=function(Ze){var Je=this;return T(Ze)?new Je(function(de,ge){for(var Be=Ze.length,f=0;f<Be;f++)Je.resolve(Ze[f]).then(de,ge)}):new Je(function(de,ge){return ge(new TypeError("You must pass an array to race."))})},dt.resolve=H,dt.reject=function(Ze){var Je=new this(se);return Ee(Je,Ze),Je},dt._setScheduler=function(Ze){y=Ze},dt._setAsap=function(Ze){p=Ze},dt._asap=p,dt.polyfill=function(){var Ze=void 0;if(M.g!==void 0)Ze=M.g;else if(typeof self<"u")Ze=self;else try{Ze=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Je=Ze.Promise;if(Je){var de=null;try{de=Object.prototype.toString.call(Je.resolve())}catch{}if(de==="[object Promise]"&&!Je.cast)return}Ze.Promise=dt},dt.Promise=dt,dt}()},1159:function(it){var we,M=typeof Reflect=="object"?Reflect:null,oe=M&&typeof M.apply=="function"?M.apply:function(k,q,x){return Function.prototype.apply.call(k,q,x)};we=M&&typeof M.ownKeys=="function"?M.ownKeys:Object.getOwnPropertySymbols?function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:function(k){return Object.getOwnPropertyNames(k)};var T=Number.isNaN||function(k){return k!=k};function t(){t.init.call(this)}it.exports=t,it.exports.once=function(k,q){return new Promise(function(x,$){function O(re){k.removeListener(q,K),$(re)}function K(){typeof k.removeListener=="function"&&k.removeListener("error",O),x([].slice.call(arguments))}I(k,q,K,{once:!0}),q!=="error"&&function(re,H,ee){typeof re.on=="function"&&I(re,"error",H,{once:!0})}(k,O)})},t.EventEmitter=t,t.prototype._events=void 0,t.prototype._eventsCount=0,t.prototype._maxListeners=void 0;var e=10;function y(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}function p(k){return k._maxListeners===void 0?t.defaultMaxListeners:k._maxListeners}function u(k,q,x,$){var O,K,re,H;if(y(x),(K=k._events)===void 0?(K=k._events=Object.create(null),k._eventsCount=0):(K.newListener!==void 0&&(k.emit("newListener",q,x.listener?x.listener:x),K=k._events),re=K[q]),re===void 0)re=K[q]=x,++k._eventsCount;else if(typeof re=="function"?re=K[q]=$?[x,re]:[re,x]:$?re.unshift(x):re.push(x),(O=p(k))>0&&re.length>O&&!re.warned){re.warned=!0;var ee=new Error("Possible EventEmitter memory leak detected. "+re.length+" "+String(q)+" listeners added. Use emitter.setMaxListeners() to increase limit");ee.name="MaxListenersExceededWarning",ee.emitter=k,ee.type=q,ee.count=re.length,H=ee,console&&console.warn&&console.warn(H)}return k}function _(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(k,q,x){var $={fired:!1,wrapFn:void 0,target:k,type:q,listener:x},O=_.bind($);return O.listener=x,$.wrapFn=O,O}function n(k,q,x){var $=k._events;if($===void 0)return[];var O=$[q];return O===void 0?[]:typeof O=="function"?x?[O.listener||O]:[O]:x?function(K){for(var re=new Array(K.length),H=0;H<re.length;++H)re[H]=K[H].listener||K[H];return re}(O):d(O,O.length)}function c(k){var q=this._events;if(q!==void 0){var x=q[k];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}function d(k,q){for(var x=new Array(q),$=0;$<q;++$)x[$]=k[$];return x}function I(k,q,x,$){if(typeof k.on=="function")$.once?k.once(q,x):k.on(q,x);else{if(typeof k.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof k);k.addEventListener(q,function O(K){$.once&&k.removeEventListener(q,O),x(K)})}}Object.defineProperty(t,"defaultMaxListeners",{enumerable:!0,get:function(){return e},set:function(k){if(typeof k!="number"||k<0||T(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");e=k}}),t.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},t.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||T(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this},t.prototype.getMaxListeners=function(){return p(this)},t.prototype.emit=function(k){for(var q=[],x=1;x<arguments.length;x++)q.push(arguments[x]);var $=k==="error",O=this._events;if(O!==void 0)$=$&&O.error===void 0;else if(!$)return!1;if($){var K;if(q.length>0&&(K=q[0]),K instanceof Error)throw K;var re=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw re.context=K,re}var H=O[k];if(H===void 0)return!1;if(typeof H=="function")oe(H,this,q);else{var ee=H.length,se=d(H,ee);for(x=0;x<ee;++x)oe(se[x],this,q)}return!0},t.prototype.addListener=function(k,q){return u(this,k,q,!1)},t.prototype.on=t.prototype.addListener,t.prototype.prependListener=function(k,q){return u(this,k,q,!0)},t.prototype.once=function(k,q){return y(q),this.on(k,m(this,k,q)),this},t.prototype.prependOnceListener=function(k,q){return y(q),this.prependListener(k,m(this,k,q)),this},t.prototype.removeListener=function(k,q){var x,$,O,K,re;if(y(q),($=this._events)===void 0)return this;if((x=$[k])===void 0)return this;if(x===q||x.listener===q)--this._eventsCount==0?this._events=Object.create(null):(delete $[k],$.removeListener&&this.emit("removeListener",k,x.listener||q));else if(typeof x!="function"){for(O=-1,K=x.length-1;K>=0;K--)if(x[K]===q||x[K].listener===q){re=x[K].listener,O=K;break}if(O<0)return this;O===0?x.shift():function(H,ee){for(;ee+1<H.length;ee++)H[ee]=H[ee+1];H.pop()}(x,O),x.length===1&&($[k]=x[0]),$.removeListener!==void 0&&this.emit("removeListener",k,re||q)}return this},t.prototype.off=t.prototype.removeListener,t.prototype.removeAllListeners=function(k){var q,x,$;if((x=this._events)===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[k]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete x[k]),this;if(arguments.length===0){var O,K=Object.keys(x);for($=0;$<K.length;++$)(O=K[$])!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(q=x[k])=="function")this.removeListener(k,q);else if(q!==void 0)for($=q.length-1;$>=0;$--)this.removeListener(k,q[$]);return this},t.prototype.listeners=function(k){return n(this,k,!0)},t.prototype.rawListeners=function(k){return n(this,k,!1)},t.listenerCount=function(k,q){return typeof k.listenerCount=="function"?k.listenerCount(q):c.call(k,q)},t.prototype.listenerCount=c,t.prototype.eventNames=function(){return this._eventsCount>0?we(this._events):[]}},3101:function(it){var we=Array.isArray,M=Object.keys,oe=Object.prototype.hasOwnProperty;it.exports=function T(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var y,p,u,_=we(t),m=we(e);if(_&&m){if((p=t.length)!=e.length)return!1;for(y=p;y--!=0;)if(!T(t[y],e[y]))return!1;return!0}if(_!=m)return!1;var n=t instanceof Date,c=e instanceof Date;if(n!=c)return!1;if(n&&c)return t.getTime()==e.getTime();var d=t instanceof RegExp,I=e instanceof RegExp;if(d!=I)return!1;if(d&&I)return t.toString()==e.toString();var k=M(t);if((p=k.length)!==M(e).length)return!1;for(y=p;y--!=0;)if(!oe.call(e,k[y]))return!1;for(y=p;y--!=0;)if(!T(t[u=k[y]],e[u]))return!1;return!0}return t!=t&&e!=e}},3362:function(it,we,M){(function(oe,T,t,e,y){function p(o){if("contents"in o)for(var v=("styleAttrs"in o)?o.styleAttrs[e.byName.ruby.qname]:null,S=o.kind==="span"&&(v==="container"||v==="textContainer"||v==="baseContainer"),W=o.contents.length-1;W>=0;W--)!S||"styleAttrs"in o.contents[W]&&e.byName.ruby.qname in o.contents[W].styleAttrs?p(o.contents[W]):delete o.contents[W]}function u(o,v,S,W){var V=W&&W.timeContainer==="seq",be=0;W&&(be=V&&S?S.end:W.begin),v.begin=v.explicit_begin?v.explicit_begin+be:be;var ze=v.begin,Me=null;if("sets"in v)for(var De=0;De<v.sets.length;De++)u(o,v.sets[De],Me,v),ze=v.timeContainer==="seq"?v.sets[De].end:Math.max(ze,v.sets[De].end),Me=v.sets[De];if("contents"in v){if("contents"in v)for(var Ae=0;Ae<v.contents.length;Ae++)u(o,v.contents[Ae],Me,v),ze=v.timeContainer==="seq"?v.contents[Ae].end:Math.max(ze,v.contents[Ae].end),Me=v.contents[Ae]}else ze=V?v.begin:Number.POSITIVE_INFINITY;v.explicit_end!==null&&v.explicit_dur!==null?v.end=Math.min(v.begin+v.explicit_dur,be+v.explicit_end):v.explicit_end===null&&v.explicit_dur!==null?v.end=v.begin+v.explicit_dur:v.explicit_end!==null&&v.explicit_dur===null?v.end=be+v.explicit_end:v.end=ze,delete v.explicit_begin,delete v.explicit_dur,delete v.explicit_end,o._registerEvent(v)}function _(o){this.node=o}function m(){this.events=[],this.head=new n,this.body=null}function n(){this.styling=new c,this.layout=new k}function c(){this.styles={},this.initials={}}function d(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function I(){this.styleAttrs=null}function k(){this.regions={}}function q(o,v){x.call(this,"image"),this.src=o,this.type=v}function x(o){this.kind=o}function $(o){this.id=o}function O(o){this.regionID=o}function K(o){this.styleAttrs=o}function re(o){this.sets=o}function H(o){this.contents=o}function ee(o,v,S){this.explicit_begin=o,this.explicit_end=v,this.explicit_dur=S}function se(){x.call(this,"body")}function Te(){x.call(this,"div")}function X(){x.call(this,"p")}function Ie(){x.call(this,"span")}function Le(){x.call(this,"span")}function je(){x.call(this,"br")}function Ee(){}function Pe(){}function Ve(o){return o&&"xml:id"in o.attributes&&o.attributes["xml:id"].value||null}function et(o){return o&&"style"in o.attributes?o.attributes.style.value.split(" "):[]}function _e(o,v){var S={};if(o!==null)for(var W in o.attributes){var V=o.attributes[W].uri+" "+o.attributes[W].local,be=e.byQName[V];if(be!==void 0){var ze=be.parse(o.attributes[W].value);ze!==null?(S[V]=ze,be===e.byName.zIndex&&de(v,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):ge(v,"Cannot parse styling attribute "+V+" --> "+o.attributes[W].value)}}return S}function Oe(o,v,S){for(var W in o.attributes)if(o.attributes[W].uri===v&&o.attributes[W].local===S)return o.attributes[W].value;return null}function _t(o,v,S){var W,V=null;return(W=/^(\d+(?:\.\d+)?)f$/.exec(S))!==null?v!==null&&(V=parseFloat(W[1])/v):(W=/^(\d+(?:\.\d+)?)t$/.exec(S))!==null?o!==null&&(V=parseFloat(W[1])/o):(W=/^(\d+(?:\.\d+)?)ms$/.exec(S))!==null?V=parseFloat(W[1])/1e3:(W=/^(\d+(?:\.\d+)?)s$/.exec(S))!==null?V=parseFloat(W[1]):(W=/^(\d+(?:\.\d+)?)h$/.exec(S))!==null?V=3600*parseFloat(W[1]):(W=/^(\d+(?:\.\d+)?)m$/.exec(S))!==null?V=60*parseFloat(W[1]):(W=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(S))!==null?V=3600*parseInt(W[1])+60*parseInt(W[2])+parseFloat(W[3]):(W=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(S))!==null&&v!==null&&(V=3600*parseInt(W[1])+60*parseInt(W[2])+parseInt(W[3])+(W[4]===null?0:parseInt(W[4])/v)),V}function dt(o,v,S){for(;v.styleRefs.length>0;){var W=v.styleRefs.pop();W in o.styles?(dt(o,o.styles[W],S),Je(o.styles[W].styleAttrs,v.styleAttrs)):ge(S,"Non-existant style id referenced")}}function Ze(o,v,S,W){for(var V=v.length-1;V>=0;V--){var be=v[V];be in o.styles?Je(o.styles[be].styleAttrs,S):ge(W,"Non-existant style id referenced")}}function Je(o,v){for(var S in o)o.hasOwnProperty(S)&&(S in v||(v[S]=o[S]))}function de(o,v){if(o&&o.warn&&o.warn(v))throw v}function ge(o,v){if(o&&o.error&&o.error(v))throw v}function Be(o,v){throw o&&o.fatal&&o.fatal(v),v}function f(o,v){for(var S,W=0,V=o.length-1;W<=V;){var be=o[S=Math.floor((W+V)/2)];if(be<v)W=S+1;else{if(!(be>v))return{found:!0,index:S};V=S-1}}return{found:!1,index:W}}oe.fromXML=function(o,v,S){var W=T.parser(!0,{xmlns:!0}),V=[],be=[],ze=[],Me=0,De=null;W.onclosetag=function(rt){if(V[0]instanceof Ee)De.head!==null&&De.head.styling!==null&&Ze(De.head.styling,V[0].styleRefs,V[0].styleAttrs,v),delete V[0].styleRefs;else if(V[0]instanceof c)for(var Zt in V[0].styles)V[0].styles.hasOwnProperty(Zt)&&dt(V[0],V[0].styles[Zt],v);else if(V[0]instanceof X||V[0]instanceof Ie){if(V[0].contents.length>1){var It,Ft=[V[0].contents[0]];for(It=1;It<V[0].contents.length;It++)V[0].contents[It]instanceof Le&&Ft[Ft.length-1]instanceof Le?Ft[Ft.length-1].text+=V[0].contents[It].text:Ft.push(V[0].contents[It]);V[0].contents=Ft}V[0]instanceof Ie&&V[0].contents.length===1&&V[0].contents[0]instanceof Le&&(V[0].text=V[0].contents[0].text,delete V[0].contents)}else V[0]instanceof _&&(V[0].node.uri===t.ns_tt&&V[0].node.local==="metadata"?Me--:Me>0&&S&&"onCloseTag"in S&&S.onCloseTag());ze.shift(),be.shift(),V.shift()},W.ontext=function(rt){if(V[0]!==void 0)if(V[0]instanceof Ie||V[0]instanceof X){if(V[0]instanceof Ie){var Zt=V[0].styleAttrs[e.byName.ruby.qname];if(Zt==="container"||Zt==="textContainer"||Zt==="baseContainer")return}var It=new Le;It.initFromText(De,V[0],rt,be[0],ze[0],v),V[0].contents.push(It)}else V[0]instanceof _&&Me>0&&S&&"onText"in S&&S.onText(rt)},W.onopentag=function(rt){var Zt=rt.attributes["xml:space"];Zt?ze.unshift(Zt.value):ze.length===0?ze.unshift("default"):ze.unshift(ze[0]);var It=rt.attributes["xml:lang"];if(It?be.unshift(It.value):be.length===0?be.unshift(""):be.unshift(be[0]),rt.uri===t.ns_tt)if(rt.local==="tt")De!==null&&Be(v,"Two <tt> elements at ("+this.line+","+this.column+")"),(De=new m).initFromNode(rt,be[0],v),V.unshift(De);else if(rt.local==="head")V[0]instanceof m||Be(v,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),V.unshift(De.head);else if(rt.local==="styling")V[0]instanceof n||Be(v,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),V.unshift(De.head.styling);else if(rt.local==="style"){var Ft;V[0]instanceof c?((Ft=new d).initFromNode(rt,v),Ft.id?De.head.styling.styles[Ft.id]=Ft:ge(v,"<style> element missing @id attribute"),V.unshift(Ft)):V[0]instanceof Ee?((Ft=new d).initFromNode(rt,v),Je(Ft.styleAttrs,V[0].styleAttrs),V.unshift(Ft)):Be(v,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(rt.local==="initial"){var Pt;if(V[0]instanceof c){for(var tn in(Pt=new I).initFromNode(rt,v),Pt.styleAttrs)Pt.styleAttrs.hasOwnProperty(tn)&&(De.head.styling.initials[tn]=Pt.styleAttrs[tn]);V.unshift(Pt)}else Be(v,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(rt.local==="layout")V[0]instanceof n||Be(v,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),V.unshift(De.head.layout);else if(rt.local==="region"){V[0]instanceof k||Be(v,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var fn=new Ee;fn.initFromNode(De,rt,be[0],v),!fn.id||fn.id in De.head.layout.regions?ge(v,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):De.head.layout.regions[fn.id]=fn,V.unshift(fn)}else if(rt.local==="body"){V[0]instanceof m||Be(v,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),De.body!==null&&Be(v,"Second <body> element at "+this.line+","+this.column+")");var Sn=new se;Sn.initFromNode(De,rt,be[0],v),De.body=Sn,V.unshift(Sn)}else if(rt.local==="div"){V[0]instanceof Te||V[0]instanceof se||Be(v,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var _n=new Te;_n.initFromNode(De,V[0],rt,be[0],v);var An=_n.styleAttrs[e.byName.backgroundImage.qname];An&&(_n.contents.push(new q(An)),delete _n.styleAttrs[e.byName.backgroundImage.qname]),V[0].contents.push(_n),V.unshift(_n)}else if(rt.local==="image"){V[0]instanceof Te||Be(v,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var Gn=new q;Gn.initFromNode(De,V[0],rt,be[0],v),V[0].contents.push(Gn),V.unshift(Gn)}else if(rt.local==="p"){V[0]instanceof Te||Be(v,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var yn=new X;yn.initFromNode(De,V[0],rt,be[0],v),V[0].contents.push(yn),V.unshift(yn)}else if(rt.local==="span"){V[0]instanceof Ie||V[0]instanceof X||Be(v,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var Qn=new Ie;Qn.initFromNode(De,V[0],rt,be[0],ze[0],v),V[0].contents.push(Qn),V.unshift(Qn)}else if(rt.local==="br"){V[0]instanceof Ie||V[0]instanceof X||Be(v,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var kn=new je;kn.initFromNode(De,V[0],rt,be[0],v),V[0].contents.push(kn),V.unshift(kn)}else if(rt.local==="set"){V[0]instanceof Ie||V[0]instanceof X||V[0]instanceof Te||V[0]instanceof se||V[0]instanceof Ee||V[0]instanceof je||Be(v,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Vn=new Pe;Vn.initFromNode(De,V[0],rt,v),V[0].sets.push(Vn),V.unshift(Vn)}else V.unshift(new _(rt));else V.unshift(new _(rt));if(V[0]instanceof _){if(rt.uri===t.ns_tt&&rt.local==="metadata")Me++;else if(Me>0&&S&&"onOpenTag"in S){var $n=[];for(var Kn in rt.attributes)$n[rt.attributes[Kn].uri+" "+rt.attributes[Kn].local]={uri:rt.attributes[Kn].uri,local:rt.attributes[Kn].local,value:rt.attributes[Kn].value};S.onOpenTag(rt.uri,rt.local,$n)}}},W.write(o).close(),delete De.head.styling.styles;var Ae=!1;for(var xe in De.head.layout.regions)if(De.head.layout.regions.hasOwnProperty(xe)){Ae=!0;break}if(!Ae){var Xe=Ee.prototype.createDefaultRegion(De.lang);De.head.layout.regions[Xe.id]=Xe}for(var mt in De.head.layout.regions)De.head.layout.regions.hasOwnProperty(mt)&&u(De,De.head.layout.regions[mt],null,null);return De.body&&u(De,De.body,null,null),De.body&&p(De.body),De},m.prototype.initFromNode=function(o,v,S){var W=function(Me,De){var Ae=Oe(Me,t.ns_ttp,"cellResolution"),xe=15,Xe=32;if(Ae!==null){var mt=/(\d+) (\d+)/.exec(Ae);mt!==null?(Xe=parseInt(mt[1]),xe=parseInt(mt[2])):de(De,"Malformed cellResolution value (using initial value instead)")}return{w:Xe,h:xe}}(o,S);this.cellLength={h:new y.ComputedLength(0,1/W.h),w:new y.ComputedLength(1/W.w,0)};var V=function(Me,De){var Ae,xe=Oe(Me,t.ns_ttp,"frameRate"),Xe=30;xe!==null&&((Ae=/(\d+)/.exec(xe))!==null?Xe=parseInt(Ae[1]):de(De,"Malformed frame rate attribute (using initial value instead)"));var mt=Oe(Me,t.ns_ttp,"frameRateMultiplier"),rt=1;mt!==null&&((Ae=/(\d+) (\d+)/.exec(mt))!==null?rt=parseInt(Ae[1])/parseInt(Ae[2]):de(De,"Malformed frame rate multiplier attribute (using initial value instead)"));var Zt=rt*Xe,It=1,Ft=Oe(Me,t.ns_ttp,"tickRate");return Ft===null?xe!==null&&(It=Zt):(Ae=/(\d+)/.exec(Ft))!==null?It=parseInt(Ae[1]):de(De,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:Zt,tickRate:It}}(o,S);this.effectiveFrameRate=V.effectiveFrameRate,this.tickRate=V.tickRate,this.aspectRatio=function(Me,De){var Ae=Oe(Me,t.ns_ittp,"aspectRatio");Ae===null&&(Ae=Oe(Me,t.ns_ttp,"displayAspectRatio"));var xe=null;if(Ae!==null){var Xe=/(\d+)\s+(\d+)/.exec(Ae);if(Xe!==null){var mt=parseInt(Xe[1]),rt=parseInt(Xe[2]);mt!==0&&rt!==0?xe=mt/rt:ge(De,"Illegal aspectRatio values (ignoring)")}else ge(De,"Malformed aspectRatio attribute (ignoring)")}return xe}(o,S);var be=Oe(o,t.ns_ttp,"timeBase");be!==null&&be!=="media"&&Be(S,"Unsupported time base");var ze=function(Me,De){var Ae=Oe(Me,t.ns_tts,"extent");if(Ae===null)return null;var xe=Ae.split(" ");if(xe.length!==2)return de(De,"Malformed extent (ignoring)"),null;var Xe=y.parseLength(xe[0]),mt=y.parseLength(xe[1]);return mt&&Xe?{h:mt,w:Xe}:(de(De,"Malformed extent values (ignoring)"),null)}(o,S);ze===null?this.pxLength={h:null,w:null}:(ze.h.unit==="px"&&ze.w.unit==="px"||Be(S,"Extent on TT must be in px or absent"),this.pxLength={h:new y.ComputedLength(0,1/ze.h.value),w:new y.ComputedLength(1/ze.w.value,0)}),this.dimensions={h:new y.ComputedLength(0,1),w:new y.ComputedLength(1,0)},this.lang=v},m.prototype._registerEvent=function(o){if(!(o.end<=o.begin)){var v=f(this.events,o.begin);if(v.found||this.events.splice(v.index,0,o.begin),o.end!==Number.POSITIVE_INFINITY){var S=f(this.events,o.end);S.found||this.events.splice(S.index,0,o.end)}}},m.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},m.prototype.getMediaTimeEvents=function(){return this.events},d.prototype.initFromNode=function(o,v){this.id=Ve(o),this.styleAttrs=_e(o,v),this.styleRefs=et(o)},I.prototype.initFromNode=function(o,v){for(var S in this.styleAttrs={},o.attributes)if(o.attributes[S].uri===t.ns_itts||o.attributes[S].uri===t.ns_ebutts||o.attributes[S].uri===t.ns_tts){var W=o.attributes[S].uri+" "+o.attributes[S].local;this.styleAttrs[W]=o.attributes[S].value}},q.prototype.initFromNode=function(o,v,S,W,V){this.src="src"in S.attributes?S.attributes.src.value:null,this.src||ge(V,"Invalid image@src attribute"),this.type="type"in S.attributes?S.attributes.type.value:null,this.type||ge(V,"Invalid image@type attribute"),K.prototype.initFromNode.call(this,o,v,S,V),ee.prototype.initFromNode.call(this,o,v,S,V),re.prototype.initFromNode.call(this,o,v,S,V),O.prototype.initFromNode.call(this,o,v,S,V),this.lang=W},$.prototype.initFromNode=function(o,v,S,W){this.id=Ve(S)},O.prototype.initFromNode=function(o,v,S,W){this.regionID=function(V){return V&&"region"in V.attributes?V.attributes.region.value:""}(S)},K.prototype.initFromNode=function(o,v,S,W){this.styleAttrs=_e(S,W),o.head!==null&&o.head.styling!==null&&Ze(o.head.styling,et(S),this.styleAttrs,W)},re.prototype.initFromNode=function(o,v,S,W){this.sets=[]},H.prototype.initFromNode=function(o,v,S,W){this.contents=[]},ee.prototype.initFromNode=function(o,v,S,W){var V=function(be,ze,Me,De){var Ae=null;Me&&"begin"in Me.attributes&&(Ae=_t(be.tickRate,be.effectiveFrameRate,Me.attributes.begin.value))===null&&de(De,"Malformed begin value "+Me.attributes.begin.value+" (using 0)");var xe=null;Me&&"dur"in Me.attributes&&(xe=_t(be.tickRate,be.effectiveFrameRate,Me.attributes.dur.value))===null&&de(De,"Malformed dur value "+Me.attributes.dur.value+" (ignoring)");var Xe=null;return Me&&"end"in Me.attributes&&(Xe=_t(be.tickRate,be.effectiveFrameRate,Me.attributes.end.value))===null&&de(De,"Malformed end value (ignoring)"),{explicit_begin:Ae,explicit_end:Xe,explicit_dur:xe}}(o,0,S,W);this.explicit_begin=V.explicit_begin,this.explicit_end=V.explicit_end,this.explicit_dur=V.explicit_dur,this.timeContainer=function(be,ze){var Me=be&&"timeContainer"in be.attributes?be.attributes.timeContainer.value:null;return Me&&Me!=="par"?Me==="seq"?"seq":(ge(ze,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(S,W)},se.prototype.initFromNode=function(o,v,S,W){K.prototype.initFromNode.call(this,o,null,v,W),ee.prototype.initFromNode.call(this,o,null,v,W),re.prototype.initFromNode.call(this,o,null,v,W),O.prototype.initFromNode.call(this,o,null,v,W),H.prototype.initFromNode.call(this,o,null,v,W),this.lang=S},Te.prototype.initFromNode=function(o,v,S,W,V){K.prototype.initFromNode.call(this,o,v,S,V),ee.prototype.initFromNode.call(this,o,v,S,V),re.prototype.initFromNode.call(this,o,v,S,V),O.prototype.initFromNode.call(this,o,v,S,V),H.prototype.initFromNode.call(this,o,v,S,V),this.lang=W},X.prototype.initFromNode=function(o,v,S,W,V){K.prototype.initFromNode.call(this,o,v,S,V),ee.prototype.initFromNode.call(this,o,v,S,V),re.prototype.initFromNode.call(this,o,v,S,V),O.prototype.initFromNode.call(this,o,v,S,V),H.prototype.initFromNode.call(this,o,v,S,V),this.lang=W},Ie.prototype.initFromNode=function(o,v,S,W,V,be){K.prototype.initFromNode.call(this,o,v,S,be),ee.prototype.initFromNode.call(this,o,v,S,be),re.prototype.initFromNode.call(this,o,v,S,be),O.prototype.initFromNode.call(this,o,v,S,be),H.prototype.initFromNode.call(this,o,v,S,be),this.space=V,this.lang=W},Le.prototype.initFromText=function(o,v,S,W,V,be){ee.prototype.initFromNode.call(this,o,v,null,be),this.text=S,this.space=V,this.lang=W},je.prototype.initFromNode=function(o,v,S,W,V){O.prototype.initFromNode.call(this,o,v,S,V),ee.prototype.initFromNode.call(this,o,v,S,V),this.lang=W},Ee.prototype.createDefaultRegion=function(o){var v=new Ee;return $.call(v,""),K.call(v,{}),re.call(v,[]),ee.call(v,0,Number.POSITIVE_INFINITY,null),this.lang=o,v},Ee.prototype.initFromNode=function(o,v,S,W){$.prototype.initFromNode.call(this,o,null,v,W),ee.prototype.initFromNode.call(this,o,null,v,W),re.prototype.initFromNode.call(this,o,null,v,W),this.styleAttrs=_e(v,W),this.styleRefs=et(v),this.lang=S},Pe.prototype.initFromNode=function(o,v,S,W){ee.prototype.initFromNode.call(this,o,v,S,W);var V=_e(S,W);for(var be in this.qname=null,this.value=null,V)if(V.hasOwnProperty(be)){if(this.qname){ge(W,"More than one style specified on set");break}this.qname=be,this.value=V[be]}}})(we,typeof sax>"u"?M(5378):sax,typeof imscNames>"u"?M(210):imscNames,typeof imscStyles>"u"?M(6811):imscStyles,typeof imscUtils>"u"?M(5926):imscUtils)},506:function(it,we,M){var oe=/firefox/i.test(navigator.userAgent);(function(T,t,e){function y(H,ee,se,Te){var X;if(se.kind==="region")(X=document.createElement("div")).style.position="absolute";else if(se.kind==="body")X=document.createElement("div");else if(se.kind==="div")X=document.createElement("div");else if(se.kind==="image"){if(X=document.createElement("img"),H.imgResolver!==null&&se.src!==null){var Ie=H.imgResolver(se.src,X);Ie&&(X.src=Ie),X.height=H.regionH,X.width=H.regionW}}else if(se.kind==="p")X=document.createElement("p");else if(se.kind==="span")if(se.styleAttrs[e.byName.ruby.qname]==="container")X=document.createElement("ruby"),H.ruby=!0;else if(se.styleAttrs[e.byName.ruby.qname]==="base")X=document.createElement("span");else if(se.styleAttrs[e.byName.ruby.qname]==="text")X=document.createElement("rt");else if(se.styleAttrs[e.byName.ruby.qname]==="baseContainer")X=document.createElement("rbc");else if(se.styleAttrs[e.byName.ruby.qname]==="textContainer")X=document.createElement("rtc");else{if(se.styleAttrs[e.byName.ruby.qname]==="delimiter")return;X=document.createElement("span")}else se.kind==="br"&&(X=document.createElement("br"));if(X){if(se.lang&&(se.kind!=="region"&&se.lang===Te.lang||(X.lang=se.lang)),ee.appendChild(X),X.style.margin="0",se.kind==="region"){var Le=se.styleAttrs[e.byName.writingMode.qname];Le==="lrtb"||Le==="lr"?(H.ipd="lr",H.bpd="tb"):Le==="rltb"||Le==="rl"?(H.ipd="rl",H.bpd="tb"):Le==="tblr"?(H.ipd="tb",H.bpd="lr"):Le!=="tbrl"&&Le!=="tb"||(H.ipd="tb",H.bpd="rl")}else if(se.kind==="p"&&H.bpd==="tb"){var je=se.styleAttrs[e.byName.direction.qname];H.ipd=je==="ltr"?"lr":"rl"}for(var Ee=0;Ee<I.length;Ee++){var Pe=I[Ee],Ve=se.styleAttrs[Pe.qname];Ve!==void 0&&Pe.map!==null&&Pe.map(H,X,se,Ve)}var et=X,_e=se.styleAttrs[e.byName.linePadding.qname];if(_e&&!_e.isZero()){var Oe=_e.toUsedLength(H.w,H.h);if(Oe>0){var _t=Math.ceil(Oe)+"px";H.bpd==="tb"?(et.style.paddingLeft=_t,et.style.paddingRight=_t):(et.style.paddingTop=_t,et.style.paddingBottom=_t),H.lp=_e}}var dt=se.styleAttrs[e.byName.multiRowAlign.qname];if(dt&&dt!=="auto"){var Ze=document.createElement("span");Ze.style.display="inline-block",Ze.style.textAlign=dt,X.appendChild(Ze),et=Ze,H.mra=dt}var Je=se.styleAttrs[e.byName.rubyReserve.qname];if(Je&&Je[0]!=="none"&&(H.rubyReserve=Je),se.styleAttrs[e.byName.fillLineGap.qname]&&(H.flg=!0),se.kind==="span"&&se.text){var de=se.styleAttrs[e.byName.textEmphasis.qname];if(de&&de.style!=="none"&&(H.textEmphasis=!0),e.byName.textCombine.qname in se.styleAttrs&&se.styleAttrs[e.byName.textCombine.qname]==="all")X.textContent=se.text,X._isd_element=se,de&&c(H,X,0,de);else for(var ge="",Be=0;Be<se.text.length;Be++){ge+=se.text.charAt(Be);var f=se.text.charCodeAt(Be);if(f<55296||f>56319||Be===se.text.length-1){var o=document.createElement("span");o.textContent=ge,de&&c(H,o,0,de),X.appendChild(o),ge="",o._isd_element=se}}}if("contents"in se)for(var v=0;v<se.contents.length;v++)y(H,et,se.contents[v],se);var S=[];if(se.kind==="p"&&(n(H,et,S,null),H.rubyReserve&&(function(Me,De){for(var Ae=0;Ae<Me.length;Ae++){var xe,Xe,mt=document.createElement("ruby"),rt=document.createElement("span");rt.textContent="​",mt.appendChild(rt);var Zt,It=De.rubyReserve[1].toUsedLength(De.w,De.h)+"px";De.rubyReserve[0]==="both"||De.rubyReserve[0]==="outside"&&Me.length==1?((xe=document.createElement("rtc")).style[$]=x?"after":"under",xe.textContent="​",xe.style.fontSize=It,(Xe=document.createElement("rtc")).style[$]=x?"before":"over",Xe.textContent="​",Xe.style.fontSize=It,mt.appendChild(xe),mt.appendChild(Xe)):((xe=document.createElement("rtc")).textContent="​",xe.style.fontSize=It,Zt=De.rubyReserve[0]==="after"||De.rubyReserve[0]==="outside"&&Ae>0?x?"after":De.bpd==="tb"||De.bpd==="rl"?"under":"over":x?"before":De.bpd==="tb"||De.bpd==="rl"?"over":"under",xe.style[$]=Zt,mt.appendChild(xe));for(var Ft=null,Pt=0;Pt<Me[Ae].rbc.length;Pt++)if(Me[Ae].rbc[Pt].localName==="ruby"){Ft=Me[Ae].rbc[Pt];for(var tn=0;tn<Ft.style.length;tn++)mt.style.setProperty(Ft.style.item(tn),Ft.style.getPropertyValue(Ft.style.item(tn)));break}(Ft=Ft||Me[Ae].elements[0].node).parentElement.insertBefore(mt,Ft)}}(S,H),H.rubyReserve=null),(H.ruby||H.rubyReserve)&&(function(Me,De){for(var Ae=0;Ae<Me.length;Ae++)for(var xe=0;xe<Me[Ae].rbc.length;xe++){var Xe;Me[Ae].rbc[xe].style[$]||(Xe=x?Ae===0?"before":"after":De.bpd==="tb"||De.bpd==="rl"?Ae===0?"over":"under":Ae===0?"under":"over",Me[Ae].rbc[xe].style[$]=Xe)}}(S,H),H.ruby=null),H.textEmphasis&&(function(Me,De){for(var Ae=0;Ae<Me.length;Ae++)for(var xe=0;xe<Me[Ae].te.length;xe++){var Xe;Me[Ae].te[xe].style[K]&&Me[Ae].te[xe].style[K]!=="none"||(Xe=De.bpd==="tb"?Ae===0?"left over":"left under":De.bpd==="rl"?Ae===0?"right under":"left under":Ae===0?"left under":"right under",Me[Ae].te[xe].style[K]=Xe)}}(S,H),H.textEmphasis=null),H.mra&&(function(Me){for(var De=0;De<Me.length-1;De++){var Ae=Me[De].elements.length;if(Ae!==0&&Me[De].br===!1){var xe=document.createElement("br"),Xe=Me[De].elements[Ae-1].node;Xe.parentElement.insertBefore(xe,Xe.nextSibling)}}}(S),H.mra=null),H.lp&&(function(Me,De,Ae){if(Me!==null)for(var xe=0;xe<Me.length;xe++){var Xe=Me[xe].elements.length,mt=Math.ceil(De)+"px",rt="-"+Math.ceil(De)+"px";if(Xe!==0){var Zt=Me[xe].elements[Me[xe].start_elem],It=Me[xe].elements[Me[xe].end_elem];if(Zt===It){var Ft=Zt.node.getBoundingClientRect();if(Ft.width==0||Ft.height==0)continue}Ae.ipd==="lr"?(Zt.node.style.marginLeft=rt,Zt.node.style.paddingLeft=mt):Ae.ipd==="rl"?(Zt.node.style.paddingRight=mt,Zt.node.style.marginRight=rt):Ae.ipd==="tb"&&(Zt.node.style.paddingTop=mt,Zt.node.style.marginTop=rt),Ae.ipd==="lr"?(oe||(It.node.style.marginRight=rt),It.node.style.paddingRight=mt):Ae.ipd==="rl"?(It.node.style.paddingLeft=mt,oe||(It.node.style.marginLeft=rt)):Ae.ipd==="tb"&&(It.node.style.paddingBottom=mt,It.node.style.marginBottom=rt)}}}(S,H.lp.toUsedLength(H.w,H.h),H),H.lp=null),function(Me,De){for(var Ae=0;Ae<Me.length;Ae++)for(var xe=Me[Ae],Xe=1;Xe<xe.elements.length;){var mt=xe.elements[Xe-1],rt=xe.elements[Xe];u(mt.node,rt.node,De)?xe.elements.splice(Xe,1):Xe++}for(var Zt,It,Ft=[],Pt=0;Pt<Me.length;Pt++)for(var tn=0;tn<Me[Pt].elements.length;tn++)(It=p(Zt=Me[Pt].elements[tn].node,Ft,!1))&&(Zt.style.backgroundColor=It);for(var fn=0;fn<Ft.length;fn++)Ft[fn].style.backgroundColor=""}(S,H),H.flg)){var W=m(et.getBoundingClientRect(),H);(function(Me,De,Ae,xe,Xe){for(var mt=Math.sign(Ae-De),rt=0;rt<=Me.length;rt++){var Zt,It,Ft,Pt;if(Zt=rt===0?Math.round(De):rt===Me.length?Math.round(Ae):Math.round((Me[rt-1].after+Me[rt].before)/2),rt>0&&Me[rt-1])for(Ft=0;Ft<Me[rt-1].elements.length;Ft++)It=mt*(Zt-(Pt=Me[rt-1].elements[Ft]).after)+"px",xe.bpd==="lr"?Pt.node.style.paddingRight=It:xe.bpd==="rl"?Pt.node.style.paddingLeft=It:xe.bpd==="tb"&&(Pt.node.style.paddingBottom=It);if(rt<Me.length)for(Ft=0;Ft<Me[rt].elements.length;Ft++)It=mt*((Pt=Me[rt].elements[Ft]).before-Zt)+"px",xe.bpd==="lr"?Pt.node.style.paddingLeft=It:xe.bpd==="rl"?Pt.node.style.paddingRight=It:xe.bpd==="tb"&&(Pt.node.style.paddingTop=It)}})(S,W.before,W.after,H),H.flg=null}if(se.kind==="region"&&H.bpd==="tb"&&H.enableRollUp&&se.contents.length>0&&se.styleAttrs[e.byName.displayAlign.qname]==="after"){n(H,et,S,null);var V=new _(se.id===""?"_":se.id,S);if(H.currentISDState[V.id]=V,H.previousISDState&&V.id in H.previousISDState&&H.previousISDState[V.id].plist.length>0&&V.plist.length>1&&V.plist[V.plist.length-2].text===H.previousISDState[V.id].plist[H.previousISDState[V.id].plist.length-1].text){var be=X.firstElementChild,ze=V.plist[V.plist.length-1].after-V.plist[V.plist.length-1].before;be.style.bottom="-"+ze+"px",be.style.transition="transform 0.4s",be.style.position="relative",be.style.transform="translateY(-"+ze+"px)"}}}else re(H.errorHandler,"Error processing ISD element kind: "+se.kind)}function p(H,ee,se){return H.style.backgroundColor?(se&&!ee.includes(H)&&ee.push(H),H.style.backgroundColor):H.parentElement.nodeName==="SPAN"||H.parentElement.nodeName==="RUBY"||H.parentElement.nodeName==="RBC"||H.parentElement.nodeName==="RTC"||H.parentElement.nodeName==="RT"?p(H.parentElement,ee,!0):void 0}function u(H,ee,se){if(H.tagName==="SPAN"&&ee.tagName==="SPAN"&&H._isd_element===ee._isd_element){if(!H._isd_element)return re(se.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;H.textContent+=ee.textContent;for(var Te=0;Te<ee.style.length;Te++){var X=ee.style[Te];(X.indexOf("border")>=0||X.indexOf("padding")>=0||X.indexOf("margin")>=0)&&(H.style[X]=ee.style[X])}return ee.parentElement.removeChild(ee),!0}return!1}function _(H,ee){this.id=H,this.plist=ee}function m(H,ee){var se={before:null,after:null,start:null,end:null};return ee.bpd==="tb"?(se.before=H.top,se.after=H.bottom,ee.ipd==="lr"?(se.start=H.left,se.end=H.right):(se.start=H.right,se.end=H.left)):ee.bpd==="lr"?(se.before=H.left,se.after=H.right,se.start=H.top,se.end=H.bottom):ee.bpd==="rl"&&(se.before=H.right,se.after=H.left,se.start=H.top,se.end=H.bottom),se}function n(H,ee,se,Te){if(ee.localName!=="rt"&&ee.localName!=="rtc"){var X,Ie,Le,je,Ee=ee.style.backgroundColor||Te;if(ee.childElementCount===0)if(ee.localName==="span"||ee.localName==="rb"){var Pe=m(ee.getBoundingClientRect(),H);if(se.length!==0&&(X=Pe.before,Ie=Pe.after,Le=se[se.length-1].before,Ie<(je=se[se.length-1].after)&&X>Le||je<=Ie&&Le>=X)){var Ve=Math.sign(Pe.after-Pe.before),et=Math.sign(Pe.end-Pe.start);Ve*(Pe.before-se[se.length-1].before)<0&&(se[se.length-1].before=Pe.before),Ve*(Pe.after-se[se.length-1].after)>0&&(se[se.length-1].after=Pe.after),et*(Pe.start-se[se.length-1].start)<0&&(se[se.length-1].start=Pe.start,se[se.length-1].start_elem=se[se.length-1].elements.length),et*(Pe.end-se[se.length-1].end)>0&&(se[se.length-1].end=Pe.end,se[se.length-1].end_elem=se[se.length-1].elements.length)}else se.push({before:Pe.before,after:Pe.after,start:Pe.start,end:Pe.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});se[se.length-1].text+=ee.textContent,se[se.length-1].elements.push({node:ee,bgcolor:Ee,before:Pe.before,after:Pe.after})}else ee.localName==="br"&&se.length!==0&&(se[se.length-1].br=!0);else for(var _e=ee.firstChild;_e;)_e.nodeType===Node.ELEMENT_NODE&&(n(H,_e,se,Ee),_e.localName==="ruby"||_e.localName==="rtc"?se.length>0&&se[se.length-1].rbc.push(_e):_e.localName==="span"&&_e.style[O]&&_e.style[O]!=="none"&&se.length>0&&se[se.length-1].te.push(_e)),_e=_e.nextSibling}}function c(H,ee,se,Te){var X;Te.style!=="none"&&(Te.style==="auto"?ee.style[O]="filled":ee.style[O]=Te.style+" "+Te.symbol,(Te.position==="before"||Te.position==="after")&&(X=H.bpd==="tb"?Te.position==="before"?"left over":"left under":H.bpd==="rl"?Te.position==="before"?"right under":"left under":Te.position==="before"?"left under":"right under",ee.style[K]=X))}function d(H,ee){this.qname=H,this.map=ee}T.render=function(H,ee,se,Te,X,Ie,Le,je,Ee){var Pe=Te||ee.clientHeight,Ve=X||ee.clientWidth;if(H.aspectRatio!==null){var et=Pe*H.aspectRatio;et>Ve?Pe=Math.round(Ve/H.aspectRatio):Ve=et}var _e=document.createElement("div");_e.style.position="relative",_e.style.width=Ve+"px",_e.style.height=Pe+"px",_e.style.margin="auto",_e.style.top=0,_e.style.bottom=0,_e.style.left=0,_e.style.right=0,_e.style.zIndex=0;var Oe={h:Pe,w:Ve,regionH:null,regionW:null,imgResolver:se,displayForcedOnlyMode:Ie||!1,isd:H,errorHandler:Le,previousISDState:je,enableRollUp:Ee||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(ee.appendChild(_e),"contents"in H)for(var _t=0;_t<H.contents.length;_t++)y(Oe,_e,H.contents[_t],H);return Oe.currentISDState};for(var I=[new d("http://www.w3.org/ns/ttml#styling backgroundColor",function(H,ee,se,Te){Te[3]!==0&&(ee.style.backgroundColor="rgba("+Te[0].toString()+","+Te[1].toString()+","+Te[2].toString()+","+(Te[3]/255).toString()+")")}),new d("http://www.w3.org/ns/ttml#styling color",function(H,ee,se,Te){ee.style.color="rgba("+Te[0].toString()+","+Te[1].toString()+","+Te[2].toString()+","+(Te[3]/255).toString()+")"}),new d("http://www.w3.org/ns/ttml#styling direction",function(H,ee,se,Te){ee.style.direction=Te}),new d("http://www.w3.org/ns/ttml#styling display",function(H,ee,se,Te){}),new d("http://www.w3.org/ns/ttml#styling displayAlign",function(H,ee,se,Te){ee.style.display="flex",ee.style.flexDirection="column",Te==="before"?ee.style.justifyContent="flex-start":Te==="center"?ee.style.justifyContent="center":Te==="after"&&(ee.style.justifyContent="flex-end")}),new d("http://www.w3.org/ns/ttml#styling extent",function(H,ee,se,Te){H.regionH=Te.h.toUsedLength(H.w,H.h),H.regionW=Te.w.toUsedLength(H.w,H.h);var X=0,Ie=0,Le=se.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];Le&&(X=Le[0].toUsedLength(H.w,H.h)+Le[2].toUsedLength(H.w,H.h),Ie=Le[1].toUsedLength(H.w,H.h)+Le[3].toUsedLength(H.w,H.h)),ee.style.height=H.regionH-X+"px",ee.style.width=H.regionW-Ie+"px"}),new d("http://www.w3.org/ns/ttml#styling fontFamily",function(H,ee,se,Te){for(var X=[],Ie=0;Ie<Te.length;Ie++)Te[Ie]=Te[Ie].trim(),Te[Ie]==="monospaceSerif"?(X.push("Courier New"),X.push('"Liberation Mono"'),X.push("Courier"),X.push("monospace")):Te[Ie]==="proportionalSansSerif"?(X.push("Arial"),X.push("Helvetica"),X.push('"Liberation Sans"'),X.push("sans-serif")):Te[Ie]==="monospace"?X.push("monospace"):Te[Ie]==="sansSerif"?X.push("sans-serif"):Te[Ie]==="serif"?X.push("serif"):Te[Ie]==="monospaceSansSerif"?(X.push("Consolas"),X.push("monospace")):Te[Ie]==="proportionalSerif"?X.push("serif"):X.push(Te[Ie]);if(X.length>0){for(var Le=[X[0]],je=1;je<X.length;je++)Le.indexOf(X[je])==-1&&Le.push(X[je]);X=Le}ee.style.fontFamily=X.join(",")}),new d("http://www.w3.org/ns/ttml#styling shear",function(H,ee,se,Te){if(Te!==0){var X=-.9*Te;H.bpd==="tb"?ee.style.transform="skewX("+X+"deg)":ee.style.transform="skewY("+X+"deg)"}}),new d("http://www.w3.org/ns/ttml#styling fontSize",function(H,ee,se,Te){ee.style.fontSize=Te.toUsedLength(H.w,H.h)+"px"}),new d("http://www.w3.org/ns/ttml#styling fontStyle",function(H,ee,se,Te){ee.style.fontStyle=Te}),new d("http://www.w3.org/ns/ttml#styling fontWeight",function(H,ee,se,Te){ee.style.fontWeight=Te}),new d("http://www.w3.org/ns/ttml#styling lineHeight",function(H,ee,se,Te){ee.style.lineHeight=Te==="normal"?"normal":Te.toUsedLength(H.w,H.h)+"px"}),new d("http://www.w3.org/ns/ttml#styling opacity",function(H,ee,se,Te){ee.style.opacity=Te}),new d("http://www.w3.org/ns/ttml#styling origin",function(H,ee,se,Te){ee.style.top=Te.h.toUsedLength(H.w,H.h)+"px",ee.style.left=Te.w.toUsedLength(H.w,H.h)+"px"}),new d("http://www.w3.org/ns/ttml#styling overflow",function(H,ee,se,Te){ee.style.overflow=Te}),new d("http://www.w3.org/ns/ttml#styling padding",function(H,ee,se,Te){var X=[];X[0]=Te[0].toUsedLength(H.w,H.h)+"px",X[1]=Te[3].toUsedLength(H.w,H.h)+"px",X[2]=Te[2].toUsedLength(H.w,H.h)+"px",X[3]=Te[1].toUsedLength(H.w,H.h)+"px",ee.style.padding=X.join(" ")}),new d("http://www.w3.org/ns/ttml#styling position",function(H,ee,se,Te){ee.style.top=Te.h.toUsedLength(H.w,H.h)+"px",ee.style.left=Te.w.toUsedLength(H.w,H.h)+"px"}),new d("http://www.w3.org/ns/ttml#styling rubyAlign",function(H,ee,se,Te){ee.style.rubyAlign=Te==="spaceAround"?"space-around":"center"}),new d("http://www.w3.org/ns/ttml#styling rubyPosition",function(H,ee,se,Te){var X;Te!=="before"&&Te!=="after"||(X=x?Te:H.bpd==="tb"||H.bpd==="rl"?Te==="before"?"over":"under":Te==="before"?"under":"over",ee.parentElement.style[$]=X)}),new d("http://www.w3.org/ns/ttml#styling showBackground",null),new d("http://www.w3.org/ns/ttml#styling textAlign",function(H,ee,se,Te){var X;X=Te==="start"?H.ipd==="rl"?"right":"left":Te==="end"?H.ipd==="rl"?"left":"right":Te,ee.style.textAlign=X}),new d("http://www.w3.org/ns/ttml#styling textDecoration",function(H,ee,se,Te){ee.style.textDecoration=Te.join(" ").replace("lineThrough","line-through")}),new d("http://www.w3.org/ns/ttml#styling textOutline",function(H,ee,se,Te){}),new d("http://www.w3.org/ns/ttml#styling textShadow",function(H,ee,se,Te){var X=se.styleAttrs[e.byName.textOutline.qname];if(Te==="none"&&X==="none")ee.style.textShadow="";else{var Ie=[];if(X!=="none"){var Le="rgba("+X.color[0].toString()+","+X.color[1].toString()+","+X.color[2].toString()+","+(X.color[3]/255).toString()+")";Ie.push("1px 1px 1px "+Le),Ie.push("-1px 1px 1px "+Le),Ie.push("1px -1px 1px "+Le),Ie.push("-1px -1px 1px "+Le)}if(Te!=="none")for(var je=0;je<Te.length;je++)Ie.push(Te[je].x_off.toUsedLength(H.w,H.h)+"px "+Te[je].y_off.toUsedLength(H.w,H.h)+"px "+Te[je].b_radius.toUsedLength(H.w,H.h)+"px rgba("+Te[je].color[0].toString()+","+Te[je].color[1].toString()+","+Te[je].color[2].toString()+","+(Te[je].color[3]/255).toString()+")");ee.style.textShadow=Ie.join(",")}}),new d("http://www.w3.org/ns/ttml#styling textCombine",function(H,ee,se,Te){ee.style.textCombineUpright=Te}),new d("http://www.w3.org/ns/ttml#styling textEmphasis",function(H,ee,se,Te){}),new d("http://www.w3.org/ns/ttml#styling unicodeBidi",function(H,ee,se,Te){var X;X=Te==="bidiOverride"?"bidi-override":Te,ee.style.unicodeBidi=X}),new d("http://www.w3.org/ns/ttml#styling visibility",function(H,ee,se,Te){ee.style.visibility=Te}),new d("http://www.w3.org/ns/ttml#styling wrapOption",function(H,ee,se,Te){Te==="wrap"?se.space==="preserve"?ee.style.whiteSpace="pre-wrap":ee.style.whiteSpace="normal":se.space==="preserve"?ee.style.whiteSpace="pre":ee.style.whiteSpace="noWrap"}),new d("http://www.w3.org/ns/ttml#styling writingMode",function(H,ee,se,Te){Te==="lrtb"||Te==="lr"||Te==="rltb"||Te==="rl"?ee.style.writingMode="horizontal-tb":Te==="tblr"?ee.style.writingMode="vertical-lr":Te!=="tbrl"&&Te!=="tb"||(ee.style.writingMode="vertical-rl")}),new d("http://www.w3.org/ns/ttml#styling zIndex",function(H,ee,se,Te){ee.style.zIndex=Te}),new d("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(H,ee,se,Te){H.displayForcedOnlyMode&&Te===!1&&(ee.style.visibility="hidden")})],k={},q=0;q<I.length;q++)k[I[q].qname]=I[q];var x="webkitRubyPosition"in window.getComputedStyle(document.documentElement),$=x?"webkitRubyPosition":"rubyPosition",O="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",K="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function re(H,ee){if(H&&H.error&&H.error(ee))throw ee}})(we,typeof imscNames>"u"?M(210):imscNames,typeof imscStyles>"u"?M(6811):imscStyles,typeof imscUtils>"u"?M(5926):imscUtils)},4080:function(it,we,M){(function(oe,T,t,e){oe.generateISD=function(d,I,k){var q,x=new m(d),$={},O={},K=d.head.styling.initials[t.byName.showBackground.qname],re=d.head.styling.initials[t.byName.backgroundColor.qname];for(var H in d.head.layout.regions)if(d.head.layout.regions.hasOwnProperty(H)){var ee=d.head.layout.regions[H],se=ee.styleAttrs[t.byName.showBackground.qname]||K,Te=ee.styleAttrs[t.byName.backgroundColor.qname]||re;O[ee.id]=(se==="always"||se===void 0)&&Te!==void 0&&!(I<ee.begin||I>=ee.end)}for(var X in d.body&&d.body.regionID&&(O[d.body.regionID]=!0),q=d.body!==null?function Le(je,Ee){if(Ee.contents){var Pe={};for(var Ve in Ee)Ee.hasOwnProperty(Ve)&&(Pe[Ve]=Ee[Ve]);return Pe.contents=[],Ee.contents.filter(function(et){return!(je<et.begin||je>=et.end)}).forEach(function(et){var _e=Le(je,et);_e.regionID&&(O[_e.regionID]=!0),_e!==null&&Pe.contents.push(_e)}),Pe}return Ee}(I,d.body):null,O[""]!==void 0&&(O[""]=!0),O)if(O[X]){var Ie=p(d,I,d.head.layout.regions[X],q,null,"",d.head.layout.regions[X],k,$);Ie!==null&&x.contents.push(Ie.element)}return x};var y=[t.byName.color.qname,t.byName.textCombine.qname,t.byName.textDecoration.qname,t.byName.textEmphasis.qname,t.byName.textOutline.qname,t.byName.textShadow.qname];function p(d,I,k,q,x,$,O,K,re){if(I<O.begin||I>=O.end)return null;var H="regionID"in O&&O.regionID!==""?O.regionID:$;if(x!==null&&H!==k.id&&(!("contents"in O)||"contents"in O&&O.contents.length===0||H!==""))return null;var ee=new n(O);if("sets"in O)for(var se=0;se<O.sets.length;se++)I<O.sets[se].begin||I>=O.sets[se].end||(ee.styleAttrs[O.sets[se].qname]=O.sets[se].value);var Te={};for(var X in ee.styleAttrs)if(ee.styleAttrs.hasOwnProperty(X)&&(Te[X]=!0,ee.kind==="region"&&X===t.byName.writingMode.qname&&!(t.byName.direction.qname in ee.styleAttrs))){var Ie=ee.styleAttrs[X];Ie==="lrtb"||Ie==="lr"?ee.styleAttrs[t.byName.direction.qname]="ltr":Ie!=="rltb"&&Ie!=="rl"||(ee.styleAttrs[t.byName.direction.qname]="rtl")}if(x!==null)for(var Le=0;Le<t.all.length;Le++){var je=t.all[Le];if(je.qname===t.byName.textDecoration.qname){var Ee=x.styleAttrs[je.qname],Pe=ee.styleAttrs[je.qname],Ve=[];Pe===void 0?Ve=Ee:Pe.indexOf("none")===-1?((Pe.indexOf("noUnderline")===-1&&Ee.indexOf("underline")!==-1||Pe.indexOf("underline")!==-1)&&Ve.push("underline"),(Pe.indexOf("noLineThrough")===-1&&Ee.indexOf("lineThrough")!==-1||Pe.indexOf("lineThrough")!==-1)&&Ve.push("lineThrough"),(Pe.indexOf("noOverline")===-1&&Ee.indexOf("overline")!==-1||Pe.indexOf("overline")!==-1)&&Ve.push("overline")):Ve.push("none"),ee.styleAttrs[je.qname]=Ve}else if(je.qname!==t.byName.fontSize.qname||je.qname in ee.styleAttrs||ee.kind!=="span"||ee.styleAttrs[t.byName.ruby.qname]!=="textContainer")if(je.qname!==t.byName.fontSize.qname||je.qname in ee.styleAttrs||ee.kind!=="span"||ee.styleAttrs[t.byName.ruby.qname]!=="text")je.inherit&&je.qname in x.styleAttrs&&!(je.qname in ee.styleAttrs)&&(ee.styleAttrs[je.qname]=x.styleAttrs[je.qname]);else{var et=x.styleAttrs[t.byName.fontSize.qname];x.styleAttrs[t.byName.ruby.qname]==="textContainer"?ee.styleAttrs[je.qname]=et:ee.styleAttrs[je.qname]=new e.ComputedLength(.5*et.rw,.5*et.rh)}else{var _e=x.styleAttrs[t.byName.fontSize.qname];ee.styleAttrs[je.qname]=new e.ComputedLength(.5*_e.rw,.5*_e.rh)}}for(var Oe=0;Oe<t.all.length;Oe++){var _t=t.all[Oe];if(!(_t.qname in ee.styleAttrs)&&!(_t.qname===t.byName.position.qname&&t.byName.origin.qname in ee.styleAttrs||_t.qname===t.byName.origin.qname&&t.byName.position.qname in ee.styleAttrs)){var dt=d.head.styling.initials[_t.qname]||_t.initial;if(dt!==null&&(ee.kind==="region"||_t.inherit===!1&&dt!==null)){var Ze=_t.parse(dt);Ze!==null?(ee.styleAttrs[_t.qname]=Ze,Te[_t.qname]=!0):c(K,"Invalid initial value for '"+_t.qname+"' on element '"+ee.kind)}}}for(var Je=0;Je<t.all.length;Je++){var de=t.all[Je];if(de.qname in Te&&de.compute!==null){var ge=de.compute(d,x,ee,ee.styleAttrs[de.qname],re);ge!==null?ee.styleAttrs[de.qname]=ge:(ee.styleAttrs[de.qname]=de.compute(d,x,ee,de.parse(de.initial),re),c(K,"Style '"+de.qname+"' on element '"+ee.kind+"' cannot be computed"))}}if(ee.styleAttrs[t.byName.display.qname]==="none")return null;var Be=null;x===null?Be=q===null?[]:[q]:"contents"in O&&(Be=O.contents);for(var f=0;Be!==null&&f<Be.length;f++){var o=p(d,I,k,q,ee,H,Be[f],K,re);o!==null&&ee.contents.push(o.element)}for(var v in ee.styleAttrs)if(ee.styleAttrs.hasOwnProperty(v)){var S=!1;if(ee.kind==="span"){var W=ee.styleAttrs[t.byName.ruby.qname];(S=(W==="container"||W==="textContainer"||W==="baseContainer")&&y.indexOf(v)!==-1)||(S=W!=="container"&&v===t.byName.rubyAlign.qname),S||(S=!(W==="textContainer"||W==="text")&&v===t.byName.rubyPosition.qname)}if(!S){var V=t.byQName[v];"applies"in V&&(S=V.applies.indexOf(ee.kind)===-1)}S&&delete ee.styleAttrs[v]}var be=ee.styleAttrs[t.byName.ruby.qname];if(ee.kind==="p"||ee.kind==="span"&&(be==="textContainer"||be==="text")){var ze=[];u(ee,ze),function(Me){for(var De,Ae=0;Ae<Me.length;)if((De=Me[Ae]).kind!=="br"&&De.space!=="preserve"){var xe=De.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(xe)&&(Ae===0||(Xe=Me[Ae-1]).kind==="br"||/[\r\n\t ]$/.test(Xe.text))&&(xe=xe.substring(1)),De.text=xe,xe.length===0?Me.splice(Ae,1):Ae++}else Ae++;var Xe,mt;for(Ae=0;Ae<Me.length;Ae++)(De=Me[Ae]).kind!=="br"&&De.space!=="preserve"?/[ ]$/.test(De.text)&&(Ae===Me.length-1||(mt=Me[Ae+1]).kind==="br"||mt.space==="preserve"&&/^[\r\n]/.test(mt.text))&&(De.text=De.text.slice(0,-1)):Ae++}(ze),_(ee)}return ee.kind==="div"&&t.byName.backgroundImage.qname in ee.styleAttrs||ee.kind==="br"||ee.kind==="image"||"contents"in ee&&ee.contents.length>0||ee.kind==="span"&&ee.text!==null||ee.kind==="region"&&ee.styleAttrs[t.byName.showBackground.qname]==="always"?{region_id:H,element:ee}:null}function u(d,I){if("contents"in d)for(var k=0;k<d.contents.length;k++){var q=d.contents[k],x=q.styleAttrs[t.byName.ruby.qname];(q.kind!=="span"||x!=="textContainer"&&x!=="text")&&("contents"in q?u(q,I):(q.kind==="span"&&q.text.length!==0||q.kind==="br")&&I.push(q))}}function _(d){if(d.kind==="br")return!1;if("text"in d)return d.text.length===0;if("contents"in d){for(var I=d.contents.length;I--;)_(d.contents[I])&&d.contents.splice(I,1);return d.contents.length===0}}function m(d){this.contents=[],this.aspectRatio=d.aspectRatio,this.lang=d.lang}function n(d){for(var I in this.kind=d.kind||"region",this.lang=d.lang,d.id&&(this.id=d.id),this.styleAttrs={},d.styleAttrs)d.styleAttrs.hasOwnProperty(I)&&(this.styleAttrs[I]=d.styleAttrs[I]);"src"in d&&(this.src=d.src),"type"in d&&(this.type=d.type),"text"in d?this.text=d.text:(this.kind==="region"||"contents"in d)&&(this.contents=[]),"space"in d&&(this.space=d.space)}function c(d,I){if(d&&d.error&&d.error(I))throw I}})(we,typeof imscNames>"u"?M(210):imscNames,typeof imscStyles>"u"?M(6811):imscStyles,typeof imscUtils>"u"?M(5926):imscUtils)},4403:function(it,we,M){we.generateISD=M(4080).generateISD,we.fromXML=M(3362).fromXML,we.renderHTML=M(506).render},210:function(it,we){(function(M){M.ns_tt="http://www.w3.org/ns/ttml",M.ns_tts="http://www.w3.org/ns/ttml#styling",M.ns_ttp="http://www.w3.org/ns/ttml#parameter",M.ns_xml="http://www.w3.org/XML/1998/namespace",M.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",M.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",M.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",M.ns_ebutts="urn:ebu:tt:style"})(we)},6811:function(it,we,M){(function(oe,T,t){function e(u,_,m,n,c,d,I,k){this.name=_,this.ns=u,this.qname=u+" "+_,this.inherit=c,this.animatable=d,this.initial=m,this.applies=n,this.parse=I,this.compute=k}for(var y in oe.all=[new e(T.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,t.parseColor,null),new e(T.ns_tts,"color","white",["span"],!0,!0,t.parseColor,null),new e(T.ns_tts,"direction","ltr",["p","span"],!0,!0,function(u){return u},null),new e(T.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(u){return u},null),new e(T.ns_tts,"displayAlign","before",["region"],!1,!0,function(u){return u},null),new e(T.ns_tts,"extent","auto",["tt","region"],!1,!0,function(u){if(u==="auto")return u;var _=u.split(" ");if(_.length!==2)return null;var m=t.parseLength(_[0]),n=t.parseLength(_[1]);return n&&m?{h:n,w:m}:null},function(u,_,m,n,c){var d,I;if(n==="auto")d=new t.ComputedLength(0,1);else if((d=t.toComputedLength(n.h.value,n.h.unit,null,u.dimensions.h,null,u.pxLength.h))===null)return null;if(n==="auto")I=new t.ComputedLength(1,0);else if((I=t.toComputedLength(n.w.value,n.w.unit,null,u.dimensions.w,null,u.pxLength.w))===null)return null;return{h:d,w:I}}),new e(T.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(u){for(var _=u.split(","),m=[],n=0;n<_.length;n++)_[n]=_[n].trim(),_[n].charAt(0)!=="'"&&_[n].charAt(0)!=='"'&&_[n]==="default"?m.push("monospaceSerif"):m.push(_[n]);return m},null),new e(T.ns_tts,"shear","0%",["p"],!0,!0,t.parseLength,function(u,_,m,n){return n.unit!=="%"?null:Math.abs(n.value)>100?100*Math.sign(n.value):n.value}),new e(T.ns_tts,"fontSize","1c",["span","p"],!0,!0,t.parseLength,function(u,_,m,n,c){return t.toComputedLength(n.value,n.unit,_!==null?_.styleAttrs[oe.byName.fontSize.qname]:u.cellLength.h,_!==null?_.styleAttrs[oe.byName.fontSize.qname]:u.cellLength.h,u.cellLength.h,u.pxLength.h)}),new e(T.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(u){return u},null),new e(T.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(u){return u},null),new e(T.ns_tts,"lineHeight","normal",["p"],!0,!0,function(u){return u==="normal"?u:t.parseLength(u)},function(u,_,m,n,c){var d;if(n==="normal")d=n;else if((d=t.toComputedLength(n.value,n.unit,m.styleAttrs[oe.byName.fontSize.qname],m.styleAttrs[oe.byName.fontSize.qname],u.cellLength.h,u.pxLength.h))===null)return null;return d}),new e(T.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new e(T.ns_tts,"origin","auto",["region"],!1,!0,function(u){if(u==="auto")return u;var _=u.split(" ");if(_.length!==2)return null;var m=t.parseLength(_[0]),n=t.parseLength(_[1]);return n&&m?{h:n,w:m}:null},function(u,_,m,n,c){var d,I;if(n==="auto")d=new t.ComputedLength(0,0);else if((d=t.toComputedLength(n.h.value,n.h.unit,null,u.dimensions.h,null,u.pxLength.h))===null)return null;if(n==="auto")I=new t.ComputedLength(0,0);else if((I=t.toComputedLength(n.w.value,n.w.unit,null,u.dimensions.w,null,u.pxLength.w))===null)return null;return{h:d,w:I}}),new e(T.ns_tts,"overflow","hidden",["region"],!1,!0,function(u){return u},null),new e(T.ns_tts,"padding","0px",["region"],!1,!0,function(u){var _=u.split(" ");if(_.length>4)return null;for(var m=[],n=0;n<_.length;n++){var c=t.parseLength(_[n]);if(!c)return null;m.push(c)}return m},function(u,_,m,n,c){var d;if(n.length===1)d=[n[0],n[0],n[0],n[0]];else if(n.length===2)d=[n[0],n[1],n[0],n[1]];else if(n.length===3)d=[n[0],n[1],n[2],n[1]];else{if(n.length!==4)return null;d=[n[0],n[1],n[2],n[3]]}var I=m.styleAttrs[oe.byName.writingMode.qname];if(I==="lrtb"||I==="lr")d=[d[0],d[3],d[2],d[1]];else if(I==="rltb"||I==="rl")d=[d[0],d[1],d[2],d[3]];else if(I==="tblr")d=[d[3],d[0],d[1],d[2]];else{if(I!=="tbrl"&&I!=="tb")return null;d=[d[3],d[2],d[1],d[0]]}for(var k=[],q=0;q<d.length;q++)if(d[q].value===0)k[q]=new t.ComputedLength(0,0);else if(k[q]=t.toComputedLength(d[q].value,d[q].unit,m.styleAttrs[oe.byName.fontSize.qname],q===0||q===2?m.styleAttrs[oe.byName.extent.qname].h:m.styleAttrs[oe.byName.extent.qname].w,q===0||q===2?u.cellLength.h:u.cellLength.w,q===0||q===2?u.pxLength.h:u.pxLength.w),k[q]===null)return null;return k}),new e(T.ns_tts,"position","top left",["region"],!1,!0,function(u){return t.parsePosition(u)},function(u,_,m,n){var c,d;return(c=t.toComputedLength(n.v.offset.value,n.v.offset.unit,null,new t.ComputedLength(-m.styleAttrs[oe.byName.extent.qname].h.rw,u.dimensions.h.rh-m.styleAttrs[oe.byName.extent.qname].h.rh),null,u.pxLength.h))===null?null:(n.v.edge==="bottom"&&(c=new t.ComputedLength(-c.rw-m.styleAttrs[oe.byName.extent.qname].h.rw,u.dimensions.h.rh-c.rh-m.styleAttrs[oe.byName.extent.qname].h.rh)),d=t.toComputedLength(n.h.offset.value,n.h.offset.unit,null,new t.ComputedLength(u.dimensions.w.rw-m.styleAttrs[oe.byName.extent.qname].w.rw,-m.styleAttrs[oe.byName.extent.qname].w.rh),null,u.pxLength.w),c===null?null:(n.h.edge==="right"&&(d=new t.ComputedLength(u.dimensions.w.rw-d.rw-m.styleAttrs[oe.byName.extent.qname].w.rw,-d.rh-m.styleAttrs[oe.byName.extent.qname].w.rh)),{h:c,w:d}))}),new e(T.ns_tts,"ruby","none",["span"],!1,!0,function(u){return u},null),new e(T.ns_tts,"rubyAlign","center",["span"],!0,!0,function(u){return u!=="center"&&u!=="spaceAround"?null:u},null),new e(T.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(u){return u},null),new e(T.ns_tts,"rubyReserve","none",["p"],!0,!0,function(u){var _=u.split(" "),m=[null,null];if(_.length===0||_.length>2||_[0]!=="none"&&_[0]!=="both"&&_[0]!=="after"&&_[0]!=="before"&&_[0]!=="outside")return null;if(m[0]=_[0],_.length===2&&_[0]!=="none"){var n=t.parseLength(_[1]);if(!n)return null;m[1]=n}return m},function(u,_,m,n,c){if(n[0]==="none")return n;var d;return(d=n[1]===null?new t.ComputedLength(.5*m.styleAttrs[oe.byName.fontSize.qname].rw,.5*m.styleAttrs[oe.byName.fontSize.qname].rh):t.toComputedLength(n[1].value,n[1].unit,m.styleAttrs[oe.byName.fontSize.qname],m.styleAttrs[oe.byName.fontSize.qname],u.cellLength.h,u.pxLength.h))===null?null:[n[0],d]}),new e(T.ns_tts,"showBackground","always",["region"],!1,!0,function(u){return u},null),new e(T.ns_tts,"textAlign","start",["p"],!0,!0,function(u){return u},function(u,_,m,n,c){return n==="left"?"start":n==="right"?"end":n}),new e(T.ns_tts,"textCombine","none",["span"],!0,!0,function(u){return u==="none"||u==="all"?u:null},null),new e(T.ns_tts,"textDecoration","none",["span"],!0,!0,function(u){return u.split(" ")},null),new e(T.ns_tts,"textEmphasis","none",["span"],!0,!0,function(u){for(var _=u.split(" "),m={style:null,symbol:null,color:null,position:null},n=0;n<_.length;n++)if(_[n]==="none"||_[n]==="auto")m.style=_[n];else if(_[n]==="filled"||_[n]==="open")m.style=_[n];else if(_[n]==="circle"||_[n]==="dot"||_[n]==="sesame")m.symbol=_[n];else if(_[n]==="current")m.color=_[n];else if(_[n]==="outside"||_[n]==="before"||_[n]==="after")m.position=_[n];else if(m.color=t.parseColor(_[n]),m.color===null)return null;return m.style==null&&m.symbol==null?m.style="auto":(m.symbol=m.symbol||"circle",m.style=m.style||"filled"),m.position=m.position||"outside",m.color=m.color||"current",m},null),new e(T.ns_tts,"textOutline","none",["span"],!0,!0,function(u){if(u==="none")return u;var _={},m=u.split(" ");if(m.length===0||m.length>2)return null;var n=t.parseColor(m[0]);if(_.color=n,n!==null&&m.shift(),m.length!==1)return null;var c=t.parseLength(m[0]);return c?(_.thickness=c,_):null},function(u,_,m,n,c){if(n==="none")return n;var d={};return n.color===null?d.color=m.styleAttrs[oe.byName.color.qname]:d.color=n.color,d.thickness=t.toComputedLength(n.thickness.value,n.thickness.unit,m.styleAttrs[oe.byName.fontSize.qname],m.styleAttrs[oe.byName.fontSize.qname],u.cellLength.h,u.pxLength.h),d.thickness===null?null:d}),new e(T.ns_tts,"textShadow","none",["span"],!0,!0,t.parseTextShadow,function(u,_,m,n){if(n==="none")return n;for(var c=[],d=0;d<n.length;d++){var I={};if(I.x_off=t.toComputedLength(n[d][0].value,n[d][0].unit,null,m.styleAttrs[oe.byName.fontSize.qname],null,u.pxLength.w),I.x_off===null||(I.y_off=t.toComputedLength(n[d][1].value,n[d][1].unit,null,m.styleAttrs[oe.byName.fontSize.qname],null,u.pxLength.h),I.y_off===null))return null;if(n[d][2]===null)I.b_radius=0;else if(I.b_radius=t.toComputedLength(n[d][2].value,n[d][2].unit,null,m.styleAttrs[oe.byName.fontSize.qname],null,u.pxLength.h),I.b_radius===null)return null;n[d][3]===null?I.color=m.styleAttrs[oe.byName.color.qname]:I.color=n[d][3],c.push(I)}return c}),new e(T.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(u){return u},null),new e(T.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(u){return u},null),new e(T.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(u){return u},null),new e(T.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(u){return u},null),new e(T.ns_tts,"zIndex","auto",["region"],!1,!0,function(u){var _;return u==="auto"?_=u:(_=parseInt(u),isNaN(_)&&(_=null)),_},null),new e(T.ns_ebutts,"linePadding","0c",["p"],!0,!1,t.parseLength,function(u,_,m,n,c){return t.toComputedLength(n.value,n.unit,null,null,u.cellLength.w,null)}),new e(T.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(u){return u},null),new e(T.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(u){return u},null),new e(T.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(u){return u==="true"},null),new e(T.ns_itts,"fillLineGap","false",["p"],!0,!0,function(u){return u==="true"},null)],oe.byQName={},oe.all)oe.byQName[oe.all[y].qname]=oe.all[y];for(var p in oe.byName={},oe.all)oe.byName[oe.all[p].name]=oe.all[p]})(we,typeof imscNames>"u"?M(210):imscNames,typeof imscUtils>"u"?M(5926):imscUtils)},5926:function(it,we){(function(M){var oe=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,T=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,t=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,e={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};M.parseColor=function(p){var u,_=null,m=e[p.toLowerCase()];return m!==void 0?_=m:(u=oe.exec(p))!==null?_=[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16),u[4]!==void 0?parseInt(u[4],16):255]:(u=T.exec(p))!==null?_=[parseInt(u[1]),parseInt(u[2]),parseInt(u[3]),255]:(u=t.exec(p))!==null&&(_=[parseInt(u[1]),parseInt(u[2]),parseInt(u[3]),parseInt(u[4])]),_};var y=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;M.parseLength=function(p){var u,_=null;return(u=y.exec(p))!==null&&(_={value:parseFloat(u[1]),unit:u[2]}),_},M.parseTextShadow=function(p){for(var u=p.match(/([^\(,\)]|\([^\)]+\))+/g),_=[],m=0;m<u.length;m++){var n=u[m].split(" ");if(n.length===1&&n[0]==="none")return"none";if(n.length>1&&n.length<5){var c=[null,null,null,null],d=M.parseLength(n.shift());if(d===null||(c[0]=d,(d=M.parseLength(n.shift()))===null))return null;if(c[1]=d,n.length===0){_.push(c);continue}if((d=M.parseLength(n[0]))!==null&&(c[2]=d,n.shift()),n.length===0){_.push(c);continue}var I=M.parseColor(n[0]);if(I===null)return null;c[3]=I,_.push(c)}}return _},M.parsePosition=function(p){var u=p.split(" "),_=function(q){return q==="center"||q==="left"||q==="top"||q==="bottom"||q==="right"};if(u.length>4)return null;for(var m=0;m<u.length;m++)if(!_(u[m])){var n=M.parseLength(u[m]);if(n===null)return null;u[m]=n}for(var c={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},d=0;d<u.length;){var I=u[d++];if(_(I)){var k={value:0,unit:"%"};u.length!==2&&d<u.length&&!_(u[d])&&(k=u[d++]),I==="right"?(c.h.edge=I,c.h.offset=k):I==="bottom"?(c.v.edge=I,c.v.offset=k):I==="left"?c.h.offset=k:I==="top"&&(c.v.offset=k)}else{if(u.length!==1&&u.length!==2)return null;d===1?c.h.offset=I:c.v.offset=I}}return c},M.ComputedLength=function(p,u){this.rw=p,this.rh=u},M.ComputedLength.prototype.toUsedLength=function(p,u){return p*this.rw+u*this.rh},M.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},M.toComputedLength=function(p,u,_,m,n,c){return u==="%"&&m?new M.ComputedLength(m.rw*p/100,m.rh*p/100):u==="em"&&_?new M.ComputedLength(_.rw*p,_.rh*p):u==="c"&&n?new M.ComputedLength(p*n.rw,p*n.rh):u==="px"&&c?new M.ComputedLength(p*c.rw,p*c.rh):u==="rh"?new M.ComputedLength(0,p/100):u==="rw"?new M.ComputedLength(p/100,0):null}})(we)},3516:function(it){it.exports=function(we){var M=typeof we=="string"?we.charCodeAt(0):we;return M>=97&&M<=122||M>=65&&M<=90}},2219:function(it,we,M){var oe=M(3516),T=M(395);it.exports=function(t){return oe(t)||T(t)}},395:function(it){it.exports=function(we){var M=typeof we=="string"?we.charCodeAt(0):we;return M>=48&&M<=57}},3875:function(it){function we(T){if(typeof T!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(T))}function M(T,t){for(var e,y="",p=0,u=-1,_=0,m=0;m<=T.length;++m){if(m<T.length)e=T.charCodeAt(m);else{if(e===47)break;e=47}if(e===47){if(!(u===m-1||_===1))if(u!==m-1&&_===2){if(y.length<2||p!==2||y.charCodeAt(y.length-1)!==46||y.charCodeAt(y.length-2)!==46){if(y.length>2){var n=y.lastIndexOf("/");if(n!==y.length-1){n===-1?(y="",p=0):p=(y=y.slice(0,n)).length-1-y.lastIndexOf("/"),u=m,_=0;continue}}else if(y.length===2||y.length===1){y="",p=0,u=m,_=0;continue}}t&&(y.length>0?y+="/..":y="..",p=2)}else y.length>0?y+="/"+T.slice(u+1,m):y=T.slice(u+1,m),p=m-u-1;u=m,_=0}else e===46&&_!==-1?++_:_=-1}return y}var oe={resolve:function(){for(var T,t="",e=!1,y=arguments.length-1;y>=-1&&!e;y--){var p;y>=0?p=arguments[y]:(T===void 0&&(T=process.cwd()),p=T),we(p),p.length!==0&&(t=p+"/"+t,e=p.charCodeAt(0)===47)}return t=M(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(T){if(we(T),T.length===0)return".";var t=T.charCodeAt(0)===47,e=T.charCodeAt(T.length-1)===47;return(T=M(T,!t)).length!==0||t||(T="."),T.length>0&&e&&(T+="/"),t?"/"+T:T},isAbsolute:function(T){return we(T),T.length>0&&T.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var T,t=0;t<arguments.length;++t){var e=arguments[t];we(e),e.length>0&&(T===void 0?T=e:T+="/"+e)}return T===void 0?".":oe.normalize(T)},relative:function(T,t){if(we(T),we(t),T===t||(T=oe.resolve(T))===(t=oe.resolve(t)))return"";for(var e=1;e<T.length&&T.charCodeAt(e)===47;++e);for(var y=T.length,p=y-e,u=1;u<t.length&&t.charCodeAt(u)===47;++u);for(var _=t.length-u,m=p<_?p:_,n=-1,c=0;c<=m;++c){if(c===m){if(_>m){if(t.charCodeAt(u+c)===47)return t.slice(u+c+1);if(c===0)return t.slice(u+c)}else p>m&&(T.charCodeAt(e+c)===47?n=c:c===0&&(n=0));break}var d=T.charCodeAt(e+c);if(d!==t.charCodeAt(u+c))break;d===47&&(n=c)}var I="";for(c=e+n+1;c<=y;++c)c!==y&&T.charCodeAt(c)!==47||(I.length===0?I+="..":I+="/..");return I.length>0?I+t.slice(u+n):(u+=n,t.charCodeAt(u)===47&&++u,t.slice(u))},_makeLong:function(T){return T},dirname:function(T){if(we(T),T.length===0)return".";for(var t=T.charCodeAt(0),e=t===47,y=-1,p=!0,u=T.length-1;u>=1;--u)if((t=T.charCodeAt(u))===47){if(!p){y=u;break}}else p=!1;return y===-1?e?"/":".":e&&y===1?"//":T.slice(0,y)},basename:function(T,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');we(T);var e,y=0,p=-1,u=!0;if(t!==void 0&&t.length>0&&t.length<=T.length){if(t.length===T.length&&t===T)return"";var _=t.length-1,m=-1;for(e=T.length-1;e>=0;--e){var n=T.charCodeAt(e);if(n===47){if(!u){y=e+1;break}}else m===-1&&(u=!1,m=e+1),_>=0&&(n===t.charCodeAt(_)?--_==-1&&(p=e):(_=-1,p=m))}return y===p?p=m:p===-1&&(p=T.length),T.slice(y,p)}for(e=T.length-1;e>=0;--e)if(T.charCodeAt(e)===47){if(!u){y=e+1;break}}else p===-1&&(u=!1,p=e+1);return p===-1?"":T.slice(y,p)},extname:function(T){we(T);for(var t=-1,e=0,y=-1,p=!0,u=0,_=T.length-1;_>=0;--_){var m=T.charCodeAt(_);if(m!==47)y===-1&&(p=!1,y=_+1),m===46?t===-1?t=_:u!==1&&(u=1):t!==-1&&(u=-1);else if(!p){e=_+1;break}}return t===-1||y===-1||u===0||u===1&&t===y-1&&t===e+1?"":T.slice(t,y)},format:function(T){if(T===null||typeof T!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof T);return function(t,e){var y=e.dir||e.root,p=e.base||(e.name||"")+(e.ext||"");return y?y===e.root?y+p:y+"/"+p:p}(0,T)},parse:function(T){we(T);var t={root:"",dir:"",base:"",ext:"",name:""};if(T.length===0)return t;var e,y=T.charCodeAt(0),p=y===47;p?(t.root="/",e=1):e=0;for(var u=-1,_=0,m=-1,n=!0,c=T.length-1,d=0;c>=e;--c)if((y=T.charCodeAt(c))!==47)m===-1&&(n=!1,m=c+1),y===46?u===-1?u=c:d!==1&&(d=1):u!==-1&&(d=-1);else if(!n){_=c+1;break}return u===-1||m===-1||d===0||d===1&&u===m-1&&u===_+1?m!==-1&&(t.base=t.name=_===0&&p?T.slice(1,m):T.slice(_,m)):(_===0&&p?(t.name=T.slice(1,u),t.base=T.slice(1,m)):(t.name=T.slice(_,u),t.base=T.slice(_,m)),t.ext=T.slice(u,m)),_>0?t.dir=T.slice(0,_-1):p&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};oe.posix=oe,it.exports=oe},8387:function(it,we,M){var oe=M(1549),T=oe.Buffer;function t(y,p){for(var u in y)p[u]=y[u]}function e(y,p,u){return T(y,p,u)}T.from&&T.alloc&&T.allocUnsafe&&T.allocUnsafeSlow?it.exports=oe:(t(oe,we),we.Buffer=e),t(T,e),e.from=function(y,p,u){if(typeof y=="number")throw new TypeError("Argument must not be a number");return T(y,p,u)},e.alloc=function(y,p,u){if(typeof y!="number")throw new TypeError("Argument must be a number");var _=T(y);return p!==void 0?typeof u=="string"?_.fill(p,u):_.fill(p):_.fill(0),_},e.allocUnsafe=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return T(y)},e.allocUnsafeSlow=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return oe.SlowBuffer(y)}},5378:function(it,we,M){(function(oe){oe.parser=function(f,o){return new e(f,o)},oe.SAXParser=e,oe.SAXStream=p,oe.createStream=function(f,o){return new p(f,o)},oe.MAX_BUFFER_LENGTH=65536;var T,t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function e(f,o){if(!(this instanceof e))return new e(f,o);var v=this;(function(S){for(var W=0,V=t.length;W<V;W++)S[t[W]]=""})(v),v.q=v.c="",v.bufferCheckPosition=oe.MAX_BUFFER_LENGTH,v.opt=o||{},v.opt.lowercase=v.opt.lowercase||v.opt.lowercasetags,v.looseCase=v.opt.lowercase?"toLowerCase":"toUpperCase",v.tags=[],v.closed=v.closedRoot=v.sawRoot=!1,v.tag=v.error=null,v.strict=!!f,v.noscript=!(!f&&!v.opt.noscript),v.state=X.BEGIN,v.strictEntities=v.opt.strictEntities,v.ENTITIES=v.strictEntities?Object.create(oe.XML_ENTITIES):Object.create(oe.ENTITIES),v.attribList=[],v.opt.xmlns&&(v.ns=Object.create(k)),v.trackPosition=v.opt.position!==!1,v.trackPosition&&(v.position=v.line=v.column=0),Le(v,"onready")}oe.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(f){function o(){}return o.prototype=f,new o}),Object.keys||(Object.keys=function(f){var o=[];for(var v in f)f.hasOwnProperty(v)&&o.push(v);return o}),e.prototype={end:function(){et(this)},write:function(f){var o=this;if(this.error)throw this.error;if(o.closed)return Ve(o,"Cannot write after close. Assign an onready handler.");if(f===null)return et(o);typeof f=="object"&&(f=f.toString());for(var v=0,S="";S=Be(f,v++),o.c=S,S;)switch(o.trackPosition&&(o.position++,S===`
`?(o.line++,o.column=0):o.column++),o.state){case X.BEGIN:if(o.state=X.BEGIN_WHITESPACE,S==="\uFEFF")continue;ge(o,S);continue;case X.BEGIN_WHITESPACE:ge(o,S);continue;case X.TEXT:if(o.sawRoot&&!o.closedRoot){for(var W=v-1;S&&S!=="<"&&S!=="&";)(S=Be(f,v++))&&o.trackPosition&&(o.position++,S===`
`?(o.line++,o.column=0):o.column++);o.textNode+=f.substring(W,v-1)}S!=="<"||o.sawRoot&&o.closedRoot&&!o.strict?(!H(u,S)||o.sawRoot&&!o.closedRoot||_e(o,"Text data outside of root node."),S==="&"?o.state=X.TEXT_ENTITY:o.textNode+=S):(o.state=X.OPEN_WAKA,o.startTagPosition=o.position);continue;case X.SCRIPT:S==="<"?o.state=X.SCRIPT_ENDING:o.script+=S;continue;case X.SCRIPT_ENDING:S==="/"?o.state=X.CLOSE_TAG:(o.script+="<"+S,o.state=X.SCRIPT);continue;case X.OPEN_WAKA:if(S==="!")o.state=X.SGML_DECL,o.sgmlDecl="";else if(!re(u,S))if(re(q,S))o.state=X.OPEN_TAG,o.tagName=S;else if(S==="/")o.state=X.CLOSE_TAG,o.tagName="";else if(S==="?")o.state=X.PROC_INST,o.procInstName=o.procInstBody="";else{if(_e(o,"Unencoded <"),o.startTagPosition+1<o.position){var V=o.position-o.startTagPosition;S=new Array(V).join(" ")+S}o.textNode+="<"+S,o.state=X.TEXT}continue;case X.SGML_DECL:(o.sgmlDecl+S).toUpperCase()==="[CDATA["?(je(o,"onopencdata"),o.state=X.CDATA,o.sgmlDecl="",o.cdata=""):o.sgmlDecl+S==="--"?(o.state=X.COMMENT,o.comment="",o.sgmlDecl=""):(o.sgmlDecl+S).toUpperCase()==="DOCTYPE"?(o.state=X.DOCTYPE,(o.doctype||o.sawRoot)&&_e(o,"Inappropriately located doctype declaration"),o.doctype="",o.sgmlDecl=""):S===">"?(je(o,"onsgmldeclaration",o.sgmlDecl),o.sgmlDecl="",o.state=X.TEXT):(re(n,S)&&(o.state=X.SGML_DECL_QUOTED),o.sgmlDecl+=S);continue;case X.SGML_DECL_QUOTED:S===o.q&&(o.state=X.SGML_DECL,o.q=""),o.sgmlDecl+=S;continue;case X.DOCTYPE:S===">"?(o.state=X.TEXT,je(o,"ondoctype",o.doctype),o.doctype=!0):(o.doctype+=S,S==="["?o.state=X.DOCTYPE_DTD:re(n,S)&&(o.state=X.DOCTYPE_QUOTED,o.q=S));continue;case X.DOCTYPE_QUOTED:o.doctype+=S,S===o.q&&(o.q="",o.state=X.DOCTYPE);continue;case X.DOCTYPE_DTD:o.doctype+=S,S==="]"?o.state=X.DOCTYPE:re(n,S)&&(o.state=X.DOCTYPE_DTD_QUOTED,o.q=S);continue;case X.DOCTYPE_DTD_QUOTED:o.doctype+=S,S===o.q&&(o.state=X.DOCTYPE_DTD,o.q="");continue;case X.COMMENT:S==="-"?o.state=X.COMMENT_ENDING:o.comment+=S;continue;case X.COMMENT_ENDING:S==="-"?(o.state=X.COMMENT_ENDED,o.comment=Pe(o.opt,o.comment),o.comment&&je(o,"oncomment",o.comment),o.comment=""):(o.comment+="-"+S,o.state=X.COMMENT);continue;case X.COMMENT_ENDED:S!==">"?(_e(o,"Malformed comment"),o.comment+="--"+S,o.state=X.COMMENT):o.state=X.TEXT;continue;case X.CDATA:S==="]"?o.state=X.CDATA_ENDING:o.cdata+=S;continue;case X.CDATA_ENDING:S==="]"?o.state=X.CDATA_ENDING_2:(o.cdata+="]"+S,o.state=X.CDATA);continue;case X.CDATA_ENDING_2:S===">"?(o.cdata&&je(o,"oncdata",o.cdata),je(o,"onclosecdata"),o.cdata="",o.state=X.TEXT):S==="]"?o.cdata+="]":(o.cdata+="]]"+S,o.state=X.CDATA);continue;case X.PROC_INST:S==="?"?o.state=X.PROC_INST_ENDING:re(u,S)?o.state=X.PROC_INST_BODY:o.procInstName+=S;continue;case X.PROC_INST_BODY:if(!o.procInstBody&&re(u,S))continue;S==="?"?o.state=X.PROC_INST_ENDING:o.procInstBody+=S;continue;case X.PROC_INST_ENDING:S===">"?(je(o,"onprocessinginstruction",{name:o.procInstName,body:o.procInstBody}),o.procInstName=o.procInstBody="",o.state=X.TEXT):(o.procInstBody+="?"+S,o.state=X.PROC_INST_BODY);continue;case X.OPEN_TAG:re(x,S)?o.tagName+=S:(Oe(o),S===">"?Ze(o):S==="/"?o.state=X.OPEN_TAG_SLASH:(H(u,S)&&_e(o,"Invalid character in tag name"),o.state=X.ATTRIB));continue;case X.OPEN_TAG_SLASH:S===">"?(Ze(o,!0),Je(o)):(_e(o,"Forward-slash in opening tag not followed by >"),o.state=X.ATTRIB);continue;case X.ATTRIB:if(re(u,S))continue;S===">"?Ze(o):S==="/"?o.state=X.OPEN_TAG_SLASH:re(q,S)?(o.attribName=S,o.attribValue="",o.state=X.ATTRIB_NAME):_e(o,"Invalid attribute name");continue;case X.ATTRIB_NAME:S==="="?o.state=X.ATTRIB_VALUE:S===">"?(_e(o,"Attribute without value"),o.attribValue=o.attribName,dt(o),Ze(o)):re(u,S)?o.state=X.ATTRIB_NAME_SAW_WHITE:re(x,S)?o.attribName+=S:_e(o,"Invalid attribute name");continue;case X.ATTRIB_NAME_SAW_WHITE:if(S==="=")o.state=X.ATTRIB_VALUE;else{if(re(u,S))continue;_e(o,"Attribute without value"),o.tag.attributes[o.attribName]="",o.attribValue="",je(o,"onattribute",{name:o.attribName,value:""}),o.attribName="",S===">"?Ze(o):re(q,S)?(o.attribName=S,o.state=X.ATTRIB_NAME):(_e(o,"Invalid attribute name"),o.state=X.ATTRIB)}continue;case X.ATTRIB_VALUE:if(re(u,S))continue;re(n,S)?(o.q=S,o.state=X.ATTRIB_VALUE_QUOTED):(_e(o,"Unquoted attribute value"),o.state=X.ATTRIB_VALUE_UNQUOTED,o.attribValue=S);continue;case X.ATTRIB_VALUE_QUOTED:if(S!==o.q){S==="&"?o.state=X.ATTRIB_VALUE_ENTITY_Q:o.attribValue+=S;continue}dt(o),o.q="",o.state=X.ATTRIB_VALUE_CLOSED;continue;case X.ATTRIB_VALUE_CLOSED:re(u,S)?o.state=X.ATTRIB:S===">"?Ze(o):S==="/"?o.state=X.OPEN_TAG_SLASH:re(q,S)?(_e(o,"No whitespace between attributes"),o.attribName=S,o.attribValue="",o.state=X.ATTRIB_NAME):_e(o,"Invalid attribute name");continue;case X.ATTRIB_VALUE_UNQUOTED:if(H(c,S)){S==="&"?o.state=X.ATTRIB_VALUE_ENTITY_U:o.attribValue+=S;continue}dt(o),S===">"?Ze(o):o.state=X.ATTRIB;continue;case X.CLOSE_TAG:if(o.tagName)S===">"?Je(o):re(x,S)?o.tagName+=S:o.script?(o.script+="</"+o.tagName,o.tagName="",o.state=X.SCRIPT):(H(u,S)&&_e(o,"Invalid tagname in closing tag"),o.state=X.CLOSE_TAG_SAW_WHITE);else{if(re(u,S))continue;H(q,S)?o.script?(o.script+="</"+S,o.state=X.SCRIPT):_e(o,"Invalid tagname in closing tag."):o.tagName=S}continue;case X.CLOSE_TAG_SAW_WHITE:if(re(u,S))continue;S===">"?Je(o):_e(o,"Invalid characters in closing tag");continue;case X.TEXT_ENTITY:case X.ATTRIB_VALUE_ENTITY_Q:case X.ATTRIB_VALUE_ENTITY_U:var be,ze;switch(o.state){case X.TEXT_ENTITY:be=X.TEXT,ze="textNode";break;case X.ATTRIB_VALUE_ENTITY_Q:be=X.ATTRIB_VALUE_QUOTED,ze="attribValue";break;case X.ATTRIB_VALUE_ENTITY_U:be=X.ATTRIB_VALUE_UNQUOTED,ze="attribValue"}S===";"?(o[ze]+=de(o),o.entity="",o.state=be):re(o.entity.length?O:$,S)?o.entity+=S:(_e(o,"Invalid character in entity name"),o[ze]+="&"+o.entity+S,o.entity="",o.state=be);continue;default:throw new Error(o,"Unknown state: "+o.state)}return o.position>=o.bufferCheckPosition&&function(Me){for(var De=Math.max(oe.MAX_BUFFER_LENGTH,10),Ae=0,xe=0,Xe=t.length;xe<Xe;xe++){var mt=Me[t[xe]].length;if(mt>De)switch(t[xe]){case"textNode":Ee(Me);break;case"cdata":je(Me,"oncdata",Me.cdata),Me.cdata="";break;case"script":je(Me,"onscript",Me.script),Me.script="";break;default:Ve(Me,"Max buffer length exceeded: "+t[xe])}Ae=Math.max(Ae,mt)}var rt=oe.MAX_BUFFER_LENGTH-Ae;Me.bufferCheckPosition=rt+Me.position}(o),o},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var f;Ee(f=this),f.cdata!==""&&(je(f,"oncdata",f.cdata),f.cdata=""),f.script!==""&&(je(f,"onscript",f.script),f.script="")}};try{T=M(182).Stream}catch{T=function(){}}var y=oe.EVENTS.filter(function(f){return f!=="error"&&f!=="end"});function p(f,o){if(!(this instanceof p))return new p(f,o);T.apply(this),this._parser=new e(f,o),this.writable=!0,this.readable=!0;var v=this;this._parser.onend=function(){v.emit("end")},this._parser.onerror=function(S){v.emit("error",S),v._parser.error=null},this._decoder=null,y.forEach(function(S){Object.defineProperty(v,"on"+S,{get:function(){return v._parser["on"+S]},set:function(W){if(!W)return v.removeAllListeners(S),v._parser["on"+S]=W,W;v.on(S,W)},enumerable:!0,configurable:!1})})}p.prototype=Object.create(T.prototype,{constructor:{value:p}}),p.prototype.write=function(f){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(f)){if(!this._decoder){var o=M(7503).s;this._decoder=new o("utf8")}f=this._decoder.write(f)}return this._parser.write(f.toString()),this.emit("data",f),!0},p.prototype.end=function(f){return f&&f.length&&this.write(f),this._parser.end(),!0},p.prototype.on=function(f,o){var v=this;return v._parser["on"+f]||y.indexOf(f)===-1||(v._parser["on"+f]=function(){var S=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);S.splice(0,0,f),v.emit.apply(v,S)}),T.prototype.on.call(v,f,o)};var u=`\r
	 `,_="0124356789",m="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=`'"`,c=u+">",d="http://www.w3.org/XML/1998/namespace",I="http://www.w3.org/2000/xmlns/",k={xml:d,xmlns:I};u=K(u),_=K(_),m=K(m);var q=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,$=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function K(f){return f.split("").reduce(function(o,v){return o[v]=!0,o},{})}function re(f,o){return function(v){return Object.prototype.toString.call(v)==="[object RegExp]"}(f)?!!o.match(f):f[o]}function H(f,o){return!re(f,o)}n=K(n),c=K(c);var ee,se,Te,X=0;for(var Ie in oe.STATE={BEGIN:X++,BEGIN_WHITESPACE:X++,TEXT:X++,TEXT_ENTITY:X++,OPEN_WAKA:X++,SGML_DECL:X++,SGML_DECL_QUOTED:X++,DOCTYPE:X++,DOCTYPE_QUOTED:X++,DOCTYPE_DTD:X++,DOCTYPE_DTD_QUOTED:X++,COMMENT_STARTING:X++,COMMENT:X++,COMMENT_ENDING:X++,COMMENT_ENDED:X++,CDATA:X++,CDATA_ENDING:X++,CDATA_ENDING_2:X++,PROC_INST:X++,PROC_INST_BODY:X++,PROC_INST_ENDING:X++,OPEN_TAG:X++,OPEN_TAG_SLASH:X++,ATTRIB:X++,ATTRIB_NAME:X++,ATTRIB_NAME_SAW_WHITE:X++,ATTRIB_VALUE:X++,ATTRIB_VALUE_QUOTED:X++,ATTRIB_VALUE_CLOSED:X++,ATTRIB_VALUE_UNQUOTED:X++,ATTRIB_VALUE_ENTITY_Q:X++,ATTRIB_VALUE_ENTITY_U:X++,CLOSE_TAG:X++,CLOSE_TAG_SAW_WHITE:X++,SCRIPT:X++,SCRIPT_ENDING:X++},oe.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},oe.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(oe.ENTITIES).forEach(function(f){var o=oe.ENTITIES[f],v=typeof o=="number"?String.fromCharCode(o):o;oe.ENTITIES[f]=v}),oe.STATE)oe.STATE[oe.STATE[Ie]]=Ie;function Le(f,o,v){f[o]&&f[o](v)}function je(f,o,v){f.textNode&&Ee(f),Le(f,o,v)}function Ee(f){f.textNode=Pe(f.opt,f.textNode),f.textNode&&Le(f,"ontext",f.textNode),f.textNode=""}function Pe(f,o){return f.trim&&(o=o.trim()),f.normalize&&(o=o.replace(/\s+/g," ")),o}function Ve(f,o){return Ee(f),f.trackPosition&&(o+=`
Line: `+f.line+`
Column: `+f.column+`
Char: `+f.c),o=new Error(o),f.error=o,Le(f,"onerror",o),f}function et(f){return f.sawRoot&&!f.closedRoot&&_e(f,"Unclosed root tag"),f.state!==X.BEGIN&&f.state!==X.BEGIN_WHITESPACE&&f.state!==X.TEXT&&Ve(f,"Unexpected end"),Ee(f),f.c="",f.closed=!0,Le(f,"onend"),e.call(f,f.strict,f.opt),f}function _e(f,o){if(typeof f!="object"||!(f instanceof e))throw new Error("bad call to strictFail");f.strict&&Ve(f,o)}function Oe(f){f.strict||(f.tagName=f.tagName[f.looseCase]());var o=f.tags[f.tags.length-1]||f,v=f.tag={name:f.tagName,attributes:{}};f.opt.xmlns&&(v.ns=o.ns),f.attribList.length=0,je(f,"onopentagstart",v)}function _t(f,o){var v=f.indexOf(":")<0?["",f]:f.split(":"),S=v[0],W=v[1];return o&&f==="xmlns"&&(S="xmlns",W=""),{prefix:S,local:W}}function dt(f){if(f.strict||(f.attribName=f.attribName[f.looseCase]()),f.attribList.indexOf(f.attribName)!==-1||f.tag.attributes.hasOwnProperty(f.attribName))f.attribName=f.attribValue="";else{if(f.opt.xmlns){var o=_t(f.attribName,!0),v=o.prefix,S=o.local;if(v==="xmlns")if(S==="xml"&&f.attribValue!==d)_e(f,"xml: prefix must be bound to "+d+`
Actual: `+f.attribValue);else if(S==="xmlns"&&f.attribValue!==I)_e(f,"xmlns: prefix must be bound to "+I+`
Actual: `+f.attribValue);else{var W=f.tag,V=f.tags[f.tags.length-1]||f;W.ns===V.ns&&(W.ns=Object.create(V.ns)),W.ns[S]=f.attribValue}f.attribList.push([f.attribName,f.attribValue])}else f.tag.attributes[f.attribName]=f.attribValue,je(f,"onattribute",{name:f.attribName,value:f.attribValue});f.attribName=f.attribValue=""}}function Ze(f,o){if(f.opt.xmlns){var v=f.tag,S=_t(f.tagName);v.prefix=S.prefix,v.local=S.local,v.uri=v.ns[S.prefix]||"",v.prefix&&!v.uri&&(_e(f,"Unbound namespace prefix: "+JSON.stringify(f.tagName)),v.uri=S.prefix);var W=f.tags[f.tags.length-1]||f;v.ns&&W.ns!==v.ns&&Object.keys(v.ns).forEach(function(Zt){je(f,"onopennamespace",{prefix:Zt,uri:v.ns[Zt]})});for(var V=0,be=f.attribList.length;V<be;V++){var ze=f.attribList[V],Me=ze[0],De=ze[1],Ae=_t(Me,!0),xe=Ae.prefix,Xe=Ae.local,mt=xe===""?"":v.ns[xe]||"",rt={name:Me,value:De,prefix:xe,local:Xe,uri:mt};xe&&xe!=="xmlns"&&!mt&&(_e(f,"Unbound namespace prefix: "+JSON.stringify(xe)),rt.uri=xe),f.tag.attributes[Me]=rt,je(f,"onattribute",rt)}f.attribList.length=0}f.tag.isSelfClosing=!!o,f.sawRoot=!0,f.tags.push(f.tag),je(f,"onopentag",f.tag),o||(f.noscript||f.tagName.toLowerCase()!=="script"?f.state=X.TEXT:f.state=X.SCRIPT,f.tag=null,f.tagName=""),f.attribName=f.attribValue="",f.attribList.length=0}function Je(f){if(!f.tagName)return _e(f,"Weird empty close tag."),f.textNode+="</>",void(f.state=X.TEXT);if(f.script){if(f.tagName!=="script")return f.script+="</"+f.tagName+">",f.tagName="",void(f.state=X.SCRIPT);je(f,"onscript",f.script),f.script=""}var o=f.tags.length,v=f.tagName;f.strict||(v=v[f.looseCase]());for(var S=v;o--&&f.tags[o].name!==S;)_e(f,"Unexpected close tag");if(o<0)return _e(f,"Unmatched closing tag: "+f.tagName),f.textNode+="</"+f.tagName+">",void(f.state=X.TEXT);f.tagName=v;for(var W=f.tags.length;W-- >o;){var V=f.tag=f.tags.pop();f.tagName=f.tag.name,je(f,"onclosetag",f.tagName);var be={};for(var ze in V.ns)be[ze]=V.ns[ze];var Me=f.tags[f.tags.length-1]||f;f.opt.xmlns&&V.ns!==Me.ns&&Object.keys(V.ns).forEach(function(De){var Ae=V.ns[De];je(f,"onclosenamespace",{prefix:De,uri:Ae})})}o===0&&(f.closedRoot=!0),f.tagName=f.attribValue=f.attribName="",f.attribList.length=0,f.state=X.TEXT}function de(f){var o,v=f.entity,S=v.toLowerCase(),W="";return f.ENTITIES[v]?f.ENTITIES[v]:f.ENTITIES[S]?f.ENTITIES[S]:((v=S).charAt(0)==="#"&&(v.charAt(1)==="x"?(v=v.slice(2),W=(o=parseInt(v,16)).toString(16)):(v=v.slice(1),W=(o=parseInt(v,10)).toString(10))),v=v.replace(/^0+/,""),W.toLowerCase()!==v?(_e(f,"Invalid character entity"),"&"+f.entity+";"):String.fromCodePoint(o))}function ge(f,o){o==="<"?(f.state=X.OPEN_WAKA,f.startTagPosition=f.position):H(u,o)&&(_e(f,"Non-whitespace before first tag."),f.textNode=o,f.state=X.TEXT)}function Be(f,o){var v="";return o<f.length&&(v=f.charAt(o)),v}X=oe.STATE,String.fromCodePoint||(ee=String.fromCharCode,se=Math.floor,Te=function(){var f,o,v=16384,S=[],W=-1,V=arguments.length;if(!V)return"";for(var be="";++W<V;){var ze=Number(arguments[W]);if(!isFinite(ze)||ze<0||ze>1114111||se(ze)!==ze)throw RangeError("Invalid code point: "+ze);ze<=65535?S.push(ze):(f=55296+((ze-=65536)>>10),o=ze%1024+56320,S.push(f,o)),(W+1===V||S.length>v)&&(be+=ee.apply(null,S),S.length=0)}return be},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Te,configurable:!0,writable:!0}):String.fromCodePoint=Te)})(we)},182:function(it,we,M){it.exports=T;var oe=M(1159).EventEmitter;function T(){oe.call(this)}M(1765)(T,oe),T.Readable=M(2846),T.Writable=M(8318),T.Duplex=M(6138),T.Transform=M(9798),T.PassThrough=M(5472),T.finished=M(8800),T.pipeline=M(7295),T.Stream=T,T.prototype.pipe=function(t,e){var y=this;function p(I){t.writable&&t.write(I)===!1&&y.pause&&y.pause()}function u(){y.readable&&y.resume&&y.resume()}y.on("data",p),t.on("drain",u),t._isStdio||e&&e.end===!1||(y.on("end",m),y.on("close",n));var _=!1;function m(){_||(_=!0,t.end())}function n(){_||(_=!0,typeof t.destroy=="function"&&t.destroy())}function c(I){if(d(),oe.listenerCount(this,"error")===0)throw I}function d(){y.removeListener("data",p),t.removeListener("drain",u),y.removeListener("end",m),y.removeListener("close",n),y.removeListener("error",c),t.removeListener("error",c),y.removeListener("end",d),y.removeListener("close",d),t.removeListener("close",d)}return y.on("error",c),t.on("error",c),y.on("end",d),y.on("close",d),t.on("close",d),t.emit("pipe",y),t}},1765:function(it){typeof Object.create=="function"?it.exports=function(we,M){M&&(we.super_=M,we.prototype=Object.create(M.prototype,{constructor:{value:we,enumerable:!1,writable:!0,configurable:!0}}))}:it.exports=function(we,M){if(M){we.super_=M;var oe=function(){};oe.prototype=M.prototype,we.prototype=new oe,we.prototype.constructor=we}}},3690:function(it){var we={};function M(T,t,e){e||(e=Error);var y=function(p){var u,_;function m(n,c,d){return p.call(this,function(I,k,q){return typeof t=="string"?t:t(I,k,q)}(n,c,d))||this}return _=p,(u=m).prototype=Object.create(_.prototype),u.prototype.constructor=u,u.__proto__=_,m}(e);y.prototype.name=e.name,y.prototype.code=T,we[T]=y}function oe(T,t){if(Array.isArray(T)){var e=T.length;return T=T.map(function(y){return String(y)}),e>2?"one of ".concat(t," ").concat(T.slice(0,e-1).join(", "),", or ")+T[e-1]:e===2?"one of ".concat(t," ").concat(T[0]," or ").concat(T[1]):"of ".concat(t," ").concat(T[0])}return"of ".concat(t," ").concat(String(T))}M("ERR_INVALID_OPT_VALUE",function(T,t){return'The value "'+t+'" is invalid for option "'+T+'"'},TypeError),M("ERR_INVALID_ARG_TYPE",function(T,t,e){var y,p,u,_,m;if(typeof t=="string"&&(p="not ",t.substr(0,p.length)===p)?(y="must not be",t=t.replace(/^not /,"")):y="must be",function(c,d,I){return(I===void 0||I>c.length)&&(I=c.length),c.substring(I-d.length,I)===d}(T," argument"))u="The ".concat(T," ").concat(y," ").concat(oe(t,"type"));else{var n=(typeof m!="number"&&(m=0),m+1>(_=T).length||_.indexOf(".",m)===-1?"argument":"property");u='The "'.concat(T,'" ').concat(n," ").concat(y," ").concat(oe(t,"type"))}return u+". Received type ".concat(typeof e)},TypeError),M("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),M("ERR_METHOD_NOT_IMPLEMENTED",function(T){return"The "+T+" method is not implemented"}),M("ERR_STREAM_PREMATURE_CLOSE","Premature close"),M("ERR_STREAM_DESTROYED",function(T){return"Cannot call "+T+" after a stream was destroyed"}),M("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),M("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),M("ERR_STREAM_WRITE_AFTER_END","write after end"),M("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),M("ERR_UNKNOWN_ENCODING",function(T){return"Unknown encoding: "+T},TypeError),M("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),it.exports.q=we},6138:function(it,we,M){var oe=Object.keys||function(n){var c=[];for(var d in n)c.push(d);return c};it.exports=u;var T=M(2846),t=M(8318);M(1765)(u,T);for(var e=oe(t.prototype),y=0;y<e.length;y++){var p=e[y];u.prototype[p]||(u.prototype[p]=t.prototype[p])}function u(n){if(!(this instanceof u))return new u(n);T.call(this,n),t.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",_)))}function _(){this._writableState.ended||process.nextTick(m,this)}function m(n){n.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},5472:function(it,we,M){it.exports=T;var oe=M(9798);function T(t){if(!(this instanceof T))return new T(t);oe.call(this,t)}M(1765)(T,oe),T.prototype._transform=function(t,e,y){y(null,t)}},2846:function(it,we,M){var oe;it.exports=ee,ee.ReadableState=H,M(1159).EventEmitter;var T,t=function(de,ge){return de.listeners(ge).length},e=M(9299),y=M(1549).Buffer,p=M.g.Uint8Array||function(){},u=M(964);T=u&&u.debuglog?u.debuglog("stream"):function(){};var _,m,n,c=M(8393),d=M(6163),I=M(7269).getHighWaterMark,k=M(3690).q,q=k.ERR_INVALID_ARG_TYPE,x=k.ERR_STREAM_PUSH_AFTER_EOF,$=k.ERR_METHOD_NOT_IMPLEMENTED,O=k.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;M(1765)(ee,e);var K=d.errorOrDestroy,re=["error","close","destroy","pause","resume"];function H(de,ge,Be){oe=oe||M(6138),de=de||{},typeof Be!="boolean"&&(Be=ge instanceof oe),this.objectMode=!!de.objectMode,Be&&(this.objectMode=this.objectMode||!!de.readableObjectMode),this.highWaterMark=I(this,de,"readableHighWaterMark",Be),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=de.emitClose!==!1,this.autoDestroy=!!de.autoDestroy,this.destroyed=!1,this.defaultEncoding=de.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,de.encoding&&(_||(_=M(7503).s),this.decoder=new _(de.encoding),this.encoding=de.encoding)}function ee(de){if(oe=oe||M(6138),!(this instanceof ee))return new ee(de);var ge=this instanceof oe;this._readableState=new H(de,this,ge),this.readable=!0,de&&(typeof de.read=="function"&&(this._read=de.read),typeof de.destroy=="function"&&(this._destroy=de.destroy)),e.call(this)}function se(de,ge,Be,f,o){T("readableAddChunk",ge);var v,S=de._readableState;if(ge===null)S.reading=!1,function(W,V){if(T("onEofChunk"),!V.ended){if(V.decoder){var be=V.decoder.end();be&&be.length&&(V.buffer.push(be),V.length+=V.objectMode?1:be.length)}V.ended=!0,V.sync?Le(W):(V.needReadable=!1,V.emittedReadable||(V.emittedReadable=!0,je(W)))}}(de,S);else if(o||(v=function(W,V){var be,ze;return ze=V,y.isBuffer(ze)||ze instanceof p||typeof V=="string"||V===void 0||W.objectMode||(be=new q("chunk",["string","Buffer","Uint8Array"],V)),be}(S,ge)),v)K(de,v);else if(S.objectMode||ge&&ge.length>0)if(typeof ge=="string"||S.objectMode||Object.getPrototypeOf(ge)===y.prototype||(ge=function(W){return y.from(W)}(ge)),f)S.endEmitted?K(de,new O):Te(de,S,ge,!0);else if(S.ended)K(de,new x);else{if(S.destroyed)return!1;S.reading=!1,S.decoder&&!Be?(ge=S.decoder.write(ge),S.objectMode||ge.length!==0?Te(de,S,ge,!1):Ee(de,S)):Te(de,S,ge,!1)}else f||(S.reading=!1,Ee(de,S));return!S.ended&&(S.length<S.highWaterMark||S.length===0)}function Te(de,ge,Be,f){ge.flowing&&ge.length===0&&!ge.sync?(ge.awaitDrain=0,de.emit("data",Be)):(ge.length+=ge.objectMode?1:Be.length,f?ge.buffer.unshift(Be):ge.buffer.push(Be),ge.needReadable&&Le(de)),Ee(de,ge)}Object.defineProperty(ee.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(de){this._readableState&&(this._readableState.destroyed=de)}}),ee.prototype.destroy=d.destroy,ee.prototype._undestroy=d.undestroy,ee.prototype._destroy=function(de,ge){ge(de)},ee.prototype.push=function(de,ge){var Be,f=this._readableState;return f.objectMode?Be=!0:typeof de=="string"&&((ge=ge||f.defaultEncoding)!==f.encoding&&(de=y.from(de,ge),ge=""),Be=!0),se(this,de,ge,!1,Be)},ee.prototype.unshift=function(de){return se(this,de,null,!0,!1)},ee.prototype.isPaused=function(){return this._readableState.flowing===!1},ee.prototype.setEncoding=function(de){_||(_=M(7503).s);var ge=new _(de);this._readableState.decoder=ge,this._readableState.encoding=this._readableState.decoder.encoding;for(var Be=this._readableState.buffer.head,f="";Be!==null;)f+=ge.write(Be.data),Be=Be.next;return this._readableState.buffer.clear(),f!==""&&this._readableState.buffer.push(f),this._readableState.length=f.length,this};var X=1073741824;function Ie(de,ge){return de<=0||ge.length===0&&ge.ended?0:ge.objectMode?1:de!=de?ge.flowing&&ge.length?ge.buffer.head.data.length:ge.length:(de>ge.highWaterMark&&(ge.highWaterMark=function(Be){return Be>=X?Be=X:(Be--,Be|=Be>>>1,Be|=Be>>>2,Be|=Be>>>4,Be|=Be>>>8,Be|=Be>>>16,Be++),Be}(de)),de<=ge.length?de:ge.ended?ge.length:(ge.needReadable=!0,0))}function Le(de){var ge=de._readableState;T("emitReadable",ge.needReadable,ge.emittedReadable),ge.needReadable=!1,ge.emittedReadable||(T("emitReadable",ge.flowing),ge.emittedReadable=!0,process.nextTick(je,de))}function je(de){var ge=de._readableState;T("emitReadable_",ge.destroyed,ge.length,ge.ended),ge.destroyed||!ge.length&&!ge.ended||(de.emit("readable"),ge.emittedReadable=!1),ge.needReadable=!ge.flowing&&!ge.ended&&ge.length<=ge.highWaterMark,Oe(de)}function Ee(de,ge){ge.readingMore||(ge.readingMore=!0,process.nextTick(Pe,de,ge))}function Pe(de,ge){for(;!ge.reading&&!ge.ended&&(ge.length<ge.highWaterMark||ge.flowing&&ge.length===0);){var Be=ge.length;if(T("maybeReadMore read 0"),de.read(0),Be===ge.length)break}ge.readingMore=!1}function Ve(de){var ge=de._readableState;ge.readableListening=de.listenerCount("readable")>0,ge.resumeScheduled&&!ge.paused?ge.flowing=!0:de.listenerCount("data")>0&&de.resume()}function et(de){T("readable nexttick read 0"),de.read(0)}function _e(de,ge){T("resume",ge.reading),ge.reading||de.read(0),ge.resumeScheduled=!1,de.emit("resume"),Oe(de),ge.flowing&&!ge.reading&&de.read(0)}function Oe(de){var ge=de._readableState;for(T("flow",ge.flowing);ge.flowing&&de.read()!==null;);}function _t(de,ge){return ge.length===0?null:(ge.objectMode?Be=ge.buffer.shift():!de||de>=ge.length?(Be=ge.decoder?ge.buffer.join(""):ge.buffer.length===1?ge.buffer.first():ge.buffer.concat(ge.length),ge.buffer.clear()):Be=ge.buffer.consume(de,ge.decoder),Be);var Be}function dt(de){var ge=de._readableState;T("endReadable",ge.endEmitted),ge.endEmitted||(ge.ended=!0,process.nextTick(Ze,ge,de))}function Ze(de,ge){if(T("endReadableNT",de.endEmitted,de.length),!de.endEmitted&&de.length===0&&(de.endEmitted=!0,ge.readable=!1,ge.emit("end"),de.autoDestroy)){var Be=ge._writableState;(!Be||Be.autoDestroy&&Be.finished)&&ge.destroy()}}function Je(de,ge){for(var Be=0,f=de.length;Be<f;Be++)if(de[Be]===ge)return Be;return-1}ee.prototype.read=function(de){T("read",de),de=parseInt(de,10);var ge=this._readableState,Be=de;if(de!==0&&(ge.emittedReadable=!1),de===0&&ge.needReadable&&((ge.highWaterMark!==0?ge.length>=ge.highWaterMark:ge.length>0)||ge.ended))return T("read: emitReadable",ge.length,ge.ended),ge.length===0&&ge.ended?dt(this):Le(this),null;if((de=Ie(de,ge))===0&&ge.ended)return ge.length===0&&dt(this),null;var f,o=ge.needReadable;return T("need readable",o),(ge.length===0||ge.length-de<ge.highWaterMark)&&T("length less than watermark",o=!0),ge.ended||ge.reading?T("reading or ended",o=!1):o&&(T("do read"),ge.reading=!0,ge.sync=!0,ge.length===0&&(ge.needReadable=!0),this._read(ge.highWaterMark),ge.sync=!1,ge.reading||(de=Ie(Be,ge))),(f=de>0?_t(de,ge):null)===null?(ge.needReadable=ge.length<=ge.highWaterMark,de=0):(ge.length-=de,ge.awaitDrain=0),ge.length===0&&(ge.ended||(ge.needReadable=!0),Be!==de&&ge.ended&&dt(this)),f!==null&&this.emit("data",f),f},ee.prototype._read=function(de){K(this,new $("_read()"))},ee.prototype.pipe=function(de,ge){var Be=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=de;break;case 1:f.pipes=[f.pipes,de];break;default:f.pipes.push(de)}f.pipesCount+=1,T("pipe count=%d opts=%j",f.pipesCount,ge);var o=ge&&ge.end===!1||de===process.stdout||de===process.stderr?De:v;function v(){T("onend"),de.end()}f.endEmitted?process.nextTick(o):Be.once("end",o),de.on("unpipe",function Ae(xe,Xe){T("onunpipe"),xe===Be&&Xe&&Xe.hasUnpiped===!1&&(Xe.hasUnpiped=!0,T("cleanup"),de.removeListener("close",ze),de.removeListener("finish",Me),de.removeListener("drain",S),de.removeListener("error",be),de.removeListener("unpipe",Ae),Be.removeListener("end",v),Be.removeListener("end",De),Be.removeListener("data",V),W=!0,!f.awaitDrain||de._writableState&&!de._writableState.needDrain||S())});var S=function(Ae){return function(){var xe=Ae._readableState;T("pipeOnDrain",xe.awaitDrain),xe.awaitDrain&&xe.awaitDrain--,xe.awaitDrain===0&&t(Ae,"data")&&(xe.flowing=!0,Oe(Ae))}}(Be);de.on("drain",S);var W=!1;function V(Ae){T("ondata");var xe=de.write(Ae);T("dest.write",xe),xe===!1&&((f.pipesCount===1&&f.pipes===de||f.pipesCount>1&&Je(f.pipes,de)!==-1)&&!W&&(T("false write response, pause",f.awaitDrain),f.awaitDrain++),Be.pause())}function be(Ae){T("onerror",Ae),De(),de.removeListener("error",be),t(de,"error")===0&&K(de,Ae)}function ze(){de.removeListener("finish",Me),De()}function Me(){T("onfinish"),de.removeListener("close",ze),De()}function De(){T("unpipe"),Be.unpipe(de)}return Be.on("data",V),function(Ae,xe,Xe){if(typeof Ae.prependListener=="function")return Ae.prependListener(xe,Xe);Ae._events&&Ae._events[xe]?Array.isArray(Ae._events[xe])?Ae._events[xe].unshift(Xe):Ae._events[xe]=[Xe,Ae._events[xe]]:Ae.on(xe,Xe)}(de,"error",be),de.once("close",ze),de.once("finish",Me),de.emit("pipe",Be),f.flowing||(T("pipe resume"),Be.resume()),de},ee.prototype.unpipe=function(de){var ge=this._readableState,Be={hasUnpiped:!1};if(ge.pipesCount===0)return this;if(ge.pipesCount===1)return de&&de!==ge.pipes||(de||(de=ge.pipes),ge.pipes=null,ge.pipesCount=0,ge.flowing=!1,de&&de.emit("unpipe",this,Be)),this;if(!de){var f=ge.pipes,o=ge.pipesCount;ge.pipes=null,ge.pipesCount=0,ge.flowing=!1;for(var v=0;v<o;v++)f[v].emit("unpipe",this,{hasUnpiped:!1});return this}var S=Je(ge.pipes,de);return S===-1||(ge.pipes.splice(S,1),ge.pipesCount-=1,ge.pipesCount===1&&(ge.pipes=ge.pipes[0]),de.emit("unpipe",this,Be)),this},ee.prototype.on=function(de,ge){var Be=e.prototype.on.call(this,de,ge),f=this._readableState;return de==="data"?(f.readableListening=this.listenerCount("readable")>0,f.flowing!==!1&&this.resume()):de==="readable"&&(f.endEmitted||f.readableListening||(f.readableListening=f.needReadable=!0,f.flowing=!1,f.emittedReadable=!1,T("on readable",f.length,f.reading),f.length?Le(this):f.reading||process.nextTick(et,this))),Be},ee.prototype.addListener=ee.prototype.on,ee.prototype.removeListener=function(de,ge){var Be=e.prototype.removeListener.call(this,de,ge);return de==="readable"&&process.nextTick(Ve,this),Be},ee.prototype.removeAllListeners=function(de){var ge=e.prototype.removeAllListeners.apply(this,arguments);return de!=="readable"&&de!==void 0||process.nextTick(Ve,this),ge},ee.prototype.resume=function(){var de=this._readableState;return de.flowing||(T("resume"),de.flowing=!de.readableListening,function(ge,Be){Be.resumeScheduled||(Be.resumeScheduled=!0,process.nextTick(_e,ge,Be))}(this,de)),de.paused=!1,this},ee.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ee.prototype.wrap=function(de){var ge=this,Be=this._readableState,f=!1;for(var o in de.on("end",function(){if(T("wrapped end"),Be.decoder&&!Be.ended){var S=Be.decoder.end();S&&S.length&&ge.push(S)}ge.push(null)}),de.on("data",function(S){T("wrapped data"),Be.decoder&&(S=Be.decoder.write(S)),Be.objectMode&&S==null||(Be.objectMode||S&&S.length)&&(ge.push(S)||(f=!0,de.pause()))}),de)this[o]===void 0&&typeof de[o]=="function"&&(this[o]=function(S){return function(){return de[S].apply(de,arguments)}}(o));for(var v=0;v<re.length;v++)de.on(re[v],this.emit.bind(this,re[v]));return this._read=function(S){T("wrapped _read",S),f&&(f=!1,de.resume())},this},typeof Symbol=="function"&&(ee.prototype[Symbol.asyncIterator]=function(){return m===void 0&&(m=M(7299)),m(this)}),Object.defineProperty(ee.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ee.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ee.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(de){this._readableState&&(this._readableState.flowing=de)}}),ee._fromList=_t,Object.defineProperty(ee.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(ee.from=function(de,ge){return n===void 0&&(n=M(6233)),n(ee,de,ge)})},9798:function(it,we,M){it.exports=_;var oe=M(3690).q,T=oe.ERR_METHOD_NOT_IMPLEMENTED,t=oe.ERR_MULTIPLE_CALLBACK,e=oe.ERR_TRANSFORM_ALREADY_TRANSFORMING,y=oe.ERR_TRANSFORM_WITH_LENGTH_0,p=M(6138);function u(c,d){var I=this._transformState;I.transforming=!1;var k=I.writecb;if(k===null)return this.emit("error",new t);I.writechunk=null,I.writecb=null,d!=null&&this.push(d),k(c);var q=this._readableState;q.reading=!1,(q.needReadable||q.length<q.highWaterMark)&&this._read(q.highWaterMark)}function _(c){if(!(this instanceof _))return new _(c);p.call(this,c),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",m)}function m(){var c=this;typeof this._flush!="function"||this._readableState.destroyed?n(this,null,null):this._flush(function(d,I){n(c,d,I)})}function n(c,d,I){if(d)return c.emit("error",d);if(I!=null&&c.push(I),c._writableState.length)throw new y;if(c._transformState.transforming)throw new e;return c.push(null)}M(1765)(_,p),_.prototype.push=function(c,d){return this._transformState.needTransform=!1,p.prototype.push.call(this,c,d)},_.prototype._transform=function(c,d,I){I(new T("_transform()"))},_.prototype._write=function(c,d,I){var k=this._transformState;if(k.writecb=I,k.writechunk=c,k.writeencoding=d,!k.transforming){var q=this._readableState;(k.needTransform||q.needReadable||q.length<q.highWaterMark)&&this._read(q.highWaterMark)}},_.prototype._read=function(c){var d=this._transformState;d.writechunk===null||d.transforming?d.needTransform=!0:(d.transforming=!0,this._transform(d.writechunk,d.writeencoding,d.afterTransform))},_.prototype._destroy=function(c,d){p.prototype._destroy.call(this,c,function(I){d(I)})}},8318:function(it,we,M){function oe(Ee){var Pe=this;this.next=null,this.entry=null,this.finish=function(){(function(Ve,et,_e){var Oe=Ve.entry;for(Ve.entry=null;Oe;){var _t=Oe.callback;et.pendingcb--,_t(void 0),Oe=Oe.next}et.corkedRequestsFree.next=Ve})(Pe,Ee)}}var T;it.exports=ee,ee.WritableState=H;var t,e={deprecate:M(7839)},y=M(9299),p=M(1549).Buffer,u=M.g.Uint8Array||function(){},_=M(6163),m=M(7269).getHighWaterMark,n=M(3690).q,c=n.ERR_INVALID_ARG_TYPE,d=n.ERR_METHOD_NOT_IMPLEMENTED,I=n.ERR_MULTIPLE_CALLBACK,k=n.ERR_STREAM_CANNOT_PIPE,q=n.ERR_STREAM_DESTROYED,x=n.ERR_STREAM_NULL_VALUES,$=n.ERR_STREAM_WRITE_AFTER_END,O=n.ERR_UNKNOWN_ENCODING,K=_.errorOrDestroy;function re(){}function H(Ee,Pe,Ve){T=T||M(6138),Ee=Ee||{},typeof Ve!="boolean"&&(Ve=Pe instanceof T),this.objectMode=!!Ee.objectMode,Ve&&(this.objectMode=this.objectMode||!!Ee.writableObjectMode),this.highWaterMark=m(this,Ee,"writableHighWaterMark",Ve),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var et=Ee.decodeStrings===!1;this.decodeStrings=!et,this.defaultEncoding=Ee.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(_e){(function(Oe,_t){var dt=Oe._writableState,Ze=dt.sync,Je=dt.writecb;if(typeof Je!="function")throw new I;if(function(ge){ge.writing=!1,ge.writecb=null,ge.length-=ge.writelen,ge.writelen=0}(dt),_t)(function(ge,Be,f,o,v){--Be.pendingcb,f?(process.nextTick(v,o),process.nextTick(je,ge,Be),ge._writableState.errorEmitted=!0,K(ge,o)):(v(o),ge._writableState.errorEmitted=!0,K(ge,o),je(ge,Be))})(Oe,dt,Ze,_t,Je);else{var de=Ie(dt)||Oe.destroyed;de||dt.corked||dt.bufferProcessing||!dt.bufferedRequest||X(Oe,dt),Ze?process.nextTick(Te,Oe,dt,de,Je):Te(Oe,dt,de,Je)}})(Pe,_e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ee.emitClose!==!1,this.autoDestroy=!!Ee.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new oe(this)}function ee(Ee){var Pe=this instanceof(T=T||M(6138));if(!Pe&&!t.call(ee,this))return new ee(Ee);this._writableState=new H(Ee,this,Pe),this.writable=!0,Ee&&(typeof Ee.write=="function"&&(this._write=Ee.write),typeof Ee.writev=="function"&&(this._writev=Ee.writev),typeof Ee.destroy=="function"&&(this._destroy=Ee.destroy),typeof Ee.final=="function"&&(this._final=Ee.final)),y.call(this)}function se(Ee,Pe,Ve,et,_e,Oe,_t){Pe.writelen=et,Pe.writecb=_t,Pe.writing=!0,Pe.sync=!0,Pe.destroyed?Pe.onwrite(new q("write")):Ve?Ee._writev(_e,Pe.onwrite):Ee._write(_e,Oe,Pe.onwrite),Pe.sync=!1}function Te(Ee,Pe,Ve,et){Ve||function(_e,Oe){Oe.length===0&&Oe.needDrain&&(Oe.needDrain=!1,_e.emit("drain"))}(Ee,Pe),Pe.pendingcb--,et(),je(Ee,Pe)}function X(Ee,Pe){Pe.bufferProcessing=!0;var Ve=Pe.bufferedRequest;if(Ee._writev&&Ve&&Ve.next){var et=Pe.bufferedRequestCount,_e=new Array(et),Oe=Pe.corkedRequestsFree;Oe.entry=Ve;for(var _t=0,dt=!0;Ve;)_e[_t]=Ve,Ve.isBuf||(dt=!1),Ve=Ve.next,_t+=1;_e.allBuffers=dt,se(Ee,Pe,!0,Pe.length,_e,"",Oe.finish),Pe.pendingcb++,Pe.lastBufferedRequest=null,Oe.next?(Pe.corkedRequestsFree=Oe.next,Oe.next=null):Pe.corkedRequestsFree=new oe(Pe),Pe.bufferedRequestCount=0}else{for(;Ve;){var Ze=Ve.chunk,Je=Ve.encoding,de=Ve.callback;if(se(Ee,Pe,!1,Pe.objectMode?1:Ze.length,Ze,Je,de),Ve=Ve.next,Pe.bufferedRequestCount--,Pe.writing)break}Ve===null&&(Pe.lastBufferedRequest=null)}Pe.bufferedRequest=Ve,Pe.bufferProcessing=!1}function Ie(Ee){return Ee.ending&&Ee.length===0&&Ee.bufferedRequest===null&&!Ee.finished&&!Ee.writing}function Le(Ee,Pe){Ee._final(function(Ve){Pe.pendingcb--,Ve&&K(Ee,Ve),Pe.prefinished=!0,Ee.emit("prefinish"),je(Ee,Pe)})}function je(Ee,Pe){var Ve=Ie(Pe);if(Ve&&(function(_e,Oe){Oe.prefinished||Oe.finalCalled||(typeof _e._final!="function"||Oe.destroyed?(Oe.prefinished=!0,_e.emit("prefinish")):(Oe.pendingcb++,Oe.finalCalled=!0,process.nextTick(Le,_e,Oe)))}(Ee,Pe),Pe.pendingcb===0&&(Pe.finished=!0,Ee.emit("finish"),Pe.autoDestroy))){var et=Ee._readableState;(!et||et.autoDestroy&&et.endEmitted)&&Ee.destroy()}return Ve}M(1765)(ee,y),H.prototype.getBuffer=function(){for(var Ee=this.bufferedRequest,Pe=[];Ee;)Pe.push(Ee),Ee=Ee.next;return Pe},function(){try{Object.defineProperty(H.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(t=Function.prototype[Symbol.hasInstance],Object.defineProperty(ee,Symbol.hasInstance,{value:function(Ee){return!!t.call(this,Ee)||this===ee&&Ee&&Ee._writableState instanceof H}})):t=function(Ee){return Ee instanceof this},ee.prototype.pipe=function(){K(this,new k)},ee.prototype.write=function(Ee,Pe,Ve){var et,_e=this._writableState,Oe=!1,_t=!_e.objectMode&&(et=Ee,p.isBuffer(et)||et instanceof u);return _t&&!p.isBuffer(Ee)&&(Ee=function(dt){return p.from(dt)}(Ee)),typeof Pe=="function"&&(Ve=Pe,Pe=null),_t?Pe="buffer":Pe||(Pe=_e.defaultEncoding),typeof Ve!="function"&&(Ve=re),_e.ending?function(dt,Ze){var Je=new $;K(dt,Je),process.nextTick(Ze,Je)}(this,Ve):(_t||function(dt,Ze,Je,de){var ge;return Je===null?ge=new x:typeof Je=="string"||Ze.objectMode||(ge=new c("chunk",["string","Buffer"],Je)),!ge||(K(dt,ge),process.nextTick(de,ge),!1)}(this,_e,Ee,Ve))&&(_e.pendingcb++,Oe=function(dt,Ze,Je,de,ge,Be){if(!Je){var f=function(W,V,be){return W.objectMode||W.decodeStrings===!1||typeof V!="string"||(V=p.from(V,be)),V}(Ze,de,ge);de!==f&&(Je=!0,ge="buffer",de=f)}var o=Ze.objectMode?1:de.length;Ze.length+=o;var v=Ze.length<Ze.highWaterMark;if(v||(Ze.needDrain=!0),Ze.writing||Ze.corked){var S=Ze.lastBufferedRequest;Ze.lastBufferedRequest={chunk:de,encoding:ge,isBuf:Je,callback:Be,next:null},S?S.next=Ze.lastBufferedRequest:Ze.bufferedRequest=Ze.lastBufferedRequest,Ze.bufferedRequestCount+=1}else se(dt,Ze,!1,o,de,ge,Be);return v}(this,_e,_t,Ee,Pe,Ve)),Oe},ee.prototype.cork=function(){this._writableState.corked++},ee.prototype.uncork=function(){var Ee=this._writableState;Ee.corked&&(Ee.corked--,Ee.writing||Ee.corked||Ee.bufferProcessing||!Ee.bufferedRequest||X(this,Ee))},ee.prototype.setDefaultEncoding=function(Ee){if(typeof Ee=="string"&&(Ee=Ee.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ee+"").toLowerCase())>-1))throw new O(Ee);return this._writableState.defaultEncoding=Ee,this},Object.defineProperty(ee.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ee.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ee.prototype._write=function(Ee,Pe,Ve){Ve(new d("_write()"))},ee.prototype._writev=null,ee.prototype.end=function(Ee,Pe,Ve){var et=this._writableState;return typeof Ee=="function"?(Ve=Ee,Ee=null,Pe=null):typeof Pe=="function"&&(Ve=Pe,Pe=null),Ee!=null&&this.write(Ee,Pe),et.corked&&(et.corked=1,this.uncork()),et.ending||function(_e,Oe,_t){Oe.ending=!0,je(_e,Oe),_t&&(Oe.finished?process.nextTick(_t):_e.once("finish",_t)),Oe.ended=!0,_e.writable=!1}(this,et,Ve),this},Object.defineProperty(ee.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ee.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ee){this._writableState&&(this._writableState.destroyed=Ee)}}),ee.prototype.destroy=_.destroy,ee.prototype._undestroy=_.undestroy,ee.prototype._destroy=function(Ee,Pe){Pe(Ee)}},7299:function(it,we,M){var oe;function T(x,$,O){return $ in x?Object.defineProperty(x,$,{value:O,enumerable:!0,configurable:!0,writable:!0}):x[$]=O,x}var t=M(8800),e=Symbol("lastResolve"),y=Symbol("lastReject"),p=Symbol("error"),u=Symbol("ended"),_=Symbol("lastPromise"),m=Symbol("handlePromise"),n=Symbol("stream");function c(x,$){return{value:x,done:$}}function d(x){var $=x[e];if($!==null){var O=x[n].read();O!==null&&(x[_]=null,x[e]=null,x[y]=null,$(c(O,!1)))}}function I(x){process.nextTick(d,x)}var k=Object.getPrototypeOf(function(){}),q=Object.setPrototypeOf((T(oe={get stream(){return this[n]},next:function(){var x=this,$=this[p];if($!==null)return Promise.reject($);if(this[u])return Promise.resolve(c(void 0,!0));if(this[n].destroyed)return new Promise(function(H,ee){process.nextTick(function(){x[p]?ee(x[p]):H(c(void 0,!0))})});var O,K=this[_];if(K)O=new Promise(function(H,ee){return function(se,Te){H.then(function(){ee[u]?se(c(void 0,!0)):ee[m](se,Te)},Te)}}(K,this));else{var re=this[n].read();if(re!==null)return Promise.resolve(c(re,!1));O=new Promise(this[m])}return this[_]=O,O}},Symbol.asyncIterator,function(){return this}),T(oe,"return",function(){var x=this;return new Promise(function($,O){x[n].destroy(null,function(K){K?O(K):$(c(void 0,!0))})})}),oe),k);it.exports=function(x){var $,O=Object.create(q,(T($={},n,{value:x,writable:!0}),T($,e,{value:null,writable:!0}),T($,y,{value:null,writable:!0}),T($,p,{value:null,writable:!0}),T($,u,{value:x._readableState.endEmitted,writable:!0}),T($,m,{value:function(K,re){var H=O[n].read();H?(O[_]=null,O[e]=null,O[y]=null,K(c(H,!1))):(O[e]=K,O[y]=re)},writable:!0}),$));return O[_]=null,t(x,function(K){if(K&&K.code!=="ERR_STREAM_PREMATURE_CLOSE"){var re=O[y];return re!==null&&(O[_]=null,O[e]=null,O[y]=null,re(K)),void(O[p]=K)}var H=O[e];H!==null&&(O[_]=null,O[e]=null,O[y]=null,H(c(void 0,!0))),O[u]=!0}),x.on("readable",I.bind(null,O)),O}},8393:function(it,we,M){function oe(u,_){var m=Object.keys(u);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(u);_&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(u,c).enumerable})),m.push.apply(m,n)}return m}function T(u,_,m){return _ in u?Object.defineProperty(u,_,{value:m,enumerable:!0,configurable:!0,writable:!0}):u[_]=m,u}function t(u,_){for(var m=0;m<_.length;m++){var n=_[m];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,n.key,n)}}var e=M(1549).Buffer,y=M(9862).inspect,p=y&&y.custom||"inspect";it.exports=function(){function u(){(function(n,c){if(!(n instanceof c))throw new TypeError("Cannot call a class as a function")})(this,u),this.head=null,this.tail=null,this.length=0}var _,m;return _=u,m=[{key:"push",value:function(n){var c={data:n,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}},{key:"unshift",value:function(n){var c={data:n,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var c=this.head,d=""+c.data;c=c.next;)d+=n+c.data;return d}},{key:"concat",value:function(n){if(this.length===0)return e.alloc(0);for(var c,d,I,k=e.allocUnsafe(n>>>0),q=this.head,x=0;q;)c=q.data,d=k,I=x,e.prototype.copy.call(c,d,I),x+=q.data.length,q=q.next;return k}},{key:"consume",value:function(n,c){var d;return n<this.head.data.length?(d=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):d=n===this.head.data.length?this.shift():c?this._getString(n):this._getBuffer(n),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var c=this.head,d=1,I=c.data;for(n-=I.length;c=c.next;){var k=c.data,q=n>k.length?k.length:n;if(q===k.length?I+=k:I+=k.slice(0,n),(n-=q)==0){q===k.length?(++d,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=k.slice(q));break}++d}return this.length-=d,I}},{key:"_getBuffer",value:function(n){var c=e.allocUnsafe(n),d=this.head,I=1;for(d.data.copy(c),n-=d.data.length;d=d.next;){var k=d.data,q=n>k.length?k.length:n;if(k.copy(c,c.length-n,0,q),(n-=q)==0){q===k.length?(++I,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=k.slice(q));break}++I}return this.length-=I,c}},{key:p,value:function(n,c){return y(this,function(d){for(var I=1;I<arguments.length;I++){var k=arguments[I]!=null?arguments[I]:{};I%2?oe(Object(k),!0).forEach(function(q){T(d,q,k[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(k)):oe(Object(k)).forEach(function(q){Object.defineProperty(d,q,Object.getOwnPropertyDescriptor(k,q))})}return d}({},c,{depth:0,customInspect:!1}))}}],m&&t(_.prototype,m),u}()},6163:function(it){function we(T,t){oe(T,t),M(T)}function M(T){T._writableState&&!T._writableState.emitClose||T._readableState&&!T._readableState.emitClose||T.emit("close")}function oe(T,t){T.emit("error",t)}it.exports={destroy:function(T,t){var e=this,y=this._readableState&&this._readableState.destroyed,p=this._writableState&&this._writableState.destroyed;return y||p?(t?t(T):T&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(oe,this,T)):process.nextTick(oe,this,T)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(T||null,function(u){!t&&u?e._writableState?e._writableState.errorEmitted?process.nextTick(M,e):(e._writableState.errorEmitted=!0,process.nextTick(we,e,u)):process.nextTick(we,e,u):t?(process.nextTick(M,e),t(u)):process.nextTick(M,e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(T,t){var e=T._readableState,y=T._writableState;e&&e.autoDestroy||y&&y.autoDestroy?T.destroy(t):T.emit("error",t)}}},8800:function(it,we,M){var oe=M(3690).q.ERR_STREAM_PREMATURE_CLOSE;function T(){}it.exports=function t(e,y,p){if(typeof y=="function")return t(e,null,y);y||(y={}),p=function($){var O=!1;return function(){if(!O){O=!0;for(var K=arguments.length,re=new Array(K),H=0;H<K;H++)re[H]=arguments[H];$.apply(this,re)}}}(p||T);var u=y.readable||y.readable!==!1&&e.readable,_=y.writable||y.writable!==!1&&e.writable,m=function(){e.writable||c()},n=e._writableState&&e._writableState.finished,c=function(){_=!1,n=!0,u||p.call(e)},d=e._readableState&&e._readableState.endEmitted,I=function(){u=!1,d=!0,_||p.call(e)},k=function($){p.call(e,$)},q=function(){var $;return u&&!d?(e._readableState&&e._readableState.ended||($=new oe),p.call(e,$)):_&&!n?(e._writableState&&e._writableState.ended||($=new oe),p.call(e,$)):void 0},x=function(){e.req.on("finish",c)};return function($){return $.setHeader&&typeof $.abort=="function"}(e)?(e.on("complete",c),e.on("abort",q),e.req?x():e.on("request",x)):_&&!e._writableState&&(e.on("end",m),e.on("close",m)),e.on("end",I),e.on("finish",c),y.error!==!1&&e.on("error",k),e.on("close",q),function(){e.removeListener("complete",c),e.removeListener("abort",q),e.removeListener("request",x),e.req&&e.req.removeListener("finish",c),e.removeListener("end",m),e.removeListener("close",m),e.removeListener("finish",c),e.removeListener("end",I),e.removeListener("error",k),e.removeListener("close",q)}}},6233:function(it){it.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(it,we,M){var oe,T=M(3690).q,t=T.ERR_MISSING_ARGS,e=T.ERR_STREAM_DESTROYED;function y(n){if(n)throw n}function p(n,c,d,I){I=function(x){var $=!1;return function(){$||($=!0,x.apply(void 0,arguments))}}(I);var k=!1;n.on("close",function(){k=!0}),oe===void 0&&(oe=M(8800)),oe(n,{readable:c,writable:d},function(x){if(x)return I(x);k=!0,I()});var q=!1;return function(x){if(!k&&!q)return q=!0,function($){return $.setHeader&&typeof $.abort=="function"}(n)?n.abort():typeof n.destroy=="function"?n.destroy():void I(x||new e("pipe"))}}function u(n){n()}function _(n,c){return n.pipe(c)}function m(n){return n.length?typeof n[n.length-1]!="function"?y:n.pop():y}it.exports=function(){for(var n=arguments.length,c=new Array(n),d=0;d<n;d++)c[d]=arguments[d];var I,k=m(c);if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new t("streams");var q=c.map(function(x,$){var O=$<c.length-1;return p(x,O,$>0,function(K){I||(I=K),K&&q.forEach(u),O||(q.forEach(u),k(I))})});return c.reduce(_)}},7269:function(it,we,M){var oe=M(3690).q.ERR_INVALID_OPT_VALUE;it.exports={getHighWaterMark:function(T,t,e,y){var p=function(u,_,m){return u.highWaterMark!=null?u.highWaterMark:_?u[m]:null}(t,y,e);if(p!=null){if(!isFinite(p)||Math.floor(p)!==p||p<0)throw new oe(y?e:"highWaterMark",p);return Math.floor(p)}return T.objectMode?16:16384}}},9299:function(it,we,M){it.exports=M(1159).EventEmitter},7503:function(it,we,M){var oe=M(8387).Buffer,T=oe.isEncoding||function(d){switch((d=""+d)&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(d){var I;switch(this.encoding=function(k){var q=function(x){if(!x)return"utf8";for(var $;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if($)return;x=(""+x).toLowerCase(),$=!0}}(k);if(typeof q!="string"&&(oe.isEncoding===T||!T(k)))throw new Error("Unknown encoding: "+k);return q||k}(d),this.encoding){case"utf16le":this.text=p,this.end=u,I=4;break;case"utf8":this.fillLast=y,I=4;break;case"base64":this.text=_,this.end=m,I=3;break;default:return this.write=n,void(this.end=c)}this.lastNeed=0,this.lastTotal=0,this.lastChar=oe.allocUnsafe(I)}function e(d){return d<=127?0:d>>5==6?2:d>>4==14?3:d>>3==30?4:d>>6==2?-1:-2}function y(d){var I=this.lastTotal-this.lastNeed,k=function(q,x,$){if((192&x[0])!=128)return q.lastNeed=0,"�";if(q.lastNeed>1&&x.length>1){if((192&x[1])!=128)return q.lastNeed=1,"�";if(q.lastNeed>2&&x.length>2&&(192&x[2])!=128)return q.lastNeed=2,"�"}}(this,d);return k!==void 0?k:this.lastNeed<=d.length?(d.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(d.copy(this.lastChar,I,0,d.length),void(this.lastNeed-=d.length))}function p(d,I){if((d.length-I)%2==0){var k=d.toString("utf16le",I);if(k){var q=k.charCodeAt(k.length-1);if(q>=55296&&q<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],k.slice(0,-1)}return k}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",I,d.length-1)}function u(d){var I=d&&d.length?this.write(d):"";if(this.lastNeed){var k=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,k)}return I}function _(d,I){var k=(d.length-I)%3;return k===0?d.toString("base64",I):(this.lastNeed=3-k,this.lastTotal=3,k===1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",I,d.length-k))}function m(d){var I=d&&d.length?this.write(d):"";return this.lastNeed?I+this.lastChar.toString("base64",0,3-this.lastNeed):I}function n(d){return d.toString(this.encoding)}function c(d){return d&&d.length?this.write(d):""}we.s=t,t.prototype.write=function(d){if(d.length===0)return"";var I,k;if(this.lastNeed){if((I=this.fillLast(d))===void 0)return"";k=this.lastNeed,this.lastNeed=0}else k=0;return k<d.length?I?I+this.text(d,k):this.text(d,k):I||""},t.prototype.end=function(d){var I=d&&d.length?this.write(d):"";return this.lastNeed?I+"�":I},t.prototype.text=function(d,I){var k=function(x,$,O){var K=$.length-1;if(K<O)return 0;var re=e($[K]);return re>=0?(re>0&&(x.lastNeed=re-1),re):--K<O||re===-2?0:(re=e($[K]))>=0?(re>0&&(x.lastNeed=re-2),re):--K<O||re===-2?0:(re=e($[K]))>=0?(re>0&&(re===2?re=0:x.lastNeed=re-3),re):0}(this,d,I);if(!this.lastNeed)return d.toString("utf8",I);this.lastTotal=k;var q=d.length-(k-this.lastNeed);return d.copy(this.lastChar,0,q),d.toString("utf8",I,q)},t.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length}},1067:function(it,we,M){var oe;(function(T,t){var e="function",y="undefined",p="object",u="string",_="major",m="model",n="name",c="type",d="vendor",I="version",k="architecture",q="console",x="mobile",$="tablet",O="smarttv",K="wearable",re="embedded",H="Amazon",ee="Apple",se="ASUS",Te="BlackBerry",X="Browser",Ie="Chrome",Le="Firefox",je="Google",Ee="Huawei",Pe="LG",Ve="Microsoft",et="Motorola",_e="Opera",Oe="Samsung",_t="Sharp",dt="Sony",Ze="Xiaomi",Je="Zebra",de="Facebook",ge="Chromium OS",Be="Mac OS",f=function(xe){for(var Xe={},mt=0;mt<xe.length;mt++)Xe[xe[mt].toUpperCase()]=xe[mt];return Xe},o=function(xe,Xe){return typeof xe===u&&v(Xe).indexOf(v(xe))!==-1},v=function(xe){return xe.toLowerCase()},S=function(xe,Xe){if(typeof xe===u)return xe=xe.replace(/^\s\s*/,""),typeof Xe===y?xe:xe.substring(0,500)},W=function(xe,Xe){for(var mt,rt,Zt,It,Ft,Pt,tn=0;tn<Xe.length&&!Ft;){var fn=Xe[tn],Sn=Xe[tn+1];for(mt=rt=0;mt<fn.length&&!Ft&&fn[mt];)if(Ft=fn[mt++].exec(xe))for(Zt=0;Zt<Sn.length;Zt++)Pt=Ft[++rt],typeof(It=Sn[Zt])===p&&It.length>0?It.length===2?typeof It[1]==e?this[It[0]]=It[1].call(this,Pt):this[It[0]]=It[1]:It.length===3?typeof It[1]!==e||It[1].exec&&It[1].test?this[It[0]]=Pt?Pt.replace(It[1],It[2]):t:this[It[0]]=Pt?It[1].call(this,Pt,It[2]):t:It.length===4&&(this[It[0]]=Pt?It[3].call(this,Pt.replace(It[1],It[2])):t):this[It]=Pt||t;tn+=2}},V=function(xe,Xe){for(var mt in Xe)if(typeof Xe[mt]===p&&Xe[mt].length>0){for(var rt=0;rt<Xe[mt].length;rt++)if(o(Xe[mt][rt],xe))return mt==="?"?t:mt}else if(o(Xe[mt],xe))return mt==="?"?t:mt;return xe},be={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ze={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[I,[n,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[I,[n,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[n,I],[/opios[\/ ]+([\w\.]+)/i],[I,[n,_e+" Mini"]],[/\bopr\/([\w\.]+)/i],[I,[n,_e]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[I,[n,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[n,I],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[I,[n,"UC"+X]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[I,[n,"WeChat"]],[/konqueror\/([\w\.]+)/i],[I,[n,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[I,[n,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[I,[n,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[I,[n,"Smart Lenovo "+X]],[/(avast|avg)\/([\w\.]+)/i],[[n,/(.+)/,"$1 Secure "+X],I],[/\bfocus\/([\w\.]+)/i],[I,[n,Le+" Focus"]],[/\bopt\/([\w\.]+)/i],[I,[n,_e+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[I,[n,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[I,[n,"Dolphin"]],[/coast\/([\w\.]+)/i],[I,[n,_e+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[I,[n,"MIUI "+X]],[/fxios\/([-\w\.]+)/i],[I,[n,Le]],[/\bqihu|(qi?ho?o?|360)browser/i],[[n,"360 "+X]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[n,/(.+)/,"$1 "+X],I],[/samsungbrowser\/([\w\.]+)/i],[I,[n,Oe+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[n,/_/g," "],I],[/metasr[\/ ]?([\d\.]+)/i],[I,[n,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[n,"Sogou Mobile"],I],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[n,I],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[n],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[n,de],I],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[n,I],[/\bgsa\/([\w\.]+) .*safari\//i],[I,[n,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[I,[n,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[I,[n,Ie+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[n,Ie+" WebView"],I],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[I,[n,"Android "+X]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[n,I],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[I,[n,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[I,n],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[n,[I,V,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[n,I],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[n,"Netscape"],I],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[I,[n,Le+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[n,I],[/(cobalt)\/([\w\.]+)/i],[n,[I,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[k,"amd64"]],[/(ia32(?=;))/i],[[k,v]],[/((?:i[346]|x)86)[;\)]/i],[[k,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[k,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[k,"armhf"]],[/windows (ce|mobile); ppc;/i],[[k,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[k,/ower/,"",v]],[/(sun4\w)[;\)]/i],[[k,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[k,v]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[m,[d,Oe],[c,$]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[m,[d,Oe],[c,x]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[m,[d,ee],[c,x]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[m,[d,ee],[c,$]],[/(macintosh);/i],[m,[d,ee]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[m,[d,_t],[c,x]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[m,[d,Ee],[c,$]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[m,[d,Ee],[c,x]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[m,/_/g," "],[d,Ze],[c,x]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[m,/_/g," "],[d,Ze],[c,$]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[m,[d,"OPPO"],[c,x]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[m,[d,"Vivo"],[c,x]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[m,[d,"Realme"],[c,x]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[m,[d,et],[c,x]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[m,[d,et],[c,$]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[m,[d,Pe],[c,$]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[m,[d,Pe],[c,x]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[m,[d,"Lenovo"],[c,$]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[m,/_/g," "],[d,"Nokia"],[c,x]],[/(pixel c)\b/i],[m,[d,je],[c,$]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[m,[d,je],[c,x]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[m,[d,dt],[c,x]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[m,"Xperia Tablet"],[d,dt],[c,$]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[m,[d,"OnePlus"],[c,x]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[m,[d,H],[c,$]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[m,/(.+)/g,"Fire Phone $1"],[d,H],[c,x]],[/(playbook);[-\w\),; ]+(rim)/i],[m,d,[c,$]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[m,[d,Te],[c,x]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[m,[d,se],[c,$]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[m,[d,se],[c,x]],[/(nexus 9)/i],[m,[d,"HTC"],[c,$]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[m,/_/g," "],[c,x]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[m,[d,"Acer"],[c,$]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[m,[d,"Meizu"],[c,x]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[m,[d,"Ulefone"],[c,x]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,m,[c,x]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,m,[c,$]],[/(surface duo)/i],[m,[d,Ve],[c,$]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[m,[d,"Fairphone"],[c,x]],[/(u304aa)/i],[m,[d,"AT&T"],[c,x]],[/\bsie-(\w*)/i],[m,[d,"Siemens"],[c,x]],[/\b(rct\w+) b/i],[m,[d,"RCA"],[c,$]],[/\b(venue[\d ]{2,7}) b/i],[m,[d,"Dell"],[c,$]],[/\b(q(?:mv|ta)\w+) b/i],[m,[d,"Verizon"],[c,$]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[m,[d,"Barnes & Noble"],[c,$]],[/\b(tm\d{3}\w+) b/i],[m,[d,"NuVision"],[c,$]],[/\b(k88) b/i],[m,[d,"ZTE"],[c,$]],[/\b(nx\d{3}j) b/i],[m,[d,"ZTE"],[c,x]],[/\b(gen\d{3}) b.+49h/i],[m,[d,"Swiss"],[c,x]],[/\b(zur\d{3}) b/i],[m,[d,"Swiss"],[c,$]],[/\b((zeki)?tb.*\b) b/i],[m,[d,"Zeki"],[c,$]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],m,[c,$]],[/\b(ns-?\w{0,9}) b/i],[m,[d,"Insignia"],[c,$]],[/\b((nxa|next)-?\w{0,9}) b/i],[m,[d,"NextBook"],[c,$]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],m,[c,x]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],m,[c,x]],[/\b(ph-1) /i],[m,[d,"Essential"],[c,x]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[m,[d,"Envizen"],[c,$]],[/\b(trio[-\w\. ]+) b/i],[m,[d,"MachSpeed"],[c,$]],[/\btu_(1491) b/i],[m,[d,"Rotor"],[c,$]],[/(shield[\w ]+) b/i],[m,[d,"Nvidia"],[c,$]],[/(sprint) (\w+)/i],[d,m,[c,x]],[/(kin\.[onetw]{3})/i],[[m,/\./g," "],[d,Ve],[c,x]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[m,[d,Je],[c,$]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[m,[d,Je],[c,x]],[/smart-tv.+(samsung)/i],[d,[c,O]],[/hbbtv.+maple;(\d+)/i],[[m,/^/,"SmartTV"],[d,Oe],[c,O]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,Pe],[c,O]],[/(apple) ?tv/i],[d,[m,ee+" TV"],[c,O]],[/crkey/i],[[m,Ie+"cast"],[d,je],[c,O]],[/droid.+aft(\w+)( bui|\))/i],[m,[d,H],[c,O]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[m,[d,_t],[c,O]],[/(bravia[\w ]+)( bui|\))/i],[m,[d,dt],[c,O]],[/(mitv-\w{5}) bui/i],[m,[d,Ze],[c,O]],[/Hbbtv.*(technisat) (.*);/i],[d,m,[c,O]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,S],[m,S],[c,O]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[c,O]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,m,[c,q]],[/droid.+; (shield) bui/i],[m,[d,"Nvidia"],[c,q]],[/(playstation [345portablevi]+)/i],[m,[d,dt],[c,q]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[m,[d,Ve],[c,q]],[/((pebble))app/i],[d,m,[c,K]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[m,[d,ee],[c,K]],[/droid.+; (glass) \d/i],[m,[d,je],[c,K]],[/droid.+; (wt63?0{2,3})\)/i],[m,[d,Je],[c,K]],[/(quest( 2| pro)?)/i],[m,[d,de],[c,K]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[c,re]],[/(aeobc)\b/i],[m,[d,H],[c,re]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[m,[c,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[m,[c,$]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[c,$]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[c,x]],[/(android[-\w\. ]{0,9});.+buil/i],[m,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[I,[n,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[I,[n,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[n,I],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[I,n]],os:[[/microsoft (windows) (vista|xp)/i],[n,I],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[n,[I,V,be]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[I,V,be],[n,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[I,/_/g,"."],[n,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[n,Be],[I,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[I,n],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[n,I],[/\(bb(10);/i],[I,[n,Te]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[I,[n,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[I,[n,Le+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[I,[n,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[I,[n,"watchOS"]],[/crkey\/([\d\.]+)/i],[I,[n,Ie+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[n,ge],I],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[n,I],[/(sunos) ?([\w\.\d]*)/i],[[n,"Solaris"],I],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[n,I]]},Me=function(xe,Xe){if(typeof xe===p&&(Xe=xe,xe=t),!(this instanceof Me))return new Me(xe,Xe).getResult();var mt=typeof T!==y&&T.navigator?T.navigator:t,rt=xe||(mt&&mt.userAgent?mt.userAgent:""),Zt=mt&&mt.userAgentData?mt.userAgentData:t,It=Xe?function(Pt,tn){var fn={};for(var Sn in Pt)tn[Sn]&&tn[Sn].length%2==0?fn[Sn]=tn[Sn].concat(Pt[Sn]):fn[Sn]=Pt[Sn];return fn}(ze,Xe):ze,Ft=mt&&mt.userAgent==rt;return this.getBrowser=function(){var Pt,tn={};return tn[n]=t,tn[I]=t,W.call(tn,rt,It.browser),tn[_]=typeof(Pt=tn[I])===u?Pt.replace(/[^\d\.]/g,"").split(".")[0]:t,Ft&&mt&&mt.brave&&typeof mt.brave.isBrave==e&&(tn[n]="Brave"),tn},this.getCPU=function(){var Pt={};return Pt[k]=t,W.call(Pt,rt,It.cpu),Pt},this.getDevice=function(){var Pt={};return Pt[d]=t,Pt[m]=t,Pt[c]=t,W.call(Pt,rt,It.device),Ft&&!Pt[c]&&Zt&&Zt.mobile&&(Pt[c]=x),Ft&&Pt[m]=="Macintosh"&&mt&&typeof mt.standalone!==y&&mt.maxTouchPoints&&mt.maxTouchPoints>2&&(Pt[m]="iPad",Pt[c]=$),Pt},this.getEngine=function(){var Pt={};return Pt[n]=t,Pt[I]=t,W.call(Pt,rt,It.engine),Pt},this.getOS=function(){var Pt={};return Pt[n]=t,Pt[I]=t,W.call(Pt,rt,It.os),Ft&&!Pt[n]&&Zt&&Zt.platform!="Unknown"&&(Pt[n]=Zt.platform.replace(/chrome os/i,ge).replace(/macos/i,Be)),Pt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return rt},this.setUA=function(Pt){return rt=typeof Pt===u&&Pt.length>500?S(Pt,500):Pt,this},this.setUA(rt),this};Me.VERSION="1.0.37",Me.BROWSER=f([n,I,_]),Me.CPU=f([k]),Me.DEVICE=f([m,d,c,q,x,O,$,K,re]),Me.ENGINE=Me.OS=f([n,I]),typeof we!==y?(it.exports&&(we=it.exports=Me),we.UAParser=Me):M.amdO?(oe=(function(){return Me}).call(we,M,we,it))===t||(it.exports=oe):typeof T!==y&&(T.UAParser=Me);var De=typeof T!==y&&(T.jQuery||T.Zepto);if(De&&!De.ua){var Ae=new Me;De.ua=Ae.getResult(),De.ua.get=function(){return Ae.getUA()},De.ua.set=function(xe){Ae.setUA(xe);var Xe=Ae.getResult();for(var mt in Xe)De.ua[mt]=Xe[mt]}}})(typeof window=="object"?window:this)},7839:function(it,we,M){function oe(T){try{if(!M.g.localStorage)return!1}catch{return!1}var t=M.g.localStorage[T];return t!=null&&String(t).toLowerCase()==="true"}it.exports=function(T,t){if(oe("noDeprecation"))return T;var e=!1;return function(){if(!e){if(oe("throwDeprecation"))throw new Error(t);oe("traceDeprecation")?console.trace(t):console.warn(t),e=!0}return T.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(it){it.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(it){it.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(it){it.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(it){it.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(it){it.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(it){it.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},fr={};function xn(it){var we=fr[it];if(we!==void 0)return we.exports;var M=fr[it]={exports:{}};return Rr[it].call(M.exports,M,M.exports,xn),M.exports}xn.amdO={},xn.n=function(it){var we=it&&it.__esModule?function(){return it.default}:function(){return it};return xn.d(we,{a:we}),we},xn.d=function(it,we){for(var M in we)xn.o(we,M)&&!xn.o(it,M)&&Object.defineProperty(it,M,{enumerable:!0,get:we[M]})},xn.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),xn.o=function(it,we){return Object.prototype.hasOwnProperty.call(it,we)};var wr={};return function(){xn.d(wr,{default:function(){return p}}),xn(8416);var it,we=xn(1715),M=xn(8080),oe=xn(1737),T=xn(1139),t=function(){var u,_="application/dash+xml";function m(c,d,I){if(!c||!/^VIDEO$/i.test(c.nodeName))return null;if(c._dashjs_player)return c._dashjs_player;var k,q=c.id||c.name||"video element";if(!(d=d||[].slice.call(c.querySelectorAll("source")).filter(function(x){return x.type==_})[0])&&c.src)(d=document.createElement("source")).src=c.src;else if(!d&&!c.src)return null;return I=I||{},(k=(0,T.Z)(I).create()).initialize(c,d.src,c.autoplay),u||(u=k.getDebug().getLogger()),u.debug("Converted "+q+" to dash.js player and added content: "+d.src),c._dashjs_player=k,k}function n(c){return/^VIDEO$/i.test(c.nodeName)?c:n(c.parentNode)}return{create:m,createAll:function(c,d){var I=[];c=c||"[data-dashjs-player]";for(var k=(d=d||document).querySelectorAll(c),q=0;q<k.length;q++){var x=m(k[q],null);I.push(x)}for(var $=d.querySelectorAll('source[type="'+_+'"]'),O=0;O<$.length;O++){var K=m(n($[O]),null);I.push(K)}return I}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?t.createAll():it=window.setInterval(function(){window.dashjs&&(window.clearInterval(it),t.createAll())},500):window.addEventListener("load",function u(){window.removeEventListener("load",u),t.createAll()}));var e=t,y=xn(6398);dashjs.Protection=oe.default,dashjs.MetricsReporting=M.default,dashjs.MediaPlayerFactory=e,dashjs.Debug=y.Z,dashjs.supportsMediaSource=we.B;var p=dashjs}(),wr.default}()})})(To);var So=To.exports;const gu=fu(So),mu=du({__proto__:null,default:gu},[So]);export{mu as d};
