import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,e as a,o as d}from"./app-dX96qGh5.js";const c={};function o(r,e){return d(),s("div",null,e[0]||(e[0]=[a(`<h1 id="配置-docker0-网桥" tabindex="-1"><a class="header-anchor" href="#配置-docker0-网桥"><span>配置 docker0 网桥</span></a></h1><p>Docker 服务默认会创建一个 <code>docker0</code> 网桥（其上有一个 <code>docker0</code> 内部接口），它在内核层连通了其他的物理或虚拟网卡，这就将所有容器和本地主机都放到同一个物理网络。</p><p>Docker 默认指定了 <code>docker0</code> 接口 的 IP 地址和子网掩码，让主机和容器之间可以通过网桥相互通信，它还给出了 MTU（接口允许接收的最大传输单元），通常是 1500 Bytes，或宿主主机网络路由上支持的默认值。这些值都可以在服务启动的时候进行配置。</p><ul><li><code>--bip=CIDR</code> IP 地址加掩码格式，例如 192.168.1.5/24</li><li><code>--mtu=BYTES</code> 覆盖默认的 Docker mtu 配置</li></ul><p>也可以在配置文件中配置 DOCKER_OPTS，然后重启服务。</p><p>由于目前 Docker 网桥是 Linux 网桥，用户可以使用 <code>brctl show</code> 来查看网桥和端口连接信息。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">sudo</span> brctl show
bridge name     bridge <span class="token function">id</span>               STP enabled     interfaces
docker0         <span class="token number">8000</span>.3a1d7362b4ee       no              veth65f9
                                             vethdda6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>*注：<code>brctl</code> 命令在 Debian、Ubuntu 中可以使用 <code>sudo apt-get install bridge-utils</code> 来安装。</p><p>每次创建一个新容器的时候，Docker 从可用的地址段中选择一个空闲的 IP 地址分配给容器的 eth0 端口。使用本地主机上 <code>docker0</code> 接口的 IP 作为所有容器的默认网关。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">docker</span> run <span class="token parameter variable">-i</span> <span class="token parameter variable">-t</span> <span class="token parameter variable">--rm</span> base /bin/bash
$ <span class="token function">ip</span> addr show eth0
<span class="token number">24</span>: eth0: <span class="token operator">&lt;</span>BROADCAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1500</span> qdisc pfifo_fast state UP group default qlen <span class="token number">1000</span>
    link/ether <span class="token number">32</span>:6f:e0:35:57:91 brd ff:ff:ff:ff:ff:ff
    inet <span class="token number">172.17</span>.0.3/16 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::306f:e0ff:fe35:5791/64 scope <span class="token function">link</span>
       valid_lft forever preferred_lft forever
$ <span class="token function">ip</span> route
default via <span class="token number">172.17</span>.42.1 dev eth0
<span class="token number">172.17</span>.0.0/16 dev eth0  proto kernel  scope <span class="token function">link</span>  src <span class="token number">172.17</span>.0.3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10)]))}const l=n(c,[["render",o],["__file","docker0.html.vue"]]),p=JSON.parse('{"path":"/index/Docker/advanced_network/docker0.html","title":"配置 docker0 网桥","lang":"zh-CN","frontmatter":{},"headers":[],"git":{"createdTime":1731129855000,"updatedTime":1731129855000,"contributors":[{"name":"dkyg666","email":"43946866+dkyg666@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":1.38,"words":414},"filePathRelative":"index/Docker/advanced_network/docker0.md","localizedDate":"2024年11月9日","excerpt":"\\n<p>Docker 服务默认会创建一个 <code>docker0</code> 网桥（其上有一个 <code>docker0</code> 内部接口），它在内核层连通了其他的物理或虚拟网卡，这就将所有容器和本地主机都放到同一个物理网络。</p>\\n<p>Docker 默认指定了 <code>docker0</code> 接口 的 IP 地址和子网掩码，让主机和容器之间可以通过网桥相互通信，它还给出了 MTU（接口允许接收的最大传输单元），通常是 1500 Bytes，或宿主主机网络路由上支持的默认值。这些值都可以在服务启动的时候进行配置。</p>\\n<ul>\\n<li><code>--bip=CIDR</code> IP 地址加掩码格式，例如 192.168.1.5/24</li>\\n<li><code>--mtu=BYTES</code> 覆盖默认的 Docker mtu 配置</li>\\n</ul>"}');export{l as comp,p as data};
